(function(Gn,$e){typeof exports=="object"&&typeof module=="object"?module.exports=$e():typeof define=="function"&&define.amd?define([],$e):typeof exports=="object"?exports.AOS=$e():Gn.AOS=$e()})(this,function(){return function(Gn){function $e(Be){if(_e[Be])return _e[Be].exports;var C=_e[Be]={exports:{},id:Be,loaded:!1};return Gn[Be].call(C.exports,C,C.exports,$e),C.loaded=!0,C.exports}var _e={};return $e.m=Gn,$e.c=_e,$e.p="dist/",$e(0)}([function(Gn,$e,_e){"use strict";function Be(Ft){return Ft&&Ft.__esModule?Ft:{default:Ft}}var C=Object.assign||function(Ft){for(var D=1;D<arguments.length;D++){var W=arguments[D];for(var K in W)Object.prototype.hasOwnProperty.call(W,K)&&(Ft[K]=W[K])}return Ft},q=_e(1),it=(Be(q),_e(6)),$=Be(it),pt=_e(7),R=Be(pt),F=_e(8),H=Be(F),E=_e(9),_=Be(E),O=_e(10),x=Be(O),N=_e(11),V=Be(N),Y=_e(14),st=Be(Y),ct=[],Tt=!1,Et={offset:120,delay:0,easing:"ease",duration:400,disable:!1,once:!1,startEvent:"DOMContentLoaded",throttleDelay:99,debounceDelay:50,disableMutationObserver:!1},vt=function(){var Ft=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(Ft&&(Tt=!0),Tt)return ct=(0,V.default)(ct,Et),(0,x.default)(ct,Et.once),ct},ft=function(){ct=(0,st.default)(),vt()},wt=function(){ct.forEach(function(Ft,D){Ft.node.removeAttribute("data-aos"),Ft.node.removeAttribute("data-aos-easing"),Ft.node.removeAttribute("data-aos-duration"),Ft.node.removeAttribute("data-aos-delay")})},Ot=function(Ft){return Ft===!0||Ft==="mobile"&&_.default.mobile()||Ft==="phone"&&_.default.phone()||Ft==="tablet"&&_.default.tablet()||typeof Ft=="function"&&Ft()===!0},te=function(Ft){Et=C(Et,Ft),ct=(0,st.default)();var D=document.all&&!window.atob;return Ot(Et.disable)||D?wt():(Et.disableMutationObserver||H.default.isSupported()||(console.info(`
      aos: MutationObserver is not supported on this browser,
      code mutations observing has been disabled.
      You may have to call "refreshHard()" by yourself.
    `),Et.disableMutationObserver=!0),document.querySelector("body").setAttribute("data-aos-easing",Et.easing),document.querySelector("body").setAttribute("data-aos-duration",Et.duration),document.querySelector("body").setAttribute("data-aos-delay",Et.delay),Et.startEvent==="DOMContentLoaded"&&["complete","interactive"].indexOf(document.readyState)>-1?vt(!0):Et.startEvent==="load"?window.addEventListener(Et.startEvent,function(){vt(!0)}):document.addEventListener(Et.startEvent,function(){vt(!0)}),window.addEventListener("resize",(0,R.default)(vt,Et.debounceDelay,!0)),window.addEventListener("orientationchange",(0,R.default)(vt,Et.debounceDelay,!0)),window.addEventListener("scroll",(0,$.default)(function(){(0,x.default)(ct,Et.once)},Et.throttleDelay)),Et.disableMutationObserver||H.default.ready("[data-aos]",ft),ct)};Gn.exports={init:te,refresh:vt,refreshHard:ft}},function(Gn,$e){},,,,,function(Gn,$e){(function(_e){"use strict";function Be(Ot,te,Ft){function D(Xt){var pe=Pt,me=ne;return Pt=ne=void 0,Zt=Xt,Ut=Ot.apply(me,pe)}function W(Xt){return Zt=Xt,Ht=setTimeout(ht,te),le?D(Xt):Ut}function K(Xt){var pe=Xt-ee,me=Xt-Zt,kt=te-pe;return ce?ft(kt,_t-me):kt}function ot(Xt){var pe=Xt-ee,me=Xt-Zt;return ee===void 0||pe>=te||pe<0||ce&&me>=_t}function ht(){var Xt=wt();return ot(Xt)?G(Xt):void(Ht=setTimeout(ht,K(Xt)))}function G(Xt){return Ht=void 0,jt&&Pt?D(Xt):(Pt=ne=void 0,Ut)}function xt(){Ht!==void 0&&clearTimeout(Ht),Zt=0,Pt=ee=ne=Ht=void 0}function I(){return Ht===void 0?Ut:G(wt())}function Nt(){var Xt=wt(),pe=ot(Xt);if(Pt=arguments,ne=this,ee=Xt,pe){if(Ht===void 0)return W(ee);if(ce)return Ht=setTimeout(ht,te),D(ee)}return Ht===void 0&&(Ht=setTimeout(ht,te)),Ut}var Pt,ne,_t,Ut,Ht,ee,Zt=0,le=!1,ce=!1,jt=!0;if(typeof Ot!="function")throw new TypeError(F);return te=pt(te)||0,q(Ft)&&(le=!!Ft.leading,ce="maxWait"in Ft,_t=ce?vt(pt(Ft.maxWait)||0,te):_t,jt="trailing"in Ft?!!Ft.trailing:jt),Nt.cancel=xt,Nt.flush=I,Nt}function C(Ot,te,Ft){var D=!0,W=!0;if(typeof Ot!="function")throw new TypeError(F);return q(Ft)&&(D="leading"in Ft?!!Ft.leading:D,W="trailing"in Ft?!!Ft.trailing:W),Be(Ot,te,{leading:D,maxWait:te,trailing:W})}function q(Ot){var te=typeof Ot>"u"?"undefined":R(Ot);return!!Ot&&(te=="object"||te=="function")}function it(Ot){return!!Ot&&(typeof Ot>"u"?"undefined":R(Ot))=="object"}function $(Ot){return(typeof Ot>"u"?"undefined":R(Ot))=="symbol"||it(Ot)&&Et.call(Ot)==E}function pt(Ot){if(typeof Ot=="number")return Ot;if($(Ot))return H;if(q(Ot)){var te=typeof Ot.valueOf=="function"?Ot.valueOf():Ot;Ot=q(te)?te+"":te}if(typeof Ot!="string")return Ot===0?Ot:+Ot;Ot=Ot.replace(_,"");var Ft=x.test(Ot);return Ft||N.test(Ot)?V(Ot.slice(2),Ft?2:8):O.test(Ot)?H:+Ot}var R=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ot){return typeof Ot}:function(Ot){return Ot&&typeof Symbol=="function"&&Ot.constructor===Symbol&&Ot!==Symbol.prototype?"symbol":typeof Ot},F="Expected a function",H=NaN,E="[object Symbol]",_=/^\s+|\s+$/g,O=/^[-+]0x[0-9a-f]+$/i,x=/^0b[01]+$/i,N=/^0o[0-7]+$/i,V=parseInt,Y=(typeof _e>"u"?"undefined":R(_e))=="object"&&_e&&_e.Object===Object&&_e,st=(typeof self>"u"?"undefined":R(self))=="object"&&self&&self.Object===Object&&self,ct=Y||st||Function("return this")(),Tt=Object.prototype,Et=Tt.toString,vt=Math.max,ft=Math.min,wt=function(){return ct.Date.now()};Gn.exports=C}).call($e,function(){return this}())},function(Gn,$e){(function(_e){"use strict";function Be(wt,Ot,te){function Ft(jt){var Xt=Nt,pe=Pt;return Nt=Pt=void 0,ee=jt,_t=wt.apply(pe,Xt)}function D(jt){return ee=jt,Ut=setTimeout(ot,Ot),Zt?Ft(jt):_t}function W(jt){var Xt=jt-Ht,pe=jt-ee,me=Ot-Xt;return le?vt(me,ne-pe):me}function K(jt){var Xt=jt-Ht,pe=jt-ee;return Ht===void 0||Xt>=Ot||Xt<0||le&&pe>=ne}function ot(){var jt=ft();return K(jt)?ht(jt):void(Ut=setTimeout(ot,W(jt)))}function ht(jt){return Ut=void 0,ce&&Nt?Ft(jt):(Nt=Pt=void 0,_t)}function G(){Ut!==void 0&&clearTimeout(Ut),ee=0,Nt=Ht=Pt=Ut=void 0}function xt(){return Ut===void 0?_t:ht(ft())}function I(){var jt=ft(),Xt=K(jt);if(Nt=arguments,Pt=this,Ht=jt,Xt){if(Ut===void 0)return D(Ht);if(le)return Ut=setTimeout(ot,Ot),Ft(Ht)}return Ut===void 0&&(Ut=setTimeout(ot,Ot)),_t}var Nt,Pt,ne,_t,Ut,Ht,ee=0,Zt=!1,le=!1,ce=!0;if(typeof wt!="function")throw new TypeError(R);return Ot=$(Ot)||0,C(te)&&(Zt=!!te.leading,le="maxWait"in te,ne=le?Et($(te.maxWait)||0,Ot):ne,ce="trailing"in te?!!te.trailing:ce),I.cancel=G,I.flush=xt,I}function C(wt){var Ot=typeof wt>"u"?"undefined":pt(wt);return!!wt&&(Ot=="object"||Ot=="function")}function q(wt){return!!wt&&(typeof wt>"u"?"undefined":pt(wt))=="object"}function it(wt){return(typeof wt>"u"?"undefined":pt(wt))=="symbol"||q(wt)&&Tt.call(wt)==H}function $(wt){if(typeof wt=="number")return wt;if(it(wt))return F;if(C(wt)){var Ot=typeof wt.valueOf=="function"?wt.valueOf():wt;wt=C(Ot)?Ot+"":Ot}if(typeof wt!="string")return wt===0?wt:+wt;wt=wt.replace(E,"");var te=O.test(wt);return te||x.test(wt)?N(wt.slice(2),te?2:8):_.test(wt)?F:+wt}var pt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(wt){return typeof wt}:function(wt){return wt&&typeof Symbol=="function"&&wt.constructor===Symbol&&wt!==Symbol.prototype?"symbol":typeof wt},R="Expected a function",F=NaN,H="[object Symbol]",E=/^\s+|\s+$/g,_=/^[-+]0x[0-9a-f]+$/i,O=/^0b[01]+$/i,x=/^0o[0-7]+$/i,N=parseInt,V=(typeof _e>"u"?"undefined":pt(_e))=="object"&&_e&&_e.Object===Object&&_e,Y=(typeof self>"u"?"undefined":pt(self))=="object"&&self&&self.Object===Object&&self,st=V||Y||Function("return this")(),ct=Object.prototype,Tt=ct.toString,Et=Math.max,vt=Math.min,ft=function(){return st.Date.now()};Gn.exports=Be}).call($e,function(){return this}())},function(Gn,$e){"use strict";function _e(pt){var R=void 0,F=void 0,H=void 0;for(R=0;R<pt.length;R+=1)if(F=pt[R],F.dataset&&F.dataset.aos||(H=F.children&&_e(F.children)))return!0;return!1}function Be(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}function C(){return!!Be()}function q(pt,R){var F=window.document,H=Be(),E=new H(it);$=R,E.observe(F.documentElement,{childList:!0,subtree:!0,removedNodes:!0})}function it(pt){pt&&pt.forEach(function(R){var F=Array.prototype.slice.call(R.addedNodes),H=Array.prototype.slice.call(R.removedNodes),E=F.concat(H);if(_e(E))return $()})}Object.defineProperty($e,"__esModule",{value:!0});var $=function(){};$e.default={isSupported:C,ready:q}},function(Gn,$e){"use strict";function _e(F,H){if(!(F instanceof H))throw new TypeError("Cannot call a class as a function")}function Be(){return navigator.userAgent||navigator.vendor||window.opera||""}Object.defineProperty($e,"__esModule",{value:!0});var C=function(){function F(H,E){for(var _=0;_<E.length;_++){var O=E[_];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(H,O.key,O)}}return function(H,E,_){return E&&F(H.prototype,E),_&&F(H,_),H}}(),q=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,it=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,$=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i,pt=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,R=function(){function F(){_e(this,F)}return C(F,[{key:"phone",value:function(){var H=Be();return!(!q.test(H)&&!it.test(H.substr(0,4)))}},{key:"mobile",value:function(){var H=Be();return!(!$.test(H)&&!pt.test(H.substr(0,4)))}},{key:"tablet",value:function(){return this.mobile()&&!this.phone()}}]),F}();$e.default=new R},function(Gn,$e){"use strict";Object.defineProperty($e,"__esModule",{value:!0});var _e=function(C,q,it){var $=C.node.getAttribute("data-aos-once");q>C.position?C.node.classList.add("aos-animate"):typeof $<"u"&&($==="false"||!it&&$!=="true")&&C.node.classList.remove("aos-animate")},Be=function(C,q){var it=window.pageYOffset,$=window.innerHeight;C.forEach(function(pt,R){_e(pt,$+it,q)})};$e.default=Be},function(Gn,$e,_e){"use strict";function Be($){return $&&$.__esModule?$:{default:$}}Object.defineProperty($e,"__esModule",{value:!0});var C=_e(12),q=Be(C),it=function($,pt){return $.forEach(function(R,F){R.node.classList.add("aos-init"),R.position=(0,q.default)(R.node,pt.offset)}),$};$e.default=it},function(Gn,$e,_e){"use strict";function Be($){return $&&$.__esModule?$:{default:$}}Object.defineProperty($e,"__esModule",{value:!0});var C=_e(13),q=Be(C),it=function($,pt){var R=0,F=0,H=window.innerHeight,E={offset:$.getAttribute("data-aos-offset"),anchor:$.getAttribute("data-aos-anchor"),anchorPlacement:$.getAttribute("data-aos-anchor-placement")};switch(E.offset&&!isNaN(E.offset)&&(F=parseInt(E.offset)),E.anchor&&document.querySelectorAll(E.anchor)&&($=document.querySelectorAll(E.anchor)[0]),R=(0,q.default)($).top,E.anchorPlacement){case"top-bottom":break;case"center-bottom":R+=$.offsetHeight/2;break;case"bottom-bottom":R+=$.offsetHeight;break;case"top-center":R+=H/2;break;case"bottom-center":R+=H/2+$.offsetHeight;break;case"center-center":R+=H/2+$.offsetHeight/2;break;case"top-top":R+=H;break;case"bottom-top":R+=$.offsetHeight+H;break;case"center-top":R+=$.offsetHeight/2+H}return E.anchorPlacement||E.offset||isNaN(pt)||(F=pt),R+F};$e.default=it},function(Gn,$e){"use strict";Object.defineProperty($e,"__esModule",{value:!0});var _e=function(Be){for(var C=0,q=0;Be&&!isNaN(Be.offsetLeft)&&!isNaN(Be.offsetTop);)C+=Be.offsetLeft-(Be.tagName!="BODY"?Be.scrollLeft:0),q+=Be.offsetTop-(Be.tagName!="BODY"?Be.scrollTop:0),Be=Be.offsetParent;return{top:q,left:C}};$e.default=_e},function(Gn,$e){"use strict";Object.defineProperty($e,"__esModule",{value:!0});var _e=function(Be){return Be=Be||document.querySelectorAll("[data-aos]"),Array.prototype.map.call(Be,function(C){return{node:C}})};$e.default=_e}])});/*! grapesjs - 0.22.12 */(function(Gn,$e){typeof exports=="object"&&typeof module=="object"?module.exports=$e():typeof define=="function"&&define.amd?define([],$e):typeof exports=="object"?exports.grapesjs=$e():Gn.grapesjs=$e()})(typeof globalThis<"u"?globalThis:typeof window<"u"?window:this,()=>(()=>{var Gn={4729:(C,q,it)=>{var $,pt,R;pt=[it(5706),it(4193)],(R=typeof($=function(F,H){var E=Array.prototype.slice;function _(D,W,K){return K.length<=4?D.call(W,K[0],K[1],K[2],K[3]):D.apply(W,K)}function O(D,W){return E.call(D,W)}function x(D,W){return D!=null&&(F.isArray(W)||(W=O(arguments,1)),F.all(W,function(K){return K in D}))}var N=function(){var D=!1,W=-1;function K(){W++,D=!0,F.defer(function(){D=!1})}return function(){return D||K(),W}}();function V(){this.registeredObjects=[],this.cidIndexes=[]}function Y(D,W,K,ot){for(var ht,G=0,xt=W.length;G<xt;G++)if(ht=W[G]){if(D==="on"){if(!ot.objectRegistry.register(ht))continue}else if(!ot.objectRegistry.unregister(ht))continue;F.isFunction(ht[D])&&ht[D]("all",K,ot)}}function st(D,W){var K=W.type,ot=W.undoTypes,ht=!ot[K]||ot[K][D];F.isFunction(ht)&&ht(W.object,W.before,W.after,W.options)}function ct(D,W,K,ot,ht){if(!(K.isCurrentlyUndoRedoing||D==="undo"&&K.pointer===-1||D==="redo"&&K.pointer===K.length-1)){K.isCurrentlyUndoRedoing=!0;var G,xt,I=D==="undo";for(ht?xt=I&&K.pointer===K.length-1||!I&&K.pointer===-1?F.clone(K.models):E.apply(K.models,I?[0,K.pointer]:[K.pointer,K.length-1]):(G=K.at(I?K.pointer:K.pointer+1),xt=ot?K.where({magicFusionIndex:G.get("magicFusionIndex")}):[G]),K.pointer+=(I?-1:1)*xt.length;G=I?xt.pop():xt.shift();)G[D]();K.isCurrentlyUndoRedoing=!1,W.trigger(D,W)}}function Tt(D,W){var K=D.condition,ot=typeof K;return ot==="function"?!!_(K,D,W):ot!=="boolean"||K}function Et(D,W,K,ot){if(D.track&&!D.isCurrentlyUndoRedoing&&W in ot&&Tt(ot[W],K)){var ht=_(ot[W].on,ot[W],K);if(x(ht,"object","before","after")){if(ht.type=W,ht.magicFusionIndex=N(),ht.undoTypes=ot,D.pointer<D.length-1)for(var G=D.length-D.pointer-1;G--;)D.pop();D.pointer=D.length,D.add(ht),D.length>D.maximumStackLength&&(D.shift(),D.pointer--)}}}V.prototype={isRegistered:function(D){return D&&D.cid?this.registeredObjects[D.cid]:F.contains(this.registeredObjects,D)},register:function(D){return!this.isRegistered(D)&&(D&&D.cid?(this.registeredObjects[D.cid]=D,this.cidIndexes.push(D.cid)):this.registeredObjects.push(D),!0)},unregister:function(D){if(this.isRegistered(D)){if(D&&D.cid)delete this.registeredObjects[D.cid],this.cidIndexes.splice(F.indexOf(this.cidIndexes,D.cid),1);else{var W=F.indexOf(this.registeredObjects,D);this.registeredObjects.splice(W,1)}return!0}return!1},get:function(){return F.map(this.cidIndexes,function(D){return this.registeredObjects[D]},this).concat(this.registeredObjects)}};var vt={add:{undo:function(D,W,K,ot){D.remove(K,ot)},redo:function(D,W,K,ot){ot.index&&(ot.at=ot.index),D.add(K,ot)},on:function(D,W,K){return{object:W,before:void 0,after:D,options:F.clone(K)}}},remove:{undo:function(D,W,K,ot){"index"in ot&&(ot.at=ot.index),D.add(W,ot)},redo:function(D,W,K,ot){D.remove(W,ot)},on:function(D,W,K){return{object:W,before:D,after:void 0,options:F.clone(K)}}},change:{undo:function(D,W,K,ot){F.isEmpty(W)?F.each(F.keys(K),D.unset,D):(D.set(W),ot&&ot.unsetData&&ot.unsetData.before&&ot.unsetData.before.length&&F.each(ot.unsetData.before,D.unset,D))},redo:function(D,W,K,ot){F.isEmpty(K)?F.each(F.keys(W),D.unset,D):(D.set(K),ot&&ot.unsetData&&ot.unsetData.after&&ot.unsetData.after.length&&F.each(ot.unsetData.after,D.unset,D))},on:function(D,W){var K=D.changedAttributes(),ot=F.keys(K),ht=F.pick(D.previousAttributes(),ot),G=F.keys(ht),xt=(W||(W={})).unsetData={after:[],before:[]};return ot.length!=G.length&&(ot.length>G.length?F.each(ot,function(I){I in ht||xt.before.push(I)},this):F.each(G,function(I){I in K||xt.after.push(I)})),{object:D,before:ht,after:K,options:F.clone(W)}}},reset:{undo:function(D,W,K){D.reset(W)},redo:function(D,W,K){D.reset(K)},on:function(D,W){return{object:D,before:W.previousModels,after:F.clone(D.models)}}}};function ft(){}function wt(D,W,K,ot){if(typeof W=="object")return F.each(W,function(ht,G){D===2?wt(D,ht,K,ot):wt(D,G,ht,K)});switch(D){case 0:x(K,"undo","redo","on")&&F.all(F.pick(K,"undo","redo","on"),F.isFunction)&&(ot[W]=K);break;case 1:ot[W]&&F.isObject(K)&&(ot[W]=F.extend({},ot[W],K));break;case 2:delete ot[W]}return this}ft.prototype=vt;var Ot=H.Model.extend({defaults:{type:null,object:null,before:null,after:null,magicFusionIndex:null},undo:function(D){st("undo",this.attributes)},redo:function(D){st("redo",this.attributes)}}),te=H.Collection.extend({model:Ot,pointer:-1,track:!1,isCurrentlyUndoRedoing:!1,maximumStackLength:1/0,setMaxLength:function(D){this.maximumStackLength=D}}),Ft=H.Model.extend({defaults:{maximumStackLength:1/0,track:!1},initialize:function(D){this.stack=new te,this.objectRegistry=new V,this.undoTypes=new ft,this.stack.setMaxLength(this.get("maximumStackLength")),this.on("change:maximumStackLength",function(W,K){this.stack.setMaxLength(K)},this),D&&D.track&&this.startTracking(),D&&D.register&&(F.isArray(D.register)||F.isArguments(D.register)?_(this.register,this,D.register):this.register(D.register))},startTracking:function(){this.set("track",!0),this.stack.track=!0},stopTracking:function(){this.set("track",!1),this.stack.track=!1},isTracking:function(){return this.get("track")},_addToStack:function(D){Et(this.stack,D,O(arguments,1),this.undoTypes)},register:function(){Y("on",arguments,this._addToStack,this)},unregister:function(){Y("off",arguments,this._addToStack,this)},unregisterAll:function(){_(this.unregister,this,this.objectRegistry.get())},undo:function(D){ct("undo",this,this.stack,D)},undoAll:function(){ct("undo",this,this.stack,!1,!0)},redo:function(D){ct("redo",this,this.stack,D)},redoAll:function(){ct("redo",this,this.stack,!1,!0)},isAvailable:function(D){var W=this.stack,K=W.length;switch(D){case"undo":return K>0&&W.pointer>-1;case"redo":return K>0&&W.pointer<K-1;default:return!1}},merge:function(D){for(var W,K=F.isArray(D)?D:O(arguments);W=K.pop();)W instanceof Ft&&W.stack instanceof te&&(W.stack=this.stack)},addUndoType:function(D,W){wt(0,D,W,this.undoTypes)},changeUndoType:function(D,W){wt(1,D,W,this.undoTypes)},removeUndoType:function(D){wt(2,D,void 0,this.undoTypes)},clear:function(){this.stack.reset(),this.stack.pointer=-1}});return F.extend(Ft,{defaults:function(D){F.extend(Ft.prototype.defaults,D)},addUndoType:function(D,W){wt(0,D,W,vt)},changeUndoType:function(D,W){wt(1,D,W,vt)},removeUndoType:function(D){wt(2,D,void 0,vt)}}),H.UndoManager=Ft})=="function"?$.apply(q,pt):$)===void 0||(C.exports=R)},4193:(C,q,it)=>{var $,pt;(function(){var R=typeof self=="object"&&self.self===self&&self||typeof it.g=="object"&&it.g.global===it.g&&it.g;$=[it(5706),it(7774),q],pt=function(F,H,E){R.Backbone=function(_,O,x,N){var V=_.Backbone,Y=Array.prototype.slice;O.VERSION="1.4.1",O.$=N,O.noConflict=function(){return _.Backbone=V,this},O.emulateHTTP=!1,O.emulateJSON=!1;var st,ct=O.Events={},Tt=/\s+/,Et=function(S,A,J,lt,Vt){var qt,Qt=0;if(J&&typeof J=="object")for(lt!==void 0&&("context"in Vt)&&Vt.context===void 0&&(Vt.context=lt),qt=x.keys(J);Qt<qt.length;Qt++)A=Et(S,A,qt[Qt],J[qt[Qt]],Vt);else if(J&&Tt.test(J))for(qt=J.split(Tt);Qt<qt.length;Qt++)A=S(A,qt[Qt],lt,Vt);else A=S(A,J,lt,Vt);return A};ct.on=function(S,A,J){return this._events=Et(vt,this._events||{},S,A,{context:J,ctx:this,listening:st}),st&&((this._listeners||(this._listeners={}))[st.id]=st,st.interop=!1),this},ct.listenTo=function(S,A,J){if(!S)return this;var lt=S._listenId||(S._listenId=x.uniqueId("l")),Vt=this._listeningTo||(this._listeningTo={}),qt=st=Vt[lt];qt||(this._listenId||(this._listenId=x.uniqueId("l")),qt=st=Vt[lt]=new D(this,S));var Qt=ft(S,A,J,this);if(st=void 0,Qt)throw Qt;return qt.interop&&qt.on(A,J),this};var vt=function(S,A,J,lt){if(J){var Vt=S[A]||(S[A]=[]),qt=lt.context,Qt=lt.ctx,Ie=lt.listening;Ie&&Ie.count++,Vt.push({callback:J,context:qt,ctx:qt||Qt,listening:Ie})}return S},ft=function(S,A,J,lt){try{S.on(A,J,lt)}catch(Vt){return Vt}};ct.off=function(S,A,J){return this._events?(this._events=Et(wt,this._events,S,A,{context:J,listeners:this._listeners}),this):this},ct.stopListening=function(S,A,J){var lt=this._listeningTo;if(!lt)return this;for(var Vt=S?[S._listenId]:x.keys(lt),qt=0;qt<Vt.length;qt++){var Qt=lt[Vt[qt]];if(!Qt)break;Qt.obj.off(A,J,this),Qt.interop&&Qt.off(A,J)}return x.isEmpty(lt)&&(this._listeningTo=void 0),this};var wt=function(S,A,J,lt){if(S){var Vt,qt=lt.context,Qt=lt.listeners,Ie=0;if(A||qt||J){for(Vt=A?[A]:x.keys(S);Ie<Vt.length;Ie++){var We=S[A=Vt[Ie]];if(!We)break;for(var Ue=[],en=0;en<We.length;en++){var se=We[en];if(J&&J!==se.callback&&J!==se.callback._callback||qt&&qt!==se.context)Ue.push(se);else{var vn=se.listening;vn&&vn.off(A,J)}}Ue.length?S[A]=Ue:delete S[A]}return S}for(Vt=x.keys(Qt);Ie<Vt.length;Ie++)Qt[Vt[Ie]].cleanup()}};ct.once=function(S,A,J){var lt=Et(Ot,{},S,A,this.off.bind(this));return typeof S=="string"&&J==null&&(A=void 0),this.on(lt,A,J)},ct.listenToOnce=function(S,A,J){var lt=Et(Ot,{},A,J,this.stopListening.bind(this,S));return this.listenTo(S,lt)};var Ot=function(S,A,J,lt){if(J){var Vt=S[A]=x.once(function(){lt(A,Vt),J.apply(this,arguments)});Vt._callback=J}return S};ct.trigger=function(S){if(!this._events)return this;for(var A=Math.max(0,arguments.length-1),J=Array(A),lt=0;lt<A;lt++)J[lt]=arguments[lt+1];return Et(te,this._events,S,void 0,J),this};var te=function(S,A,J,lt){if(S){var Vt=S[A],qt=S.all;Vt&&qt&&(qt=qt.slice()),Vt&&Ft(Vt,lt),qt&&Ft(qt,[A].concat(lt))}return S},Ft=function(S,A){var J,lt=-1,Vt=S.length,qt=A[0],Qt=A[1],Ie=A[2];switch(A.length){case 0:for(;++lt<Vt;)(J=S[lt]).callback.call(J.ctx);return;case 1:for(;++lt<Vt;)(J=S[lt]).callback.call(J.ctx,qt);return;case 2:for(;++lt<Vt;)(J=S[lt]).callback.call(J.ctx,qt,Qt);return;case 3:for(;++lt<Vt;)(J=S[lt]).callback.call(J.ctx,qt,Qt,Ie);return;default:for(;++lt<Vt;)(J=S[lt]).callback.apply(J.ctx,A);return}},D=function(S,A){this.id=S._listenId,this.listener=S,this.obj=A,this.interop=!0,this.count=0,this._events=void 0};D.prototype.on=ct.on,D.prototype.off=function(S,A){var J;this.interop?(this._events=Et(wt,this._events,S,A,{context:void 0,listeners:void 0}),J=!this._events):(this.count--,J=this.count===0),J&&this.cleanup()},D.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},ct.bind=ct.on,ct.unbind=ct.off,x.extend(O,ct);var W=O.Model=function(S,A){var J=S||{};A||(A={}),this.preinitialize.apply(this,arguments),this.cid=x.uniqueId(this.cidPrefix),this.attributes={},A.collection&&(this.collection=A.collection),A.parse&&(J=this.parse(J,A)||{});var lt=x.result(this,"defaults");J=x.defaults(x.extend({},lt,J),lt),this.set(J,A),this.changed={},this.initialize.apply(this,arguments)};x.extend(W.prototype,ct,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(S){return x.clone(this.attributes)},sync:function(){return O.sync.apply(this,arguments)},get:function(S){return this.attributes[S]},escape:function(S){return x.escape(this.get(S))},has:function(S){return this.get(S)!=null},matches:function(S){return!!x.iteratee(S,this)(this.attributes)},set:function(S,A,J){if(S==null)return this;var lt;if(typeof S=="object"?(lt=S,J=A):(lt={})[S]=A,J||(J={}),!this._validate(lt,J))return!1;var Vt=J.unset,qt=J.silent,Qt=[],Ie=this._changing;this._changing=!0,Ie||(this._previousAttributes=x.clone(this.attributes),this.changed={});var We=this.attributes,Ue=this.changed,en=this._previousAttributes;for(var se in lt)A=lt[se],x.isEqual(We[se],A)||Qt.push(se),x.isEqual(en[se],A)?delete Ue[se]:Ue[se]=A,Vt?delete We[se]:We[se]=A;if(this.idAttribute in lt){var vn=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,vn,J)}if(!qt){Qt.length&&(this._pending=J);for(var U=0;U<Qt.length;U++)this.trigger("change:"+Qt[U],this,We[Qt[U]],J)}if(Ie)return this;if(!qt)for(;this._pending;)J=this._pending,this._pending=!1,this.trigger("change",this,J);return this._pending=!1,this._changing=!1,this},unset:function(S,A){return this.set(S,void 0,x.extend({},A,{unset:!0}))},clear:function(S){var A={};for(var J in this.attributes)A[J]=void 0;return this.set(A,x.extend({},S,{unset:!0}))},hasChanged:function(S){return S==null?!x.isEmpty(this.changed):x.has(this.changed,S)},changedAttributes:function(S){if(!S)return!!this.hasChanged()&&x.clone(this.changed);var A,J=this._changing?this._previousAttributes:this.attributes,lt={};for(var Vt in S){var qt=S[Vt];x.isEqual(J[Vt],qt)||(lt[Vt]=qt,A=!0)}return!!A&&lt},previous:function(S){return S!=null&&this._previousAttributes?this._previousAttributes[S]:null},previousAttributes:function(){return x.clone(this._previousAttributes)},fetch:function(S){S=x.extend({parse:!0},S);var A=this,J=S.success;return S.success=function(lt){var Vt=S.parse?A.parse(lt,S):lt;if(!A.set(Vt,S))return!1;J&&J.call(S.context,A,lt,S),A.trigger("sync",A,lt,S)},bt(this,S),this.sync("read",this,S)},save:function(S,A,J){var lt;S==null||typeof S=="object"?(lt=S,J=A):(lt={})[S]=A;var Vt=(J=x.extend({validate:!0,parse:!0},J)).wait;if(lt&&!Vt){if(!this.set(lt,J))return!1}else if(!this._validate(lt,J))return!1;var qt=this,Qt=J.success,Ie=this.attributes;J.success=function(en){qt.attributes=Ie;var se=J.parse?qt.parse(en,J):en;if(Vt&&(se=x.extend({},lt,se)),se&&!qt.set(se,J))return!1;Qt&&Qt.call(J.context,qt,en,J),qt.trigger("sync",qt,en,J)},bt(this,J),lt&&Vt&&(this.attributes=x.extend({},Ie,lt));var We=this.isNew()?"create":J.patch?"patch":"update";We!=="patch"||J.attrs||(J.attrs=lt);var Ue=this.sync(We,this,J);return this.attributes=Ie,Ue},destroy:function(S){S=S?x.clone(S):{};var A=this,J=S.success,lt=S.wait,Vt=function(){A.stopListening(),A.trigger("destroy",A,A.collection,S)};S.success=function(Qt){lt&&Vt(),J&&J.call(S.context,A,Qt,S),A.isNew()||A.trigger("sync",A,Qt,S)};var qt=!1;return this.isNew()?x.defer(S.success):(bt(this,S),qt=this.sync("delete",this,S)),lt||Vt(),qt},url:function(){var S=x.result(this,"urlRoot")||x.result(this.collection,"url")||cn();if(this.isNew())return S;var A=this.get(this.idAttribute);return S.replace(/[^\/]$/,"$&/")+encodeURIComponent(A)},parse:function(S,A){return S},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(S){return this._validate({},x.extend({},S,{validate:!0}))},_validate:function(S,A){if(!A.validate||!this.validate)return!0;S=x.extend({},this.attributes,S);var J=this.validationError=this.validate(S,A)||null;return!J||(this.trigger("invalid",this,J,x.extend(A,{validationError:J})),!1)}});var K=O.Collection=function(S,A){A||(A={}),this.preinitialize.apply(this,arguments),A.model&&(this.model=A.model),A.comparator!==void 0&&(this.comparator=A.comparator),this._reset(),this.initialize.apply(this,arguments),S&&this.reset(S,x.extend({silent:!0},A))},ot={add:!0,remove:!0,merge:!0},ht={add:!0,remove:!1},G=function(S,A,J){J=Math.min(Math.max(J,0),S.length);var lt,Vt=Array(S.length-J),qt=A.length;for(lt=0;lt<Vt.length;lt++)Vt[lt]=S[lt+J];for(lt=0;lt<qt;lt++)S[lt+J]=A[lt];for(lt=0;lt<Vt.length;lt++)S[lt+qt+J]=Vt[lt]};x.extend(K.prototype,ct,{model:W,preinitialize:function(){},initialize:function(){},toJSON:function(S){return this.map(function(A){return A.toJSON(S)})},sync:function(){return O.sync.apply(this,arguments)},add:function(S,A){return this.set(S,x.extend({merge:!1},A,ht))},remove:function(S,A){A=x.extend({},A);var J=!x.isArray(S);S=J?[S]:S.slice();var lt=this._removeModels(S,A);return!A.silent&&lt.length&&(A.changes={added:[],merged:[],removed:lt},this.trigger("update",this,A)),J?lt[0]:lt},set:function(S,A){if(S!=null){(A=x.extend({},ot,A)).parse&&!this._isModel(S)&&(S=this.parse(S,A)||[]);var J=!x.isArray(S);S=J?[S]:S.slice();var lt=A.at;lt!=null&&(lt=+lt),lt>this.length&&(lt=this.length),lt<0&&(lt+=this.length+1);var Vt,qt,Qt=[],Ie=[],We=[],Ue=[],en={},se=A.add,vn=A.merge,U=A.remove,rt=!1,dt=this.comparator&&lt==null&&A.sort!==!1,Mt=x.isString(this.comparator)?this.comparator:null;for(qt=0;qt<S.length;qt++){Vt=S[qt];var Kt=this.get(Vt);if(Kt){if(vn&&Vt!==Kt){var Le=this._isModel(Vt)?Vt.attributes:Vt;A.parse&&(Le=Kt.parse(Le,A)),Kt.set(Le,A),We.push(Kt),dt&&!rt&&(rt=Kt.hasChanged(Mt))}en[Kt.cid]||(en[Kt.cid]=!0,Qt.push(Kt)),S[qt]=Kt}else se&&(Vt=S[qt]=this._prepareModel(Vt,A))&&(Ie.push(Vt),this._addReference(Vt,A),en[Vt.cid]=!0,Qt.push(Vt))}if(U){for(qt=0;qt<this.length;qt++)en[(Vt=this.models[qt]).cid]||Ue.push(Vt);Ue.length&&this._removeModels(Ue,A)}var Me=!1,Pn=!dt&&se&&U;if(Qt.length&&Pn?(Me=this.length!==Qt.length||x.some(this.models,function(Fn,xn){return Fn!==Qt[xn]}),this.models.length=0,G(this.models,Qt,0),this.length=this.models.length):Ie.length&&(dt&&(rt=!0),G(this.models,Ie,lt??this.length),this.length=this.models.length),rt&&this.sort({silent:!0}),!A.silent){for(qt=0;qt<Ie.length;qt++)lt!=null&&(A.index=lt+qt),(Vt=Ie[qt]).trigger("add",Vt,this,A);(rt||Me)&&this.trigger("sort",this,A),(Ie.length||Ue.length||We.length)&&(A.changes={added:Ie,removed:Ue,merged:We},this.trigger("update",this,A))}return J?S[0]:S}},reset:function(S,A){A=A?x.clone(A):{};for(var J=0;J<this.models.length;J++)this._removeReference(this.models[J],A);return A.previousModels=this.models,this._reset(),S=this.add(S,x.extend({silent:!0},A)),A.silent||this.trigger("reset",this,A),S},push:function(S,A){return this.add(S,x.extend({at:this.length},A))},pop:function(S){var A=this.at(this.length-1);return this.remove(A,S)},unshift:function(S,A){return this.add(S,x.extend({at:0},A))},shift:function(S){var A=this.at(0);return this.remove(A,S)},slice:function(){return Y.apply(this.models,arguments)},get:function(S){if(S!=null)return this._byId[S]||this._byId[this.modelId(this._isModel(S)?S.attributes:S,S.idAttribute)]||S.cid&&this._byId[S.cid]},has:function(S){return this.get(S)!=null},at:function(S){return S<0&&(S+=this.length),this.models[S]},where:function(S,A){return this[A?"find":"filter"](S)},findWhere:function(S){return this.where(S,!0)},sort:function(S){var A=this.comparator;if(!A)throw new Error("Cannot sort a set without a comparator");S||(S={});var J=A.length;return x.isFunction(A)&&(A=A.bind(this)),J===1||x.isString(A)?this.models=this.sortBy(A):this.models.sort(A),S.silent||this.trigger("sort",this,S),this},pluck:function(S){return this.map(S+"")},fetch:function(S){var A=(S=x.extend({parse:!0},S)).success,J=this;return S.success=function(lt){var Vt=S.reset?"reset":"set";J[Vt](lt,S),A&&A.call(S.context,J,lt,S),J.trigger("sync",J,lt,S)},bt(this,S),this.sync("read",this,S)},create:function(S,A){var J=(A=A?x.clone(A):{}).wait;if(!(S=this._prepareModel(S,A)))return!1;J||this.add(S,A);var lt=this,Vt=A.success;return A.success=function(qt,Qt,Ie){J&&lt.add(qt,Ie),Vt&&Vt.call(Ie.context,qt,Qt,Ie)},S.save(null,A),S},parse:function(S,A){return S},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(S,A){return S[A||this.model.prototype.idAttribute||"id"]},values:function(){return new I(this,Nt)},keys:function(){return new I(this,Pt)},entries:function(){return new I(this,ne)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(S,A){return this._isModel(S)?(S.collection||(S.collection=this),S):((A=A?x.clone(A):{}).collection=this,(J=this.model.prototype?new this.model(S,A):this.model(S,A)).validationError?(this.trigger("invalid",this,J.validationError,A),!1):J);var J},_removeModels:function(S,A){for(var J=[],lt=0;lt<S.length;lt++){var Vt=this.get(S[lt]);if(Vt){var qt=this.indexOf(Vt);this.models.splice(qt,1),this.length--,delete this._byId[Vt.cid];var Qt=this.modelId(Vt.attributes,Vt.idAttribute);Qt!=null&&delete this._byId[Qt],A.silent||(A.index=qt,Vt.trigger("remove",Vt,this,A)),J.push(Vt),this._removeReference(Vt,A)}}return J},_isModel:function(S){return S instanceof W},_addReference:function(S,A){this._byId[S.cid]=S;var J=this.modelId(S.attributes,S.idAttribute);J!=null&&(this._byId[J]=S),S.on("all",this._onModelEvent,this)},_removeReference:function(S,A){delete this._byId[S.cid];var J=this.modelId(S.attributes,S.idAttribute);J!=null&&delete this._byId[J],this===S.collection&&delete S.collection,S.off("all",this._onModelEvent,this)},_onModelEvent:function(S,A,J,lt){if(A){if((S==="add"||S==="remove")&&J!==this)return;if(S==="destroy"&&this.remove(A,lt),S==="changeId"){var Vt=this.modelId(A.previousAttributes(),A.idAttribute),qt=this.modelId(A.attributes,A.idAttribute);Vt!=null&&delete this._byId[Vt],qt!=null&&(this._byId[qt]=A)}}this.trigger.apply(this,arguments)}});var xt=typeof Symbol=="function"&&Symbol.iterator;xt&&(K.prototype[xt]=K.prototype.values);var I=function(S,A){this._collection=S,this._kind=A,this._index=0},Nt=1,Pt=2,ne=3;xt&&(I.prototype[xt]=function(){return this}),I.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var S,A=this._collection.at(this._index);if(this._index++,this._kind===Nt)S=A;else{var J=this._collection.modelId(A.attributes,A.idAttribute);S=this._kind===Pt?J:[J,A]}return{value:S,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var _t=O.View=function(S){this.cid=x.uniqueId("view"),this.preinitialize.apply(this,arguments),x.extend(this,x.pick(S,Ht)),this._ensureElement(),this.initialize.apply(this,arguments)},Ut=/^(\S+)\s*(.*)$/,Ht=["model","collection","el","id","attributes","className","tagName","events"];x.extend(_t.prototype,ct,{tagName:"div",$:function(S){return this.$el.find(S)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(S){return this.undelegateEvents(),this._setElement(S),this.delegateEvents(),this},_setElement:function(S){this.$el=S instanceof O.$?S:O.$(S),this.el=this.$el[0]},delegateEvents:function(S){if(S||(S=x.result(this,"events")),!S)return this;for(var A in this.undelegateEvents(),S){var J=S[A];if(x.isFunction(J)||(J=this[J]),J){var lt=A.match(Ut);this.delegate(lt[1],lt[2],J.bind(this))}}return this},delegate:function(S,A,J){return this.$el.on(S+".delegateEvents"+this.cid,A,J),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(S,A,J){return this.$el.off(S+".delegateEvents"+this.cid,A,J),this},_createElement:function(S){return document.createElement(S)},_ensureElement:function(){if(this.el)this.setElement(x.result(this,"el"));else{var S=x.extend({},x.result(this,"attributes"));this.id&&(S.id=x.result(this,"id")),this.className&&(S.class=x.result(this,"className")),this.setElement(this._createElement(x.result(this,"tagName"))),this._setAttributes(S)}},_setAttributes:function(S){this.$el.attr(S)}});var ee=function(S,A,J,lt){switch(A){case 1:return function(){return S[J](this[lt])};case 2:return function(Vt){return S[J](this[lt],Vt)};case 3:return function(Vt,qt){return S[J](this[lt],le(Vt,this),qt)};case 4:return function(Vt,qt,Qt){return S[J](this[lt],le(Vt,this),qt,Qt)};default:return function(){var Vt=Y.call(arguments);return Vt.unshift(this[lt]),S[J].apply(S,Vt)}}},Zt=function(S,A,J,lt){x.each(J,function(Vt,qt){A[qt]&&(S.prototype[qt]=ee(A,Vt,qt,lt))})},le=function(S,A){return x.isFunction(S)?S:x.isObject(S)&&!A._isModel(S)?ce(S):x.isString(S)?function(J){return J.get(S)}:S},ce=function(S){var A=x.matches(S);return function(J){return A(J.attributes)}},jt={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},Xt={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};x.each([[K,jt,"models"],[W,Xt,"attributes"]],function(S){var A=S[0],J=S[1],lt=S[2];A.mixin=function(Vt){var qt=x.reduce(x.functions(Vt),function(Qt,Ie){return Qt[Ie]=0,Qt},{});Zt(A,Vt,qt,lt)},Zt(A,x,J,lt)}),O.sync=function(S,A,J){var lt=pe[S];x.defaults(J||(J={}),{emulateHTTP:O.emulateHTTP,emulateJSON:O.emulateJSON});var Vt={type:lt,dataType:"json"};if(J.url||(Vt.url=x.result(A,"url")||cn()),J.data!=null||!A||S!=="create"&&S!=="update"&&S!=="patch"||(Vt.contentType="application/json",Vt.data=JSON.stringify(J.attrs||A.toJSON(J))),J.emulateJSON&&(Vt.contentType="application/x-www-form-urlencoded",Vt.data=Vt.data?{model:Vt.data}:{}),J.emulateHTTP&&(lt==="PUT"||lt==="DELETE"||lt==="PATCH")){Vt.type="POST",J.emulateJSON&&(Vt.data._method=lt);var qt=J.beforeSend;J.beforeSend=function(We){if(We.setRequestHeader("X-HTTP-Method-Override",lt),qt)return qt.apply(this,arguments)}}Vt.type==="GET"||J.emulateJSON||(Vt.processData=!1);var Qt=J.error;J.error=function(We,Ue,en){J.textStatus=Ue,J.errorThrown=en,Qt&&Qt.call(J.context,We,Ue,en)};var Ie=J.xhr=O.ajax(x.extend(Vt,J));return A.trigger("request",A,Ie,J),Ie};var pe={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};O.ajax=function(){return O.$.ajax.apply(O.$,arguments)};var me=O.Router=function(S){S||(S={}),this.preinitialize.apply(this,arguments),S.routes&&(this.routes=S.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},kt=/\((.*?)\)/g,Yt=/(\(\?)?:\w+/g,de=/\*\w+/g,St=/[\-{}\[\]+?.,\\\^$|#\s]/g;x.extend(me.prototype,ct,{preinitialize:function(){},initialize:function(){},route:function(S,A,J){x.isRegExp(S)||(S=this._routeToRegExp(S)),x.isFunction(A)&&(J=A,A=""),J||(J=this[A]);var lt=this;return O.history.route(S,function(Vt){var qt=lt._extractParameters(S,Vt);lt.execute(J,qt,A)!==!1&&(lt.trigger.apply(lt,["route:"+A].concat(qt)),lt.trigger("route",A,qt),O.history.trigger("route",lt,A,qt))}),this},execute:function(S,A,J){S&&S.apply(this,A)},navigate:function(S,A){return O.history.navigate(S,A),this},_bindRoutes:function(){if(this.routes){this.routes=x.result(this,"routes");for(var S,A=x.keys(this.routes);(S=A.pop())!=null;)this.route(S,this.routes[S])}},_routeToRegExp:function(S){return S=S.replace(St,"\\$&").replace(kt,"(?:$1)?").replace(Yt,function(A,J){return J?A:"([^/?]+)"}).replace(de,"([^?]*?)"),new RegExp("^"+S+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(S,A){var J=S.exec(A).slice(1);return x.map(J,function(lt,Vt){return Vt===J.length-1?lt||null:lt?decodeURIComponent(lt):null})}});var ae=O.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),typeof window<"u"&&(this.location=window.location,this.history=window.history)},je=/^[#\/]|\s+$/g,He=/^\/+|\/+$/g,qe=/#.*$/;ae.started=!1,x.extend(ae.prototype,ct,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(S){return decodeURI(S.replace(/%25/g,"%2525"))},getSearch:function(){var S=this.location.href.replace(/#.*/,"").match(/\?.+/);return S?S[0]:""},getHash:function(S){var A=(S||this).location.href.match(/#(.*)$/);return A?A[1]:""},getPath:function(){var S=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return S.charAt(0)==="/"?S.slice(1):S},getFragment:function(S){return S==null&&(S=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),S.replace(je,"")},start:function(S){if(ae.started)throw new Error("Backbone.history has already been started");if(ae.started=!0,this.options=x.extend({root:"/"},this.options,S),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(He,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var A=this.root.slice(0,-1)||"/";return this.location.replace(A+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var J=document.body,lt=J.insertBefore(this.iframe,J.firstChild).contentWindow;lt.document.open(),lt.document.close(),lt.location.hash="#"+this.fragment}var Vt=window.addEventListener||function(qt,Qt){return attachEvent("on"+qt,Qt)};if(this._usePushState?Vt("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?Vt("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var S=window.removeEventListener||function(A,J){return detachEvent("on"+A,J)};this._usePushState?S("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&S("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),ae.started=!1},route:function(S,A){this.handlers.unshift({route:S,callback:A})},checkUrl:function(S){var A=this.getFragment();if(A===this.fragment&&this.iframe&&(A=this.getHash(this.iframe.contentWindow)),A===this.fragment)return!1;this.iframe&&this.navigate(A),this.loadUrl()},loadUrl:function(S){return!!this.matchRoot()&&(S=this.fragment=this.getFragment(S),x.some(this.handlers,function(A){if(A.route.test(S))return A.callback(S),!0}))},navigate:function(S,A){if(!ae.started)return!1;A&&A!==!0||(A={trigger:!!A}),S=this.getFragment(S||"");var J=this.root;S!==""&&S.charAt(0)!=="?"||(J=J.slice(0,-1)||"/");var lt=J+S;S=S.replace(qe,"");var Vt=this.decodeFragment(S);if(this.fragment!==Vt){if(this.fragment=Vt,this._usePushState)this.history[A.replace?"replaceState":"pushState"]({},document.title,lt);else{if(!this._wantsHashChange)return this.location.assign(lt);if(this._updateHash(this.location,S,A.replace),this.iframe&&S!==this.getHash(this.iframe.contentWindow)){var qt=this.iframe.contentWindow;A.replace||(qt.document.open(),qt.document.close()),this._updateHash(qt.location,S,A.replace)}}return A.trigger?this.loadUrl(S):void 0}},_updateHash:function(S,A,J){if(J){var lt=S.href.replace(/(javascript:|#).*$/,"");S.replace(lt+"#"+A)}else S.hash="#"+A}}),O.history=new ae;var gn=function(S,A){var J,lt=this;return J=S&&x.has(S,"constructor")?S.constructor:function(){return lt.apply(this,arguments)},x.extend(J,lt,A),J.prototype=x.create(lt.prototype,S),J.prototype.constructor=J,J.__super__=lt.prototype,J};W.extend=K.extend=me.extend=_t.extend=ae.extend=gn;var cn=function(){throw new Error('A "url" property or function must be specified')},bt=function(S,A){var J=A.error;A.error=function(lt){J&&J.call(A.context,S,lt,A),S.trigger("error",S,lt,A)}};return O}(R,E,F,H)}.apply(q,$),pt===void 0||(C.exports=pt)})()},3640:(C,q,it)=>{(function($){$.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(R,F){return/^[;{}]$/.test(F)}}),$.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(R,F,H,E){return this.jsonMode?/^[\[,{]$/.test(F)||/^}/.test(H):(F!=";"||!E.lexical||E.lexical.type!=")")&&/^[;{}]$/.test(F)&&!/^;/.test(H)}});var pt=/^(a|abbr|acronym|area|base|bdo|big|br|button|caption|cite|code|col|colgroup|dd|del|dfn|em|frame|hr|iframe|img|input|ins|kbd|label|legend|link|map|object|optgroup|option|param|q|samp|script|select|small|span|strong|sub|sup|textarea|tt|var)$/;$.extendMode("xml",{commentStart:"<!--",commentEnd:"-->",newlineAfterToken:function(R,F,H,E){var _=!1;return this.configuration=="html"&&(_=!!E.context&&pt.test(E.context.tagName)),!_&&(R=="tag"&&/>$/.test(F)&&E.context||/^</.test(H))}}),$.defineExtension("commentRange",function(R,F,H){var E=this,_=$.innerMode(E.getMode(),E.getTokenAt(F).state).mode;E.operation(function(){if(R)E.replaceRange(_.commentEnd,H),E.replaceRange(_.commentStart,F),F.line==H.line&&F.ch==H.ch&&E.setCursor(F.line,F.ch+_.commentStart.length);else{var O=E.getRange(F,H),x=O.indexOf(_.commentStart),N=O.lastIndexOf(_.commentEnd);x>-1&&N>-1&&N>x&&(O=O.substr(0,x)+O.substring(x+_.commentStart.length,N)+O.substr(N+_.commentEnd.length)),E.replaceRange(O,F,H)}})}),$.defineExtension("autoIndentRange",function(R,F){var H=this;this.operation(function(){for(var E=R.line;E<=F.line;E++)H.indentLine(E,"smart")})}),$.defineExtension("autoFormatRange",function(R,F){var H=this,E=H.getMode(),_=H.getRange(R,F).split(`
`),O=$.copyState(E,H.getTokenAt(R).state),x=H.getOption("tabSize"),N="",V=0,Y=R.ch===0;function st(){N+=`
`,Y=!0,++V}for(var ct=0;ct<_.length;++ct){for(var Tt=new $.StringStream(_[ct],x);!Tt.eol();){var Et=$.innerMode(E,O),vt=E.token(Tt,O),ft=Tt.current();Tt.start=Tt.pos,Y&&!/\S/.test(ft)||(N+=ft,Y=!1),!Y&&Et.mode.newlineAfterToken&&Et.mode.newlineAfterToken(vt,ft,Tt.string.slice(Tt.pos)||_[ct+1]||"",Et.state)&&st()}!Tt.pos&&E.blankLine&&E.blankLine(O),!Y&&ct<_.length-1&&st()}H.operation(function(){H.replaceRange(N,R,F);for(var wt=R.line+1,Ot=R.line+V;wt<=Ot;++wt)H.indentLine(wt,"smart");H.setSelection(R,H.getCursor(!1))})})})(it(4408))},4408:function(C){C.exports=function(){"use strict";var q=navigator.userAgent,it=navigator.platform,$=/gecko\/\d/i.test(q),pt=/MSIE \d/.test(q),R=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(q),F=/Edge\/(\d+)/.exec(q),H=pt||R||F,E=H&&(pt?document.documentMode||6:+(F||R)[1]),_=!F&&/WebKit\//.test(q),O=_&&/Qt\/\d+\.\d+/.test(q),x=!F&&/Chrome\//.test(q),N=/Opera\//.test(q),V=/Apple Computer/.test(navigator.vendor),Y=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(q),st=/PhantomJS/.test(q),ct=V&&(/Mobile\/\w+/.test(q)||navigator.maxTouchPoints>2),Tt=/Android/.test(q),Et=ct||Tt||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(q),vt=ct||/Mac/.test(it),ft=/\bCrOS\b/.test(q),wt=/win/i.test(it),Ot=N&&q.match(/Version\/(\d*\.\d*)/);Ot&&(Ot=Number(Ot[1])),Ot&&Ot>=15&&(N=!1,_=!0);var te=vt&&(O||N&&(Ot==null||Ot<12.11)),Ft=$||H&&E>=9;function D(i){return new RegExp("(^|\\s)"+i+"(?:$|\\s)\\s*")}var W,K=function(i,s){var u=i.className,c=D(s).exec(u);if(c){var f=u.slice(c.index+c[0].length);i.className=u.slice(0,c.index)+(f?c[1]+f:"")}};function ot(i){for(var s=i.childNodes.length;s>0;--s)i.removeChild(i.firstChild);return i}function ht(i,s){return ot(i).appendChild(s)}function G(i,s,u,c){var f=document.createElement(i);if(u&&(f.className=u),c&&(f.style.cssText=c),typeof s=="string")f.appendChild(document.createTextNode(s));else if(s)for(var v=0;v<s.length;++v)f.appendChild(s[v]);return f}function xt(i,s,u,c){var f=G(i,s,u,c);return f.setAttribute("role","presentation"),f}function I(i,s){if(s.nodeType==3&&(s=s.parentNode),i.contains)return i.contains(s);do if(s.nodeType==11&&(s=s.host),s==i)return!0;while(s=s.parentNode)}function Nt(){var i;try{i=document.activeElement}catch{i=document.body||null}for(;i&&i.shadowRoot&&i.shadowRoot.activeElement;)i=i.shadowRoot.activeElement;return i}function Pt(i,s){var u=i.className;D(s).test(u)||(i.className+=(u?" ":"")+s)}function ne(i,s){for(var u=i.split(" "),c=0;c<u.length;c++)u[c]&&!D(u[c]).test(s)&&(s+=" "+u[c]);return s}W=document.createRange?function(i,s,u,c){var f=document.createRange();return f.setEnd(c||i,u),f.setStart(i,s),f}:function(i,s,u){var c=document.body.createTextRange();try{c.moveToElementText(i.parentNode)}catch{return c}return c.collapse(!0),c.moveEnd("character",u),c.moveStart("character",s),c};var _t=function(i){i.select()};function Ut(i){var s=Array.prototype.slice.call(arguments,1);return function(){return i.apply(null,s)}}function Ht(i,s,u){for(var c in s||(s={}),i)!i.hasOwnProperty(c)||u===!1&&s.hasOwnProperty(c)||(s[c]=i[c]);return s}function ee(i,s,u,c,f){s==null&&(s=i.search(/[^\s\u00a0]/))==-1&&(s=i.length);for(var v=c||0,y=f||0;;){var b=i.indexOf("	",v);if(b<0||b>=s)return y+(s-v);y+=b-v,y+=u-y%u,v=b+1}}ct?_t=function(i){i.selectionStart=0,i.selectionEnd=i.value.length}:H&&(_t=function(i){try{i.select()}catch{}});var Zt=function(){this.id=null,this.f=null,this.time=0,this.handler=Ut(this.onTimeout,this)};function le(i,s){for(var u=0;u<i.length;++u)if(i[u]==s)return u;return-1}Zt.prototype.onTimeout=function(i){i.id=0,i.time<=+new Date?i.f():setTimeout(i.handler,i.time-+new Date)},Zt.prototype.set=function(i,s){this.f=s;var u=+new Date+i;(!this.id||u<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,i),this.time=u)};var ce=50,jt={toString:function(){return"CodeMirror.Pass"}},Xt={scroll:!1},pe={origin:"*mouse"},me={origin:"+move"};function kt(i,s,u){for(var c=0,f=0;;){var v=i.indexOf("	",c);v==-1&&(v=i.length);var y=v-c;if(v==i.length||f+y>=s)return c+Math.min(y,s-f);if(f+=v-c,c=v+1,(f+=u-f%u)>=s)return c}}var Yt=[""];function de(i){for(;Yt.length<=i;)Yt.push(St(Yt)+" ");return Yt[i]}function St(i){return i[i.length-1]}function ae(i,s){for(var u=[],c=0;c<i.length;c++)u[c]=s(i[c],c);return u}function je(i,s,u){for(var c=0,f=u(s);c<i.length&&u(i[c])<=f;)c++;i.splice(c,0,s)}function He(){}function qe(i,s){var u;return Object.create?u=Object.create(i):(He.prototype=i,u=new He),s&&Ht(s,u),u}var gn=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function cn(i){return/\w/.test(i)||i>"\x80"&&(i.toUpperCase()!=i.toLowerCase()||gn.test(i))}function bt(i,s){return s?!!(s.source.indexOf("\\w")>-1&&cn(i))||s.test(i):cn(i)}function S(i){for(var s in i)if(i.hasOwnProperty(s)&&i[s])return!1;return!0}var A=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function J(i){return i.charCodeAt(0)>=768&&A.test(i)}function lt(i,s,u){for(;(u<0?s>0:s<i.length)&&J(i.charAt(s));)s+=u;return s}function Vt(i,s,u){for(var c=s>u?-1:1;;){if(s==u)return s;var f=(s+u)/2,v=c<0?Math.ceil(f):Math.floor(f);if(v==s)return i(v)?s:u;i(v)?u=v:s=v+c}}function qt(i,s,u,c){if(!i)return c(s,u,"ltr",0);for(var f=!1,v=0;v<i.length;++v){var y=i[v];(y.from<u&&y.to>s||s==u&&y.to==s)&&(c(Math.max(y.from,s),Math.min(y.to,u),y.level==1?"rtl":"ltr",v),f=!0)}f||c(s,u,"ltr")}var Qt=null;function Ie(i,s,u){var c;Qt=null;for(var f=0;f<i.length;++f){var v=i[f];if(v.from<s&&v.to>s)return f;v.to==s&&(v.from!=v.to&&u=="before"?c=f:Qt=f),v.from==s&&(v.from!=v.to&&u!="before"?c=f:Qt=f)}return c??Qt}var We=function(){var i="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",s="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function u(j){return j<=247?i.charAt(j):1424<=j&&j<=1524?"R":1536<=j&&j<=1785?s.charAt(j-1536):1774<=j&&j<=2220?"r":8192<=j&&j<=8203?"w":j==8204?"b":"L"}var c=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,f=/[stwN]/,v=/[LRr]/,y=/[Lb1n]/,b=/[1n]/;function P(j,Q,Z){this.level=j,this.from=Q,this.to=Z}return function(j,Q){var Z=Q=="ltr"?"L":"R";if(j.length==0||Q=="ltr"&&!c.test(j))return!1;for(var mt=j.length,yt=[],Dt=0;Dt<mt;++Dt)yt.push(u(j.charCodeAt(Dt)));for(var $t=0,re=Z;$t<mt;++$t){var ye=yt[$t];ye=="m"?yt[$t]=re:re=ye}for(var Ce=0,fe=Z;Ce<mt;++Ce){var Te=yt[Ce];Te=="1"&&fe=="r"?yt[Ce]="n":v.test(Te)&&(fe=Te,Te=="r"&&(yt[Ce]="R"))}for(var Se=1,Pe=yt[0];Se<mt-1;++Se){var yn=yt[Se];yn=="+"&&Pe=="1"&&yt[Se+1]=="1"?yt[Se]="1":yn!=","||Pe!=yt[Se+1]||Pe!="1"&&Pe!="n"||(yt[Se]=Pe),Pe=yn}for(var rn=0;rn<mt;++rn){var Wo=yt[rn];if(Wo==",")yt[rn]="N";else if(Wo=="%"){var Tn=void 0;for(Tn=rn+1;Tn<mt&&yt[Tn]=="%";++Tn);for(var or=rn&&yt[rn-1]=="!"||Tn<mt&&yt[Tn]=="1"?"1":"N",$o=rn;$o<Tn;++$o)yt[$o]=or;rn=Tn-1}}for(var Ln=0,Eo=Z;Ln<mt;++Ln){var ko=yt[Ln];Eo=="L"&&ko=="1"?yt[Ln]="L":v.test(ko)&&(Eo=ko)}for(var Ge=0;Ge<mt;++Ge)if(f.test(yt[Ge])){var In=void 0;for(In=Ge+1;In<mt&&f.test(yt[In]);++In);for(var Nn=(Ge?yt[Ge-1]:Z)=="L",so=Nn==((In<mt?yt[In]:Z)=="L")?Nn?"L":"R":Z,Gr=Ge;Gr<In;++Gr)yt[Gr]=so;Ge=In-1}for(var Mr,fo=[],Vn=0;Vn<mt;)if(y.test(yt[Vn])){var Dl=Vn;for(++Vn;Vn<mt&&y.test(yt[Vn]);++Vn);fo.push(new P(0,Dl,Vn))}else{var yr=Vn,ki=fo.length,Ai=Q=="rtl"?1:0;for(++Vn;Vn<mt&&yt[Vn]!="L";++Vn);for(var Ao=yr;Ao<Vn;)if(b.test(yt[Ao])){yr<Ao&&(fo.splice(ki,0,new P(1,yr,Ao)),ki+=Ai);var Ua=Ao;for(++Ao;Ao<Vn&&b.test(yt[Ao]);++Ao);fo.splice(ki,0,new P(2,Ua,Ao)),ki+=Ai,yr=Ao}else++Ao;yr<Vn&&fo.splice(ki,0,new P(1,yr,Vn))}return Q=="ltr"&&(fo[0].level==1&&(Mr=j.match(/^\s+/))&&(fo[0].from=Mr[0].length,fo.unshift(new P(0,0,Mr[0].length))),St(fo).level==1&&(Mr=j.match(/\s+$/))&&(St(fo).to-=Mr[0].length,fo.push(new P(0,mt-Mr[0].length,mt)))),Q=="rtl"?fo.reverse():fo}}();function Ue(i,s){var u=i.order;return u==null&&(u=i.order=We(i.text,s)),u}var en=[],se=function(i,s,u){if(i.addEventListener)i.addEventListener(s,u,!1);else if(i.attachEvent)i.attachEvent("on"+s,u);else{var c=i._handlers||(i._handlers={});c[s]=(c[s]||en).concat(u)}};function vn(i,s){return i._handlers&&i._handlers[s]||en}function U(i,s,u){if(i.removeEventListener)i.removeEventListener(s,u,!1);else if(i.detachEvent)i.detachEvent("on"+s,u);else{var c=i._handlers,f=c&&c[s];if(f){var v=le(f,u);v>-1&&(c[s]=f.slice(0,v).concat(f.slice(v+1)))}}}function rt(i,s){var u=vn(i,s);if(u.length)for(var c=Array.prototype.slice.call(arguments,2),f=0;f<u.length;++f)u[f].apply(null,c)}function dt(i,s,u){return typeof s=="string"&&(s={type:s,preventDefault:function(){this.defaultPrevented=!0}}),rt(i,u||s.type,i,s),Fn(s)||s.codemirrorIgnore}function Mt(i){var s=i._handlers&&i._handlers.cursorActivity;if(s)for(var u=i.curOp.cursorActivityHandlers||(i.curOp.cursorActivityHandlers=[]),c=0;c<s.length;++c)le(u,s[c])==-1&&u.push(s[c])}function Kt(i,s){return vn(i,s).length>0}function Le(i){i.prototype.on=function(s,u){se(this,s,u)},i.prototype.off=function(s,u){U(this,s,u)}}function Me(i){i.preventDefault?i.preventDefault():i.returnValue=!1}function Pn(i){i.stopPropagation?i.stopPropagation():i.cancelBubble=!0}function Fn(i){return i.defaultPrevented!=null?i.defaultPrevented:i.returnValue==0}function xn(i){Me(i),Pn(i)}function go(i){return i.target||i.srcElement}function ur(i){var s=i.which;return s==null&&(1&i.button?s=1:2&i.button?s=3:4&i.button&&(s=2)),vt&&i.ctrlKey&&s==1&&(s=3),s}var dn,Ko,En=function(){if(H&&E<9)return!1;var i=G("div");return"draggable"in i||"dragDrop"in i}();function kn(i){if(dn==null){var s=G("span","\u200B");ht(i,G("span",[s,document.createTextNode("x")])),i.firstChild.offsetHeight!=0&&(dn=s.offsetWidth<=1&&s.offsetHeight>2&&!(H&&E<8))}var u=dn?G("span","\u200B"):G("span","\xA0",null,"display: inline-block; width: 1px; margin-right: -1px");return u.setAttribute("cm-text",""),u}function Jn(i){if(Ko!=null)return Ko;var s=ht(i,document.createTextNode("A\u062EA")),u=W(s,0,1).getBoundingClientRect(),c=W(s,1,2).getBoundingClientRect();return ot(i),!(!u||u.left==u.right)&&(Ko=c.right-u.right<3)}var Oo,Zn=`

b`.split(/\n/).length!=3?function(i){for(var s=0,u=[],c=i.length;s<=c;){var f=i.indexOf(`
`,s);f==-1&&(f=i.length);var v=i.slice(s,i.charAt(f-1)=="\r"?f-1:f),y=v.indexOf("\r");y!=-1?(u.push(v.slice(0,y)),s+=y+1):(u.push(v),s=f+1)}return u}:function(i){return i.split(/\r\n?|\n/)},Fo=window.getSelection?function(i){try{return i.selectionStart!=i.selectionEnd}catch{return!1}}:function(i){var s;try{s=i.ownerDocument.selection.createRange()}catch{}return!(!s||s.parentElement()!=i)&&s.compareEndPoints("StartToEnd",s)!=0},Vi="oncopy"in(Oo=G("div"))||(Oo.setAttribute("oncopy","return;"),typeof Oo.oncopy=="function"),pr=null;function fi(i){if(pr!=null)return pr;var s=ht(i,G("span","x")),u=s.getBoundingClientRect(),c=W(s,0,1).getBoundingClientRect();return pr=Math.abs(u.left-c.left)>1}var Do={},Bn={};function mn(i,s){arguments.length>2&&(s.dependencies=Array.prototype.slice.call(arguments,2)),Do[i]=s}function Kr(i,s){Bn[i]=s}function Hn(i){if(typeof i=="string"&&Bn.hasOwnProperty(i))i=Bn[i];else if(i&&typeof i.name=="string"&&Bn.hasOwnProperty(i.name)){var s=Bn[i.name];typeof s=="string"&&(s={name:s}),(i=qe(s,i)).name=s.name}else{if(typeof i=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(i))return Hn("application/xml");if(typeof i=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(i))return Hn("application/json")}return typeof i=="string"?{name:i}:i||{name:"null"}}function Or(i,s){s=Hn(s);var u=Do[s.name];if(!u)return Or(i,"text/plain");var c=u(i,s);if(jn.hasOwnProperty(s.name)){var f=jn[s.name];for(var v in f)f.hasOwnProperty(v)&&(c.hasOwnProperty(v)&&(c["_"+v]=c[v]),c[v]=f[v])}if(c.name=s.name,s.helperType&&(c.helperType=s.helperType),s.modeProps)for(var y in s.modeProps)c[y]=s.modeProps[y];return c}var jn={};function Kn(i,s){Ht(s,jn.hasOwnProperty(i)?jn[i]:jn[i]={})}function Cn(i,s){if(s===!0)return s;if(i.copyState)return i.copyState(s);var u={};for(var c in s){var f=s[c];f instanceof Array&&(f=f.concat([])),u[c]=f}return u}function Sn(i,s){for(var u;i.innerMode&&(u=i.innerMode(s))&&u.mode!=i;)s=u.state,i=u.mode;return u||{mode:i,state:s}}function lo(i,s,u){return!i.startState||i.startState(s,u)}var ln=function(i,s,u){this.pos=this.start=0,this.string=i,this.tabSize=s||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=u};function he(i,s){if((s-=i.first)<0||s>=i.size)throw new Error("There is no line "+(s+i.first)+" in the document.");for(var u=i;!u.lines;)for(var c=0;;++c){var f=u.children[c],v=f.chunkSize();if(s<v){u=f;break}s-=v}return u.lines[s]}function Qn(i,s,u){var c=[],f=s.line;return i.iter(s.line,u.line+1,function(v){var y=v.text;f==u.line&&(y=y.slice(0,u.ch)),f==s.line&&(y=y.slice(s.ch)),c.push(y),++f}),c}function Yo(i,s,u){var c=[];return i.iter(s,u,function(f){c.push(f.text)}),c}function to(i,s){var u=s-i.height;if(u)for(var c=i;c;c=c.parent)c.height+=u}function nn(i){if(i.parent==null)return null;for(var s=i.parent,u=le(s.lines,i),c=s.parent;c;s=c,c=c.parent)for(var f=0;c.children[f]!=s;++f)u+=c.children[f].chunkSize();return u+s.first}function Lo(i,s){var u=i.first;t:do{for(var c=0;c<i.children.length;++c){var f=i.children[c],v=f.height;if(s<v){i=f;continue t}s-=v,u+=f.chunkSize()}return u}while(!i.lines);for(var y=0;y<i.lines.length;++y){var b=i.lines[y].height;if(s<b)break;s-=b}return u+y}function Io(i,s){return s>=i.first&&s<i.first+i.size}function Yr(i,s){return String(i.lineNumberFormatter(s+i.firstLineNumber))}function Jt(i,s,u){if(u===void 0&&(u=null),!(this instanceof Jt))return new Jt(i,s,u);this.line=i,this.ch=s,this.sticky=u}function ke(i,s){return i.line-s.line||i.ch-s.ch}function M(i,s){return i.sticky==s.sticky&&ke(i,s)==0}function tt(i){return Jt(i.line,i.ch)}function zt(i,s){return ke(i,s)<0?s:i}function be(i,s){return ke(i,s)<0?i:s}function Oe(i,s){return Math.max(i.first,Math.min(s,i.first+i.size-1))}function ge(i,s){if(s.line<i.first)return Jt(i.first,0);var u=i.first+i.size-1;return s.line>u?Jt(u,he(i,u).text.length):Ke(s,he(i,s.line).text.length)}function Ke(i,s){var u=i.ch;return u==null||u>s?Jt(i.line,s):u<0?Jt(i.line,0):i}function Wn(i,s){for(var u=[],c=0;c<s.length;c++)u[c]=ge(i,s[c]);return u}ln.prototype.eol=function(){return this.pos>=this.string.length},ln.prototype.sol=function(){return this.pos==this.lineStart},ln.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},ln.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},ln.prototype.eat=function(i){var s=this.string.charAt(this.pos);if(typeof i=="string"?s==i:s&&(i.test?i.test(s):i(s)))return++this.pos,s},ln.prototype.eatWhile=function(i){for(var s=this.pos;this.eat(i););return this.pos>s},ln.prototype.eatSpace=function(){for(var i=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>i},ln.prototype.skipToEnd=function(){this.pos=this.string.length},ln.prototype.skipTo=function(i){var s=this.string.indexOf(i,this.pos);if(s>-1)return this.pos=s,!0},ln.prototype.backUp=function(i){this.pos-=i},ln.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=ee(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?ee(this.string,this.lineStart,this.tabSize):0)},ln.prototype.indentation=function(){return ee(this.string,null,this.tabSize)-(this.lineStart?ee(this.string,this.lineStart,this.tabSize):0)},ln.prototype.match=function(i,s,u){if(typeof i!="string"){var c=this.string.slice(this.pos).match(i);return c&&c.index>0?null:(c&&s!==!1&&(this.pos+=c[0].length),c)}var f=function(v){return u?v.toLowerCase():v};if(f(this.string.substr(this.pos,i.length))==f(i))return s!==!1&&(this.pos+=i.length),!0},ln.prototype.current=function(){return this.string.slice(this.start,this.pos)},ln.prototype.hideFirstChars=function(i,s){this.lineStart+=i;try{return s()}finally{this.lineStart-=i}},ln.prototype.lookAhead=function(i){var s=this.lineOracle;return s&&s.lookAhead(i)},ln.prototype.baseToken=function(){var i=this.lineOracle;return i&&i.baseToken(this.pos)};var Mn=function(i,s){this.state=i,this.lookAhead=s},dr=function(i,s,u,c){this.state=s,this.doc=i,this.line=u,this.maxLookAhead=c||0,this.baseTokens=null,this.baseTokenPos=1};function Xr(i,s,u,c){var f=[i.state.modeGen],v={};Xa(i,s.text,i.doc.mode,u,function(j,Q){return f.push(j,Q)},v,c);for(var y=u.state,b=function(j){u.baseTokens=f;var Q=i.state.overlays[j],Z=1,mt=0;u.state=!0,Xa(i,s.text,Q.mode,u,function(yt,Dt){for(var $t=Z;mt<yt;){var re=f[Z];re>yt&&f.splice(Z,1,yt,f[Z+1],re),Z+=2,mt=Math.min(yt,re)}if(Dt)if(Q.opaque)f.splice($t,Z-$t,yt,"overlay "+Dt),Z=$t+2;else for(;$t<Z;$t+=2){var ye=f[$t+1];f[$t+1]=(ye?ye+" ":"")+"overlay "+Dt}},v),u.state=y,u.baseTokens=null,u.baseTokenPos=1},P=0;P<i.state.overlays.length;++P)b(P);return{styles:f,classes:v.bgClass||v.textClass?v:null}}function hi(i,s,u){if(!s.styles||s.styles[0]!=i.state.modeGen){var c=Rr(i,nn(s)),f=s.text.length>i.options.maxHighlightLength&&Cn(i.doc.mode,c.state),v=Xr(i,s,c);f&&(c.state=f),s.stateAfter=c.save(!f),s.styles=v.styles,v.classes?s.styleClasses=v.classes:s.styleClasses&&(s.styleClasses=null),u===i.doc.highlightFrontier&&(i.doc.modeFrontier=Math.max(i.doc.modeFrontier,++i.doc.highlightFrontier))}return s.styles}function Rr(i,s,u){var c=i.doc,f=i.display;if(!c.mode.startState)return new dr(c,!0,s);var v=Ri(i,s,u),y=v>c.first&&he(c,v-1).stateAfter,b=y?dr.fromSaved(c,y,v):new dr(c,lo(c.mode),v);return c.iter(v,s,function(P){Fr(i,P.text,b);var j=b.line;P.stateAfter=j==s-1||j%5==0||j>=f.viewFrom&&j<f.viewTo?b.save():null,b.nextLine()}),u&&(c.modeFrontier=b.line),b}function Fr(i,s,u,c){var f=i.doc.mode,v=new ln(s,i.options.tabSize,u);for(v.start=v.pos=c||0,s==""&&gi(f,u.state);!v.eol();)Hr(f,v,u.state),v.start=v.pos}function gi(i,s){if(i.blankLine)return i.blankLine(s);if(i.innerMode){var u=Sn(i,s);return u.mode.blankLine?u.mode.blankLine(u.state):void 0}}function Hr(i,s,u,c){for(var f=0;f<10;f++){c&&(c[0]=Sn(i,u).mode);var v=i.token(s,u);if(s.pos>s.start)return v}throw new Error("Mode "+i.name+" failed to advance stream.")}dr.prototype.lookAhead=function(i){var s=this.doc.getLine(this.line+i);return s!=null&&i>this.maxLookAhead&&(this.maxLookAhead=i),s},dr.prototype.baseToken=function(i){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=i;)this.baseTokenPos+=2;var s=this.baseTokens[this.baseTokenPos+1];return{type:s&&s.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-i}},dr.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},dr.fromSaved=function(i,s,u){return s instanceof Mn?new dr(i,Cn(i.mode,s.state),u,s.lookAhead):new dr(i,Cn(i.mode,s),u)},dr.prototype.save=function(i){var s=i!==!1?Cn(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Mn(s,this.maxLookAhead):s};var vo=function(i,s,u){this.start=i.start,this.end=i.pos,this.string=i.current(),this.type=s||null,this.state=u};function Ur(i,s,u,c){var f,v,y=i.doc,b=y.mode,P=he(y,(s=ge(y,s)).line),j=Rr(i,s.line,u),Q=new ln(P.text,i.options.tabSize,j);for(c&&(v=[]);(c||Q.pos<s.ch)&&!Q.eol();)Q.start=Q.pos,f=Hr(b,Q,j.state),c&&v.push(new vo(Q,f,Cn(y.mode,j.state)));return c?v:new vo(Q,f,j.state)}function eo(i,s){if(i)for(;;){var u=i.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!u)break;i=i.slice(0,u.index)+i.slice(u.index+u[0].length);var c=u[1]?"bgClass":"textClass";s[c]==null?s[c]=u[2]:new RegExp("(?:^|\\s)"+u[2]+"(?:$|\\s)").test(s[c])||(s[c]+=" "+u[2])}return i}function Xa(i,s,u,c,f,v,y){var b=u.flattenSpans;b==null&&(b=i.options.flattenSpans);var P,j=0,Q=null,Z=new ln(s,i.options.tabSize,c),mt=i.options.addModeClass&&[null];for(s==""&&eo(gi(u,c.state),v);!Z.eol();){if(Z.pos>i.options.maxHighlightLength?(b=!1,y&&Fr(i,s,c,Z.pos),Z.pos=s.length,P=null):P=eo(Hr(u,Z,c.state,mt),v),mt){var yt=mt[0].name;yt&&(P="m-"+(P?yt+" "+P:yt))}if(!b||Q!=P){for(;j<Z.start;)f(j=Math.min(Z.start,j+5e3),Q);Q=P}Z.start=Z.pos}for(;j<Z.pos;){var Dt=Math.min(Z.pos,j+5e3);f(Dt,Q),j=Dt}}function Ri(i,s,u){for(var c,f,v=i.doc,y=u?-1:s-(i.doc.mode.innerMode?1e3:100),b=s;b>y;--b){if(b<=v.first)return v.first;var P=he(v,b-1),j=P.stateAfter;if(j&&(!u||b+(j instanceof Mn?j.lookAhead:0)<=v.modeFrontier))return b;var Q=ee(P.text,null,i.options.tabSize);(f==null||c>Q)&&(f=b-1,c=Q)}return f}function zs(i,s){if(i.modeFrontier=Math.min(i.modeFrontier,s),!(i.highlightFrontier<s-10)){for(var u=i.first,c=s-1;c>u;c--){var f=he(i,c).stateAfter;if(f&&(!(f instanceof Mn)||c+f.lookAhead<s)){u=c+1;break}}i.highlightFrontier=Math.min(i.highlightFrontier,u)}}var aa=!1,fr=!1;function To(){aa=!0}function Jr(){fr=!0}function Zr(i,s,u){this.marker=i,this.from=s,this.to=u}function Xo(i,s){if(i)for(var u=0;u<i.length;++u){var c=i[u];if(c.marker==s)return c}}function sa(i,s){for(var u,c=0;c<i.length;++c)i[c]!=s&&(u||(u=[])).push(i[c]);return u}function Bs(i,s,u){var c=u&&window.WeakSet&&(u.markedSpans||(u.markedSpans=new WeakSet));c&&c.has(i.markedSpans)?i.markedSpans.push(s):(i.markedSpans=i.markedSpans?i.markedSpans.concat([s]):[s],c&&c.add(i.markedSpans)),s.marker.attachLine(i)}function Qr(i,s,u){var c;if(i)for(var f=0;f<i.length;++f){var v=i[f],y=v.marker;if(v.from==null||(y.inclusiveLeft?v.from<=s:v.from<s)||v.from==s&&y.type=="bookmark"&&(!u||!v.marker.insertLeft)){var b=v.to==null||(y.inclusiveRight?v.to>=s:v.to>s);(c||(c=[])).push(new Zr(y,v.from,b?null:v.to))}}return c}function Ws(i,s,u){var c;if(i)for(var f=0;f<i.length;++f){var v=i[f],y=v.marker;if(v.to==null||(y.inclusiveRight?v.to>=s:v.to>s)||v.from==s&&y.type=="bookmark"&&(!u||v.marker.insertLeft)){var b=v.from==null||(y.inclusiveLeft?v.from<=s:v.from<s);(c||(c=[])).push(new Zr(y,b?null:v.from-s,v.to==null?null:v.to-s))}}return c}function Tr(i,s){if(s.full)return null;var u=Io(i,s.from.line)&&he(i,s.from.line).markedSpans,c=Io(i,s.to.line)&&he(i,s.to.line).markedSpans;if(!u&&!c)return null;var f=s.from.ch,v=s.to.ch,y=ke(s.from,s.to)==0,b=Qr(u,f,y),P=Ws(c,v,y),j=s.text.length==1,Q=St(s.text).length+(j?f:0);if(b)for(var Z=0;Z<b.length;++Z){var mt=b[Z];if(mt.to==null){var yt=Xo(P,mt.marker);yt?j&&(mt.to=yt.to==null?null:yt.to+Q):mt.to=f}}if(P)for(var Dt=0;Dt<P.length;++Dt){var $t=P[Dt];$t.to!=null&&($t.to+=Q),$t.from==null?Xo(b,$t.marker)||($t.from=Q,j&&(b||(b=[])).push($t)):($t.from+=Q,j&&(b||(b=[])).push($t))}b&&(b=vi(b)),P&&P!=b&&(P=vi(P));var re=[b];if(!j){var ye,Ce=s.text.length-2;if(Ce>0&&b)for(var fe=0;fe<b.length;++fe)b[fe].to==null&&(ye||(ye=[])).push(new Zr(b[fe].marker,null,null));for(var Te=0;Te<Ce;++Te)re.push(ye);re.push(P)}return re}function vi(i){for(var s=0;s<i.length;++s){var u=i[s];u.from!=null&&u.from==u.to&&u.marker.clearWhenEmpty!==!1&&i.splice(s--,1)}return i.length?i:null}function la(i,s,u){var c=null;if(i.iter(s.line,u.line+1,function(yt){if(yt.markedSpans)for(var Dt=0;Dt<yt.markedSpans.length;++Dt){var $t=yt.markedSpans[Dt].marker;!$t.readOnly||c&&le(c,$t)!=-1||(c||(c=[])).push($t)}}),!c)return null;for(var f=[{from:s,to:u}],v=0;v<c.length;++v)for(var y=c[v],b=y.find(0),P=0;P<f.length;++P){var j=f[P];if(!(ke(j.to,b.from)<0||ke(j.from,b.to)>0)){var Q=[P,1],Z=ke(j.from,b.from),mt=ke(j.to,b.to);(Z<0||!y.inclusiveLeft&&!Z)&&Q.push({from:j.from,to:b.from}),(mt>0||!y.inclusiveRight&&!mt)&&Q.push({from:b.to,to:j.to}),f.splice.apply(f,Q),P+=Q.length-3}}return f}function no(i){var s=i.markedSpans;if(s){for(var u=0;u<s.length;++u)s[u].marker.detachLine(i);i.markedSpans=null}}function ca(i,s){if(s){for(var u=0;u<s.length;++u)s[u].marker.attachLine(i);i.markedSpans=s}}function mi(i){return i.inclusiveLeft?-1:0}function Pr(i){return i.inclusiveRight?1:0}function Jo(i,s){var u=i.lines.length-s.lines.length;if(u!=0)return u;var c=i.find(),f=s.find(),v=ke(c.from,f.from)||mi(i)-mi(s);if(v)return-v;var y=ke(c.to,f.to)||Pr(i)-Pr(s);return y||s.id-i.id}function Ho(i,s){var u,c=fr&&i.markedSpans;if(c)for(var f=void 0,v=0;v<c.length;++v)(f=c[v]).marker.collapsed&&(s?f.from:f.to)==null&&(!u||Jo(u,f.marker)<0)&&(u=f.marker);return u}function Zo(i){return Ho(i,!0)}function Er(i){return Ho(i,!1)}function ti(i,s){var u,c=fr&&i.markedSpans;if(c)for(var f=0;f<c.length;++f){var v=c[f];v.marker.collapsed&&(v.from==null||v.from<s)&&(v.to==null||v.to>s)&&(!u||Jo(u,v.marker)<0)&&(u=v.marker)}return u}function Fi(i,s,u,c,f){var v=he(i,s),y=fr&&v.markedSpans;if(y)for(var b=0;b<y.length;++b){var P=y[b];if(P.marker.collapsed){var j=P.marker.find(0),Q=ke(j.from,u)||mi(P.marker)-mi(f),Z=ke(j.to,c)||Pr(P.marker)-Pr(f);if(!(Q>=0&&Z<=0||Q<=0&&Z>=0)&&(Q<=0&&(P.marker.inclusiveRight&&f.inclusiveLeft?ke(j.to,u)>=0:ke(j.to,u)>0)||Q>=0&&(P.marker.inclusiveRight&&f.inclusiveLeft?ke(j.from,c)<=0:ke(j.from,c)<0)))return!0}}}function Yn(i){for(var s;s=Zo(i);)i=s.find(-1,!0).line;return i}function Ja(i){for(var s;s=Er(i);)i=s.find(1,!0).line;return i}function ua(i){for(var s,u;s=Er(i);)i=s.find(1,!0).line,(u||(u=[])).push(i);return u}function ei(i,s){var u=he(i,s),c=Yn(u);return u==c?s:nn(c)}function co(i,s){if(s>i.lastLine())return s;var u,c=he(i,s);if(!Uo(i,c))return s;for(;u=Er(c);)c=u.find(1,!0).line;return nn(c)+1}function Uo(i,s){var u=fr&&s.markedSpans;if(u){for(var c=void 0,f=0;f<u.length;++f)if((c=u[f]).marker.collapsed&&(c.from==null||!c.marker.widgetNode&&c.from==0&&c.marker.inclusiveLeft&&zr(i,s,c)))return!0}}function zr(i,s,u){if(u.to==null){var c=u.marker.find(1,!0);return zr(i,c.line,Xo(c.line.markedSpans,u.marker))}if(u.marker.inclusiveRight&&u.to==s.text.length)return!0;for(var f=void 0,v=0;v<s.markedSpans.length;++v)if((f=s.markedSpans[v]).marker.collapsed&&!f.marker.widgetNode&&f.from==u.to&&(f.to==null||f.to!=u.from)&&(f.marker.inclusiveLeft||u.marker.inclusiveRight)&&zr(i,s,f))return!0}function hr(i){for(var s=0,u=(i=Yn(i)).parent,c=0;c<u.lines.length;++c){var f=u.lines[c];if(f==i)break;s+=f.height}for(var v=u.parent;v;v=(u=v).parent)for(var y=0;y<v.children.length;++y){var b=v.children[y];if(b==u)break;s+=b.height}return s}function kr(i){if(i.height==0)return 0;for(var s,u=i.text.length,c=i;s=Zo(c);){var f=s.find(0,!0);c=f.from.line,u+=f.from.ch-f.to.ch}for(c=i;s=Er(c);){var v=s.find(0,!0);u-=c.text.length-v.from.ch,u+=(c=v.to.line).text.length-v.to.ch}return u}function pa(i){var s=i.display,u=i.doc;s.maxLine=he(u,u.first),s.maxLineLength=kr(s.maxLine),s.maxLineChanged=!0,u.iter(function(c){var f=kr(c);f>s.maxLineLength&&(s.maxLineLength=f,s.maxLine=c)})}var Qo=function(i,s,u){this.text=i,ca(this,s),this.height=u?u(this):1};function $s(i,s,u,c){i.text=s,i.stateAfter&&(i.stateAfter=null),i.styles&&(i.styles=null),i.order!=null&&(i.order=null),no(i),ca(i,u);var f=c?c(i):1;f!=i.height&&to(i,f)}function qs(i){i.parent=null,no(i)}Qo.prototype.lineNo=function(){return nn(this)},Le(Qo);var da={},Gs={};function yi(i,s){if(!i||/^\s*$/.test(i))return null;var u=s.addModeClass?Gs:da;return u[i]||(u[i]=i.replace(/\S+/g,"cm-$&"))}function Za(i,s){var u=xt("span",null,null,_?"padding-right: .1px":null),c={pre:xt("pre",[u],"CodeMirror-line"),content:u,col:0,pos:0,cm:i,trailingSpace:!1,splitSpaces:i.getOption("lineWrapping")};s.measure={};for(var f=0;f<=(s.rest?s.rest.length:0);f++){var v=f?s.rest[f-1]:s.line,y=void 0;c.pos=0,c.addToken=Jl,Jn(i.display.measure)&&(y=Ue(v,i.doc.direction))&&(c.addToken=Qa(c.addToken,y)),c.map=[],Hi(v,c,hi(i,v,s!=i.display.externalMeasured&&nn(v))),v.styleClasses&&(v.styleClasses.bgClass&&(c.bgClass=ne(v.styleClasses.bgClass,c.bgClass||"")),v.styleClasses.textClass&&(c.textClass=ne(v.styleClasses.textClass,c.textClass||""))),c.map.length==0&&c.map.push(0,0,c.content.appendChild(kn(i.display.measure))),f==0?(s.measure.map=c.map,s.measure.cache={}):((s.measure.maps||(s.measure.maps=[])).push(c.map),(s.measure.caches||(s.measure.caches=[])).push({}))}if(_){var b=c.content.lastChild;(/\bcm-tab\b/.test(b.className)||b.querySelector&&b.querySelector(".cm-tab"))&&(c.content.className="cm-tab-wrap-hack")}return rt(i,"renderLine",i,s.line,c.pre),c.pre.className&&(c.textClass=ne(c.pre.className,c.textClass||"")),c}function Je(i){var s=G("span","\u2022","cm-invalidchar");return s.title="\\u"+i.charCodeAt(0).toString(16),s.setAttribute("aria-label",s.title),s}function Jl(i,s,u,c,f,v,y){if(s){var b,P=i.splitSpaces?zo(s,i.trailingSpace):s,j=i.cm.state.specialChars,Q=!1;if(j.test(s)){b=document.createDocumentFragment();for(var Z=0;;){j.lastIndex=Z;var mt=j.exec(s),yt=mt?mt.index-Z:s.length-Z;if(yt){var Dt=document.createTextNode(P.slice(Z,Z+yt));H&&E<9?b.appendChild(G("span",[Dt])):b.appendChild(Dt),i.map.push(i.pos,i.pos+yt,Dt),i.col+=yt,i.pos+=yt}if(!mt)break;Z+=yt+1;var $t=void 0;if(mt[0]=="	"){var re=i.cm.options.tabSize,ye=re-i.col%re;($t=b.appendChild(G("span",de(ye),"cm-tab"))).setAttribute("role","presentation"),$t.setAttribute("cm-text","	"),i.col+=ye}else mt[0]=="\r"||mt[0]==`
`?(($t=b.appendChild(G("span",mt[0]=="\r"?"\u240D":"\u2424","cm-invalidchar"))).setAttribute("cm-text",mt[0]),i.col+=1):(($t=i.cm.options.specialCharPlaceholder(mt[0])).setAttribute("cm-text",mt[0]),H&&E<9?b.appendChild(G("span",[$t])):b.appendChild($t),i.col+=1);i.map.push(i.pos,i.pos+1,$t),i.pos++}}else i.col+=s.length,b=document.createTextNode(P),i.map.push(i.pos,i.pos+s.length,b),H&&E<9&&(Q=!0),i.pos+=s.length;if(i.trailingSpace=P.charCodeAt(s.length-1)==32,u||c||f||Q||v||y){var Ce=u||"";c&&(Ce+=c),f&&(Ce+=f);var fe=G("span",[b],Ce,v);if(y)for(var Te in y)y.hasOwnProperty(Te)&&Te!="style"&&Te!="class"&&fe.setAttribute(Te,y[Te]);return i.content.appendChild(fe)}i.content.appendChild(b)}}function zo(i,s){if(i.length>1&&!/  /.test(i))return i;for(var u=s,c="",f=0;f<i.length;f++){var v=i.charAt(f);v!=" "||!u||f!=i.length-1&&i.charCodeAt(f+1)!=32||(v="\xA0"),c+=v,u=v==" "}return c}function Qa(i,s){return function(u,c,f,v,y,b,P){f=f?f+" cm-force-border":"cm-force-border";for(var j=u.pos,Q=j+c.length;;){for(var Z=void 0,mt=0;mt<s.length&&!((Z=s[mt]).to>j&&Z.from<=j);mt++);if(Z.to>=Q)return i(u,c,f,v,y,b,P);i(u,c.slice(0,Z.to-j),f,v,null,b,P),v=null,c=c.slice(Z.to-j),j=Z.to}}}function Br(i,s,u,c){var f=!c&&u.widgetNode;f&&i.map.push(i.pos,i.pos+s,f),!c&&i.cm.display.input.needsContentAttribute&&(f||(f=i.content.appendChild(document.createElement("span"))),f.setAttribute("cm-marker",u.id)),f&&(i.cm.display.input.setUneditable(f),i.content.appendChild(f)),i.pos+=s,i.trailingSpace=!1}function Hi(i,s,u){var c=i.markedSpans,f=i.text,v=0;if(c)for(var y,b,P,j,Q,Z,mt,yt=f.length,Dt=0,$t=1,re="",ye=0;;){if(ye==Dt){P=j=Q=b="",mt=null,Z=null,ye=1/0;for(var Ce=[],fe=void 0,Te=0;Te<c.length;++Te){var Se=c[Te],Pe=Se.marker;if(Pe.type=="bookmark"&&Se.from==Dt&&Pe.widgetNode)Ce.push(Pe);else if(Se.from<=Dt&&(Se.to==null||Se.to>Dt||Pe.collapsed&&Se.to==Dt&&Se.from==Dt)){if(Se.to!=null&&Se.to!=Dt&&ye>Se.to&&(ye=Se.to,j=""),Pe.className&&(P+=" "+Pe.className),Pe.css&&(b=(b?b+";":"")+Pe.css),Pe.startStyle&&Se.from==Dt&&(Q+=" "+Pe.startStyle),Pe.endStyle&&Se.to==ye&&(fe||(fe=[])).push(Pe.endStyle,Se.to),Pe.title&&((mt||(mt={})).title=Pe.title),Pe.attributes)for(var yn in Pe.attributes)(mt||(mt={}))[yn]=Pe.attributes[yn];Pe.collapsed&&(!Z||Jo(Z.marker,Pe)<0)&&(Z=Se)}else Se.from>Dt&&ye>Se.from&&(ye=Se.from)}if(fe)for(var rn=0;rn<fe.length;rn+=2)fe[rn+1]==ye&&(j+=" "+fe[rn]);if(!Z||Z.from==Dt)for(var Wo=0;Wo<Ce.length;++Wo)Br(s,0,Ce[Wo]);if(Z&&(Z.from||0)==Dt){if(Br(s,(Z.to==null?yt+1:Z.to)-Dt,Z.marker,Z.from==null),Z.to==null)return;Z.to==Dt&&(Z=!1)}}if(Dt>=yt)break;for(var Tn=Math.min(yt,ye);;){if(re){var or=Dt+re.length;if(!Z){var $o=or>Tn?re.slice(0,Tn-Dt):re;s.addToken(s,$o,y?y+P:P,Q,Dt+$o.length==ye?j:"",b,mt)}if(or>=Tn){re=re.slice(Tn-Dt),Dt=Tn;break}Dt=or,Q=""}re=f.slice(v,v=u[$t++]),y=yi(u[$t++],s.cm.options)}}else for(var Ln=1;Ln<u.length;Ln+=2)s.addToken(s,f.slice(v,v=u[Ln]),yi(u[Ln+1],s.cm.options))}function oo(i,s,u){this.line=s,this.rest=ua(s),this.size=this.rest?nn(St(this.rest))-u+1:1,this.node=this.text=null,this.hidden=Uo(i,s)}function $n(i,s,u){for(var c,f=[],v=s;v<u;v=c){var y=new oo(i.doc,he(i.doc,v),v);c=v+y.size,f.push(y)}return f}var uo=null;function gr(i){uo?uo.ops.push(i):i.ownsGroup=uo={ops:[i],delayedCallbacks:[]}}function fa(i){var s=i.delayedCallbacks,u=0;do{for(;u<s.length;u++)s[u].call(null);for(var c=0;c<i.ops.length;c++){var f=i.ops[c];if(f.cursorActivityHandlers)for(;f.cursorActivityCalled<f.cursorActivityHandlers.length;)f.cursorActivityHandlers[f.cursorActivityCalled++].call(null,f.cm)}}while(u<s.length)}function Ks(i,s){var u=i.ownsGroup;if(u)try{fa(u)}finally{uo=null,s(u)}}var fn=null;function Dn(i,s){var u=vn(i,s);if(u.length){var c,f=Array.prototype.slice.call(arguments,2);uo?c=uo.delayedCallbacks:fn?c=fn:(c=fn=[],setTimeout(Ui,0));for(var v=function(b){c.push(function(){return u[b].apply(null,f)})},y=0;y<u.length;++y)v(y)}}function Ui(){var i=fn;fn=null;for(var s=0;s<i.length;++s)i[s]()}function tr(i,s,u,c){for(var f=0;f<s.changes.length;f++){var v=s.changes[f];v=="text"?Xs(i,s):v=="gutter"?Ar(i,s,u,c):v=="class"?zi(i,s):v=="widget"&&Js(i,s,c)}s.changes=null}function bi(i){return i.node==i.text&&(i.node=G("div",null,null,"position: relative"),i.text.parentNode&&i.text.parentNode.replaceChild(i.node,i.text),i.node.appendChild(i.text),H&&E<8&&(i.node.style.zIndex=2)),i.node}function Ys(i,s){var u=s.bgClass?s.bgClass+" "+(s.line.bgClass||""):s.line.bgClass;if(u&&(u+=" CodeMirror-linebackground"),s.background)u?s.background.className=u:(s.background.parentNode.removeChild(s.background),s.background=null);else if(u){var c=bi(s);s.background=c.insertBefore(G("div",null,u),c.firstChild),i.display.input.setUneditable(s.background)}}function _i(i,s){var u=i.display.externalMeasured;return u&&u.line==s.line?(i.display.externalMeasured=null,s.measure=u.measure,u.built):Za(i,s)}function Xs(i,s){var u=s.text.className,c=_i(i,s);s.text==s.node&&(s.node=c.pre),s.text.parentNode.replaceChild(c.pre,s.text),s.text=c.pre,c.bgClass!=s.bgClass||c.textClass!=s.textClass?(s.bgClass=c.bgClass,s.textClass=c.textClass,zi(i,s)):u&&(s.text.className=u)}function zi(i,s){Ys(i,s),s.line.wrapClass?bi(s).className=s.line.wrapClass:s.node!=s.text&&(s.node.className="");var u=s.textClass?s.textClass+" "+(s.line.textClass||""):s.line.textClass;s.text.className=u||""}function Ar(i,s,u,c){if(s.gutter&&(s.node.removeChild(s.gutter),s.gutter=null),s.gutterBackground&&(s.node.removeChild(s.gutterBackground),s.gutterBackground=null),s.line.gutterClass){var f=bi(s);s.gutterBackground=G("div",null,"CodeMirror-gutter-background "+s.line.gutterClass,"left: "+(i.options.fixedGutter?c.fixedPos:-c.gutterTotalWidth)+"px; width: "+c.gutterTotalWidth+"px"),i.display.input.setUneditable(s.gutterBackground),f.insertBefore(s.gutterBackground,s.text)}var v=s.line.gutterMarkers;if(i.options.lineNumbers||v){var y=bi(s),b=s.gutter=G("div",null,"CodeMirror-gutter-wrapper","left: "+(i.options.fixedGutter?c.fixedPos:-c.gutterTotalWidth)+"px");if(b.setAttribute("aria-hidden","true"),i.display.input.setUneditable(b),y.insertBefore(b,s.text),s.line.gutterClass&&(b.className+=" "+s.line.gutterClass),!i.options.lineNumbers||v&&v["CodeMirror-linenumbers"]||(s.lineNumber=b.appendChild(G("div",Yr(i.options,u),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+c.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+i.display.lineNumInnerWidth+"px"))),v)for(var P=0;P<i.display.gutterSpecs.length;++P){var j=i.display.gutterSpecs[P].className,Q=v.hasOwnProperty(j)&&v[j];Q&&b.appendChild(G("div",[Q],"CodeMirror-gutter-elt","left: "+c.gutterLeft[j]+"px; width: "+c.gutterWidth[j]+"px"))}}}function Js(i,s,u){s.alignable&&(s.alignable=null);for(var c=D("CodeMirror-linewidget"),f=s.node.firstChild,v=void 0;f;f=v)v=f.nextSibling,c.test(f.className)&&s.node.removeChild(f);ha(i,s,u)}function ts(i,s,u,c){var f=_i(i,s);return s.text=s.node=f.pre,f.bgClass&&(s.bgClass=f.bgClass),f.textClass&&(s.textClass=f.textClass),zi(i,s),Ar(i,s,u,c),ha(i,s,c),s.node}function ha(i,s,u){if(es(i,s.line,s,u,!0),s.rest)for(var c=0;c<s.rest.length;c++)es(i,s.rest[c],s,u,!1)}function es(i,s,u,c,f){if(s.widgets)for(var v=bi(u),y=0,b=s.widgets;y<b.length;++y){var P=b[y],j=G("div",[P.node],"CodeMirror-linewidget"+(P.className?" "+P.className:""));P.handleMouseEvents||j.setAttribute("cm-ignore-events","true"),Bi(P,j,u,c),i.display.input.setUneditable(j),f&&P.above?v.insertBefore(j,u.gutter||u.text):v.appendChild(j),Dn(P,"redraw")}}function Bi(i,s,u,c){if(i.noHScroll){(u.alignable||(u.alignable=[])).push(s);var f=c.wrapperWidth;s.style.left=c.fixedPos+"px",i.coverGutter||(f-=c.gutterTotalWidth,s.style.paddingLeft=c.gutterTotalWidth+"px"),s.style.width=f+"px"}i.coverGutter&&(s.style.zIndex=5,s.style.position="relative",i.noHScroll||(s.style.marginLeft=-c.gutterTotalWidth+"px"))}function Wi(i){if(i.height!=null)return i.height;var s=i.doc.cm;if(!s)return 0;if(!I(document.body,i.node)){var u="position: relative;";i.coverGutter&&(u+="margin-left: -"+s.display.gutters.offsetWidth+"px;"),i.noHScroll&&(u+="width: "+s.display.wrapper.clientWidth+"px;"),ht(s.display.measure,G("div",[i.node],null,u))}return i.height=i.node.parentNode.offsetHeight}function T(i,s){for(var u=go(s);u!=i.wrapper;u=u.parentNode)if(!u||u.nodeType==1&&u.getAttribute("cm-ignore-events")=="true"||u.parentNode==i.sizer&&u!=i.mover)return!0}function L(i){return i.lineSpace.offsetTop}function et(i){return i.mover.offsetHeight-i.lineSpace.offsetHeight}function at(i){if(i.cachedPaddingH)return i.cachedPaddingH;var s=ht(i.measure,G("pre","x","CodeMirror-line-like")),u=window.getComputedStyle?window.getComputedStyle(s):s.currentStyle,c={left:parseInt(u.paddingLeft),right:parseInt(u.paddingRight)};return isNaN(c.left)||isNaN(c.right)||(i.cachedPaddingH=c),c}function Ct(i){return ce-i.display.nativeBarWidth}function gt(i){return i.display.scroller.clientWidth-Ct(i)-i.display.barWidth}function Bt(i){return i.display.scroller.clientHeight-Ct(i)-i.display.barHeight}function ue(i,s,u){var c=i.options.lineWrapping,f=c&&gt(i);if(!s.measure.heights||c&&s.measure.width!=f){var v=s.measure.heights=[];if(c){s.measure.width=f;for(var y=s.text.firstChild.getClientRects(),b=0;b<y.length-1;b++){var P=y[b],j=y[b+1];Math.abs(P.bottom-j.bottom)>2&&v.push((P.bottom+j.top)/2-u.top)}}v.push(u.bottom-u.top)}}function Ne(i,s,u){if(i.line==s)return{map:i.measure.map,cache:i.measure.cache};for(var c=0;c<i.rest.length;c++)if(i.rest[c]==s)return{map:i.measure.maps[c],cache:i.measure.caches[c]};for(var f=0;f<i.rest.length;f++)if(nn(i.rest[f])>u)return{map:i.measure.maps[f],cache:i.measure.caches[f],before:!0}}function Ye(i,s){var u=nn(s=Yn(s)),c=i.display.externalMeasured=new oo(i.doc,s,u);c.lineN=u;var f=c.built=Za(i,c);return c.text=f.pre,ht(i.display.lineMeasure,f.pre),c}function un(i,s,u,c){return Po(i,po(i,s),u,c)}function mo(i,s){if(s>=i.display.viewFrom&&s<i.display.viewTo)return i.display.view[ni(i,s)];var u=i.display.externalMeasured;return u&&s>=u.lineN&&s<u.lineN+u.size?u:void 0}function po(i,s){var u=nn(s),c=mo(i,u);c&&!c.text?c=null:c&&c.changes&&(tr(i,c,u,nc(i)),i.curOp.forceUpdate=!0),c||(c=Ye(i,s));var f=Ne(c,s,u);return{line:s,view:c,rect:null,map:f.map,cache:f.cache,before:f.before,hasHeights:!1}}function Po(i,s,u,c,f){s.before&&(u=-1);var v,y=u+(c||"");return s.cache.hasOwnProperty(y)?v=s.cache[y]:(s.rect||(s.rect=s.view.text.getBoundingClientRect()),s.hasHeights||(ue(i,s.view,s.rect),s.hasHeights=!0),(v=Hp(i,s,u,c)).bogus||(s.cache[y]=v)),{left:v.left,right:v.right,top:f?v.rtop:v.top,bottom:f?v.rbottom:v.bottom}}var $i,ns={left:0,right:0,top:0,bottom:0};function Jc(i,s,u){for(var c,f,v,y,b,P,j=0;j<i.length;j+=3)if(b=i[j],P=i[j+1],s<b?(f=0,v=1,y="left"):s<P?v=(f=s-b)+1:(j==i.length-3||s==P&&i[j+3]>s)&&(f=(v=P-b)-1,s>=P&&(y="right")),f!=null){if(c=i[j+2],b==P&&u==(c.insertLeft?"left":"right")&&(y=u),u=="left"&&f==0)for(;j&&i[j-2]==i[j-3]&&i[j-1].insertLeft;)c=i[(j-=3)+2],y="left";if(u=="right"&&f==P-b)for(;j<i.length-3&&i[j+3]==i[j+4]&&!i[j+5].insertLeft;)c=i[(j+=3)+2],y="right";break}return{node:c,start:f,end:v,collapse:y,coverStart:b,coverEnd:P}}function Fp(i,s){var u=ns;if(s=="left")for(var c=0;c<i.length&&(u=i[c]).left==u.right;c++);else for(var f=i.length-1;f>=0&&(u=i[f]).left==u.right;f--);return u}function Hp(i,s,u,c){var f,v=Jc(s.map,u,c),y=v.node,b=v.start,P=v.end,j=v.collapse;if(y.nodeType==3){for(var Q=0;Q<4;Q++){for(;b&&J(s.line.text.charAt(v.coverStart+b));)--b;for(;v.coverStart+P<v.coverEnd&&J(s.line.text.charAt(v.coverStart+P));)++P;if((f=H&&E<9&&b==0&&P==v.coverEnd-v.coverStart?y.parentNode.getBoundingClientRect():Fp(W(y,b,P).getClientRects(),c)).left||f.right||b==0)break;P=b,b-=1,j="right"}H&&E<11&&(f=qi(i.display.measure,f))}else{var Z;b>0&&(j=c="right"),f=i.options.lineWrapping&&(Z=y.getClientRects()).length>1?Z[c=="right"?Z.length-1:0]:y.getBoundingClientRect()}if(H&&E<9&&!b&&(!f||!f.left&&!f.right)){var mt=y.parentNode.getClientRects()[0];f=mt?{left:mt.left,right:mt.left+wi(i.display),top:mt.top,bottom:mt.bottom}:ns}for(var yt=f.top-s.rect.top,Dt=f.bottom-s.rect.top,$t=(yt+Dt)/2,re=s.view.measure.heights,ye=0;ye<re.length-1&&!($t<re[ye]);ye++);var Ce=ye?re[ye-1]:0,fe=re[ye],Te={left:(j=="right"?f.right:f.left)-s.rect.left,right:(j=="left"?f.left:f.right)-s.rect.left,top:Ce,bottom:fe};return f.left||f.right||(Te.bogus=!0),i.options.singleCursorHeightPerLine||(Te.rtop=yt,Te.rbottom=Dt),Te}function qi(i,s){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!fi(i))return s;var u=screen.logicalXDPI/screen.deviceXDPI,c=screen.logicalYDPI/screen.deviceYDPI;return{left:s.left*u,right:s.right*u,top:s.top*c,bottom:s.bottom*c}}function Zc(i){if(i.measure&&(i.measure.cache={},i.measure.heights=null,i.rest))for(var s=0;s<i.rest.length;s++)i.measure.caches[s]={}}function Qc(i){i.display.externalMeasure=null,ot(i.display.lineMeasure);for(var s=0;s<i.display.view.length;s++)Zc(i.display.view[s])}function os(i){Qc(i),i.display.cachedCharWidth=i.display.cachedTextHeight=i.display.cachedPaddingH=null,i.options.lineWrapping||(i.display.maxLineChanged=!0),i.display.lineNumChars=null}function tu(){return x&&Tt?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function eu(){return x&&Tt?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function ga(i){var s=0;if(i.widgets)for(var u=0;u<i.widgets.length;++u)i.widgets[u].above&&(s+=Wi(i.widgets[u]));return s}function Zs(i,s,u,c,f){if(!f){var v=ga(s);u.top+=v,u.bottom+=v}if(c=="line")return u;c||(c="local");var y=hr(s);if(c=="local"?y+=L(i.display):y-=i.display.viewOffset,c=="page"||c=="window"){var b=i.display.lineSpace.getBoundingClientRect();y+=b.top+(c=="window"?0:eu());var P=b.left+(c=="window"?0:tu());u.left+=P,u.right+=P}return u.top+=y,u.bottom+=y,u}function Zl(i,s,u){if(u=="div")return s;var c=s.left,f=s.top;if(u=="page")c-=tu(),f-=eu();else if(u=="local"||!u){var v=i.display.sizer.getBoundingClientRect();c+=v.left,f+=v.top}var y=i.display.lineSpace.getBoundingClientRect();return{left:c-y.left,top:f-y.top}}function Qs(i,s,u,c,f){return c||(c=he(i.doc,s.line)),Zs(i,c,un(i,c,s.ch,f),u)}function er(i,s,u,c,f,v){function y(Dt,$t){var re=Po(i,f,Dt,$t?"right":"left",v);return $t?re.left=re.right:re.right=re.left,Zs(i,c,re,u)}c=c||he(i.doc,s.line),f||(f=po(i,c));var b=Ue(c,i.doc.direction),P=s.ch,j=s.sticky;if(P>=c.text.length?(P=c.text.length,j="before"):P<=0&&(P=0,j="after"),!b)return y(j=="before"?P-1:P,j=="before");function Q(Dt,$t,re){return y(re?Dt-1:Dt,b[$t].level==1!=re)}var Z=Ie(b,P,j),mt=Qt,yt=Q(P,Z,j=="before");return mt!=null&&(yt.other=Q(P,mt,j!="before")),yt}function nu(i,s){var u=0;s=ge(i.doc,s),i.options.lineWrapping||(u=wi(i.display)*s.ch);var c=he(i.doc,s.line),f=hr(c)+L(i.display);return{left:u,right:u,top:f,bottom:f+c.height}}function Ql(i,s,u,c,f){var v=Jt(i,s,u);return v.xRel=f,c&&(v.outside=c),v}function tc(i,s,u){var c=i.doc;if((u+=i.display.viewOffset)<0)return Ql(c.first,0,null,-1,-1);var f=Lo(c,u),v=c.first+c.size-1;if(f>v)return Ql(c.first+c.size-1,he(c,v).text.length,null,1,1);s<0&&(s=0);for(var y=he(c,f);;){var b=Up(i,y,f,s,u),P=ti(y,b.ch+(b.xRel>0||b.outside>0?1:0));if(!P)return b;var j=P.find(1);if(j.line==f)return j;y=he(c,f=j.line)}}function rs(i,s,u,c){c-=ga(s);var f=s.text.length,v=Vt(function(y){return Po(i,u,y-1).bottom<=c},f,0);return{begin:v,end:f=Vt(function(y){return Po(i,u,y).top>c},v,f)}}function tl(i,s,u,c){return u||(u=po(i,s)),rs(i,s,u,Zs(i,s,Po(i,u,c),"line").top)}function ec(i,s,u,c){return!(i.bottom<=u)&&(i.top>u||(c?i.left:i.right)>s)}function Up(i,s,u,c,f){f-=hr(s);var v=po(i,s),y=ga(s),b=0,P=s.text.length,j=!0,Q=Ue(s,i.doc.direction);if(Q){var Z=(i.options.lineWrapping?ou:el)(i,s,u,v,Q,c,f);b=(j=Z.level!=1)?Z.from:Z.to-1,P=j?Z.to:Z.from-1}var mt,yt,Dt=null,$t=null,re=Vt(function(Se){var Pe=Po(i,v,Se);return Pe.top+=y,Pe.bottom+=y,!!ec(Pe,c,f,!1)&&(Pe.top<=f&&Pe.left<=c&&(Dt=Se,$t=Pe),!0)},b,P),ye=!1;if($t){var Ce=c-$t.left<$t.right-c,fe=Ce==j;re=Dt+(fe?0:1),yt=fe?"after":"before",mt=Ce?$t.left:$t.right}else{j||re!=P&&re!=b||re++,yt=re==0?"after":re==s.text.length?"before":Po(i,v,re-(j?1:0)).bottom+y<=f==j?"after":"before";var Te=er(i,Jt(u,re,yt),"line",s,v);mt=Te.left,ye=f<Te.top?-1:f>=Te.bottom?1:0}return Ql(u,re=lt(s.text,re,1),yt,ye,c-mt)}function el(i,s,u,c,f,v,y){var b=Vt(function(Z){var mt=f[Z],yt=mt.level!=1;return ec(er(i,Jt(u,yt?mt.to:mt.from,yt?"before":"after"),"line",s,c),v,y,!0)},0,f.length-1),P=f[b];if(b>0){var j=P.level!=1,Q=er(i,Jt(u,j?P.from:P.to,j?"after":"before"),"line",s,c);ec(Q,v,y,!0)&&Q.top>y&&(P=f[b-1])}return P}function ou(i,s,u,c,f,v,y){var b=rs(i,s,c,y),P=b.begin,j=b.end;/\s/.test(s.text.charAt(j-1))&&j--;for(var Q=null,Z=null,mt=0;mt<f.length;mt++){var yt=f[mt];if(!(yt.from>=j||yt.to<=P)){var Dt=Po(i,c,yt.level!=1?Math.min(j,yt.to)-1:Math.max(P,yt.from)).right,$t=Dt<v?v-Dt+1e9:Dt-v;(!Q||Z>$t)&&(Q=yt,Z=$t)}}return Q||(Q=f[f.length-1]),Q.from<P&&(Q={from:P,to:Q.to,level:Q.level}),Q.to>j&&(Q={from:Q.from,to:j,level:Q.level}),Q}function va(i){if(i.cachedTextHeight!=null)return i.cachedTextHeight;if($i==null){$i=G("pre",null,"CodeMirror-line-like");for(var s=0;s<49;++s)$i.appendChild(document.createTextNode("x")),$i.appendChild(G("br"));$i.appendChild(document.createTextNode("x"))}ht(i.measure,$i);var u=$i.offsetHeight/50;return u>3&&(i.cachedTextHeight=u),ot(i.measure),u||1}function wi(i){if(i.cachedCharWidth!=null)return i.cachedCharWidth;var s=G("span","xxxxxxxxxx"),u=G("pre",[s],"CodeMirror-line-like");ht(i.measure,u);var c=s.getBoundingClientRect(),f=(c.right-c.left)/10;return f>2&&(i.cachedCharWidth=f),f||10}function nc(i){for(var s=i.display,u={},c={},f=s.gutters.clientLeft,v=s.gutters.firstChild,y=0;v;v=v.nextSibling,++y){var b=i.display.gutterSpecs[y].className;u[b]=v.offsetLeft+v.clientLeft+f,c[b]=v.clientWidth}return{fixedPos:ma(s),gutterTotalWidth:s.gutters.offsetWidth,gutterLeft:u,gutterWidth:c,wrapperWidth:s.wrapper.clientWidth}}function ma(i){return i.scroller.getBoundingClientRect().left-i.sizer.getBoundingClientRect().left}function nl(i){var s=va(i.display),u=i.options.lineWrapping,c=u&&Math.max(5,i.display.scroller.clientWidth/wi(i.display)-3);return function(f){if(Uo(i.doc,f))return 0;var v=0;if(f.widgets)for(var y=0;y<f.widgets.length;y++)f.widgets[y].height&&(v+=f.widgets[y].height);return u?v+(Math.ceil(f.text.length/c)||1)*s:v+s}}function oc(i){var s=i.doc,u=nl(i);s.iter(function(c){var f=u(c);f!=c.height&&to(c,f)})}function Wr(i,s,u,c){var f=i.display;if(!u&&go(s).getAttribute("cm-not-content")=="true")return null;var v,y,b=f.lineSpace.getBoundingClientRect();try{v=s.clientX-b.left,y=s.clientY-b.top}catch{return null}var P,j=tc(i,v,y);if(c&&j.xRel>0&&(P=he(i.doc,j.line).text).length==j.ch){var Q=ee(P,P.length,i.options.tabSize)-P.length;j=Jt(j.line,Math.max(0,Math.round((v-at(i.display).left)/wi(i.display))-Q))}return j}function ni(i,s){if(s>=i.display.viewTo||(s-=i.display.viewFrom)<0)return null;for(var u=i.display.view,c=0;c<u.length;c++)if((s-=u[c].size)<0)return c}function No(i,s,u,c){s==null&&(s=i.doc.first),u==null&&(u=i.doc.first+i.doc.size),c||(c=0);var f=i.display;if(c&&u<f.viewTo&&(f.updateLineNumbers==null||f.updateLineNumbers>s)&&(f.updateLineNumbers=s),i.curOp.viewChanged=!0,s>=f.viewTo)fr&&ei(i.doc,s)<f.viewTo&&jr(i);else if(u<=f.viewFrom)fr&&co(i.doc,u+c)>f.viewFrom?jr(i):(f.viewFrom+=c,f.viewTo+=c);else if(s<=f.viewFrom&&u>=f.viewTo)jr(i);else if(s<=f.viewFrom){var v=is(i,u,u+c,1);v?(f.view=f.view.slice(v.index),f.viewFrom=v.lineN,f.viewTo+=c):jr(i)}else if(u>=f.viewTo){var y=is(i,s,s,-1);y?(f.view=f.view.slice(0,y.index),f.viewTo=y.lineN):jr(i)}else{var b=is(i,s,s,-1),P=is(i,u,u+c,1);b&&P?(f.view=f.view.slice(0,b.index).concat($n(i,b.lineN,P.lineN)).concat(f.view.slice(P.index)),f.viewTo+=c):jr(i)}var j=f.externalMeasured;j&&(u<j.lineN?j.lineN+=c:s<j.lineN+j.size&&(f.externalMeasured=null))}function xi(i,s,u){i.curOp.viewChanged=!0;var c=i.display,f=i.display.externalMeasured;if(f&&s>=f.lineN&&s<f.lineN+f.size&&(c.externalMeasured=null),!(s<c.viewFrom||s>=c.viewTo)){var v=c.view[ni(i,s)];if(v.node!=null){var y=v.changes||(v.changes=[]);le(y,u)==-1&&y.push(u)}}}function jr(i){i.display.viewFrom=i.display.viewTo=i.doc.first,i.display.view=[],i.display.viewOffset=0}function is(i,s,u,c){var f,v=ni(i,s),y=i.display.view;if(!fr||u==i.doc.first+i.doc.size)return{index:v,lineN:u};for(var b=i.display.viewFrom,P=0;P<v;P++)b+=y[P].size;if(b!=s){if(c>0){if(v==y.length-1)return null;f=b+y[v].size-s,v++}else f=b-s;s+=f,u+=f}for(;ei(i.doc,u)!=u;){if(v==(c<0?0:y.length-1))return null;u+=c*y[v-(c<0?1:0)].size,v+=c}return{index:v,lineN:u}}function zp(i,s,u){var c=i.display;c.view.length==0||s>=c.viewTo||u<=c.viewFrom?(c.view=$n(i,s,u),c.viewFrom=s):(c.viewFrom>s?c.view=$n(i,s,c.viewFrom).concat(c.view):c.viewFrom<s&&(c.view=c.view.slice(ni(i,s))),c.viewFrom=s,c.viewTo<u?c.view=c.view.concat($n(i,c.viewTo,u)):c.viewTo>u&&(c.view=c.view.slice(0,ni(i,u)))),c.viewTo=u}function ru(i){for(var s=i.display.view,u=0,c=0;c<s.length;c++){var f=s[c];f.hidden||f.node&&!f.changes||++u}return u}function as(i){i.display.input.showSelection(i.display.input.prepareSelection())}function ss(i,s){s===void 0&&(s=!0);for(var u=i.doc,c={},f=c.cursors=document.createDocumentFragment(),v=c.selection=document.createDocumentFragment(),y=0;y<u.sel.ranges.length;y++)if(s||y!=u.sel.primIndex){var b=u.sel.ranges[y];if(!(b.from().line>=i.display.viewTo||b.to().line<i.display.viewFrom)){var P=b.empty();(P||i.options.showCursorWhenSelecting)&&iu(i,b.head,f),P||Bp(i,b,v)}}return c}function iu(i,s,u){var c=er(i,s,"div",null,null,!i.options.singleCursorHeightPerLine),f=u.appendChild(G("div","\xA0","CodeMirror-cursor"));if(f.style.left=c.left+"px",f.style.top=c.top+"px",f.style.height=Math.max(0,c.bottom-c.top)*i.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(i.getWrapperElement().className)){var v=Qs(i,s,"div",null,null);v.right-v.left>0&&(f.style.width=v.right-v.left+"px")}if(c.other){var y=u.appendChild(G("div","\xA0","CodeMirror-cursor CodeMirror-secondarycursor"));y.style.display="",y.style.left=c.other.left+"px",y.style.top=c.other.top+"px",y.style.height=.85*(c.other.bottom-c.other.top)+"px"}}function ol(i,s){return i.top-s.top||i.left-s.left}function Bp(i,s,u){var c=i.display,f=i.doc,v=document.createDocumentFragment(),y=at(i.display),b=y.left,P=Math.max(c.sizerWidth,gt(i)-c.sizer.offsetLeft)-y.right,j=f.direction=="ltr";function Q(fe,Te,Se,Pe){Te<0&&(Te=0),Te=Math.round(Te),Pe=Math.round(Pe),v.appendChild(G("div",null,"CodeMirror-selected","position: absolute; left: "+fe+`px;
                             top: `+Te+"px; width: "+(Se??P-fe)+`px;
                             height: `+(Pe-Te)+"px"))}function Z(fe,Te,Se){var Pe,yn,rn=he(f,fe),Wo=rn.text.length;function Tn(Ln,Eo){return Qs(i,Jt(fe,Ln),"div",rn,Eo)}function or(Ln,Eo,ko){var Ge=tl(i,rn,null,Ln),In=Eo=="ltr"==(ko=="after")?"left":"right";return Tn(ko=="after"?Ge.begin:Ge.end-(/\s/.test(rn.text.charAt(Ge.end-1))?2:1),In)[In]}var $o=Ue(rn,f.direction);return qt($o,Te||0,Se??Wo,function(Ln,Eo,ko,Ge){var In=ko=="ltr",Nn=Tn(Ln,In?"left":"right"),so=Tn(Eo-1,In?"right":"left"),Gr=Te==null&&Ln==0,Mr=Se==null&&Eo==Wo,fo=Ge==0,Vn=!$o||Ge==$o.length-1;if(so.top-Nn.top<=3){var Dl=(j?Mr:Gr)&&Vn,yr=(j?Gr:Mr)&&fo?b:(In?Nn:so).left,ki=Dl?P:(In?so:Nn).right;Q(yr,Nn.top,ki-yr,Nn.bottom)}else{var Ai,Ao,Ua,js;In?(Ai=j&&Gr&&fo?b:Nn.left,Ao=j?P:or(Ln,ko,"before"),Ua=j?b:or(Eo,ko,"after"),js=j&&Mr&&Vn?P:so.right):(Ai=j?or(Ln,ko,"before"):b,Ao=!j&&Gr&&fo?P:Nn.right,Ua=!j&&Mr&&Vn?b:so.left,js=j?or(Eo,ko,"after"):P),Q(Ai,Nn.top,Ao-Ai,Nn.bottom),Nn.bottom<so.top&&Q(b,Nn.bottom,null,so.top),Q(Ua,so.top,js-Ua,so.bottom)}(!Pe||ol(Nn,Pe)<0)&&(Pe=Nn),ol(so,Pe)<0&&(Pe=so),(!yn||ol(Nn,yn)<0)&&(yn=Nn),ol(so,yn)<0&&(yn=so)}),{start:Pe,end:yn}}var mt=s.from(),yt=s.to();if(mt.line==yt.line)Z(mt.line,mt.ch,yt.ch);else{var Dt=he(f,mt.line),$t=he(f,yt.line),re=Yn(Dt)==Yn($t),ye=Z(mt.line,mt.ch,re?Dt.text.length+1:null).end,Ce=Z(yt.line,re?0:null,yt.ch).start;re&&(ye.top<Ce.top-2?(Q(ye.right,ye.top,null,ye.bottom),Q(b,Ce.top,Ce.left,Ce.bottom)):Q(ye.right,ye.top,Ce.left-ye.right,ye.bottom)),ye.bottom<Ce.top&&Q(b,ye.bottom,null,Ce.top)}u.appendChild(v)}function ya(i){if(i.state.focused){var s=i.display;clearInterval(s.blinker);var u=!0;s.cursorDiv.style.visibility="",i.options.cursorBlinkRate>0?s.blinker=setInterval(function(){i.hasFocus()||oi(i),s.cursorDiv.style.visibility=(u=!u)?"":"hidden"},i.options.cursorBlinkRate):i.options.cursorBlinkRate<0&&(s.cursorDiv.style.visibility="hidden")}}function rl(i){i.hasFocus()||(i.display.input.focus(),i.state.focused||ic(i))}function rc(i){i.state.delayingBlurEvent=!0,setTimeout(function(){i.state.delayingBlurEvent&&(i.state.delayingBlurEvent=!1,i.state.focused&&oi(i))},100)}function ic(i,s){i.state.delayingBlurEvent&&!i.state.draggingText&&(i.state.delayingBlurEvent=!1),i.options.readOnly!="nocursor"&&(i.state.focused||(rt(i,"focus",i,s),i.state.focused=!0,Pt(i.display.wrapper,"CodeMirror-focused"),i.curOp||i.display.selForContextMenu==i.doc.sel||(i.display.input.reset(),_&&setTimeout(function(){return i.display.input.reset(!0)},20)),i.display.input.receivedFocus()),ya(i))}function oi(i,s){i.state.delayingBlurEvent||(i.state.focused&&(rt(i,"blur",i,s),i.state.focused=!1,K(i.display.wrapper,"CodeMirror-focused")),clearInterval(i.display.blinker),setTimeout(function(){i.state.focused||(i.display.shift=!1)},150))}function ba(i){for(var s=i.display,u=s.lineDiv.offsetTop,c=Math.max(0,s.scroller.getBoundingClientRect().top),f=s.lineDiv.getBoundingClientRect().top,v=0,y=0;y<s.view.length;y++){var b=s.view[y],P=i.options.lineWrapping,j=void 0,Q=0;if(!b.hidden){if(f+=b.line.height,H&&E<8){var Z=b.node.offsetTop+b.node.offsetHeight;j=Z-u,u=Z}else{var mt=b.node.getBoundingClientRect();j=mt.bottom-mt.top,!P&&b.text.firstChild&&(Q=b.text.firstChild.getBoundingClientRect().right-mt.left-1)}var yt=b.line.height-j;if((yt>.005||yt<-.005)&&(f<c&&(v-=yt),to(b.line,j),ac(b.line),b.rest))for(var Dt=0;Dt<b.rest.length;Dt++)ac(b.rest[Dt]);if(Q>i.display.sizerWidth){var $t=Math.ceil(Q/wi(i.display));$t>i.display.maxLineLength&&(i.display.maxLineLength=$t,i.display.maxLine=b.line,i.display.maxLineChanged=!0)}}}Math.abs(v)>2&&(s.scroller.scrollTop+=v)}function ac(i){if(i.widgets)for(var s=0;s<i.widgets.length;++s){var u=i.widgets[s],c=u.node.parentNode;c&&(u.height=c.offsetHeight)}}function il(i,s,u){var c=u&&u.top!=null?Math.max(0,u.top):i.scroller.scrollTop;c=Math.floor(c-L(i));var f=u&&u.bottom!=null?u.bottom:c+i.wrapper.clientHeight,v=Lo(s,c),y=Lo(s,f);if(u&&u.ensure){var b=u.ensure.from.line,P=u.ensure.to.line;b<v?(v=b,y=Lo(s,hr(he(s,b))+i.wrapper.clientHeight)):Math.min(P,s.lastLine())>=y&&(v=Lo(s,hr(he(s,P))-i.wrapper.clientHeight),y=P)}return{from:v,to:Math.max(y,v+1)}}function al(i,s){if(!dt(i,"scrollCursorIntoView")){var u=i.display,c=u.sizer.getBoundingClientRect(),f=null;if(s.top+c.top<0?f=!0:s.bottom+c.top>(window.innerHeight||document.documentElement.clientHeight)&&(f=!1),f!=null&&!st){var v=G("div","\u200B",null,`position: absolute;
                         top: `+(s.top-u.viewOffset-L(i.display))+`px;
                         height: `+(s.bottom-s.top+Ct(i)+u.barHeight)+`px;
                         left: `+s.left+"px; width: "+Math.max(2,s.right-s.left)+"px;");i.display.lineSpace.appendChild(v),v.scrollIntoView(f),i.display.lineSpace.removeChild(v)}}}function Wp(i,s,u,c){var f;c==null&&(c=0),i.options.lineWrapping||s!=u||(u=s.sticky=="before"?Jt(s.line,s.ch+1,"before"):s,s=s.ch?Jt(s.line,s.sticky=="before"?s.ch-1:s.ch,"after"):s);for(var v=0;v<5;v++){var y=!1,b=er(i,s),P=u&&u!=s?er(i,u):b,j=_a(i,f={left:Math.min(b.left,P.left),top:Math.min(b.top,P.top)-c,right:Math.max(b.left,P.left),bottom:Math.max(b.bottom,P.bottom)+c}),Q=i.doc.scrollTop,Z=i.doc.scrollLeft;if(j.scrollTop!=null&&(us(i,j.scrollTop),Math.abs(i.doc.scrollTop-Q)>1&&(y=!0)),j.scrollLeft!=null&&(Gi(i,j.scrollLeft),Math.abs(i.doc.scrollLeft-Z)>1&&(y=!0)),!y)break}return f}function $p(i,s){var u=_a(i,s);u.scrollTop!=null&&us(i,u.scrollTop),u.scrollLeft!=null&&Gi(i,u.scrollLeft)}function _a(i,s){var u=i.display,c=va(i.display);s.top<0&&(s.top=0);var f=i.curOp&&i.curOp.scrollTop!=null?i.curOp.scrollTop:u.scroller.scrollTop,v=Bt(i),y={};s.bottom-s.top>v&&(s.bottom=s.top+v);var b=i.doc.height+et(u),P=s.top<c,j=s.bottom>b-c;if(s.top<f)y.scrollTop=P?0:s.top;else if(s.bottom>f+v){var Q=Math.min(s.top,(j?b:s.bottom)-v);Q!=f&&(y.scrollTop=Q)}var Z=i.options.fixedGutter?0:u.gutters.offsetWidth,mt=i.curOp&&i.curOp.scrollLeft!=null?i.curOp.scrollLeft:u.scroller.scrollLeft-Z,yt=gt(i)-u.gutters.offsetWidth,Dt=s.right-s.left>yt;return Dt&&(s.right=s.left+yt),s.left<10?y.scrollLeft=0:s.left<mt?y.scrollLeft=Math.max(0,s.left+Z-(Dt?0:10)):s.right>yt+mt-3&&(y.scrollLeft=s.right+(Dt?0:10)-yt),y}function ls(i,s){s!=null&&(xa(i),i.curOp.scrollTop=(i.curOp.scrollTop==null?i.doc.scrollTop:i.curOp.scrollTop)+s)}function wa(i){xa(i);var s=i.getCursor();i.curOp.scrollToPos={from:s,to:s,margin:i.options.cursorScrollMargin}}function cs(i,s,u){s==null&&u==null||xa(i),s!=null&&(i.curOp.scrollLeft=s),u!=null&&(i.curOp.scrollTop=u)}function sl(i,s){xa(i),i.curOp.scrollToPos=s}function xa(i){var s=i.curOp.scrollToPos;s&&(i.curOp.scrollToPos=null,ll(i,nu(i,s.from),nu(i,s.to),s.margin))}function ll(i,s,u,c){var f=_a(i,{left:Math.min(s.left,u.left),top:Math.min(s.top,u.top)-c,right:Math.max(s.right,u.right),bottom:Math.max(s.bottom,u.bottom)+c});cs(i,f.scrollLeft,f.scrollTop)}function us(i,s){Math.abs(i.doc.scrollTop-s)<2||($||dl(i,{top:s}),ps(i,s,!0),$&&dl(i),hs(i,100))}function ps(i,s,u){s=Math.max(0,Math.min(i.display.scroller.scrollHeight-i.display.scroller.clientHeight,s)),(i.display.scroller.scrollTop!=s||u)&&(i.doc.scrollTop=s,i.display.scrollbars.setScrollTop(s),i.display.scroller.scrollTop!=s&&(i.display.scroller.scrollTop=s))}function Gi(i,s,u,c){s=Math.max(0,Math.min(s,i.display.scroller.scrollWidth-i.display.scroller.clientWidth)),(u?s==i.doc.scrollLeft:Math.abs(i.doc.scrollLeft-s)<2)&&!c||(i.doc.scrollLeft=s,wn(i),i.display.scroller.scrollLeft!=s&&(i.display.scroller.scrollLeft=s),i.display.scrollbars.setScrollLeft(s))}function ds(i){var s=i.display,u=s.gutters.offsetWidth,c=Math.round(i.doc.height+et(i.display));return{clientHeight:s.scroller.clientHeight,viewHeight:s.wrapper.clientHeight,scrollWidth:s.scroller.scrollWidth,clientWidth:s.scroller.clientWidth,viewWidth:s.wrapper.clientWidth,barLeft:i.options.fixedGutter?u:0,docHeight:c,scrollHeight:c+Ct(i)+s.barHeight,nativeBarWidth:s.nativeBarWidth,gutterWidth:u}}var $r=function(i,s,u){this.cm=u;var c=this.vert=G("div",[G("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),f=this.horiz=G("div",[G("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");c.tabIndex=f.tabIndex=-1,i(c),i(f),se(c,"scroll",function(){c.clientHeight&&s(c.scrollTop,"vertical")}),se(f,"scroll",function(){f.clientWidth&&s(f.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,H&&E<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};$r.prototype.update=function(i){var s=i.scrollWidth>i.clientWidth+1,u=i.scrollHeight>i.clientHeight+1,c=i.nativeBarWidth;if(u){this.vert.style.display="block",this.vert.style.bottom=s?c+"px":"0";var f=i.viewHeight-(s?c:0);this.vert.firstChild.style.height=Math.max(0,i.scrollHeight-i.clientHeight+f)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(s){this.horiz.style.display="block",this.horiz.style.right=u?c+"px":"0",this.horiz.style.left=i.barLeft+"px";var v=i.viewWidth-i.barLeft-(u?c:0);this.horiz.firstChild.style.width=Math.max(0,i.scrollWidth-i.clientWidth+v)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&i.clientHeight>0&&(c==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:u?c:0,bottom:s?c:0}},$r.prototype.setScrollLeft=function(i){this.horiz.scrollLeft!=i&&(this.horiz.scrollLeft=i),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},$r.prototype.setScrollTop=function(i){this.vert.scrollTop!=i&&(this.vert.scrollTop=i),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},$r.prototype.zeroWidthHack=function(){var i=vt&&!Y?"12px":"18px";this.horiz.style.height=this.vert.style.width=i,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new Zt,this.disableVert=new Zt},$r.prototype.enableZeroWidthBar=function(i,s,u){function c(){var f=i.getBoundingClientRect();(u=="vert"?document.elementFromPoint(f.right-1,(f.top+f.bottom)/2):document.elementFromPoint((f.right+f.left)/2,f.bottom-1))!=i?i.style.pointerEvents="none":s.set(1e3,c)}i.style.pointerEvents="auto",s.set(1e3,c)},$r.prototype.clear=function(){var i=this.horiz.parentNode;i.removeChild(this.horiz),i.removeChild(this.vert)};var Ki=function(){};function Ca(i,s){s||(s=ds(i));var u=i.display.barWidth,c=i.display.barHeight;au(i,s);for(var f=0;f<4&&u!=i.display.barWidth||c!=i.display.barHeight;f++)u!=i.display.barWidth&&i.options.lineWrapping&&ba(i),au(i,ds(i)),u=i.display.barWidth,c=i.display.barHeight}function au(i,s){var u=i.display,c=u.scrollbars.update(s);u.sizer.style.paddingRight=(u.barWidth=c.right)+"px",u.sizer.style.paddingBottom=(u.barHeight=c.bottom)+"px",u.heightForcer.style.borderBottom=c.bottom+"px solid transparent",c.right&&c.bottom?(u.scrollbarFiller.style.display="block",u.scrollbarFiller.style.height=c.bottom+"px",u.scrollbarFiller.style.width=c.right+"px"):u.scrollbarFiller.style.display="",c.bottom&&i.options.coverGutterNextToScrollbar&&i.options.fixedGutter?(u.gutterFiller.style.display="block",u.gutterFiller.style.height=c.bottom+"px",u.gutterFiller.style.width=s.gutterWidth+"px"):u.gutterFiller.style.display=""}Ki.prototype.update=function(){return{bottom:0,right:0}},Ki.prototype.setScrollLeft=function(){},Ki.prototype.setScrollTop=function(){},Ki.prototype.clear=function(){};var fs={native:$r,null:Ki};function cl(i){i.display.scrollbars&&(i.display.scrollbars.clear(),i.display.scrollbars.addClass&&K(i.display.wrapper,i.display.scrollbars.addClass)),i.display.scrollbars=new fs[i.options.scrollbarStyle](function(s){i.display.wrapper.insertBefore(s,i.display.scrollbarFiller),se(s,"mousedown",function(){i.state.focused&&setTimeout(function(){return i.display.input.focus()},0)}),s.setAttribute("cm-not-content","true")},function(s,u){u=="horizontal"?Gi(i,s):us(i,s)},i),i.display.scrollbars.addClass&&Pt(i.display.wrapper,i.display.scrollbars.addClass)}var qp=0;function Yi(i){i.curOp={cm:i,viewChanged:!1,startHeight:i.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++qp,markArrays:null},gr(i.curOp)}function qr(i){var s=i.curOp;s&&Ks(s,function(u){for(var c=0;c<u.ops.length;c++)u.ops[c].cm.curOp=null;su(u)})}function su(i){for(var s=i.ops,u=0;u<s.length;u++)Gp(s[u]);for(var c=0;c<s.length;c++)Kp(s[c]);for(var f=0;f<s.length;f++)ul(s[f]);for(var v=0;v<s.length;v++)sc(s[v]);for(var y=0;y<s.length;y++)Sa(s[y])}function Gp(i){var s=i.cm,u=s.display;Oa(s),i.updateMaxLine&&pa(s),i.mustUpdate=i.viewChanged||i.forceUpdate||i.scrollTop!=null||i.scrollToPos&&(i.scrollToPos.from.line<u.viewFrom||i.scrollToPos.to.line>=u.viewTo)||u.maxLineChanged&&s.options.lineWrapping,i.update=i.mustUpdate&&new pl(s,i.mustUpdate&&{top:i.scrollTop,ensure:i.scrollToPos},i.forceUpdate)}function Kp(i){i.updatedDisplay=i.mustUpdate&&lc(i.cm,i.update)}function ul(i){var s=i.cm,u=s.display;i.updatedDisplay&&ba(s),i.barMeasure=ds(s),u.maxLineChanged&&!s.options.lineWrapping&&(i.adjustWidthTo=un(s,u.maxLine,u.maxLine.text.length).left+3,s.display.sizerWidth=i.adjustWidthTo,i.barMeasure.scrollWidth=Math.max(u.scroller.clientWidth,u.sizer.offsetLeft+i.adjustWidthTo+Ct(s)+s.display.barWidth),i.maxScrollLeft=Math.max(0,u.sizer.offsetLeft+i.adjustWidthTo-gt(s))),(i.updatedDisplay||i.selectionChanged)&&(i.preparedSelection=u.input.prepareSelection())}function sc(i){var s=i.cm;i.adjustWidthTo!=null&&(s.display.sizer.style.minWidth=i.adjustWidthTo+"px",i.maxScrollLeft<s.doc.scrollLeft&&Gi(s,Math.min(s.display.scroller.scrollLeft,i.maxScrollLeft),!0),s.display.maxLineChanged=!1);var u=i.focus&&i.focus==Nt();i.preparedSelection&&s.display.input.showSelection(i.preparedSelection,u),(i.updatedDisplay||i.startHeight!=s.doc.height)&&Ca(s,i.barMeasure),i.updatedDisplay&&cc(s,i.barMeasure),i.selectionChanged&&ya(s),s.state.focused&&i.updateInput&&s.display.input.reset(i.typing),u&&rl(i.cm)}function Sa(i){var s=i.cm,u=s.display,c=s.doc;i.updatedDisplay&&lu(s,i.update),u.wheelStartX==null||i.scrollTop==null&&i.scrollLeft==null&&!i.scrollToPos||(u.wheelStartX=u.wheelStartY=null),i.scrollTop!=null&&ps(s,i.scrollTop,i.forceScroll),i.scrollLeft!=null&&Gi(s,i.scrollLeft,!0,!0),i.scrollToPos&&al(s,Wp(s,ge(c,i.scrollToPos.from),ge(c,i.scrollToPos.to),i.scrollToPos.margin));var f=i.maybeHiddenMarkers,v=i.maybeUnhiddenMarkers;if(f)for(var y=0;y<f.length;++y)f[y].lines.length||rt(f[y],"hide");if(v)for(var b=0;b<v.length;++b)v[b].lines.length&&rt(v[b],"unhide");u.wrapper.offsetHeight&&(c.scrollTop=s.display.scroller.scrollTop),i.changeObjs&&rt(s,"changes",s,i.changeObjs),i.update&&i.update.finish()}function ro(i,s){if(i.curOp)return s();Yi(i);try{return s()}finally{qr(i)}}function An(i,s){return function(){if(i.curOp)return s.apply(i,arguments);Yi(i);try{return s.apply(i,arguments)}finally{qr(i)}}}function yo(i){return function(){if(this.curOp)return i.apply(this,arguments);Yi(this);try{return i.apply(this,arguments)}finally{qr(this)}}}function qn(i){return function(){var s=this.cm;if(!s||s.curOp)return i.apply(this,arguments);Yi(s);try{return i.apply(this,arguments)}finally{qr(s)}}}function hs(i,s){i.doc.highlightFrontier<i.display.viewTo&&i.state.highlight.set(s,Ut(Yp,i))}function Yp(i){var s=i.doc;if(!(s.highlightFrontier>=i.display.viewTo)){var u=+new Date+i.options.workTime,c=Rr(i,s.highlightFrontier),f=[];s.iter(c.line,Math.min(s.first+s.size,i.display.viewTo+500),function(v){if(c.line>=i.display.viewFrom){var y=v.styles,b=v.text.length>i.options.maxHighlightLength?Cn(s.mode,c.state):null,P=Xr(i,v,c,!0);b&&(c.state=b),v.styles=P.styles;var j=v.styleClasses,Q=P.classes;Q?v.styleClasses=Q:j&&(v.styleClasses=null);for(var Z=!y||y.length!=v.styles.length||j!=Q&&(!j||!Q||j.bgClass!=Q.bgClass||j.textClass!=Q.textClass),mt=0;!Z&&mt<y.length;++mt)Z=y[mt]!=v.styles[mt];Z&&f.push(c.line),v.stateAfter=c.save(),c.nextLine()}else v.text.length<=i.options.maxHighlightLength&&Fr(i,v.text,c),v.stateAfter=c.line%5==0?c.save():null,c.nextLine();if(+new Date>u)return hs(i,i.options.workDelay),!0}),s.highlightFrontier=c.line,s.modeFrontier=Math.max(s.modeFrontier,c.line),f.length&&ro(i,function(){for(var v=0;v<f.length;v++)xi(i,f[v],"text")})}}var pl=function(i,s,u){var c=i.display;this.viewport=s,this.visible=il(c,i.doc,s),this.editorIsHidden=!c.wrapper.offsetWidth,this.wrapperHeight=c.wrapper.clientHeight,this.wrapperWidth=c.wrapper.clientWidth,this.oldDisplayWidth=gt(i),this.force=u,this.dims=nc(i),this.events=[]};function Oa(i){var s=i.display;!s.scrollbarsClipped&&s.scroller.offsetWidth&&(s.nativeBarWidth=s.scroller.offsetWidth-s.scroller.clientWidth,s.heightForcer.style.height=Ct(i)+"px",s.sizer.style.marginBottom=-s.nativeBarWidth+"px",s.sizer.style.borderRightWidth=Ct(i)+"px",s.scrollbarsClipped=!0)}function Xp(i){if(i.hasFocus())return null;var s=Nt();if(!s||!I(i.display.lineDiv,s))return null;var u={activeElt:s};if(window.getSelection){var c=window.getSelection();c.anchorNode&&c.extend&&I(i.display.lineDiv,c.anchorNode)&&(u.anchorNode=c.anchorNode,u.anchorOffset=c.anchorOffset,u.focusNode=c.focusNode,u.focusOffset=c.focusOffset)}return u}function Jp(i){if(i&&i.activeElt&&i.activeElt!=Nt()&&(i.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(i.activeElt.nodeName)&&i.anchorNode&&I(document.body,i.anchorNode)&&I(document.body,i.focusNode))){var s=window.getSelection(),u=document.createRange();u.setEnd(i.anchorNode,i.anchorOffset),u.collapse(!1),s.removeAllRanges(),s.addRange(u),s.extend(i.focusNode,i.focusOffset)}}function lc(i,s){var u=i.display,c=i.doc;if(s.editorIsHidden)return jr(i),!1;if(!s.force&&s.visible.from>=u.viewFrom&&s.visible.to<=u.viewTo&&(u.updateLineNumbers==null||u.updateLineNumbers>=u.viewTo)&&u.renderedView==u.view&&ru(i)==0)return!1;cu(i)&&(jr(i),s.dims=nc(i));var f=c.first+c.size,v=Math.max(s.visible.from-i.options.viewportMargin,c.first),y=Math.min(f,s.visible.to+i.options.viewportMargin);u.viewFrom<v&&v-u.viewFrom<20&&(v=Math.max(c.first,u.viewFrom)),u.viewTo>y&&u.viewTo-y<20&&(y=Math.min(f,u.viewTo)),fr&&(v=ei(i.doc,v),y=co(i.doc,y));var b=v!=u.viewFrom||y!=u.viewTo||u.lastWrapHeight!=s.wrapperHeight||u.lastWrapWidth!=s.wrapperWidth;zp(i,v,y),u.viewOffset=hr(he(i.doc,u.viewFrom)),i.display.mover.style.top=u.viewOffset+"px";var P=ru(i);if(!b&&P==0&&!s.force&&u.renderedView==u.view&&(u.updateLineNumbers==null||u.updateLineNumbers>=u.viewTo))return!1;var j=Xp(i);return P>4&&(u.lineDiv.style.display="none"),Zp(i,u.updateLineNumbers,s.dims),P>4&&(u.lineDiv.style.display=""),u.renderedView=u.view,Jp(j),ot(u.cursorDiv),ot(u.selectionDiv),u.gutters.style.height=u.sizer.style.minHeight=0,b&&(u.lastWrapHeight=s.wrapperHeight,u.lastWrapWidth=s.wrapperWidth,hs(i,400)),u.updateLineNumbers=null,!0}function lu(i,s){for(var u=s.viewport,c=!0;;c=!1){if(c&&i.options.lineWrapping&&s.oldDisplayWidth!=gt(i))c&&(s.visible=il(i.display,i.doc,u));else if(u&&u.top!=null&&(u={top:Math.min(i.doc.height+et(i.display)-Bt(i),u.top)}),s.visible=il(i.display,i.doc,u),s.visible.from>=i.display.viewFrom&&s.visible.to<=i.display.viewTo)break;if(!lc(i,s))break;ba(i);var f=ds(i);as(i),Ca(i,f),cc(i,f),s.force=!1}s.signal(i,"update",i),i.display.viewFrom==i.display.reportedViewFrom&&i.display.viewTo==i.display.reportedViewTo||(s.signal(i,"viewportChange",i,i.display.viewFrom,i.display.viewTo),i.display.reportedViewFrom=i.display.viewFrom,i.display.reportedViewTo=i.display.viewTo)}function dl(i,s){var u=new pl(i,s);if(lc(i,u)){ba(i),lu(i,u);var c=ds(i);as(i),Ca(i,c),cc(i,c),u.finish()}}function Zp(i,s,u){var c=i.display,f=i.options.lineNumbers,v=c.lineDiv,y=v.firstChild;function b(Dt){var $t=Dt.nextSibling;return _&&vt&&i.display.currentWheelTarget==Dt?Dt.style.display="none":Dt.parentNode.removeChild(Dt),$t}for(var P=c.view,j=c.viewFrom,Q=0;Q<P.length;Q++){var Z=P[Q];if(!Z.hidden)if(Z.node&&Z.node.parentNode==v){for(;y!=Z.node;)y=b(y);var mt=f&&s!=null&&s<=j&&Z.lineNumber;Z.changes&&(le(Z.changes,"gutter")>-1&&(mt=!1),tr(i,Z,j,u)),mt&&(ot(Z.lineNumber),Z.lineNumber.appendChild(document.createTextNode(Yr(i.options,j)))),y=Z.node.nextSibling}else{var yt=ts(i,Z,j,u);v.insertBefore(yt,y)}j+=Z.size}for(;y;)y=b(y)}function vr(i){var s=i.gutters.offsetWidth;i.sizer.style.marginLeft=s+"px",Dn(i,"gutterChanged",i)}function cc(i,s){i.display.sizer.style.minHeight=s.docHeight+"px",i.display.heightForcer.style.top=s.docHeight+"px",i.display.gutters.style.height=s.docHeight+i.display.barHeight+Ct(i)+"px"}function wn(i){var s=i.display,u=s.view;if(s.alignWidgets||s.gutters.firstChild&&i.options.fixedGutter){for(var c=ma(s)-s.scroller.scrollLeft+i.doc.scrollLeft,f=s.gutters.offsetWidth,v=c+"px",y=0;y<u.length;y++)if(!u[y].hidden){i.options.fixedGutter&&(u[y].gutter&&(u[y].gutter.style.left=v),u[y].gutterBackground&&(u[y].gutterBackground.style.left=v));var b=u[y].alignable;if(b)for(var P=0;P<b.length;P++)b[P].style.left=v}i.options.fixedGutter&&(s.gutters.style.left=c+f+"px")}}function cu(i){if(!i.options.lineNumbers)return!1;var s=i.doc,u=Yr(i.options,s.first+s.size-1),c=i.display;if(u.length!=c.lineNumChars){var f=c.measure.appendChild(G("div",[G("div",u)],"CodeMirror-linenumber CodeMirror-gutter-elt")),v=f.firstChild.offsetWidth,y=f.offsetWidth-v;return c.lineGutter.style.width="",c.lineNumInnerWidth=Math.max(v,c.lineGutter.offsetWidth-y)+1,c.lineNumWidth=c.lineNumInnerWidth+y,c.lineNumChars=c.lineNumInnerWidth?u.length:-1,c.lineGutter.style.width=c.lineNumWidth+"px",vr(i.display),!0}return!1}function fl(i,s){for(var u=[],c=!1,f=0;f<i.length;f++){var v=i[f],y=null;if(typeof v!="string"&&(y=v.style,v=v.className),v=="CodeMirror-linenumbers"){if(!s)continue;c=!0}u.push({className:v,style:y})}return s&&!c&&u.push({className:"CodeMirror-linenumbers",style:null}),u}function uu(i){var s=i.gutters,u=i.gutterSpecs;ot(s),i.lineGutter=null;for(var c=0;c<u.length;++c){var f=u[c],v=f.className,y=f.style,b=s.appendChild(G("div",null,"CodeMirror-gutter "+v));y&&(b.style.cssText=y),v=="CodeMirror-linenumbers"&&(i.lineGutter=b,b.style.width=(i.lineNumWidth||1)+"px")}s.style.display=u.length?"":"none",vr(i)}function gs(i){uu(i.display),No(i),wn(i)}function Qp(i,s,u,c){var f=this;this.input=u,f.scrollbarFiller=G("div",null,"CodeMirror-scrollbar-filler"),f.scrollbarFiller.setAttribute("cm-not-content","true"),f.gutterFiller=G("div",null,"CodeMirror-gutter-filler"),f.gutterFiller.setAttribute("cm-not-content","true"),f.lineDiv=xt("div",null,"CodeMirror-code"),f.selectionDiv=G("div",null,null,"position: relative; z-index: 1"),f.cursorDiv=G("div",null,"CodeMirror-cursors"),f.measure=G("div",null,"CodeMirror-measure"),f.lineMeasure=G("div",null,"CodeMirror-measure"),f.lineSpace=xt("div",[f.measure,f.lineMeasure,f.selectionDiv,f.cursorDiv,f.lineDiv],null,"position: relative; outline: none");var v=xt("div",[f.lineSpace],"CodeMirror-lines");f.mover=G("div",[v],null,"position: relative"),f.sizer=G("div",[f.mover],"CodeMirror-sizer"),f.sizerWidth=null,f.heightForcer=G("div",null,null,"position: absolute; height: "+ce+"px; width: 1px;"),f.gutters=G("div",null,"CodeMirror-gutters"),f.lineGutter=null,f.scroller=G("div",[f.sizer,f.heightForcer,f.gutters],"CodeMirror-scroll"),f.scroller.setAttribute("tabIndex","-1"),f.wrapper=G("div",[f.scrollbarFiller,f.gutterFiller,f.scroller],"CodeMirror"),f.wrapper.setAttribute("translate","no"),H&&E<8&&(f.gutters.style.zIndex=-1,f.scroller.style.paddingRight=0),_||$&&Et||(f.scroller.draggable=!0),i&&(i.appendChild?i.appendChild(f.wrapper):i(f.wrapper)),f.viewFrom=f.viewTo=s.first,f.reportedViewFrom=f.reportedViewTo=s.first,f.view=[],f.renderedView=null,f.externalMeasured=null,f.viewOffset=0,f.lastWrapHeight=f.lastWrapWidth=0,f.updateLineNumbers=null,f.nativeBarWidth=f.barHeight=f.barWidth=0,f.scrollbarsClipped=!1,f.lineNumWidth=f.lineNumInnerWidth=f.lineNumChars=null,f.alignWidgets=!1,f.cachedCharWidth=f.cachedTextHeight=f.cachedPaddingH=null,f.maxLine=null,f.maxLineLength=0,f.maxLineChanged=!1,f.wheelDX=f.wheelDY=f.wheelStartX=f.wheelStartY=null,f.shift=!1,f.selForContextMenu=null,f.activeTouch=null,f.gutterSpecs=fl(c.gutters,c.lineNumbers),uu(f),u.init(f)}pl.prototype.signal=function(i,s){Kt(i,s)&&this.events.push(arguments)},pl.prototype.finish=function(){for(var i=0;i<this.events.length;i++)rt.apply(null,this.events[i])};var hl=0,nr=null;function pu(i){var s=i.wheelDeltaX,u=i.wheelDeltaY;return s==null&&i.detail&&i.axis==i.HORIZONTAL_AXIS&&(s=i.detail),u==null&&i.detail&&i.axis==i.VERTICAL_AXIS?u=i.detail:u==null&&(u=i.wheelDelta),{x:s,y:u}}function uc(i){var s=pu(i);return s.x*=nr,s.y*=nr,s}function du(i,s){var u=pu(s),c=u.x,f=u.y,v=i.display,y=v.scroller,b=y.scrollWidth>y.clientWidth,P=y.scrollHeight>y.clientHeight;if(c&&b||f&&P){if(f&&vt&&_){t:for(var j=s.target,Q=v.view;j!=y;j=j.parentNode)for(var Z=0;Z<Q.length;Z++)if(Q[Z].node==j){i.display.currentWheelTarget=j;break t}}if(c&&!$&&!N&&nr!=null)return f&&P&&us(i,Math.max(0,y.scrollTop+f*nr)),Gi(i,Math.max(0,y.scrollLeft+c*nr)),(!f||f&&P)&&Me(s),void(v.wheelStartX=null);if(f&&nr!=null){var mt=f*nr,yt=i.doc.scrollTop,Dt=yt+v.wrapper.clientHeight;mt<0?yt=Math.max(0,yt+mt-50):Dt=Math.min(i.doc.height,Dt+mt+50),dl(i,{top:yt,bottom:Dt})}hl<20&&(v.wheelStartX==null?(v.wheelStartX=y.scrollLeft,v.wheelStartY=y.scrollTop,v.wheelDX=c,v.wheelDY=f,setTimeout(function(){if(v.wheelStartX!=null){var $t=y.scrollLeft-v.wheelStartX,re=y.scrollTop-v.wheelStartY,ye=re&&v.wheelDY&&re/v.wheelDY||$t&&v.wheelDX&&$t/v.wheelDX;v.wheelStartX=v.wheelStartY=null,ye&&(nr=(nr*hl+ye)/(hl+1),++hl)}},200)):(v.wheelDX+=c,v.wheelDY+=f))}}H?nr=-.53:$?nr=15:x?nr=-.7:V&&(nr=-.3333333333333333);var io=function(i,s){this.ranges=i,this.primIndex=s};io.prototype.primary=function(){return this.ranges[this.primIndex]},io.prototype.equals=function(i){if(i==this)return!0;if(i.primIndex!=this.primIndex||i.ranges.length!=this.ranges.length)return!1;for(var s=0;s<this.ranges.length;s++){var u=this.ranges[s],c=i.ranges[s];if(!M(u.anchor,c.anchor)||!M(u.head,c.head))return!1}return!0},io.prototype.deepCopy=function(){for(var i=[],s=0;s<this.ranges.length;s++)i[s]=new on(tt(this.ranges[s].anchor),tt(this.ranges[s].head));return new io(i,this.primIndex)},io.prototype.somethingSelected=function(){for(var i=0;i<this.ranges.length;i++)if(!this.ranges[i].empty())return!0;return!1},io.prototype.contains=function(i,s){s||(s=i);for(var u=0;u<this.ranges.length;u++){var c=this.ranges[u];if(ke(s,c.from())>=0&&ke(i,c.to())<=0)return u}return-1};var on=function(i,s){this.anchor=i,this.head=s};function Bo(i,s,u){var c=i&&i.options.selectionsMayTouch,f=s[u];s.sort(function(mt,yt){return ke(mt.from(),yt.from())}),u=le(s,f);for(var v=1;v<s.length;v++){var y=s[v],b=s[v-1],P=ke(b.to(),y.from());if(c&&!y.empty()?P>0:P>=0){var j=be(b.from(),y.from()),Q=zt(b.to(),y.to()),Z=b.empty()?y.from()==y.head:b.from()==b.head;v<=u&&--u,s.splice(--v,2,new on(Z?Q:j,Z?j:Q))}}return new io(s,u)}function Ci(i,s){return new io([new on(i,s||i)],0)}function ri(i){return i.text?Jt(i.from.line+i.text.length-1,St(i.text).length+(i.text.length==1?i.from.ch:0)):i.to}function fu(i,s){if(ke(i,s.from)<0)return i;if(ke(i,s.to)<=0)return ri(s);var u=i.line+s.text.length-(s.to.line-s.from.line)-1,c=i.ch;return i.line==s.to.line&&(c+=ri(s).ch-s.to.ch),Jt(u,c)}function gl(i,s){for(var u=[],c=0;c<i.sel.ranges.length;c++){var f=i.sel.ranges[c];u.push(new on(fu(f.anchor,s),fu(f.head,s)))}return Bo(i.cm,u,i.sel.primIndex)}function hu(i,s,u){return i.line==s.line?Jt(u.line,i.ch-s.ch+u.ch):Jt(u.line+(i.line-s.line),i.ch)}function td(i,s,u){for(var c=[],f=Jt(i.first,0),v=f,y=0;y<s.length;y++){var b=s[y],P=hu(b.from,f,v),j=hu(ri(b),f,v);if(f=b.to,v=j,u=="around"){var Q=i.sel.ranges[y],Z=ke(Q.head,Q.anchor)<0;c[y]=new on(Z?j:P,Z?P:j)}else c[y]=new on(P,P)}return new io(c,i.sel.primIndex)}function pc(i){i.doc.mode=Or(i.options,i.doc.modeOption),vs(i)}function vs(i){i.doc.iter(function(s){s.stateAfter&&(s.stateAfter=null),s.styles&&(s.styles=null)}),i.doc.modeFrontier=i.doc.highlightFrontier=i.doc.first,hs(i,100),i.state.modeGen++,i.curOp&&No(i)}function gu(i,s){return s.from.ch==0&&s.to.ch==0&&St(s.text)==""&&(!i.cm||i.cm.options.wholeLineUpdateBefore)}function dc(i,s,u,c){function f(Ce){return u?u[Ce]:null}function v(Ce,fe,Te){$s(Ce,fe,Te,c),Dn(Ce,"change",Ce,s)}function y(Ce,fe){for(var Te=[],Se=Ce;Se<fe;++Se)Te.push(new Qo(j[Se],f(Se),c));return Te}var b=s.from,P=s.to,j=s.text,Q=he(i,b.line),Z=he(i,P.line),mt=St(j),yt=f(j.length-1),Dt=P.line-b.line;if(s.full)i.insert(0,y(0,j.length)),i.remove(j.length,i.size-j.length);else if(gu(i,s)){var $t=y(0,j.length-1);v(Z,Z.text,yt),Dt&&i.remove(b.line,Dt),$t.length&&i.insert(b.line,$t)}else if(Q==Z)if(j.length==1)v(Q,Q.text.slice(0,b.ch)+mt+Q.text.slice(P.ch),yt);else{var re=y(1,j.length-1);re.push(new Qo(mt+Q.text.slice(P.ch),yt,c)),v(Q,Q.text.slice(0,b.ch)+j[0],f(0)),i.insert(b.line+1,re)}else if(j.length==1)v(Q,Q.text.slice(0,b.ch)+j[0]+Z.text.slice(P.ch),f(0)),i.remove(b.line+1,Dt);else{v(Q,Q.text.slice(0,b.ch)+j[0],f(0)),v(Z,mt+Z.text.slice(P.ch),yt);var ye=y(1,j.length-1);Dt>1&&i.remove(b.line+1,Dt-1),i.insert(b.line+1,ye)}Dn(i,"change",i,s)}function Si(i,s,u){function c(f,v,y){if(f.linked)for(var b=0;b<f.linked.length;++b){var P=f.linked[b];if(P.doc!=v){var j=y&&P.sharedHist;u&&!j||(s(P.doc,j),c(P.doc,f,j))}}}c(i,null,!0)}function vu(i,s){if(s.cm)throw new Error("This document is already in use.");i.doc=s,s.cm=i,oc(i),pc(i),fc(i),i.options.direction=s.direction,i.options.lineWrapping||pa(i),i.options.mode=s.modeOption,No(i)}function fc(i){(i.doc.direction=="rtl"?Pt:K)(i.display.lineDiv,"CodeMirror-rtl")}function ed(i){ro(i,function(){fc(i),No(i)})}function vl(i){this.done=[],this.undone=[],this.undoDepth=i?i.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=i?i.maxGeneration:1}function hc(i,s){var u={from:tt(s.from),to:ri(s),text:Qn(i,s.from,s.to)};return bu(i,u,s.from.line,s.to.line+1),Si(i,function(c){return bu(c,u,s.from.line,s.to.line+1)},!0),u}function mu(i){for(;i.length&&St(i).ranges;)i.pop()}function nd(i,s){return s?(mu(i.done),St(i.done)):i.done.length&&!St(i.done).ranges?St(i.done):i.done.length>1&&!i.done[i.done.length-2].ranges?(i.done.pop(),St(i.done)):void 0}function yu(i,s,u,c){var f=i.history;f.undone.length=0;var v,y,b=+new Date;if((f.lastOp==c||f.lastOrigin==s.origin&&s.origin&&(s.origin.charAt(0)=="+"&&f.lastModTime>b-(i.cm?i.cm.options.historyEventDelay:500)||s.origin.charAt(0)=="*"))&&(v=nd(f,f.lastOp==c)))y=St(v.changes),ke(s.from,s.to)==0&&ke(s.from,y.to)==0?y.to=ri(s):v.changes.push(hc(i,s));else{var P=St(f.done);for(P&&P.ranges||ml(i.sel,f.done),v={changes:[hc(i,s)],generation:f.generation},f.done.push(v);f.done.length>f.undoDepth;)f.done.shift(),f.done[0].ranges||f.done.shift()}f.done.push(u),f.generation=++f.maxGeneration,f.lastModTime=f.lastSelTime=b,f.lastOp=f.lastSelOp=c,f.lastOrigin=f.lastSelOrigin=s.origin,y||rt(i,"historyAdded")}function od(i,s,u,c){var f=s.charAt(0);return f=="*"||f=="+"&&u.ranges.length==c.ranges.length&&u.somethingSelected()==c.somethingSelected()&&new Date-i.history.lastSelTime<=(i.cm?i.cm.options.historyEventDelay:500)}function rd(i,s,u,c){var f=i.history,v=c&&c.origin;u==f.lastSelOp||v&&f.lastSelOrigin==v&&(f.lastModTime==f.lastSelTime&&f.lastOrigin==v||od(i,v,St(f.done),s))?f.done[f.done.length-1]=s:ml(s,f.done),f.lastSelTime=+new Date,f.lastSelOrigin=v,f.lastSelOp=u,c&&c.clearRedo!==!1&&mu(f.undone)}function ml(i,s){var u=St(s);u&&u.ranges&&u.equals(i)||s.push(i)}function bu(i,s,u,c){var f=s["spans_"+i.id],v=0;i.iter(Math.max(i.first,u),Math.min(i.first+i.size,c),function(y){y.markedSpans&&((f||(f=s["spans_"+i.id]={}))[v]=y.markedSpans),++v})}function id(i){if(!i)return null;for(var s,u=0;u<i.length;++u)i[u].marker.explicitlyCleared?s||(s=i.slice(0,u)):s&&s.push(i[u]);return s?s.length?s:null:i}function ad(i,s){var u=s["spans_"+i.id];if(!u)return null;for(var c=[],f=0;f<s.text.length;++f)c.push(id(u[f]));return c}function _u(i,s){var u=ad(i,s),c=Tr(i,s);if(!u)return c;if(!c)return u;for(var f=0;f<u.length;++f){var v=u[f],y=c[f];if(v&&y)t:for(var b=0;b<y.length;++b){for(var P=y[b],j=0;j<v.length;++j)if(v[j].marker==P.marker)continue t;v.push(P)}else y&&(u[f]=y)}return u}function Ta(i,s,u){for(var c=[],f=0;f<i.length;++f){var v=i[f];if(v.ranges)c.push(u?io.prototype.deepCopy.call(v):v);else{var y=v.changes,b=[];c.push({changes:b});for(var P=0;P<y.length;++P){var j=y[P],Q=void 0;if(b.push({from:j.from,to:j.to,text:j.text}),s)for(var Z in j)(Q=Z.match(/^spans_(\d+)$/))&&le(s,Number(Q[1]))>-1&&(St(b)[Z]=j[Z],delete j[Z])}}}return c}function gc(i,s,u,c){if(c){var f=i.anchor;if(u){var v=ke(s,f)<0;v!=ke(u,f)<0?(f=s,s=u):v!=ke(s,u)<0&&(s=u)}return new on(f,s)}return new on(u||s,s)}function yl(i,s,u,c,f){f==null&&(f=i.cm&&(i.cm.display.shift||i.extend)),bo(i,new io([gc(i.sel.primary(),s,u,f)],0),c)}function wu(i,s,u){for(var c=[],f=i.cm&&(i.cm.display.shift||i.extend),v=0;v<i.sel.ranges.length;v++)c[v]=gc(i.sel.ranges[v],s[v],null,f);bo(i,Bo(i.cm,c,i.sel.primIndex),u)}function vc(i,s,u,c){var f=i.sel.ranges.slice(0);f[s]=u,bo(i,Bo(i.cm,f,i.sel.primIndex),c)}function ms(i,s,u,c){bo(i,Ci(s,u),c)}function sd(i,s,u){var c={ranges:s.ranges,update:function(f){this.ranges=[];for(var v=0;v<f.length;v++)this.ranges[v]=new on(ge(i,f[v].anchor),ge(i,f[v].head))},origin:u&&u.origin};return rt(i,"beforeSelectionChange",i,c),i.cm&&rt(i.cm,"beforeSelectionChange",i.cm,c),c.ranges!=s.ranges?Bo(i.cm,c.ranges,c.ranges.length-1):s}function xu(i,s,u){var c=i.history.done,f=St(c);f&&f.ranges?(c[c.length-1]=s,ii(i,s,u)):bo(i,s,u)}function bo(i,s,u){ii(i,s,u),rd(i,i.sel,i.cm?i.cm.curOp.id:NaN,u)}function ii(i,s,u){(Kt(i,"beforeSelectionChange")||i.cm&&Kt(i.cm,"beforeSelectionChange"))&&(s=sd(i,s,u));var c=u&&u.bias||(ke(s.primary().head,i.sel.primary().head)<0?-1:1);mc(i,ys(i,s,c,!0)),u&&u.scroll===!1||!i.cm||i.cm.getOption("readOnly")=="nocursor"||wa(i.cm)}function mc(i,s){s.equals(i.sel)||(i.sel=s,i.cm&&(i.cm.curOp.updateInput=1,i.cm.curOp.selectionChanged=!0,Mt(i.cm)),Dn(i,"cursorActivity",i))}function Cu(i){mc(i,ys(i,i.sel,null,!1))}function ys(i,s,u,c){for(var f,v=0;v<s.ranges.length;v++){var y=s.ranges[v],b=s.ranges.length==i.sel.ranges.length&&i.sel.ranges[v],P=bl(i,y.anchor,b&&b.anchor,u,c),j=bl(i,y.head,b&&b.head,u,c);(f||P!=y.anchor||j!=y.head)&&(f||(f=s.ranges.slice(0,v)),f[v]=new on(P,j))}return f?Bo(i.cm,f,s.primIndex):s}function Pa(i,s,u,c,f){var v=he(i,s.line);if(v.markedSpans)for(var y=0;y<v.markedSpans.length;++y){var b=v.markedSpans[y],P=b.marker,j="selectLeft"in P?!P.selectLeft:P.inclusiveLeft,Q="selectRight"in P?!P.selectRight:P.inclusiveRight;if((b.from==null||(j?b.from<=s.ch:b.from<s.ch))&&(b.to==null||(Q?b.to>=s.ch:b.to>s.ch))){if(f&&(rt(P,"beforeCursorEnter"),P.explicitlyCleared)){if(v.markedSpans){--y;continue}break}if(!P.atomic)continue;if(u){var Z=P.find(c<0?1:-1),mt=void 0;if((c<0?Q:j)&&(Z=Su(i,Z,-c,Z&&Z.line==s.line?v:null)),Z&&Z.line==s.line&&(mt=ke(Z,u))&&(c<0?mt<0:mt>0))return Pa(i,Z,s,c,f)}var yt=P.find(c<0?-1:1);return(c<0?j:Q)&&(yt=Su(i,yt,c,yt.line==s.line?v:null)),yt?Pa(i,yt,s,c,f):null}}return s}function bl(i,s,u,c,f){var v=c||1,y=Pa(i,s,u,v,f)||!f&&Pa(i,s,u,v,!0)||Pa(i,s,u,-v,f)||!f&&Pa(i,s,u,-v,!0);return y||(i.cantEdit=!0,Jt(i.first,0))}function Su(i,s,u,c){return u<0&&s.ch==0?s.line>i.first?ge(i,Jt(s.line-1)):null:u>0&&s.ch==(c||he(i,s.line)).text.length?s.line<i.first+i.size-1?Jt(s.line+1,0):null:new Jt(s.line,s.ch+u)}function Ou(i){i.setSelection(Jt(i.firstLine(),0),Jt(i.lastLine()),Xt)}function Tu(i,s,u){var c={canceled:!1,from:s.from,to:s.to,text:s.text,origin:s.origin,cancel:function(){return c.canceled=!0}};return u&&(c.update=function(f,v,y,b){f&&(c.from=ge(i,f)),v&&(c.to=ge(i,v)),y&&(c.text=y),b!==void 0&&(c.origin=b)}),rt(i,"beforeChange",i,c),i.cm&&rt(i.cm,"beforeChange",i.cm,c),c.canceled?(i.cm&&(i.cm.curOp.updateInput=2),null):{from:c.from,to:c.to,text:c.text,origin:c.origin}}function Ea(i,s,u){if(i.cm){if(!i.cm.curOp)return An(i.cm,Ea)(i,s,u);if(i.cm.state.suppressEdits)return}if(!(Kt(i,"beforeChange")||i.cm&&Kt(i.cm,"beforeChange"))||(s=Tu(i,s,!0))){var c=aa&&!u&&la(i,s.from,s.to);if(c)for(var f=c.length-1;f>=0;--f)bs(i,{from:c[f].from,to:c[f].to,text:f?[""]:s.text,origin:s.origin});else bs(i,s)}}function bs(i,s){if(s.text.length!=1||s.text[0]!=""||ke(s.from,s.to)!=0){var u=gl(i,s);yu(i,s,u,i.cm?i.cm.curOp.id:NaN),_s(i,s,u,Tr(i,s));var c=[];Si(i,function(f,v){v||le(c,f.history)!=-1||(Au(f.history,s),c.push(f.history)),_s(f,s,null,Tr(f,s))})}}function _l(i,s,u){var c=i.cm&&i.cm.state.suppressEdits;if(!c||u){for(var f,v=i.history,y=i.sel,b=s=="undo"?v.done:v.undone,P=s=="undo"?v.undone:v.done,j=0;j<b.length&&(f=b[j],u?!f.ranges||f.equals(i.sel):f.ranges);j++);if(j!=b.length){for(v.lastOrigin=v.lastSelOrigin=null;;){if(!(f=b.pop()).ranges){if(c)return void b.push(f);break}if(ml(f,P),u&&!f.equals(i.sel))return void bo(i,f,{clearRedo:!1});y=f}var Q=[];ml(y,P),P.push({changes:Q,generation:v.generation}),v.generation=f.generation||++v.maxGeneration;for(var Z=Kt(i,"beforeChange")||i.cm&&Kt(i.cm,"beforeChange"),mt=function($t){var re=f.changes[$t];if(re.origin=s,Z&&!Tu(i,re,!1))return b.length=0,{};Q.push(hc(i,re));var ye=$t?gl(i,re):St(b);_s(i,re,ye,_u(i,re)),!$t&&i.cm&&i.cm.scrollIntoView({from:re.from,to:ri(re)});var Ce=[];Si(i,function(fe,Te){Te||le(Ce,fe.history)!=-1||(Au(fe.history,re),Ce.push(fe.history)),_s(fe,re,null,_u(fe,re))})},yt=f.changes.length-1;yt>=0;--yt){var Dt=mt(yt);if(Dt)return Dt.v}}}}function Pu(i,s){if(s!=0&&(i.first+=s,i.sel=new io(ae(i.sel.ranges,function(f){return new on(Jt(f.anchor.line+s,f.anchor.ch),Jt(f.head.line+s,f.head.ch))}),i.sel.primIndex),i.cm)){No(i.cm,i.first,i.first-s,s);for(var u=i.cm.display,c=u.viewFrom;c<u.viewTo;c++)xi(i.cm,c,"gutter")}}function _s(i,s,u,c){if(i.cm&&!i.cm.curOp)return An(i.cm,_s)(i,s,u,c);if(s.to.line<i.first)Pu(i,s.text.length-1-(s.to.line-s.from.line));else if(!(s.from.line>i.lastLine())){if(s.from.line<i.first){var f=s.text.length-1-(i.first-s.from.line);Pu(i,f),s={from:Jt(i.first,0),to:Jt(s.to.line+f,s.to.ch),text:[St(s.text)],origin:s.origin}}var v=i.lastLine();s.to.line>v&&(s={from:s.from,to:Jt(v,he(i,v).text.length),text:[s.text[0]],origin:s.origin}),s.removed=Qn(i,s.from,s.to),u||(u=gl(i,s)),i.cm?Eu(i.cm,s,c):dc(i,s,c),ii(i,u,Xt),i.cantEdit&&bl(i,Jt(i.firstLine(),0))&&(i.cantEdit=!1)}}function Eu(i,s,u){var c=i.doc,f=i.display,v=s.from,y=s.to,b=!1,P=v.line;i.options.lineWrapping||(P=nn(Yn(he(c,v.line))),c.iter(P,y.line+1,function(yt){if(yt==f.maxLine)return b=!0,!0})),c.sel.contains(s.from,s.to)>-1&&Mt(i),dc(c,s,u,nl(i)),i.options.lineWrapping||(c.iter(P,v.line+s.text.length,function(yt){var Dt=kr(yt);Dt>f.maxLineLength&&(f.maxLine=yt,f.maxLineLength=Dt,f.maxLineChanged=!0,b=!1)}),b&&(i.curOp.updateMaxLine=!0)),zs(c,v.line),hs(i,400);var j=s.text.length-(y.line-v.line)-1;s.full?No(i):v.line!=y.line||s.text.length!=1||gu(i.doc,s)?No(i,v.line,y.line+1,j):xi(i,v.line,"text");var Q=Kt(i,"changes"),Z=Kt(i,"change");if(Z||Q){var mt={from:v,to:y,text:s.text,removed:s.removed,origin:s.origin};Z&&Dn(i,"change",i,mt),Q&&(i.curOp.changeObjs||(i.curOp.changeObjs=[])).push(mt)}i.display.selForContextMenu=null}function Xi(i,s,u,c,f){var v;c||(c=u),ke(c,u)<0&&(u=(v=[c,u])[0],c=v[1]),typeof s=="string"&&(s=i.splitLines(s)),Ea(i,{from:u,to:c,text:s,origin:f})}function ku(i,s,u,c){u<i.line?i.line+=c:s<i.line&&(i.line=s,i.ch=0)}function ws(i,s,u,c){for(var f=0;f<i.length;++f){var v=i[f],y=!0;if(v.ranges){v.copied||((v=i[f]=v.deepCopy()).copied=!0);for(var b=0;b<v.ranges.length;b++)ku(v.ranges[b].anchor,s,u,c),ku(v.ranges[b].head,s,u,c)}else{for(var P=0;P<v.changes.length;++P){var j=v.changes[P];if(u<j.from.line)j.from=Jt(j.from.line+c,j.from.ch),j.to=Jt(j.to.line+c,j.to.ch);else if(s<=j.to.line){y=!1;break}}y||(i.splice(0,f+1),f=0)}}}function Au(i,s){var u=s.from.line,c=s.to.line,f=s.text.length-(c-u)-1;ws(i.done,u,c,f),ws(i.undone,u,c,f)}function ka(i,s,u,c){var f=s,v=s;return typeof s=="number"?v=he(i,Oe(i,s)):f=nn(s),f==null?null:(c(v,f)&&i.cm&&xi(i.cm,f,u),v)}function xs(i){this.lines=i,this.parent=null;for(var s=0,u=0;u<i.length;++u)i[u].parent=this,s+=i[u].height;this.height=s}function ao(i){this.children=i;for(var s=0,u=0,c=0;c<i.length;++c){var f=i[c];s+=f.chunkSize(),u+=f.height,f.parent=this}this.size=s,this.height=u,this.parent=null}on.prototype.from=function(){return be(this.anchor,this.head)},on.prototype.to=function(){return zt(this.anchor,this.head)},on.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},xs.prototype={chunkSize:function(){return this.lines.length},removeInner:function(i,s){for(var u=i,c=i+s;u<c;++u){var f=this.lines[u];this.height-=f.height,qs(f),Dn(f,"delete")}this.lines.splice(i,s)},collapse:function(i){i.push.apply(i,this.lines)},insertInner:function(i,s,u){this.height+=u,this.lines=this.lines.slice(0,i).concat(s).concat(this.lines.slice(i));for(var c=0;c<s.length;++c)s[c].parent=this},iterN:function(i,s,u){for(var c=i+s;i<c;++i)if(u(this.lines[i]))return!0}},ao.prototype={chunkSize:function(){return this.size},removeInner:function(i,s){this.size-=s;for(var u=0;u<this.children.length;++u){var c=this.children[u],f=c.chunkSize();if(i<f){var v=Math.min(s,f-i),y=c.height;if(c.removeInner(i,v),this.height-=y-c.height,f==v&&(this.children.splice(u--,1),c.parent=null),(s-=v)==0)break;i=0}else i-=f}if(this.size-s<25&&(this.children.length>1||!(this.children[0]instanceof xs))){var b=[];this.collapse(b),this.children=[new xs(b)],this.children[0].parent=this}},collapse:function(i){for(var s=0;s<this.children.length;++s)this.children[s].collapse(i)},insertInner:function(i,s,u){this.size+=s.length,this.height+=u;for(var c=0;c<this.children.length;++c){var f=this.children[c],v=f.chunkSize();if(i<=v){if(f.insertInner(i,s,u),f.lines&&f.lines.length>50){for(var y=f.lines.length%25+25,b=y;b<f.lines.length;){var P=new xs(f.lines.slice(b,b+=25));f.height-=P.height,this.children.splice(++c,0,P),P.parent=this}f.lines=f.lines.slice(0,y),this.maybeSpill()}break}i-=v}},maybeSpill:function(){if(!(this.children.length<=10)){var i=this;do{var s=new ao(i.children.splice(i.children.length-5,5));if(i.parent){i.size-=s.size,i.height-=s.height;var u=le(i.parent.children,i);i.parent.children.splice(u+1,0,s)}else{var c=new ao(i.children);c.parent=i,i.children=[c,s],i=c}s.parent=i.parent}while(i.children.length>10);i.parent.maybeSpill()}},iterN:function(i,s,u){for(var c=0;c<this.children.length;++c){var f=this.children[c],v=f.chunkSize();if(i<v){var y=Math.min(s,v-i);if(f.iterN(i,y,u))return!0;if((s-=y)==0)break;i=0}else i-=v}}};var Ji=function(i,s,u){if(u)for(var c in u)u.hasOwnProperty(c)&&(this[c]=u[c]);this.doc=i,this.node=s};function ju(i,s,u){hr(s)<(i.curOp&&i.curOp.scrollTop||i.doc.scrollTop)&&ls(i,u)}function ld(i,s,u,c){var f=new Ji(i,u,c),v=i.cm;return v&&f.noHScroll&&(v.display.alignWidgets=!0),ka(i,s,"widget",function(y){var b=y.widgets||(y.widgets=[]);if(f.insertAt==null?b.push(f):b.splice(Math.min(b.length,Math.max(0,f.insertAt)),0,f),f.line=y,v&&!Uo(i,y)){var P=hr(y)<i.scrollTop;to(y,y.height+Wi(f)),P&&ls(v,f.height),v.curOp.forceUpdate=!0}return!0}),v&&Dn(v,"lineWidgetAdded",v,f,typeof s=="number"?s:nn(s)),f}Ji.prototype.clear=function(){var i=this.doc.cm,s=this.line.widgets,u=this.line,c=nn(u);if(c!=null&&s){for(var f=0;f<s.length;++f)s[f]==this&&s.splice(f--,1);s.length||(u.widgets=null);var v=Wi(this);to(u,Math.max(0,u.height-v)),i&&(ro(i,function(){ju(i,u,-v),xi(i,c,"widget")}),Dn(i,"lineWidgetCleared",i,this,c))}},Ji.prototype.changed=function(){var i=this,s=this.height,u=this.doc.cm,c=this.line;this.height=null;var f=Wi(this)-s;f&&(Uo(this.doc,c)||to(c,c.height+f),u&&ro(u,function(){u.curOp.forceUpdate=!0,ju(u,c,f),Dn(u,"lineWidgetChanged",u,i,nn(c))}))},Le(Ji);var yc=0,Oi=function(i,s){this.lines=[],this.type=s,this.doc=i,this.id=++yc};function Zi(i,s,u,c,f){if(c&&c.shared)return cd(i,s,u,c,f);if(i.cm&&!i.cm.curOp)return An(i.cm,Zi)(i,s,u,c,f);var v=new Oi(i,f),y=ke(s,u);if(c&&Ht(c,v,!1),y>0||y==0&&v.clearWhenEmpty!==!1)return v;if(v.replacedWith&&(v.collapsed=!0,v.widgetNode=xt("span",[v.replacedWith],"CodeMirror-widget"),c.handleMouseEvents||v.widgetNode.setAttribute("cm-ignore-events","true"),c.insertLeft&&(v.widgetNode.insertLeft=!0)),v.collapsed){if(Fi(i,s.line,s,u,v)||s.line!=u.line&&Fi(i,u.line,s,u,v))throw new Error("Inserting collapsed marker partially overlapping an existing one");Jr()}v.addToHistory&&yu(i,{from:s,to:u,origin:"markText"},i.sel,NaN);var b,P=s.line,j=i.cm;if(i.iter(P,u.line+1,function(Z){j&&v.collapsed&&!j.options.lineWrapping&&Yn(Z)==j.display.maxLine&&(b=!0),v.collapsed&&P!=s.line&&to(Z,0),Bs(Z,new Zr(v,P==s.line?s.ch:null,P==u.line?u.ch:null),i.cm&&i.cm.curOp),++P}),v.collapsed&&i.iter(s.line,u.line+1,function(Z){Uo(i,Z)&&to(Z,0)}),v.clearOnEnter&&se(v,"beforeCursorEnter",function(){return v.clear()}),v.readOnly&&(To(),(i.history.done.length||i.history.undone.length)&&i.clearHistory()),v.collapsed&&(v.id=++yc,v.atomic=!0),j){if(b&&(j.curOp.updateMaxLine=!0),v.collapsed)No(j,s.line,u.line+1);else if(v.className||v.startStyle||v.endStyle||v.css||v.attributes||v.title)for(var Q=s.line;Q<=u.line;Q++)xi(j,Q,"text");v.atomic&&Cu(j.doc),Dn(j,"markerAdded",j,v)}return v}Oi.prototype.clear=function(){if(!this.explicitlyCleared){var i=this.doc.cm,s=i&&!i.curOp;if(s&&Yi(i),Kt(this,"clear")){var u=this.find();u&&Dn(this,"clear",u.from,u.to)}for(var c=null,f=null,v=0;v<this.lines.length;++v){var y=this.lines[v],b=Xo(y.markedSpans,this);i&&!this.collapsed?xi(i,nn(y),"text"):i&&(b.to!=null&&(f=nn(y)),b.from!=null&&(c=nn(y))),y.markedSpans=sa(y.markedSpans,b),b.from==null&&this.collapsed&&!Uo(this.doc,y)&&i&&to(y,va(i.display))}if(i&&this.collapsed&&!i.options.lineWrapping)for(var P=0;P<this.lines.length;++P){var j=Yn(this.lines[P]),Q=kr(j);Q>i.display.maxLineLength&&(i.display.maxLine=j,i.display.maxLineLength=Q,i.display.maxLineChanged=!0)}c!=null&&i&&this.collapsed&&No(i,c,f+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,i&&Cu(i.doc)),i&&Dn(i,"markerCleared",i,this,c,f),s&&qr(i),this.parent&&this.parent.clear()}},Oi.prototype.find=function(i,s){var u,c;i==null&&this.type=="bookmark"&&(i=1);for(var f=0;f<this.lines.length;++f){var v=this.lines[f],y=Xo(v.markedSpans,this);if(y.from!=null&&(u=Jt(s?v:nn(v),y.from),i==-1))return u;if(y.to!=null&&(c=Jt(s?v:nn(v),y.to),i==1))return c}return u&&{from:u,to:c}},Oi.prototype.changed=function(){var i=this,s=this.find(-1,!0),u=this,c=this.doc.cm;s&&c&&ro(c,function(){var f=s.line,v=nn(s.line),y=mo(c,v);if(y&&(Zc(y),c.curOp.selectionChanged=c.curOp.forceUpdate=!0),c.curOp.updateMaxLine=!0,!Uo(u.doc,f)&&u.height!=null){var b=u.height;u.height=null;var P=Wi(u)-b;P&&to(f,f.height+P)}Dn(c,"markerChanged",c,i)})},Oi.prototype.attachLine=function(i){if(!this.lines.length&&this.doc.cm){var s=this.doc.cm.curOp;s.maybeHiddenMarkers&&le(s.maybeHiddenMarkers,this)!=-1||(s.maybeUnhiddenMarkers||(s.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(i)},Oi.prototype.detachLine=function(i){if(this.lines.splice(le(this.lines,i),1),!this.lines.length&&this.doc.cm){var s=this.doc.cm.curOp;(s.maybeHiddenMarkers||(s.maybeHiddenMarkers=[])).push(this)}},Le(Oi);var Cs=function(i,s){this.markers=i,this.primary=s;for(var u=0;u<i.length;++u)i[u].parent=this};function cd(i,s,u,c,f){(c=Ht(c)).shared=!1;var v=[Zi(i,s,u,c,f)],y=v[0],b=c.widgetNode;return Si(i,function(P){b&&(c.widgetNode=b.cloneNode(!0)),v.push(Zi(P,ge(P,s),ge(P,u),c,f));for(var j=0;j<P.linked.length;++j)if(P.linked[j].isParent)return;y=St(v)}),new Cs(v,y)}function Mu(i){return i.findMarks(Jt(i.first,0),i.clipPos(Jt(i.lastLine())),function(s){return s.parent})}function wl(i,s){for(var u=0;u<s.length;u++){var c=s[u],f=c.find(),v=i.clipPos(f.from),y=i.clipPos(f.to);if(ke(v,y)){var b=Zi(i,v,y,c.primary,c.primary.type);c.markers.push(b),b.parent=c}}}function ud(i){for(var s=function(c){var f=i[c],v=[f.primary.doc];Si(f.primary.doc,function(P){return v.push(P)});for(var y=0;y<f.markers.length;y++){var b=f.markers[y];le(v,b.doc)==-1&&(b.parent=null,f.markers.splice(y--,1))}},u=0;u<i.length;u++)s(u)}Cs.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var i=0;i<this.markers.length;++i)this.markers[i].clear();Dn(this,"clear")}},Cs.prototype.find=function(i,s){return this.primary.find(i,s)},Le(Cs);var pd=0,Vo=function(i,s,u,c,f){if(!(this instanceof Vo))return new Vo(i,s,u,c,f);u==null&&(u=0),ao.call(this,[new xs([new Qo("",null)])]),this.first=u,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=u;var v=Jt(u,0);this.sel=Ci(v),this.history=new vl(null),this.id=++pd,this.modeOption=s,this.lineSep=c,this.direction=f=="rtl"?"rtl":"ltr",this.extend=!1,typeof i=="string"&&(i=this.splitLines(i)),dc(this,{from:v,to:v,text:i}),bo(this,Ci(v),Xt)};Vo.prototype=qe(ao.prototype,{constructor:Vo,iter:function(i,s,u){u?this.iterN(i-this.first,s-i,u):this.iterN(this.first,this.first+this.size,i)},insert:function(i,s){for(var u=0,c=0;c<s.length;++c)u+=s[c].height;this.insertInner(i-this.first,s,u)},remove:function(i,s){this.removeInner(i-this.first,s)},getValue:function(i){var s=Yo(this,this.first,this.first+this.size);return i===!1?s:s.join(i||this.lineSeparator())},setValue:qn(function(i){var s=Jt(this.first,0),u=this.first+this.size-1;Ea(this,{from:s,to:Jt(u,he(this,u).text.length),text:this.splitLines(i),origin:"setValue",full:!0},!0),this.cm&&cs(this.cm,0,0),bo(this,Ci(s),Xt)}),replaceRange:function(i,s,u,c){Xi(this,i,s=ge(this,s),u=u?ge(this,u):s,c)},getRange:function(i,s,u){var c=Qn(this,ge(this,i),ge(this,s));return u===!1?c:u===""?c.join(""):c.join(u||this.lineSeparator())},getLine:function(i){var s=this.getLineHandle(i);return s&&s.text},getLineHandle:function(i){if(Io(this,i))return he(this,i)},getLineNumber:function(i){return nn(i)},getLineHandleVisualStart:function(i){return typeof i=="number"&&(i=he(this,i)),Yn(i)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(i){return ge(this,i)},getCursor:function(i){var s=this.sel.primary();return i==null||i=="head"?s.head:i=="anchor"?s.anchor:i=="end"||i=="to"||i===!1?s.to():s.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:qn(function(i,s,u){ms(this,ge(this,typeof i=="number"?Jt(i,s||0):i),null,u)}),setSelection:qn(function(i,s,u){ms(this,ge(this,i),ge(this,s||i),u)}),extendSelection:qn(function(i,s,u){yl(this,ge(this,i),s&&ge(this,s),u)}),extendSelections:qn(function(i,s){wu(this,Wn(this,i),s)}),extendSelectionsBy:qn(function(i,s){wu(this,Wn(this,ae(this.sel.ranges,i)),s)}),setSelections:qn(function(i,s,u){if(i.length){for(var c=[],f=0;f<i.length;f++)c[f]=new on(ge(this,i[f].anchor),ge(this,i[f].head||i[f].anchor));s==null&&(s=Math.min(i.length-1,this.sel.primIndex)),bo(this,Bo(this.cm,c,s),u)}}),addSelection:qn(function(i,s,u){var c=this.sel.ranges.slice(0);c.push(new on(ge(this,i),ge(this,s||i))),bo(this,Bo(this.cm,c,c.length-1),u)}),getSelection:function(i){for(var s,u=this.sel.ranges,c=0;c<u.length;c++){var f=Qn(this,u[c].from(),u[c].to());s=s?s.concat(f):f}return i===!1?s:s.join(i||this.lineSeparator())},getSelections:function(i){for(var s=[],u=this.sel.ranges,c=0;c<u.length;c++){var f=Qn(this,u[c].from(),u[c].to());i!==!1&&(f=f.join(i||this.lineSeparator())),s[c]=f}return s},replaceSelection:function(i,s,u){for(var c=[],f=0;f<this.sel.ranges.length;f++)c[f]=i;this.replaceSelections(c,s,u||"+input")},replaceSelections:qn(function(i,s,u){for(var c=[],f=this.sel,v=0;v<f.ranges.length;v++){var y=f.ranges[v];c[v]={from:y.from(),to:y.to(),text:this.splitLines(i[v]),origin:u}}for(var b=s&&s!="end"&&td(this,c,s),P=c.length-1;P>=0;P--)Ea(this,c[P]);b?xu(this,b):this.cm&&wa(this.cm)}),undo:qn(function(){_l(this,"undo")}),redo:qn(function(){_l(this,"redo")}),undoSelection:qn(function(){_l(this,"undo",!0)}),redoSelection:qn(function(){_l(this,"redo",!0)}),setExtending:function(i){this.extend=i},getExtending:function(){return this.extend},historySize:function(){for(var i=this.history,s=0,u=0,c=0;c<i.done.length;c++)i.done[c].ranges||++s;for(var f=0;f<i.undone.length;f++)i.undone[f].ranges||++u;return{undo:s,redo:u}},clearHistory:function(){var i=this;this.history=new vl(this.history),Si(this,function(s){return s.history=i.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(i){return i&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(i){return this.history.generation==(i||this.cleanGeneration)},getHistory:function(){return{done:Ta(this.history.done),undone:Ta(this.history.undone)}},setHistory:function(i){var s=this.history=new vl(this.history);s.done=Ta(i.done.slice(0),null,!0),s.undone=Ta(i.undone.slice(0),null,!0)},setGutterMarker:qn(function(i,s,u){return ka(this,i,"gutter",function(c){var f=c.gutterMarkers||(c.gutterMarkers={});return f[s]=u,!u&&S(f)&&(c.gutterMarkers=null),!0})}),clearGutter:qn(function(i){var s=this;this.iter(function(u){u.gutterMarkers&&u.gutterMarkers[i]&&ka(s,u,"gutter",function(){return u.gutterMarkers[i]=null,S(u.gutterMarkers)&&(u.gutterMarkers=null),!0})})}),lineInfo:function(i){var s;if(typeof i=="number"){if(!Io(this,i)||(s=i,!(i=he(this,i))))return null}else if((s=nn(i))==null)return null;return{line:s,handle:i,text:i.text,gutterMarkers:i.gutterMarkers,textClass:i.textClass,bgClass:i.bgClass,wrapClass:i.wrapClass,widgets:i.widgets}},addLineClass:qn(function(i,s,u){return ka(this,i,s=="gutter"?"gutter":"class",function(c){var f=s=="text"?"textClass":s=="background"?"bgClass":s=="gutter"?"gutterClass":"wrapClass";if(c[f]){if(D(u).test(c[f]))return!1;c[f]+=" "+u}else c[f]=u;return!0})}),removeLineClass:qn(function(i,s,u){return ka(this,i,s=="gutter"?"gutter":"class",function(c){var f=s=="text"?"textClass":s=="background"?"bgClass":s=="gutter"?"gutterClass":"wrapClass",v=c[f];if(!v)return!1;if(u==null)c[f]=null;else{var y=v.match(D(u));if(!y)return!1;var b=y.index+y[0].length;c[f]=v.slice(0,y.index)+(y.index&&b!=v.length?" ":"")+v.slice(b)||null}return!0})}),addLineWidget:qn(function(i,s,u){return ld(this,i,s,u)}),removeLineWidget:function(i){i.clear()},markText:function(i,s,u){return Zi(this,ge(this,i),ge(this,s),u,u&&u.type||"range")},setBookmark:function(i,s){var u={replacedWith:s&&(s.nodeType==null?s.widget:s),insertLeft:s&&s.insertLeft,clearWhenEmpty:!1,shared:s&&s.shared,handleMouseEvents:s&&s.handleMouseEvents};return Zi(this,i=ge(this,i),i,u,"bookmark")},findMarksAt:function(i){var s=[],u=he(this,(i=ge(this,i)).line).markedSpans;if(u)for(var c=0;c<u.length;++c){var f=u[c];(f.from==null||f.from<=i.ch)&&(f.to==null||f.to>=i.ch)&&s.push(f.marker.parent||f.marker)}return s},findMarks:function(i,s,u){i=ge(this,i),s=ge(this,s);var c=[],f=i.line;return this.iter(i.line,s.line+1,function(v){var y=v.markedSpans;if(y)for(var b=0;b<y.length;b++){var P=y[b];P.to!=null&&f==i.line&&i.ch>=P.to||P.from==null&&f!=i.line||P.from!=null&&f==s.line&&P.from>=s.ch||u&&!u(P.marker)||c.push(P.marker.parent||P.marker)}++f}),c},getAllMarks:function(){var i=[];return this.iter(function(s){var u=s.markedSpans;if(u)for(var c=0;c<u.length;++c)u[c].from!=null&&i.push(u[c].marker)}),i},posFromIndex:function(i){var s,u=this.first,c=this.lineSeparator().length;return this.iter(function(f){var v=f.text.length+c;if(v>i)return s=i,!0;i-=v,++u}),ge(this,Jt(u,s))},indexFromPos:function(i){var s=(i=ge(this,i)).ch;if(i.line<this.first||i.ch<0)return 0;var u=this.lineSeparator().length;return this.iter(this.first,i.line,function(c){s+=c.text.length+u}),s},copy:function(i){var s=new Vo(Yo(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return s.scrollTop=this.scrollTop,s.scrollLeft=this.scrollLeft,s.sel=this.sel,s.extend=!1,i&&(s.history.undoDepth=this.history.undoDepth,s.setHistory(this.getHistory())),s},linkedDoc:function(i){i||(i={});var s=this.first,u=this.first+this.size;i.from!=null&&i.from>s&&(s=i.from),i.to!=null&&i.to<u&&(u=i.to);var c=new Vo(Yo(this,s,u),i.mode||this.modeOption,s,this.lineSep,this.direction);return i.sharedHist&&(c.history=this.history),(this.linked||(this.linked=[])).push({doc:c,sharedHist:i.sharedHist}),c.linked=[{doc:this,isParent:!0,sharedHist:i.sharedHist}],wl(c,Mu(this)),c},unlinkDoc:function(i){if(i instanceof On&&(i=i.doc),this.linked){for(var s=0;s<this.linked.length;++s)if(this.linked[s].doc==i){this.linked.splice(s,1),i.unlinkDoc(this),ud(Mu(this));break}}if(i.history==this.history){var u=[i.id];Si(i,function(c){return u.push(c.id)},!0),i.history=new vl(null),i.history.done=Ta(this.history.done,u),i.history.undone=Ta(this.history.undone,u)}},iterLinkedDocs:function(i){Si(this,i)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(i){return this.lineSep?i.split(this.lineSep):Zn(i)},lineSeparator:function(){return this.lineSep||`
`},setDirection:qn(function(i){i!="rtl"&&(i="ltr"),i!=this.direction&&(this.direction=i,this.iter(function(s){return s.order=null}),this.cm&&ed(this.cm))})}),Vo.prototype.eachLine=Vo.prototype.iter;var Ss=0;function dd(i){var s=this;if(Du(s),!dt(s,i)&&!T(s.display,i)){Me(i),H&&(Ss=+new Date);var u=Wr(s,i,!0),c=i.dataTransfer.files;if(u&&!s.isReadOnly())if(c&&c.length&&window.FileReader&&window.File)for(var f=c.length,v=Array(f),y=0,b=function(){++y==f&&An(s,function(){var yt={from:u=ge(s.doc,u),to:u,text:s.doc.splitLines(v.filter(function(Dt){return Dt!=null}).join(s.doc.lineSeparator())),origin:"paste"};Ea(s.doc,yt),xu(s.doc,Ci(ge(s.doc,u),ge(s.doc,ri(yt))))})()},P=function(yt,Dt){if(s.options.allowDropFileTypes&&le(s.options.allowDropFileTypes,yt.type)==-1)b();else{var $t=new FileReader;$t.onerror=function(){return b()},$t.onload=function(){var re=$t.result;/[\x00-\x08\x0e-\x1f]{2}/.test(re)||(v[Dt]=re),b()},$t.readAsText(yt)}},j=0;j<c.length;j++)P(c[j],j);else{if(s.state.draggingText&&s.doc.sel.contains(u)>-1)return s.state.draggingText(i),void setTimeout(function(){return s.display.input.focus()},20);try{var Q=i.dataTransfer.getData("Text");if(Q){var Z;if(s.state.draggingText&&!s.state.draggingText.copy&&(Z=s.listSelections()),ii(s.doc,Ci(u,u)),Z)for(var mt=0;mt<Z.length;++mt)Xi(s.doc,"",Z[mt].anchor,Z[mt].head,"drag");s.replaceSelection(Q,"around","paste"),s.display.input.focus()}}catch{}}}}function bc(i,s){if(H&&(!i.state.draggingText||+new Date-Ss<100))xn(s);else if(!dt(i,s)&&!T(i.display,s)&&(s.dataTransfer.setData("Text",i.getSelection()),s.dataTransfer.effectAllowed="copyMove",s.dataTransfer.setDragImage&&!V)){var u=G("img",null,null,"position: fixed; left: 0; top: 0;");u.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",N&&(u.width=u.height=1,i.display.wrapper.appendChild(u),u._top=u.offsetTop),s.dataTransfer.setDragImage(u,0,0),N&&u.parentNode.removeChild(u)}}function Aa(i,s){var u=Wr(i,s);if(u){var c=document.createDocumentFragment();iu(i,u,c),i.display.dragCursor||(i.display.dragCursor=G("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),i.display.lineSpace.insertBefore(i.display.dragCursor,i.display.cursorDiv)),ht(i.display.dragCursor,c)}}function Du(i){i.display.dragCursor&&(i.display.lineSpace.removeChild(i.display.dragCursor),i.display.dragCursor=null)}function _o(i){if(document.getElementsByClassName){for(var s=document.getElementsByClassName("CodeMirror"),u=[],c=0;c<s.length;c++){var f=s[c].CodeMirror;f&&u.push(f)}u.length&&u[0].operation(function(){for(var v=0;v<u.length;v++)i(u[v])})}}var Lu=!1;function fd(){Lu||(hd(),Lu=!0)}function hd(){var i;se(window,"resize",function(){i==null&&(i=setTimeout(function(){i=null,_o(gd)},100))}),se(window,"blur",function(){return _o(oi)})}function gd(i){var s=i.display;s.cachedCharWidth=s.cachedTextHeight=s.cachedPaddingH=null,s.scrollbarsClipped=!1,i.setSize()}for(var Ti={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Os=0;Os<10;Os++)Ti[Os+48]=Ti[Os+96]=String(Os);for(var xl=65;xl<=90;xl++)Ti[xl]=String.fromCharCode(xl);for(var Ts=1;Ts<=12;Ts++)Ti[Ts+111]=Ti[Ts+63235]="F"+Ts;var ai={};function vd(i){var s,u,c,f,v=i.split(/-(?!$)/);i=v[v.length-1];for(var y=0;y<v.length-1;y++){var b=v[y];if(/^(cmd|meta|m)$/i.test(b))f=!0;else if(/^a(lt)?$/i.test(b))s=!0;else if(/^(c|ctrl|control)$/i.test(b))u=!0;else{if(!/^s(hift)?$/i.test(b))throw new Error("Unrecognized modifier name: "+b);c=!0}}return s&&(i="Alt-"+i),u&&(i="Ctrl-"+i),f&&(i="Cmd-"+i),c&&(i="Shift-"+i),i}function Qi(i){var s={};for(var u in i)if(i.hasOwnProperty(u)){var c=i[u];if(/^(name|fallthrough|(de|at)tach)$/.test(u))continue;if(c=="..."){delete i[u];continue}for(var f=ae(u.split(" "),vd),v=0;v<f.length;v++){var y=void 0,b=void 0;v==f.length-1?(b=f.join(" "),y=c):(b=f.slice(0,v+1).join(" "),y="...");var P=s[b];if(P){if(P!=y)throw new Error("Inconsistent bindings for "+b)}else s[b]=y}delete i[u]}for(var j in s)i[j]=s[j];return i}function ja(i,s,u,c){var f=(s=Ol(s)).call?s.call(i,c):s[i];if(f===!1)return"nothing";if(f==="...")return"multi";if(f!=null&&u(f))return"handled";if(s.fallthrough){if(Object.prototype.toString.call(s.fallthrough)!="[object Array]")return ja(i,s.fallthrough,u,c);for(var v=0;v<s.fallthrough.length;v++){var y=ja(i,s.fallthrough[v],u,c);if(y)return y}}}function Cl(i){var s=typeof i=="string"?i:Ti[i.keyCode];return s=="Ctrl"||s=="Alt"||s=="Shift"||s=="Mod"}function Iu(i,s,u){var c=i;return s.altKey&&c!="Alt"&&(i="Alt-"+i),(te?s.metaKey:s.ctrlKey)&&c!="Ctrl"&&(i="Ctrl-"+i),(te?s.ctrlKey:s.metaKey)&&c!="Mod"&&(i="Cmd-"+i),!u&&s.shiftKey&&c!="Shift"&&(i="Shift-"+i),i}function Sl(i,s){if(N&&i.keyCode==34&&i.char)return!1;var u=Ti[i.keyCode];return u!=null&&!i.altGraphKey&&(i.keyCode==3&&i.code&&(u=i.code),Iu(u,i,s))}function Ol(i){return typeof i=="string"?ai[i]:i}function ta(i,s){for(var u=i.doc.sel.ranges,c=[],f=0;f<u.length;f++){for(var v=s(u[f]);c.length&&ke(v.from,St(c).to)<=0;){var y=c.pop();if(ke(y.from,v.from)<0){v.from=y.from;break}}c.push(v)}ro(i,function(){for(var b=c.length-1;b>=0;b--)Xi(i.doc,"",c[b].from,c[b].to,"+delete");wa(i)})}function Tl(i,s,u){var c=lt(i.text,s+u,u);return c<0||c>i.text.length?null:c}function _c(i,s,u){var c=Tl(i,s.ch,u);return c==null?null:new Jt(s.line,c,u<0?"after":"before")}function si(i,s,u,c,f){if(i){s.doc.direction=="rtl"&&(f=-f);var v=Ue(u,s.doc.direction);if(v){var y,b=f<0?St(v):v[0],P=f<0==(b.level==1)?"after":"before";if(b.level>0||s.doc.direction=="rtl"){var j=po(s,u);y=f<0?u.text.length-1:0;var Q=Po(s,j,y).top;y=Vt(function(Z){return Po(s,j,Z).top==Q},f<0==(b.level==1)?b.from:b.to-1,y),P=="before"&&(y=Tl(u,y,1))}else y=f<0?b.to:b.from;return new Jt(c,y,P)}}return new Jt(c,f<0?u.text.length:0,f<0?"before":"after")}function md(i,s,u,c){var f=Ue(s,i.doc.direction);if(!f)return _c(s,u,c);u.ch>=s.text.length?(u.ch=s.text.length,u.sticky="before"):u.ch<=0&&(u.ch=0,u.sticky="after");var v=Ie(f,u.ch,u.sticky),y=f[v];if(i.doc.direction=="ltr"&&y.level%2==0&&(c>0?y.to>u.ch:y.from<u.ch))return _c(s,u,c);var b,P=function(ye,Ce){return Tl(s,ye instanceof Jt?ye.ch:ye,Ce)},j=function(ye){return i.options.lineWrapping?(b=b||po(i,s),tl(i,s,b,ye)):{begin:0,end:s.text.length}},Q=j(u.sticky=="before"?P(u,-1):u.ch);if(i.doc.direction=="rtl"||y.level==1){var Z=y.level==1==c<0,mt=P(u,Z?1:-1);if(mt!=null&&(Z?mt<=y.to&&mt<=Q.end:mt>=y.from&&mt>=Q.begin)){var yt=Z?"before":"after";return new Jt(u.line,mt,yt)}}var Dt=function(ye,Ce,fe){for(var Te=function(rn,Wo){return Wo?new Jt(u.line,P(rn,1),"before"):new Jt(u.line,rn,"after")};ye>=0&&ye<f.length;ye+=Ce){var Se=f[ye],Pe=Ce>0==(Se.level!=1),yn=Pe?fe.begin:P(fe.end,-1);if(Se.from<=yn&&yn<Se.to||(yn=Pe?Se.from:P(Se.to,-1),fe.begin<=yn&&yn<fe.end))return Te(yn,Pe)}},$t=Dt(v+c,c,Q);if($t)return $t;var re=c>0?Q.end:P(Q.begin,-1);return re==null||c>0&&re==s.text.length||!($t=Dt(c>0?0:f.length-1,c,j(re)))?null:$t}ai.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},ai.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},ai.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},ai.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},ai.default=vt?ai.macDefault:ai.pcDefault;var Ps={selectAll:Ou,singleSelection:function(i){return i.setSelection(i.getCursor("anchor"),i.getCursor("head"),Xt)},killLine:function(i){return ta(i,function(s){if(s.empty()){var u=he(i.doc,s.head.line).text.length;return s.head.ch==u&&s.head.line<i.lastLine()?{from:s.head,to:Jt(s.head.line+1,0)}:{from:s.head,to:Jt(s.head.line,u)}}return{from:s.from(),to:s.to()}})},deleteLine:function(i){return ta(i,function(s){return{from:Jt(s.from().line,0),to:ge(i.doc,Jt(s.to().line+1,0))}})},delLineLeft:function(i){return ta(i,function(s){return{from:Jt(s.from().line,0),to:s.from()}})},delWrappedLineLeft:function(i){return ta(i,function(s){var u=i.charCoords(s.head,"div").top+5;return{from:i.coordsChar({left:0,top:u},"div"),to:s.from()}})},delWrappedLineRight:function(i){return ta(i,function(s){var u=i.charCoords(s.head,"div").top+5,c=i.coordsChar({left:i.display.lineDiv.offsetWidth+100,top:u},"div");return{from:s.from(),to:c}})},undo:function(i){return i.undo()},redo:function(i){return i.redo()},undoSelection:function(i){return i.undoSelection()},redoSelection:function(i){return i.redoSelection()},goDocStart:function(i){return i.extendSelection(Jt(i.firstLine(),0))},goDocEnd:function(i){return i.extendSelection(Jt(i.lastLine()))},goLineStart:function(i){return i.extendSelectionsBy(function(s){return Nu(i,s.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(i){return i.extendSelectionsBy(function(s){return Vu(i,s.head)},{origin:"+move",bias:1})},goLineEnd:function(i){return i.extendSelectionsBy(function(s){return yd(i,s.head.line)},{origin:"+move",bias:-1})},goLineRight:function(i){return i.extendSelectionsBy(function(s){var u=i.cursorCoords(s.head,"div").top+5;return i.coordsChar({left:i.display.lineDiv.offsetWidth+100,top:u},"div")},me)},goLineLeft:function(i){return i.extendSelectionsBy(function(s){var u=i.cursorCoords(s.head,"div").top+5;return i.coordsChar({left:0,top:u},"div")},me)},goLineLeftSmart:function(i){return i.extendSelectionsBy(function(s){var u=i.cursorCoords(s.head,"div").top+5,c=i.coordsChar({left:0,top:u},"div");return c.ch<i.getLine(c.line).search(/\S/)?Vu(i,s.head):c},me)},goLineUp:function(i){return i.moveV(-1,"line")},goLineDown:function(i){return i.moveV(1,"line")},goPageUp:function(i){return i.moveV(-1,"page")},goPageDown:function(i){return i.moveV(1,"page")},goCharLeft:function(i){return i.moveH(-1,"char")},goCharRight:function(i){return i.moveH(1,"char")},goColumnLeft:function(i){return i.moveH(-1,"column")},goColumnRight:function(i){return i.moveH(1,"column")},goWordLeft:function(i){return i.moveH(-1,"word")},goGroupRight:function(i){return i.moveH(1,"group")},goGroupLeft:function(i){return i.moveH(-1,"group")},goWordRight:function(i){return i.moveH(1,"word")},delCharBefore:function(i){return i.deleteH(-1,"codepoint")},delCharAfter:function(i){return i.deleteH(1,"char")},delWordBefore:function(i){return i.deleteH(-1,"word")},delWordAfter:function(i){return i.deleteH(1,"word")},delGroupBefore:function(i){return i.deleteH(-1,"group")},delGroupAfter:function(i){return i.deleteH(1,"group")},indentAuto:function(i){return i.indentSelection("smart")},indentMore:function(i){return i.indentSelection("add")},indentLess:function(i){return i.indentSelection("subtract")},insertTab:function(i){return i.replaceSelection("	")},insertSoftTab:function(i){for(var s=[],u=i.listSelections(),c=i.options.tabSize,f=0;f<u.length;f++){var v=u[f].from(),y=ee(i.getLine(v.line),v.ch,c);s.push(de(c-y%c))}i.replaceSelections(s)},defaultTab:function(i){i.somethingSelected()?i.indentSelection("add"):i.execCommand("insertTab")},transposeChars:function(i){return ro(i,function(){for(var s=i.listSelections(),u=[],c=0;c<s.length;c++)if(s[c].empty()){var f=s[c].head,v=he(i.doc,f.line).text;if(v){if(f.ch==v.length&&(f=new Jt(f.line,f.ch-1)),f.ch>0)f=new Jt(f.line,f.ch+1),i.replaceRange(v.charAt(f.ch-1)+v.charAt(f.ch-2),Jt(f.line,f.ch-2),f,"+transpose");else if(f.line>i.doc.first){var y=he(i.doc,f.line-1).text;y&&(f=new Jt(f.line,1),i.replaceRange(v.charAt(0)+i.doc.lineSeparator()+y.charAt(y.length-1),Jt(f.line-1,y.length-1),f,"+transpose"))}}u.push(new on(f,f))}i.setSelections(u)})},newlineAndIndent:function(i){return ro(i,function(){for(var s=i.listSelections(),u=s.length-1;u>=0;u--)i.replaceRange(i.doc.lineSeparator(),s[u].anchor,s[u].head,"+input");s=i.listSelections();for(var c=0;c<s.length;c++)i.indentLine(s[c].from().line,null,!0);wa(i)})},openLine:function(i){return i.replaceSelection(`
`,"start")},toggleOverwrite:function(i){return i.toggleOverwrite()}};function Nu(i,s){var u=he(i.doc,s),c=Yn(u);return c!=u&&(s=nn(c)),si(!0,i,c,s,1)}function yd(i,s){var u=he(i.doc,s),c=Ja(u);return c!=u&&(s=nn(c)),si(!0,i,u,s,-1)}function Vu(i,s){var u=Nu(i,s.line),c=he(i.doc,u.line),f=Ue(c,i.doc.direction);if(!f||f[0].level==0){var v=Math.max(u.ch,c.text.search(/\S/)),y=s.line==u.line&&s.ch<=v&&s.ch;return Jt(u.line,y?0:v,u.sticky)}return u}function Es(i,s,u){if(typeof s=="string"&&!(s=Ps[s]))return!1;i.display.input.ensurePolled();var c=i.display.shift,f=!1;try{i.isReadOnly()&&(i.state.suppressEdits=!0),u&&(i.display.shift=!1),f=s(i)!=jt}finally{i.display.shift=c,i.state.suppressEdits=!1}return f}function bd(i,s,u){for(var c=0;c<i.state.keyMaps.length;c++){var f=ja(s,i.state.keyMaps[c],u,i);if(f)return f}return i.options.extraKeys&&ja(s,i.options.extraKeys,u,i)||ja(s,i.options.keyMap,u,i)}var Ru=new Zt;function Pi(i,s,u,c){var f=i.state.keySeq;if(f){if(Cl(s))return"handled";if(/\'$/.test(s)?i.state.keySeq=null:Ru.set(50,function(){i.state.keySeq==f&&(i.state.keySeq=null,i.display.input.reset())}),Ma(i,f+" "+s,u,c))return!0}return Ma(i,s,u,c)}function Ma(i,s,u,c){var f=bd(i,s,c);return f=="multi"&&(i.state.keySeq=s),f=="handled"&&Dn(i,"keyHandled",i,s,u),f!="handled"&&f!="multi"||(Me(u),ya(i)),!!f}function Fu(i,s){var u=Sl(s,!0);return!!u&&(s.shiftKey&&!i.state.keySeq?Pi(i,"Shift-"+u,s,function(c){return Es(i,c,!0)})||Pi(i,u,s,function(c){if(typeof c=="string"?/^go[A-Z]/.test(c):c.motion)return Es(i,c)}):Pi(i,u,s,function(c){return Es(i,c)}))}function Da(i,s,u){return Pi(i,"'"+u+"'",s,function(c){return Es(i,c,!0)})}var wc=null;function Hu(i){var s=this;if(!(i.target&&i.target!=s.display.input.getField()||(s.curOp.focus=Nt(),dt(s,i)))){H&&E<11&&i.keyCode==27&&(i.returnValue=!1);var u=i.keyCode;s.display.shift=u==16||i.shiftKey;var c=Fu(s,i);N&&(wc=c?u:null,c||u!=88||Vi||!(vt?i.metaKey:i.ctrlKey)||s.replaceSelection("",null,"cut")),$&&!vt&&!c&&u==46&&i.shiftKey&&!i.ctrlKey&&document.execCommand&&document.execCommand("cut"),u!=18||/\bCodeMirror-crosshair\b/.test(s.display.lineDiv.className)||_d(s)}}function _d(i){var s=i.display.lineDiv;function u(c){c.keyCode!=18&&c.altKey||(K(s,"CodeMirror-crosshair"),U(document,"keyup",u),U(document,"mouseover",u))}Pt(s,"CodeMirror-crosshair"),se(document,"keyup",u),se(document,"mouseover",u)}function Uu(i){i.keyCode==16&&(this.doc.sel.shift=!1),dt(this,i)}function zu(i){var s=this;if(!(i.target&&i.target!=s.display.input.getField()||T(s.display,i)||dt(s,i)||i.ctrlKey&&!i.altKey||vt&&i.metaKey)){var u=i.keyCode,c=i.charCode;if(N&&u==wc)return wc=null,void Me(i);if(!N||i.which&&!(i.which<10)||!Fu(s,i)){var f=String.fromCharCode(c??u);f!="\b"&&(Da(s,i,f)||s.display.input.onKeyPress(i))}}}var La,Ia,wd=400,Na=function(i,s,u){this.time=i,this.pos=s,this.button=u};function xd(i,s){var u=+new Date;return Ia&&Ia.compare(u,i,s)?(La=Ia=null,"triple"):La&&La.compare(u,i,s)?(Ia=new Na(u,i,s),La=null,"double"):(La=new Na(u,i,s),Ia=null,"single")}function xc(i){var s=this,u=s.display;if(!(dt(s,i)||u.activeTouch&&u.input.supportsTouch())){if(u.input.ensurePolled(),u.shift=i.shiftKey,T(u,i))_||(u.scroller.draggable=!1,setTimeout(function(){return u.scroller.draggable=!0},100));else if(!Cc(s,i)){var c=Wr(s,i),f=ur(i),v=c?xd(c,f):"single";window.focus(),f==1&&s.state.selectingText&&s.state.selectingText(i),c&&Cd(s,f,c,v,i)||(f==1?c?Sd(s,c,v,i):go(i)==u.scroller&&Me(i):f==2?(c&&yl(s.doc,c),setTimeout(function(){return u.input.focus()},20)):f==3&&(Ft?s.display.input.onContextMenu(i):rc(s)))}}}function Cd(i,s,u,c,f){var v="Click";return c=="double"?v="Double"+v:c=="triple"&&(v="Triple"+v),Pi(i,Iu(v=(s==1?"Left":s==2?"Middle":"Right")+v,f),f,function(y){if(typeof y=="string"&&(y=Ps[y]),!y)return!1;var b=!1;try{i.isReadOnly()&&(i.state.suppressEdits=!0),b=y(i,u)!=jt}finally{i.state.suppressEdits=!1}return b})}function Ei(i,s,u){var c=i.getOption("configureMouse"),f=c?c(i,s,u):{};if(f.unit==null){var v=ft?u.shiftKey&&u.metaKey:u.altKey;f.unit=v?"rectangle":s=="single"?"char":s=="double"?"word":"line"}return(f.extend==null||i.doc.extend)&&(f.extend=i.doc.extend||u.shiftKey),f.addNew==null&&(f.addNew=vt?u.metaKey:u.ctrlKey),f.moveOnDrag==null&&(f.moveOnDrag=!(vt?u.altKey:u.ctrlKey)),f}function Sd(i,s,u,c){H?setTimeout(Ut(rl,i),0):i.curOp.focus=Nt();var f,v=Ei(i,u,c),y=i.doc.sel;i.options.dragDrop&&En&&!i.isReadOnly()&&u=="single"&&(f=y.contains(s))>-1&&(ke((f=y.ranges[f]).from(),s)<0||s.xRel>0)&&(ke(f.to(),s)>0||s.xRel<0)?Od(i,c,s,v):Td(i,c,s,v)}function Od(i,s,u,c){var f=i.display,v=!1,y=An(i,function(j){_&&(f.scroller.draggable=!1),i.state.draggingText=!1,i.state.delayingBlurEvent&&(i.hasFocus()?i.state.delayingBlurEvent=!1:rc(i)),U(f.wrapper.ownerDocument,"mouseup",y),U(f.wrapper.ownerDocument,"mousemove",b),U(f.scroller,"dragstart",P),U(f.scroller,"drop",y),v||(Me(j),c.addNew||yl(i.doc,u,null,null,c.extend),_&&!V||H&&E==9?setTimeout(function(){f.wrapper.ownerDocument.body.focus({preventScroll:!0}),f.input.focus()},20):f.input.focus())}),b=function(j){v=v||Math.abs(s.clientX-j.clientX)+Math.abs(s.clientY-j.clientY)>=10},P=function(){return v=!0};_&&(f.scroller.draggable=!0),i.state.draggingText=y,y.copy=!c.moveOnDrag,se(f.wrapper.ownerDocument,"mouseup",y),se(f.wrapper.ownerDocument,"mousemove",b),se(f.scroller,"dragstart",P),se(f.scroller,"drop",y),i.state.delayingBlurEvent=!0,setTimeout(function(){return f.input.focus()},20),f.scroller.dragDrop&&f.scroller.dragDrop()}function Bu(i,s,u){if(u=="char")return new on(s,s);if(u=="word")return i.findWordAt(s);if(u=="line")return new on(Jt(s.line,0),ge(i.doc,Jt(s.line+1,0)));var c=u(i,s);return new on(c.from,c.to)}function Td(i,s,u,c){H&&rc(i);var f=i.display,v=i.doc;Me(s);var y,b,P=v.sel,j=P.ranges;if(c.addNew&&!c.extend?(b=v.sel.contains(u),y=b>-1?j[b]:new on(u,u)):(y=v.sel.primary(),b=v.sel.primIndex),c.unit=="rectangle")c.addNew||(y=new on(u,u)),u=Wr(i,s,!0,!0),b=-1;else{var Q=Bu(i,u,c.unit);y=c.extend?gc(y,Q.anchor,Q.head,c.extend):Q}c.addNew?b==-1?(b=j.length,bo(v,Bo(i,j.concat([y]),b),{scroll:!1,origin:"*mouse"})):j.length>1&&j[b].empty()&&c.unit=="char"&&!c.extend?(bo(v,Bo(i,j.slice(0,b).concat(j.slice(b+1)),0),{scroll:!1,origin:"*mouse"}),P=v.sel):vc(v,b,y,pe):(b=0,bo(v,new io([y],0),pe),P=v.sel);var Z=u;function mt(fe){if(ke(Z,fe)!=0)if(Z=fe,c.unit=="rectangle"){for(var Te=[],Se=i.options.tabSize,Pe=ee(he(v,u.line).text,u.ch,Se),yn=ee(he(v,fe.line).text,fe.ch,Se),rn=Math.min(Pe,yn),Wo=Math.max(Pe,yn),Tn=Math.min(u.line,fe.line),or=Math.min(i.lastLine(),Math.max(u.line,fe.line));Tn<=or;Tn++){var $o=he(v,Tn).text,Ln=kt($o,rn,Se);rn==Wo?Te.push(new on(Jt(Tn,Ln),Jt(Tn,Ln))):$o.length>Ln&&Te.push(new on(Jt(Tn,Ln),Jt(Tn,kt($o,Wo,Se))))}Te.length||Te.push(new on(u,u)),bo(v,Bo(i,P.ranges.slice(0,b).concat(Te),b),{origin:"*mouse",scroll:!1}),i.scrollIntoView(fe)}else{var Eo,ko=y,Ge=Bu(i,fe,c.unit),In=ko.anchor;ke(Ge.anchor,In)>0?(Eo=Ge.head,In=be(ko.from(),Ge.anchor)):(Eo=Ge.anchor,In=zt(ko.to(),Ge.head));var Nn=P.ranges.slice(0);Nn[b]=Wu(i,new on(ge(v,In),Eo)),bo(v,Bo(i,Nn,b),pe)}}var yt=f.wrapper.getBoundingClientRect(),Dt=0;function $t(fe){var Te=++Dt,Se=Wr(i,fe,!0,c.unit=="rectangle");if(Se)if(ke(Se,Z)!=0){i.curOp.focus=Nt(),mt(Se);var Pe=il(f,v);(Se.line>=Pe.to||Se.line<Pe.from)&&setTimeout(An(i,function(){Dt==Te&&$t(fe)}),150)}else{var yn=fe.clientY<yt.top?-20:fe.clientY>yt.bottom?20:0;yn&&setTimeout(An(i,function(){Dt==Te&&(f.scroller.scrollTop+=yn,$t(fe))}),50)}}function re(fe){i.state.selectingText=!1,Dt=1/0,fe&&(Me(fe),f.input.focus()),U(f.wrapper.ownerDocument,"mousemove",ye),U(f.wrapper.ownerDocument,"mouseup",Ce),v.history.lastSelOrigin=null}var ye=An(i,function(fe){fe.buttons!==0&&ur(fe)?$t(fe):re(fe)}),Ce=An(i,re);i.state.selectingText=Ce,se(f.wrapper.ownerDocument,"mousemove",ye),se(f.wrapper.ownerDocument,"mouseup",Ce)}function Wu(i,s){var u=s.anchor,c=s.head,f=he(i.doc,u.line);if(ke(u,c)==0&&u.sticky==c.sticky)return s;var v=Ue(f);if(!v)return s;var y=Ie(v,u.ch,u.sticky),b=v[y];if(b.from!=u.ch&&b.to!=u.ch)return s;var P,j=y+(b.from==u.ch==(b.level!=1)?0:1);if(j==0||j==v.length)return s;if(c.line!=u.line)P=(c.line-u.line)*(i.doc.direction=="ltr"?1:-1)>0;else{var Q=Ie(v,c.ch,c.sticky),Z=Q-y||(c.ch-u.ch)*(b.level==1?-1:1);P=Q==j-1||Q==j?Z<0:Z>0}var mt=v[j+(P?-1:0)],yt=P==(mt.level==1),Dt=yt?mt.from:mt.to,$t=yt?"after":"before";return u.ch==Dt&&u.sticky==$t?s:new on(new Jt(u.line,Dt,$t),c)}function Pl(i,s,u,c){var f,v;if(s.touches)f=s.touches[0].clientX,v=s.touches[0].clientY;else try{f=s.clientX,v=s.clientY}catch{return!1}if(f>=Math.floor(i.display.gutters.getBoundingClientRect().right))return!1;c&&Me(s);var y=i.display,b=y.lineDiv.getBoundingClientRect();if(v>b.bottom||!Kt(i,u))return Fn(s);v-=b.top-y.viewOffset;for(var P=0;P<i.display.gutterSpecs.length;++P){var j=y.gutters.childNodes[P];if(j&&j.getBoundingClientRect().right>=f)return rt(i,u,i,Lo(i.doc,v),i.display.gutterSpecs[P].className,s),Fn(s)}}function Cc(i,s){return Pl(i,s,"gutterClick",!0)}function $u(i,s){T(i.display,s)||qu(i,s)||dt(i,s,"contextmenu")||Ft||i.display.input.onContextMenu(s)}function qu(i,s){return!!Kt(i,"gutterContextMenu")&&Pl(i,s,"gutterContextMenu",!1)}function Gu(i){i.display.wrapper.className=i.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+i.options.theme.replace(/(^|\s)\s*/g," cm-s-"),os(i)}Na.prototype.compare=function(i,s,u){return this.time+wd>i&&ke(s,this.pos)==0&&u==this.button};var Va={toString:function(){return"CodeMirror.Init"}},Sc={},El={};function ks(i){var s=i.optionHandlers;function u(c,f,v,y){i.defaults[c]=f,v&&(s[c]=y?function(b,P,j){j!=Va&&v(b,P,j)}:v)}i.defineOption=u,i.Init=Va,u("value","",function(c,f){return c.setValue(f)},!0),u("mode",null,function(c,f){c.doc.modeOption=f,pc(c)},!0),u("indentUnit",2,pc,!0),u("indentWithTabs",!1),u("smartIndent",!0),u("tabSize",4,function(c){vs(c),os(c),No(c)},!0),u("lineSeparator",null,function(c,f){if(c.doc.lineSep=f,f){var v=[],y=c.doc.first;c.doc.iter(function(P){for(var j=0;;){var Q=P.text.indexOf(f,j);if(Q==-1)break;j=Q+f.length,v.push(Jt(y,Q))}y++});for(var b=v.length-1;b>=0;b--)Xi(c.doc,f,v[b],Jt(v[b].line,v[b].ch+f.length))}}),u("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(c,f,v){c.state.specialChars=new RegExp(f.source+(f.test("	")?"":"|	"),"g"),v!=Va&&c.refresh()}),u("specialCharPlaceholder",Je,function(c){return c.refresh()},!0),u("electricChars",!0),u("inputStyle",Et?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),u("spellcheck",!1,function(c,f){return c.getInputField().spellcheck=f},!0),u("autocorrect",!1,function(c,f){return c.getInputField().autocorrect=f},!0),u("autocapitalize",!1,function(c,f){return c.getInputField().autocapitalize=f},!0),u("rtlMoveVisually",!wt),u("wholeLineUpdateBefore",!0),u("theme","default",function(c){Gu(c),gs(c)},!0),u("keyMap","default",function(c,f,v){var y=Ol(f),b=v!=Va&&Ol(v);b&&b.detach&&b.detach(c,y),y.attach&&y.attach(c,b||null)}),u("extraKeys",null),u("configureMouse",null),u("lineWrapping",!1,Ed,!0),u("gutters",[],function(c,f){c.display.gutterSpecs=fl(f,c.options.lineNumbers),gs(c)},!0),u("fixedGutter",!0,function(c,f){c.display.gutters.style.left=f?ma(c.display)+"px":"0",c.refresh()},!0),u("coverGutterNextToScrollbar",!1,function(c){return Ca(c)},!0),u("scrollbarStyle","native",function(c){cl(c),Ca(c),c.display.scrollbars.setScrollTop(c.doc.scrollTop),c.display.scrollbars.setScrollLeft(c.doc.scrollLeft)},!0),u("lineNumbers",!1,function(c,f){c.display.gutterSpecs=fl(c.options.gutters,f),gs(c)},!0),u("firstLineNumber",1,gs,!0),u("lineNumberFormatter",function(c){return c},gs,!0),u("showCursorWhenSelecting",!1,as,!0),u("resetSelectionOnContextMenu",!0),u("lineWiseCopyCut",!0),u("pasteLinesPerSelection",!0),u("selectionsMayTouch",!1),u("readOnly",!1,function(c,f){f=="nocursor"&&(oi(c),c.display.input.blur()),c.display.input.readOnlyChanged(f)}),u("screenReaderLabel",null,function(c,f){f=f===""?null:f,c.display.input.screenReaderLabelChanged(f)}),u("disableInput",!1,function(c,f){f||c.display.input.reset()},!0),u("dragDrop",!0,Pd),u("allowDropFileTypes",null),u("cursorBlinkRate",530),u("cursorScrollMargin",0),u("cursorHeight",1,as,!0),u("singleCursorHeightPerLine",!0,as,!0),u("workTime",100),u("workDelay",100),u("flattenSpans",!0,vs,!0),u("addModeClass",!1,vs,!0),u("pollInterval",100),u("undoDepth",200,function(c,f){return c.doc.history.undoDepth=f}),u("historyEventDelay",1250),u("viewportMargin",10,function(c){return c.refresh()},!0),u("maxHighlightLength",1e4,vs,!0),u("moveInputWithCursor",!0,function(c,f){f||c.display.input.resetPosition()}),u("tabindex",null,function(c,f){return c.display.input.getField().tabIndex=f||""}),u("autofocus",null),u("direction","ltr",function(c,f){return c.doc.setDirection(f)},!0),u("phrases",null)}function Pd(i,s,u){if(!s!=!(u&&u!=Va)){var c=i.display.dragFunctions,f=s?se:U;f(i.display.scroller,"dragstart",c.start),f(i.display.scroller,"dragenter",c.enter),f(i.display.scroller,"dragover",c.over),f(i.display.scroller,"dragleave",c.leave),f(i.display.scroller,"drop",c.drop)}}function Ed(i){i.options.lineWrapping?(Pt(i.display.wrapper,"CodeMirror-wrap"),i.display.sizer.style.minWidth="",i.display.sizerWidth=null):(K(i.display.wrapper,"CodeMirror-wrap"),pa(i)),oc(i),No(i),os(i),setTimeout(function(){return Ca(i)},100)}function On(i,s){var u=this;if(!(this instanceof On))return new On(i,s);this.options=s=s?Ht(s):{},Ht(Sc,s,!1);var c=s.value;typeof c=="string"?c=new Vo(c,s.mode,null,s.lineSeparator,s.direction):s.mode&&(c.modeOption=s.mode),this.doc=c;var f=new On.inputStyles[s.inputStyle](this),v=this.display=new Qp(i,c,f,s);for(var y in v.wrapper.CodeMirror=this,Gu(this),s.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),cl(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Zt,keySeq:null,specialChars:null},s.autofocus&&!Et&&v.input.focus(),H&&E<11&&setTimeout(function(){return u.display.input.reset(!0)},20),Ku(this),fd(),Yi(this),this.curOp.forceUpdate=!0,vu(this,c),s.autofocus&&!Et||this.hasFocus()?setTimeout(function(){u.hasFocus()&&!u.state.focused&&ic(u)},20):oi(this),El)El.hasOwnProperty(y)&&El[y](this,s[y],Va);cu(this),s.finishInit&&s.finishInit(this);for(var b=0;b<kl.length;++b)kl[b](this);qr(this),_&&s.lineWrapping&&getComputedStyle(v.lineDiv).textRendering=="optimizelegibility"&&(v.lineDiv.style.textRendering="auto")}function Ku(i){var s=i.display;se(s.scroller,"mousedown",An(i,xc)),se(s.scroller,"dblclick",H&&E<11?An(i,function(P){if(!dt(i,P)){var j=Wr(i,P);if(j&&!Cc(i,P)&&!T(i.display,P)){Me(P);var Q=i.findWordAt(j);yl(i.doc,Q.anchor,Q.head)}}}):function(P){return dt(i,P)||Me(P)}),se(s.scroller,"contextmenu",function(P){return $u(i,P)}),se(s.input.getField(),"contextmenu",function(P){s.scroller.contains(P.target)||$u(i,P)});var u,c={end:0};function f(){s.activeTouch&&(u=setTimeout(function(){return s.activeTouch=null},1e3),(c=s.activeTouch).end=+new Date)}function v(P){if(P.touches.length!=1)return!1;var j=P.touches[0];return j.radiusX<=1&&j.radiusY<=1}function y(P,j){if(j.left==null)return!0;var Q=j.left-P.left,Z=j.top-P.top;return Q*Q+Z*Z>400}se(s.scroller,"touchstart",function(P){if(!dt(i,P)&&!v(P)&&!Cc(i,P)){s.input.ensurePolled(),clearTimeout(u);var j=+new Date;s.activeTouch={start:j,moved:!1,prev:j-c.end<=300?c:null},P.touches.length==1&&(s.activeTouch.left=P.touches[0].pageX,s.activeTouch.top=P.touches[0].pageY)}}),se(s.scroller,"touchmove",function(){s.activeTouch&&(s.activeTouch.moved=!0)}),se(s.scroller,"touchend",function(P){var j=s.activeTouch;if(j&&!T(s,P)&&j.left!=null&&!j.moved&&new Date-j.start<300){var Q,Z=i.coordsChar(s.activeTouch,"page");Q=!j.prev||y(j,j.prev)?new on(Z,Z):!j.prev.prev||y(j,j.prev.prev)?i.findWordAt(Z):new on(Jt(Z.line,0),ge(i.doc,Jt(Z.line+1,0))),i.setSelection(Q.anchor,Q.head),i.focus(),Me(P)}f()}),se(s.scroller,"touchcancel",f),se(s.scroller,"scroll",function(){s.scroller.clientHeight&&(us(i,s.scroller.scrollTop),Gi(i,s.scroller.scrollLeft,!0),rt(i,"scroll",i))}),se(s.scroller,"mousewheel",function(P){return du(i,P)}),se(s.scroller,"DOMMouseScroll",function(P){return du(i,P)}),se(s.wrapper,"scroll",function(){return s.wrapper.scrollTop=s.wrapper.scrollLeft=0}),s.dragFunctions={enter:function(P){dt(i,P)||xn(P)},over:function(P){dt(i,P)||(Aa(i,P),xn(P))},start:function(P){return bc(i,P)},drop:An(i,dd),leave:function(P){dt(i,P)||Du(i)}};var b=s.input.getField();se(b,"keyup",function(P){return Uu.call(i,P)}),se(b,"keydown",An(i,Hu)),se(b,"keypress",An(i,zu)),se(b,"focus",function(P){return ic(i,P)}),se(b,"blur",function(P){return oi(i,P)})}On.defaults=Sc,On.optionHandlers=El;var kl=[];function Ra(i,s,u,c){var f,v=i.doc;u==null&&(u="add"),u=="smart"&&(v.mode.indent?f=Rr(i,s).state:u="prev");var y=i.options.tabSize,b=he(v,s),P=ee(b.text,null,y);b.stateAfter&&(b.stateAfter=null);var j,Q=b.text.match(/^\s*/)[0];if(c||/\S/.test(b.text)){if(u=="smart"&&((j=v.mode.indent(f,b.text.slice(Q.length),b.text))==jt||j>150)){if(!c)return;u="prev"}}else j=0,u="not";u=="prev"?j=s>v.first?ee(he(v,s-1).text,null,y):0:u=="add"?j=P+i.options.indentUnit:u=="subtract"?j=P-i.options.indentUnit:typeof u=="number"&&(j=P+u),j=Math.max(0,j);var Z="",mt=0;if(i.options.indentWithTabs)for(var yt=Math.floor(j/y);yt;--yt)mt+=y,Z+="	";if(mt<j&&(Z+=de(j-mt)),Z!=Q)return Xi(v,Z,Jt(s,0),Jt(s,Q.length),"+input"),b.stateAfter=null,!0;for(var Dt=0;Dt<v.sel.ranges.length;Dt++){var $t=v.sel.ranges[Dt];if($t.head.line==s&&$t.head.ch<Q.length){var re=Jt(s,Q.length);vc(v,Dt,new on(re,re));break}}}On.defineInitHook=function(i){return kl.push(i)};var mr=null;function Al(i){mr=i}function ea(i,s,u,c,f){var v=i.doc;i.display.shift=!1,c||(c=v.sel);var y=+new Date-200,b=f=="paste"||i.state.pasteIncoming>y,P=Zn(s),j=null;if(b&&c.ranges.length>1)if(mr&&mr.text.join(`
`)==s){if(c.ranges.length%mr.text.length==0){j=[];for(var Q=0;Q<mr.text.length;Q++)j.push(v.splitLines(mr.text[Q]))}}else P.length==c.ranges.length&&i.options.pasteLinesPerSelection&&(j=ae(P,function(ye){return[ye]}));for(var Z=i.curOp.updateInput,mt=c.ranges.length-1;mt>=0;mt--){var yt=c.ranges[mt],Dt=yt.from(),$t=yt.to();yt.empty()&&(u&&u>0?Dt=Jt(Dt.line,Dt.ch-u):i.state.overwrite&&!b?$t=Jt($t.line,Math.min(he(v,$t.line).text.length,$t.ch+St(P).length)):b&&mr&&mr.lineWise&&mr.text.join(`
`)==P.join(`
`)&&(Dt=$t=Jt(Dt.line,0)));var re={from:Dt,to:$t,text:j?j[mt%j.length]:P,origin:f||(b?"paste":i.state.cutIncoming>y?"cut":"+input")};Ea(i.doc,re),Dn(i,"inputRead",i,re)}s&&!b&&Oc(i,s),wa(i),i.curOp.updateInput<2&&(i.curOp.updateInput=Z),i.curOp.typing=!0,i.state.pasteIncoming=i.state.cutIncoming=-1}function jl(i,s){var u=i.clipboardData&&i.clipboardData.getData("Text");if(u)return i.preventDefault(),s.isReadOnly()||s.options.disableInput||ro(s,function(){return ea(s,u,0,null,"paste")}),!0}function Oc(i,s){if(i.options.electricChars&&i.options.smartIndent)for(var u=i.doc.sel,c=u.ranges.length-1;c>=0;c--){var f=u.ranges[c];if(!(f.head.ch>100||c&&u.ranges[c-1].head.line==f.head.line)){var v=i.getModeAt(f.head),y=!1;if(v.electricChars){for(var b=0;b<v.electricChars.length;b++)if(s.indexOf(v.electricChars.charAt(b))>-1){y=Ra(i,f.head.line,"smart");break}}else v.electricInput&&v.electricInput.test(he(i.doc,f.head.line).text.slice(0,f.head.ch))&&(y=Ra(i,f.head.line,"smart"));y&&Dn(i,"electricInput",i,f.head.line)}}}function Tc(i){for(var s=[],u=[],c=0;c<i.doc.sel.ranges.length;c++){var f=i.doc.sel.ranges[c].head.line,v={anchor:Jt(f,0),head:Jt(f+1,0)};u.push(v),s.push(i.getRange(v.anchor,v.head))}return{text:s,ranges:u}}function Pc(i,s,u,c){i.setAttribute("autocorrect",u?"":"off"),i.setAttribute("autocapitalize",c?"":"off"),i.setAttribute("spellcheck",!!s)}function Fa(){var i=G("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),s=G("div",[i],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return _?i.style.width="1000px":i.setAttribute("wrap","off"),ct&&(i.style.border="1px solid black"),Pc(i),s}function kd(i){var s=i.optionHandlers,u=i.helpers={};i.prototype={constructor:i,focus:function(){window.focus(),this.display.input.focus()},setOption:function(c,f){var v=this.options,y=v[c];v[c]==f&&c!="mode"||(v[c]=f,s.hasOwnProperty(c)&&An(this,s[c])(this,f,y),rt(this,"optionChange",this,c))},getOption:function(c){return this.options[c]},getDoc:function(){return this.doc},addKeyMap:function(c,f){this.state.keyMaps[f?"push":"unshift"](Ol(c))},removeKeyMap:function(c){for(var f=this.state.keyMaps,v=0;v<f.length;++v)if(f[v]==c||f[v].name==c)return f.splice(v,1),!0},addOverlay:yo(function(c,f){var v=c.token?c:i.getMode(this.options,c);if(v.startState)throw new Error("Overlays may not be stateful.");je(this.state.overlays,{mode:v,modeSpec:c,opaque:f&&f.opaque,priority:f&&f.priority||0},function(y){return y.priority}),this.state.modeGen++,No(this)}),removeOverlay:yo(function(c){for(var f=this.state.overlays,v=0;v<f.length;++v){var y=f[v].modeSpec;if(y==c||typeof c=="string"&&y.name==c)return f.splice(v,1),this.state.modeGen++,void No(this)}}),indentLine:yo(function(c,f,v){typeof f!="string"&&typeof f!="number"&&(f=f==null?this.options.smartIndent?"smart":"prev":f?"add":"subtract"),Io(this.doc,c)&&Ra(this,c,f,v)}),indentSelection:yo(function(c){for(var f=this.doc.sel.ranges,v=-1,y=0;y<f.length;y++){var b=f[y];if(b.empty())b.head.line>v&&(Ra(this,b.head.line,c,!0),v=b.head.line,y==this.doc.sel.primIndex&&wa(this));else{var P=b.from(),j=b.to(),Q=Math.max(v,P.line);v=Math.min(this.lastLine(),j.line-(j.ch?0:1))+1;for(var Z=Q;Z<v;++Z)Ra(this,Z,c);var mt=this.doc.sel.ranges;P.ch==0&&f.length==mt.length&&mt[y].from().ch>0&&vc(this.doc,y,new on(P,mt[y].to()),Xt)}}}),getTokenAt:function(c,f){return Ur(this,c,f)},getLineTokens:function(c,f){return Ur(this,Jt(c),f,!0)},getTokenTypeAt:function(c){c=ge(this.doc,c);var f,v=hi(this,he(this.doc,c.line)),y=0,b=(v.length-1)/2,P=c.ch;if(P==0)f=v[2];else for(;;){var j=y+b>>1;if((j?v[2*j-1]:0)>=P)b=j;else{if(!(v[2*j+1]<P)){f=v[2*j+2];break}y=j+1}}var Q=f?f.indexOf("overlay "):-1;return Q<0?f:Q==0?null:f.slice(0,Q-1)},getModeAt:function(c){var f=this.doc.mode;return f.innerMode?i.innerMode(f,this.getTokenAt(c).state).mode:f},getHelper:function(c,f){return this.getHelpers(c,f)[0]},getHelpers:function(c,f){var v=[];if(!u.hasOwnProperty(f))return v;var y=u[f],b=this.getModeAt(c);if(typeof b[f]=="string")y[b[f]]&&v.push(y[b[f]]);else if(b[f])for(var P=0;P<b[f].length;P++){var j=y[b[f][P]];j&&v.push(j)}else b.helperType&&y[b.helperType]?v.push(y[b.helperType]):y[b.name]&&v.push(y[b.name]);for(var Q=0;Q<y._global.length;Q++){var Z=y._global[Q];Z.pred(b,this)&&le(v,Z.val)==-1&&v.push(Z.val)}return v},getStateAfter:function(c,f){var v=this.doc;return Rr(this,(c=Oe(v,c??v.first+v.size-1))+1,f).state},cursorCoords:function(c,f){var v=this.doc.sel.primary();return er(this,c==null?v.head:typeof c=="object"?ge(this.doc,c):c?v.from():v.to(),f||"page")},charCoords:function(c,f){return Qs(this,ge(this.doc,c),f||"page")},coordsChar:function(c,f){return tc(this,(c=Zl(this,c,f||"page")).left,c.top)},lineAtHeight:function(c,f){return c=Zl(this,{top:c,left:0},f||"page").top,Lo(this.doc,c+this.display.viewOffset)},heightAtLine:function(c,f,v){var y,b=!1;if(typeof c=="number"){var P=this.doc.first+this.doc.size-1;c<this.doc.first?c=this.doc.first:c>P&&(c=P,b=!0),y=he(this.doc,c)}else y=c;return Zs(this,y,{top:0,left:0},f||"page",v||b).top+(b?this.doc.height-hr(y):0)},defaultTextHeight:function(){return va(this.display)},defaultCharWidth:function(){return wi(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(c,f,v,y,b){var P=this.display,j=(c=er(this,ge(this.doc,c))).bottom,Q=c.left;if(f.style.position="absolute",f.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(f),P.sizer.appendChild(f),y=="over")j=c.top;else if(y=="above"||y=="near"){var Z=Math.max(P.wrapper.clientHeight,this.doc.height),mt=Math.max(P.sizer.clientWidth,P.lineSpace.clientWidth);(y=="above"||c.bottom+f.offsetHeight>Z)&&c.top>f.offsetHeight?j=c.top-f.offsetHeight:c.bottom+f.offsetHeight<=Z&&(j=c.bottom),Q+f.offsetWidth>mt&&(Q=mt-f.offsetWidth)}f.style.top=j+"px",f.style.left=f.style.right="",b=="right"?(Q=P.sizer.clientWidth-f.offsetWidth,f.style.right="0px"):(b=="left"?Q=0:b=="middle"&&(Q=(P.sizer.clientWidth-f.offsetWidth)/2),f.style.left=Q+"px"),v&&$p(this,{left:Q,top:j,right:Q+f.offsetWidth,bottom:j+f.offsetHeight})},triggerOnKeyDown:yo(Hu),triggerOnKeyPress:yo(zu),triggerOnKeyUp:Uu,triggerOnMouseDown:yo(xc),execCommand:function(c){if(Ps.hasOwnProperty(c))return Ps[c].call(null,this)},triggerElectric:yo(function(c){Oc(this,c)}),findPosH:function(c,f,v,y){var b=1;f<0&&(b=-1,f=-f);for(var P=ge(this.doc,c),j=0;j<f&&!(P=Ec(this.doc,P,b,v,y)).hitSide;++j);return P},moveH:yo(function(c,f){var v=this;this.extendSelectionsBy(function(y){return v.display.shift||v.doc.extend||y.empty()?Ec(v.doc,y.head,c,f,v.options.rtlMoveVisually):c<0?y.from():y.to()},me)}),deleteH:yo(function(c,f){var v=this.doc.sel,y=this.doc;v.somethingSelected()?y.replaceSelection("",null,"+delete"):ta(this,function(b){var P=Ec(y,b.head,c,f,!1);return c<0?{from:P,to:b.head}:{from:b.head,to:P}})}),findPosV:function(c,f,v,y){var b=1,P=y;f<0&&(b=-1,f=-f);for(var j=ge(this.doc,c),Q=0;Q<f;++Q){var Z=er(this,j,"div");if(P==null?P=Z.left:Z.left=P,(j=kc(this,Z,b,v)).hitSide)break}return j},moveV:yo(function(c,f){var v=this,y=this.doc,b=[],P=!this.display.shift&&!y.extend&&y.sel.somethingSelected();if(y.extendSelectionsBy(function(Q){if(P)return c<0?Q.from():Q.to();var Z=er(v,Q.head,"div");Q.goalColumn!=null&&(Z.left=Q.goalColumn),b.push(Z.left);var mt=kc(v,Z,c,f);return f=="page"&&Q==y.sel.primary()&&ls(v,Qs(v,mt,"div").top-Z.top),mt},me),b.length)for(var j=0;j<y.sel.ranges.length;j++)y.sel.ranges[j].goalColumn=b[j]}),findWordAt:function(c){var f=he(this.doc,c.line).text,v=c.ch,y=c.ch;if(f){var b=this.getHelper(c,"wordChars");c.sticky!="before"&&y!=f.length||!v?++y:--v;for(var P=f.charAt(v),j=bt(P,b)?function(Q){return bt(Q,b)}:/\s/.test(P)?function(Q){return/\s/.test(Q)}:function(Q){return!/\s/.test(Q)&&!bt(Q)};v>0&&j(f.charAt(v-1));)--v;for(;y<f.length&&j(f.charAt(y));)++y}return new on(Jt(c.line,v),Jt(c.line,y))},toggleOverwrite:function(c){c!=null&&c==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?Pt(this.display.cursorDiv,"CodeMirror-overwrite"):K(this.display.cursorDiv,"CodeMirror-overwrite"),rt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==Nt()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:yo(function(c,f){cs(this,c,f)}),getScrollInfo:function(){var c=this.display.scroller;return{left:c.scrollLeft,top:c.scrollTop,height:c.scrollHeight-Ct(this)-this.display.barHeight,width:c.scrollWidth-Ct(this)-this.display.barWidth,clientHeight:Bt(this),clientWidth:gt(this)}},scrollIntoView:yo(function(c,f){c==null?(c={from:this.doc.sel.primary().head,to:null},f==null&&(f=this.options.cursorScrollMargin)):typeof c=="number"?c={from:Jt(c,0),to:null}:c.from==null&&(c={from:c,to:null}),c.to||(c.to=c.from),c.margin=f||0,c.from.line!=null?sl(this,c):ll(this,c.from,c.to,c.margin)}),setSize:yo(function(c,f){var v=this,y=function(P){return typeof P=="number"||/^\d+$/.test(String(P))?P+"px":P};c!=null&&(this.display.wrapper.style.width=y(c)),f!=null&&(this.display.wrapper.style.height=y(f)),this.options.lineWrapping&&Qc(this);var b=this.display.viewFrom;this.doc.iter(b,this.display.viewTo,function(P){if(P.widgets){for(var j=0;j<P.widgets.length;j++)if(P.widgets[j].noHScroll){xi(v,b,"widget");break}}++b}),this.curOp.forceUpdate=!0,rt(this,"refresh",this)}),operation:function(c){return ro(this,c)},startOperation:function(){return Yi(this)},endOperation:function(){return qr(this)},refresh:yo(function(){var c=this.display.cachedTextHeight;No(this),this.curOp.forceUpdate=!0,os(this),cs(this,this.doc.scrollLeft,this.doc.scrollTop),vr(this.display),(c==null||Math.abs(c-va(this.display))>.5||this.options.lineWrapping)&&oc(this),rt(this,"refresh",this)}),swapDoc:yo(function(c){var f=this.doc;return f.cm=null,this.state.selectingText&&this.state.selectingText(),vu(this,c),os(this),this.display.input.reset(),cs(this,c.scrollLeft,c.scrollTop),this.curOp.forceScroll=!0,Dn(this,"swapDoc",this,f),f}),phrase:function(c){var f=this.options.phrases;return f&&Object.prototype.hasOwnProperty.call(f,c)?f[c]:c},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Le(i),i.registerHelper=function(c,f,v){u.hasOwnProperty(c)||(u[c]=i[c]={_global:[]}),u[c][f]=v},i.registerGlobalHelper=function(c,f,v,y){i.registerHelper(c,f,y),u[c]._global.push({pred:v,val:y})}}function Ec(i,s,u,c,f){var v=s,y=u,b=he(i,s.line),P=f&&i.direction=="rtl"?-u:u;function j(){var Ce=s.line+P;return!(Ce<i.first||Ce>=i.first+i.size)&&(s=new Jt(Ce,s.ch,s.sticky),b=he(i,Ce))}function Q(Ce){var fe;if(c=="codepoint"){var Te=b.text.charCodeAt(s.ch+(u>0?0:-1));if(isNaN(Te))fe=null;else{var Se=u>0?Te>=55296&&Te<56320:Te>=56320&&Te<57343;fe=new Jt(s.line,Math.max(0,Math.min(b.text.length,s.ch+u*(Se?2:1))),-u)}}else fe=f?md(i.cm,b,s,u):_c(b,s,u);if(fe==null){if(Ce||!j())return!1;s=si(f,i.cm,b,s.line,P)}else s=fe;return!0}if(c=="char"||c=="codepoint")Q();else if(c=="column")Q(!0);else if(c=="word"||c=="group")for(var Z=null,mt=c=="group",yt=i.cm&&i.cm.getHelper(s,"wordChars"),Dt=!0;!(u<0)||Q(!Dt);Dt=!1){var $t=b.text.charAt(s.ch)||`
`,re=bt($t,yt)?"w":mt&&$t==`
`?"n":!mt||/\s/.test($t)?null:"p";if(!mt||Dt||re||(re="s"),Z&&Z!=re){u<0&&(u=1,Q(),s.sticky="after");break}if(re&&(Z=re),u>0&&!Q(!Dt))break}var ye=bl(i,s,v,y,!0);return M(v,ye)&&(ye.hitSide=!0),ye}function kc(i,s,u,c){var f,v,y=i.doc,b=s.left;if(c=="page"){var P=Math.min(i.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),j=Math.max(P-.5*va(i.display),3);f=(u>0?s.bottom:s.top)+u*j}else c=="line"&&(f=u>0?s.bottom+3:s.top-3);for(;(v=tc(i,b,f)).outside;){if(u<0?f<=0:f>=y.height){v.hitSide=!0;break}f+=5*u}return v}var hn=function(i){this.cm=i,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Zt,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Yu(i,s){var u=mo(i,s.line);if(!u||u.hidden)return null;var c=he(i.doc,s.line),f=Ne(u,c,s.line),v=Ue(c,i.doc.direction),y="left";v&&(y=Ie(v,s.ch)%2?"right":"left");var b=Jc(f.map,s.ch,y);return b.offset=b.collapse=="right"?b.end:b.start,b}function Xu(i){for(var s=i;s;s=s.parentNode)if(/CodeMirror-gutter-wrapper/.test(s.className))return!0;return!1}function Ha(i,s){return s&&(i.bad=!0),i}function Ad(i,s,u,c,f){var v="",y=!1,b=i.doc.lineSeparator(),P=!1;function j(yt){return function(Dt){return Dt.id==yt}}function Q(){y&&(v+=b,P&&(v+=b),y=P=!1)}function Z(yt){yt&&(Q(),v+=yt)}function mt(yt){if(yt.nodeType==1){var Dt=yt.getAttribute("cm-text");if(Dt)return void Z(Dt);var $t,re=yt.getAttribute("cm-marker");if(re){var ye=i.findMarks(Jt(c,0),Jt(f+1,0),j(+re));return void(ye.length&&($t=ye[0].find(0))&&Z(Qn(i.doc,$t.from,$t.to).join(b)))}if(yt.getAttribute("contenteditable")=="false")return;var Ce=/^(pre|div|p|li|table|br)$/i.test(yt.nodeName);if(!/^br$/i.test(yt.nodeName)&&yt.textContent.length==0)return;Ce&&Q();for(var fe=0;fe<yt.childNodes.length;fe++)mt(yt.childNodes[fe]);/^(pre|p)$/i.test(yt.nodeName)&&(P=!0),Ce&&(y=!0)}else yt.nodeType==3&&Z(yt.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;mt(s),s!=u;)s=s.nextSibling,P=!1;return v}function Ml(i,s,u){var c;if(s==i.display.lineDiv){if(!(c=i.display.lineDiv.childNodes[u]))return Ha(i.clipPos(Jt(i.display.viewTo-1)),!0);s=null,u=0}else for(c=s;;c=c.parentNode){if(!c||c==i.display.lineDiv)return null;if(c.parentNode&&c.parentNode==i.display.lineDiv)break}for(var f=0;f<i.display.view.length;f++){var v=i.display.view[f];if(v.node==c)return jd(v,s,u)}}function jd(i,s,u){var c=i.text.firstChild,f=!1;if(!s||!I(c,s))return Ha(Jt(nn(i.line),0),!0);if(s==c&&(f=!0,s=c.childNodes[u],u=0,!s)){var v=i.rest?St(i.rest):i.line;return Ha(Jt(nn(v),v.text.length),f)}var y=s.nodeType==3?s:null,b=s;for(y||s.childNodes.length!=1||s.firstChild.nodeType!=3||(y=s.firstChild,u&&(u=y.nodeValue.length));b.parentNode!=c;)b=b.parentNode;var P=i.measure,j=P.maps;function Q(re,ye,Ce){for(var fe=-1;fe<(j?j.length:0);fe++)for(var Te=fe<0?P.map:j[fe],Se=0;Se<Te.length;Se+=3){var Pe=Te[Se+2];if(Pe==re||Pe==ye){var yn=nn(fe<0?i.line:i.rest[fe]),rn=Te[Se]+Ce;return(Ce<0||Pe!=re)&&(rn=Te[Se+(Ce?1:0)]),Jt(yn,rn)}}}var Z=Q(y,b,u);if(Z)return Ha(Z,f);for(var mt=b.nextSibling,yt=y?y.nodeValue.length-u:0;mt;mt=mt.nextSibling){if(Z=Q(mt,mt.firstChild,0))return Ha(Jt(Z.line,Z.ch-yt),f);yt+=mt.textContent.length}for(var Dt=b.previousSibling,$t=u;Dt;Dt=Dt.previousSibling){if(Z=Q(Dt,Dt.firstChild,-1))return Ha(Jt(Z.line,Z.ch+$t),f);$t+=Dt.textContent.length}}hn.prototype.init=function(i){var s=this,u=this,c=u.cm,f=u.div=i.lineDiv;function v(b){for(var P=b.target;P;P=P.parentNode){if(P==f)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(P.className))break}return!1}function y(b){if(v(b)&&!dt(c,b)){if(c.somethingSelected())Al({lineWise:!1,text:c.getSelections()}),b.type=="cut"&&c.replaceSelection("",null,"cut");else{if(!c.options.lineWiseCopyCut)return;var P=Tc(c);Al({lineWise:!0,text:P.text}),b.type=="cut"&&c.operation(function(){c.setSelections(P.ranges,0,Xt),c.replaceSelection("",null,"cut")})}if(b.clipboardData){b.clipboardData.clearData();var j=mr.text.join(`
`);if(b.clipboardData.setData("Text",j),b.clipboardData.getData("Text")==j)return void b.preventDefault()}var Q=Fa(),Z=Q.firstChild;c.display.lineSpace.insertBefore(Q,c.display.lineSpace.firstChild),Z.value=mr.text.join(`
`);var mt=Nt();_t(Z),setTimeout(function(){c.display.lineSpace.removeChild(Q),mt.focus(),mt==f&&u.showPrimarySelection()},50)}}f.contentEditable=!0,Pc(f,c.options.spellcheck,c.options.autocorrect,c.options.autocapitalize),se(f,"paste",function(b){!v(b)||dt(c,b)||jl(b,c)||E<=11&&setTimeout(An(c,function(){return s.updateFromDOM()}),20)}),se(f,"compositionstart",function(b){s.composing={data:b.data,done:!1}}),se(f,"compositionupdate",function(b){s.composing||(s.composing={data:b.data,done:!1})}),se(f,"compositionend",function(b){s.composing&&(b.data!=s.composing.data&&s.readFromDOMSoon(),s.composing.done=!0)}),se(f,"touchstart",function(){return u.forceCompositionEnd()}),se(f,"input",function(){s.composing||s.readFromDOMSoon()}),se(f,"copy",y),se(f,"cut",y)},hn.prototype.screenReaderLabelChanged=function(i){i?this.div.setAttribute("aria-label",i):this.div.removeAttribute("aria-label")},hn.prototype.prepareSelection=function(){var i=ss(this.cm,!1);return i.focus=Nt()==this.div,i},hn.prototype.showSelection=function(i,s){i&&this.cm.display.view.length&&((i.focus||s)&&this.showPrimarySelection(),this.showMultipleSelections(i))},hn.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},hn.prototype.showPrimarySelection=function(){var i=this.getSelection(),s=this.cm,u=s.doc.sel.primary(),c=u.from(),f=u.to();if(s.display.viewTo==s.display.viewFrom||c.line>=s.display.viewTo||f.line<s.display.viewFrom)i.removeAllRanges();else{var v=Ml(s,i.anchorNode,i.anchorOffset),y=Ml(s,i.focusNode,i.focusOffset);if(!v||v.bad||!y||y.bad||ke(be(v,y),c)!=0||ke(zt(v,y),f)!=0){var b=s.display.view,P=c.line>=s.display.viewFrom&&Yu(s,c)||{node:b[0].measure.map[2],offset:0},j=f.line<s.display.viewTo&&Yu(s,f);if(!j){var Q=b[b.length-1].measure,Z=Q.maps?Q.maps[Q.maps.length-1]:Q.map;j={node:Z[Z.length-1],offset:Z[Z.length-2]-Z[Z.length-3]}}if(P&&j){var mt,yt=i.rangeCount&&i.getRangeAt(0);try{mt=W(P.node,P.offset,j.offset,j.node)}catch{}mt&&(!$&&s.state.focused?(i.collapse(P.node,P.offset),mt.collapsed||(i.removeAllRanges(),i.addRange(mt))):(i.removeAllRanges(),i.addRange(mt)),yt&&i.anchorNode==null?i.addRange(yt):$&&this.startGracePeriod()),this.rememberSelection()}else i.removeAllRanges()}}},hn.prototype.startGracePeriod=function(){var i=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){i.gracePeriod=!1,i.selectionChanged()&&i.cm.operation(function(){return i.cm.curOp.selectionChanged=!0})},20)},hn.prototype.showMultipleSelections=function(i){ht(this.cm.display.cursorDiv,i.cursors),ht(this.cm.display.selectionDiv,i.selection)},hn.prototype.rememberSelection=function(){var i=this.getSelection();this.lastAnchorNode=i.anchorNode,this.lastAnchorOffset=i.anchorOffset,this.lastFocusNode=i.focusNode,this.lastFocusOffset=i.focusOffset},hn.prototype.selectionInEditor=function(){var i=this.getSelection();if(!i.rangeCount)return!1;var s=i.getRangeAt(0).commonAncestorContainer;return I(this.div,s)},hn.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&(this.selectionInEditor()&&Nt()==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},hn.prototype.blur=function(){this.div.blur()},hn.prototype.getField=function(){return this.div},hn.prototype.supportsTouch=function(){return!0},hn.prototype.receivedFocus=function(){var i=this,s=this;function u(){s.cm.state.focused&&(s.pollSelection(),s.polling.set(s.cm.options.pollInterval,u))}this.selectionInEditor()?setTimeout(function(){return i.pollSelection()},20):ro(this.cm,function(){return s.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,u)},hn.prototype.selectionChanged=function(){var i=this.getSelection();return i.anchorNode!=this.lastAnchorNode||i.anchorOffset!=this.lastAnchorOffset||i.focusNode!=this.lastFocusNode||i.focusOffset!=this.lastFocusOffset},hn.prototype.pollSelection=function(){if(this.readDOMTimeout==null&&!this.gracePeriod&&this.selectionChanged()){var i=this.getSelection(),s=this.cm;if(Tt&&x&&this.cm.display.gutterSpecs.length&&Xu(i.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var u=Ml(s,i.anchorNode,i.anchorOffset),c=Ml(s,i.focusNode,i.focusOffset);u&&c&&ro(s,function(){bo(s.doc,Ci(u,c),Xt),(u.bad||c.bad)&&(s.curOp.selectionChanged=!0)})}}},hn.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var i,s,u,c=this.cm,f=c.display,v=c.doc.sel.primary(),y=v.from(),b=v.to();if(y.ch==0&&y.line>c.firstLine()&&(y=Jt(y.line-1,he(c.doc,y.line-1).length)),b.ch==he(c.doc,b.line).text.length&&b.line<c.lastLine()&&(b=Jt(b.line+1,0)),y.line<f.viewFrom||b.line>f.viewTo-1)return!1;y.line==f.viewFrom||(i=ni(c,y.line))==0?(s=nn(f.view[0].line),u=f.view[0].node):(s=nn(f.view[i].line),u=f.view[i-1].node.nextSibling);var P,j,Q=ni(c,b.line);if(Q==f.view.length-1?(P=f.viewTo-1,j=f.lineDiv.lastChild):(P=nn(f.view[Q+1].line)-1,j=f.view[Q+1].node.previousSibling),!u)return!1;for(var Z=c.doc.splitLines(Ad(c,u,j,s,P)),mt=Qn(c.doc,Jt(s,0),Jt(P,he(c.doc,P).text.length));Z.length>1&&mt.length>1;)if(St(Z)==St(mt))Z.pop(),mt.pop(),P--;else{if(Z[0]!=mt[0])break;Z.shift(),mt.shift(),s++}for(var yt=0,Dt=0,$t=Z[0],re=mt[0],ye=Math.min($t.length,re.length);yt<ye&&$t.charCodeAt(yt)==re.charCodeAt(yt);)++yt;for(var Ce=St(Z),fe=St(mt),Te=Math.min(Ce.length-(Z.length==1?yt:0),fe.length-(mt.length==1?yt:0));Dt<Te&&Ce.charCodeAt(Ce.length-Dt-1)==fe.charCodeAt(fe.length-Dt-1);)++Dt;if(Z.length==1&&mt.length==1&&s==y.line)for(;yt&&yt>y.ch&&Ce.charCodeAt(Ce.length-Dt-1)==fe.charCodeAt(fe.length-Dt-1);)yt--,Dt++;Z[Z.length-1]=Ce.slice(0,Ce.length-Dt).replace(/^\u200b+/,""),Z[0]=Z[0].slice(yt).replace(/\u200b+$/,"");var Se=Jt(s,yt),Pe=Jt(P,mt.length?St(mt).length-Dt:0);return Z.length>1||Z[0]||ke(Se,Pe)?(Xi(c.doc,Z,Se,Pe,"+input"),!0):void 0},hn.prototype.ensurePolled=function(){this.forceCompositionEnd()},hn.prototype.reset=function(){this.forceCompositionEnd()},hn.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},hn.prototype.readFromDOMSoon=function(){var i=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(i.readDOMTimeout=null,i.composing){if(!i.composing.done)return;i.composing=null}i.updateFromDOM()},80))},hn.prototype.updateFromDOM=function(){var i=this;!this.cm.isReadOnly()&&this.pollContent()||ro(this.cm,function(){return No(i.cm)})},hn.prototype.setUneditable=function(i){i.contentEditable="false"},hn.prototype.onKeyPress=function(i){i.charCode==0||this.composing||(i.preventDefault(),this.cm.isReadOnly()||An(this.cm,ea)(this.cm,String.fromCharCode(i.charCode==null?i.keyCode:i.charCode),0))},hn.prototype.readOnlyChanged=function(i){this.div.contentEditable=String(i!="nocursor")},hn.prototype.onContextMenu=function(){},hn.prototype.resetPosition=function(){},hn.prototype.needsContentAttribute=!0;var pn=function(i){this.cm=i,this.prevInput="",this.pollingFast=!1,this.polling=new Zt,this.hasSelection=!1,this.composing=null};function Ju(i,s){if((s=s?Ht(s):{}).value=i.value,!s.tabindex&&i.tabIndex&&(s.tabindex=i.tabIndex),!s.placeholder&&i.placeholder&&(s.placeholder=i.placeholder),s.autofocus==null){var u=Nt();s.autofocus=u==i||i.getAttribute("autofocus")!=null&&u==document.body}function c(){i.value=b.getValue()}var f;if(i.form&&(se(i.form,"submit",c),!s.leaveSubmitMethodAlone)){var v=i.form;f=v.submit;try{var y=v.submit=function(){c(),v.submit=f,v.submit(),v.submit=y}}catch{}}s.finishInit=function(P){P.save=c,P.getTextArea=function(){return i},P.toTextArea=function(){P.toTextArea=isNaN,c(),i.parentNode.removeChild(P.getWrapperElement()),i.style.display="",i.form&&(U(i.form,"submit",c),s.leaveSubmitMethodAlone||typeof i.form.submit!="function"||(i.form.submit=f))}},i.style.display="none";var b=On(function(P){return i.parentNode.insertBefore(P,i.nextSibling)},s);return b}function Zu(i){i.off=U,i.on=se,i.wheelEventPixels=uc,i.Doc=Vo,i.splitLines=Zn,i.countColumn=ee,i.findColumn=kt,i.isWordChar=cn,i.Pass=jt,i.signal=rt,i.Line=Qo,i.changeEnd=ri,i.scrollbarModel=fs,i.Pos=Jt,i.cmpPos=ke,i.modes=Do,i.mimeModes=Bn,i.resolveMode=Hn,i.getMode=Or,i.modeExtensions=jn,i.extendMode=Kn,i.copyState=Cn,i.startState=lo,i.innerMode=Sn,i.commands=Ps,i.keyMap=ai,i.keyName=Sl,i.isModifierKey=Cl,i.lookupKey=ja,i.normalizeKeyMap=Qi,i.StringStream=ln,i.SharedTextMarker=Cs,i.TextMarker=Oi,i.LineWidget=Ji,i.e_preventDefault=Me,i.e_stopPropagation=Pn,i.e_stop=xn,i.addClass=Pt,i.contains=I,i.rmClass=K,i.keyNames=Ti}pn.prototype.init=function(i){var s=this,u=this,c=this.cm;this.createField(i);var f=this.textarea;function v(y){if(!dt(c,y)){if(c.somethingSelected())Al({lineWise:!1,text:c.getSelections()});else{if(!c.options.lineWiseCopyCut)return;var b=Tc(c);Al({lineWise:!0,text:b.text}),y.type=="cut"?c.setSelections(b.ranges,null,Xt):(u.prevInput="",f.value=b.text.join(`
`),_t(f))}y.type=="cut"&&(c.state.cutIncoming=+new Date)}}i.wrapper.insertBefore(this.wrapper,i.wrapper.firstChild),ct&&(f.style.width="0px"),se(f,"input",function(){H&&E>=9&&s.hasSelection&&(s.hasSelection=null),u.poll()}),se(f,"paste",function(y){dt(c,y)||jl(y,c)||(c.state.pasteIncoming=+new Date,u.fastPoll())}),se(f,"cut",v),se(f,"copy",v),se(i.scroller,"paste",function(y){if(!T(i,y)&&!dt(c,y)){if(!f.dispatchEvent)return c.state.pasteIncoming=+new Date,void u.focus();var b=new Event("paste");b.clipboardData=y.clipboardData,f.dispatchEvent(b)}}),se(i.lineSpace,"selectstart",function(y){T(i,y)||Me(y)}),se(f,"compositionstart",function(){var y=c.getCursor("from");u.composing&&u.composing.range.clear(),u.composing={start:y,range:c.markText(y,c.getCursor("to"),{className:"CodeMirror-composing"})}}),se(f,"compositionend",function(){u.composing&&(u.poll(),u.composing.range.clear(),u.composing=null)})},pn.prototype.createField=function(i){this.wrapper=Fa(),this.textarea=this.wrapper.firstChild},pn.prototype.screenReaderLabelChanged=function(i){i?this.textarea.setAttribute("aria-label",i):this.textarea.removeAttribute("aria-label")},pn.prototype.prepareSelection=function(){var i=this.cm,s=i.display,u=i.doc,c=ss(i);if(i.options.moveInputWithCursor){var f=er(i,u.sel.primary().head,"div"),v=s.wrapper.getBoundingClientRect(),y=s.lineDiv.getBoundingClientRect();c.teTop=Math.max(0,Math.min(s.wrapper.clientHeight-10,f.top+y.top-v.top)),c.teLeft=Math.max(0,Math.min(s.wrapper.clientWidth-10,f.left+y.left-v.left))}return c},pn.prototype.showSelection=function(i){var s=this.cm.display;ht(s.cursorDiv,i.cursors),ht(s.selectionDiv,i.selection),i.teTop!=null&&(this.wrapper.style.top=i.teTop+"px",this.wrapper.style.left=i.teLeft+"px")},pn.prototype.reset=function(i){if(!this.contextMenuPending&&!this.composing){var s=this.cm;if(s.somethingSelected()){this.prevInput="";var u=s.getSelection();this.textarea.value=u,s.state.focused&&_t(this.textarea),H&&E>=9&&(this.hasSelection=u)}else i||(this.prevInput=this.textarea.value="",H&&E>=9&&(this.hasSelection=null))}},pn.prototype.getField=function(){return this.textarea},pn.prototype.supportsTouch=function(){return!1},pn.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!Et||Nt()!=this.textarea))try{this.textarea.focus()}catch{}},pn.prototype.blur=function(){this.textarea.blur()},pn.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},pn.prototype.receivedFocus=function(){this.slowPoll()},pn.prototype.slowPoll=function(){var i=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){i.poll(),i.cm.state.focused&&i.slowPoll()})},pn.prototype.fastPoll=function(){var i=!1,s=this;function u(){s.poll()||i?(s.pollingFast=!1,s.slowPoll()):(i=!0,s.polling.set(60,u))}s.pollingFast=!0,s.polling.set(20,u)},pn.prototype.poll=function(){var i=this,s=this.cm,u=this.textarea,c=this.prevInput;if(this.contextMenuPending||!s.state.focused||Fo(u)&&!c&&!this.composing||s.isReadOnly()||s.options.disableInput||s.state.keySeq)return!1;var f=u.value;if(f==c&&!s.somethingSelected())return!1;if(H&&E>=9&&this.hasSelection===f||vt&&/[\uf700-\uf7ff]/.test(f))return s.display.input.reset(),!1;if(s.doc.sel==s.display.selForContextMenu){var v=f.charCodeAt(0);if(v!=8203||c||(c="\u200B"),v==8666)return this.reset(),this.cm.execCommand("undo")}for(var y=0,b=Math.min(c.length,f.length);y<b&&c.charCodeAt(y)==f.charCodeAt(y);)++y;return ro(s,function(){ea(s,f.slice(y),c.length-y,null,i.composing?"*compose":null),f.length>1e3||f.indexOf(`
`)>-1?u.value=i.prevInput="":i.prevInput=f,i.composing&&(i.composing.range.clear(),i.composing.range=s.markText(i.composing.start,s.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},pn.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},pn.prototype.onKeyPress=function(){H&&E>=9&&(this.hasSelection=null),this.fastPoll()},pn.prototype.onContextMenu=function(i){var s=this,u=s.cm,c=u.display,f=s.textarea;s.contextMenuPending&&s.contextMenuPending();var v=Wr(u,i),y=c.scroller.scrollTop;if(v&&!N){u.options.resetSelectionOnContextMenu&&u.doc.sel.contains(v)==-1&&An(u,bo)(u.doc,Ci(v),Xt);var b,P=f.style.cssText,j=s.wrapper.style.cssText,Q=s.wrapper.offsetParent.getBoundingClientRect();if(s.wrapper.style.cssText="position: static",f.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(i.clientY-Q.top-5)+"px; left: "+(i.clientX-Q.left-5)+`px;
      z-index: 1000; background: `+(H?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`,_&&(b=window.scrollY),c.input.focus(),_&&window.scrollTo(null,b),c.input.reset(),u.somethingSelected()||(f.value=s.prevInput=" "),s.contextMenuPending=yt,c.selForContextMenu=u.doc.sel,clearTimeout(c.detectingSelectAll),H&&E>=9&&mt(),Ft){xn(i);var Z=function(){U(window,"mouseup",Z),setTimeout(yt,20)};se(window,"mouseup",Z)}else setTimeout(yt,50)}function mt(){if(f.selectionStart!=null){var Dt=u.somethingSelected(),$t="\u200B"+(Dt?f.value:"");f.value="\u21DA",f.value=$t,s.prevInput=Dt?"":"\u200B",f.selectionStart=1,f.selectionEnd=$t.length,c.selForContextMenu=u.doc.sel}}function yt(){if(s.contextMenuPending==yt&&(s.contextMenuPending=!1,s.wrapper.style.cssText=j,f.style.cssText=P,H&&E<9&&c.scrollbars.setScrollTop(c.scroller.scrollTop=y),f.selectionStart!=null)){(!H||H&&E<9)&&mt();var Dt=0,$t=function(){c.selForContextMenu==u.doc.sel&&f.selectionStart==0&&f.selectionEnd>0&&s.prevInput=="\u200B"?An(u,Ou)(u):Dt++<10?c.detectingSelectAll=setTimeout($t,500):(c.selForContextMenu=null,c.input.reset())};c.detectingSelectAll=setTimeout($t,200)}}},pn.prototype.readOnlyChanged=function(i){i||this.reset(),this.textarea.disabled=i=="nocursor",this.textarea.readOnly=!!i},pn.prototype.setUneditable=function(){},pn.prototype.needsContentAttribute=!1,ks(On),kd(On);var Md="iter insert remove copy getEditor constructor".split(" ");for(var As in Vo.prototype)Vo.prototype.hasOwnProperty(As)&&le(Md,As)<0&&(On.prototype[As]=function(i){return function(){return i.apply(this.doc,arguments)}}(Vo.prototype[As]));return Le(Vo),On.inputStyles={textarea:pn,contenteditable:hn},On.defineMode=function(i){On.defaults.mode||i=="null"||(On.defaults.mode=i),mn.apply(this,arguments)},On.defineMIME=Kr,On.defineMode("null",function(){return{token:function(i){return i.skipToEnd()}}}),On.defineMIME("text/plain","null"),On.defineExtension=function(i,s){On.prototype[i]=s},On.defineDocExtension=function(i,s){Vo.prototype[i]=s},On.fromTextArea=Ju,Zu(On),On.version="5.63.0",On}()},7389:(C,q,it)=>{(function($){"use strict";function pt(D){for(var W={},K=0;K<D.length;++K)W[D[K].toLowerCase()]=!0;return W}$.defineMode("css",function(D,W){var K=W.inline;W.propertyKeywords||(W=$.resolveMode("text/css"));var ot,ht,G=D.indentUnit,xt=W.tokenHooks,I=W.documentTypes||{},Nt=W.mediaTypes||{},Pt=W.mediaFeatures||{},ne=W.mediaValueKeywords||{},_t=W.propertyKeywords||{},Ut=W.nonStandardPropertyKeywords||{},Ht=W.fontProperties||{},ee=W.counterDescriptors||{},Zt=W.colorKeywords||{},le=W.valueKeywords||{},ce=W.allowNested,jt=W.lineComment,Xt=W.supportsAtComponent===!0,pe=D.highlightNonStandardPropertyKeywords!==!1;function me(bt,S){return ot=S,bt}function kt(bt,S){var A=bt.next();if(xt[A]){var J=xt[A](bt,S);if(J!==!1)return J}return A=="@"?(bt.eatWhile(/[\w\\\-]/),me("def",bt.current())):A=="="||(A=="~"||A=="|")&&bt.eat("=")?me(null,"compare"):A=='"'||A=="'"?(S.tokenize=Yt(A),S.tokenize(bt,S)):A=="#"?(bt.eatWhile(/[\w\\\-]/),me("atom","hash")):A=="!"?(bt.match(/^\s*\w*/),me("keyword","important")):/\d/.test(A)||A=="."&&bt.eat(/\d/)?(bt.eatWhile(/[\w.%]/),me("number","unit")):A!=="-"?/[,+>*\/]/.test(A)?me(null,"select-op"):A=="."&&bt.match(/^-?[_a-z][_a-z0-9-]*/i)?me("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(A)?me(null,A):bt.match(/^[\w-.]+(?=\()/)?(/^(url(-prefix)?|domain|regexp)$/i.test(bt.current())&&(S.tokenize=de),me("variable callee","variable")):/[\w\\\-]/.test(A)?(bt.eatWhile(/[\w\\\-]/),me("property","word")):me(null,null):/[\d.]/.test(bt.peek())?(bt.eatWhile(/[\w.%]/),me("number","unit")):bt.match(/^-[\w\\\-]*/)?(bt.eatWhile(/[\w\\\-]/),bt.match(/^\s*:/,!1)?me("variable-2","variable-definition"):me("variable-2","variable")):bt.match(/^\w+-/)?me("meta","meta"):void 0}function Yt(bt){return function(S,A){for(var J,lt=!1;(J=S.next())!=null;){if(J==bt&&!lt){bt==")"&&S.backUp(1);break}lt=!lt&&J=="\\"}return(J==bt||!lt&&bt!=")")&&(A.tokenize=null),me("string","string")}}function de(bt,S){return bt.next(),bt.match(/^\s*[\"\')]/,!1)?S.tokenize=null:S.tokenize=Yt(")"),me(null,"(")}function St(bt,S,A){this.type=bt,this.indent=S,this.prev=A}function ae(bt,S,A,J){return bt.context=new St(A,S.indentation()+(J===!1?0:G),bt.context),A}function je(bt){return bt.context.prev&&(bt.context=bt.context.prev),bt.context.type}function He(bt,S,A){return cn[A.context.type](bt,S,A)}function qe(bt,S,A,J){for(var lt=J||1;lt>0;lt--)A.context=A.context.prev;return He(bt,S,A)}function gn(bt){var S=bt.current().toLowerCase();ht=le.hasOwnProperty(S)?"atom":Zt.hasOwnProperty(S)?"keyword":"variable"}var cn={top:function(bt,S,A){if(bt=="{")return ae(A,S,"block");if(bt=="}"&&A.context.prev)return je(A);if(Xt&&/@component/i.test(bt))return ae(A,S,"atComponentBlock");if(/^@(-moz-)?document$/i.test(bt))return ae(A,S,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/i.test(bt))return ae(A,S,"atBlock");if(/^@(font-face|counter-style)/i.test(bt))return A.stateArg=bt,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(bt))return"keyframes";if(bt&&bt.charAt(0)=="@")return ae(A,S,"at");if(bt=="hash")ht="builtin";else if(bt=="word")ht="tag";else{if(bt=="variable-definition")return"maybeprop";if(bt=="interpolation")return ae(A,S,"interpolation");if(bt==":")return"pseudo";if(ce&&bt=="(")return ae(A,S,"parens")}return A.context.type},block:function(bt,S,A){if(bt=="word"){var J=S.current().toLowerCase();return _t.hasOwnProperty(J)?(ht="property","maybeprop"):Ut.hasOwnProperty(J)?(ht=pe?"string-2":"property","maybeprop"):ce?(ht=S.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(ht+=" error","maybeprop")}return bt=="meta"?"block":ce||bt!="hash"&&bt!="qualifier"?cn.top(bt,S,A):(ht="error","block")},maybeprop:function(bt,S,A){return bt==":"?ae(A,S,"prop"):He(bt,S,A)},prop:function(bt,S,A){if(bt==";")return je(A);if(bt=="{"&&ce)return ae(A,S,"propBlock");if(bt=="}"||bt=="{")return qe(bt,S,A);if(bt=="(")return ae(A,S,"parens");if(bt!="hash"||/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(S.current())){if(bt=="word")gn(S);else if(bt=="interpolation")return ae(A,S,"interpolation")}else ht+=" error";return"prop"},propBlock:function(bt,S,A){return bt=="}"?je(A):bt=="word"?(ht="property","maybeprop"):A.context.type},parens:function(bt,S,A){return bt=="{"||bt=="}"?qe(bt,S,A):bt==")"?je(A):bt=="("?ae(A,S,"parens"):bt=="interpolation"?ae(A,S,"interpolation"):(bt=="word"&&gn(S),"parens")},pseudo:function(bt,S,A){return bt=="meta"?"pseudo":bt=="word"?(ht="variable-3",A.context.type):He(bt,S,A)},documentTypes:function(bt,S,A){return bt=="word"&&I.hasOwnProperty(S.current())?(ht="tag",A.context.type):cn.atBlock(bt,S,A)},atBlock:function(bt,S,A){if(bt=="(")return ae(A,S,"atBlock_parens");if(bt=="}"||bt==";")return qe(bt,S,A);if(bt=="{")return je(A)&&ae(A,S,ce?"block":"top");if(bt=="interpolation")return ae(A,S,"interpolation");if(bt=="word"){var J=S.current().toLowerCase();ht=J=="only"||J=="not"||J=="and"||J=="or"?"keyword":Nt.hasOwnProperty(J)?"attribute":Pt.hasOwnProperty(J)?"property":ne.hasOwnProperty(J)?"keyword":_t.hasOwnProperty(J)?"property":Ut.hasOwnProperty(J)?pe?"string-2":"property":le.hasOwnProperty(J)?"atom":Zt.hasOwnProperty(J)?"keyword":"error"}return A.context.type},atComponentBlock:function(bt,S,A){return bt=="}"?qe(bt,S,A):bt=="{"?je(A)&&ae(A,S,ce?"block":"top",!1):(bt=="word"&&(ht="error"),A.context.type)},atBlock_parens:function(bt,S,A){return bt==")"?je(A):bt=="{"||bt=="}"?qe(bt,S,A,2):cn.atBlock(bt,S,A)},restricted_atBlock_before:function(bt,S,A){return bt=="{"?ae(A,S,"restricted_atBlock"):bt=="word"&&A.stateArg=="@counter-style"?(ht="variable","restricted_atBlock_before"):He(bt,S,A)},restricted_atBlock:function(bt,S,A){return bt=="}"?(A.stateArg=null,je(A)):bt=="word"?(ht=A.stateArg=="@font-face"&&!Ht.hasOwnProperty(S.current().toLowerCase())||A.stateArg=="@counter-style"&&!ee.hasOwnProperty(S.current().toLowerCase())?"error":"property","maybeprop"):"restricted_atBlock"},keyframes:function(bt,S,A){return bt=="word"?(ht="variable","keyframes"):bt=="{"?ae(A,S,"top"):He(bt,S,A)},at:function(bt,S,A){return bt==";"?je(A):bt=="{"||bt=="}"?qe(bt,S,A):(bt=="word"?ht="tag":bt=="hash"&&(ht="builtin"),"at")},interpolation:function(bt,S,A){return bt=="}"?je(A):bt=="{"||bt==";"?qe(bt,S,A):(bt=="word"?ht="variable":bt!="variable"&&bt!="("&&bt!=")"&&(ht="error"),"interpolation")}};return{startState:function(bt){return{tokenize:null,state:K?"block":"top",stateArg:null,context:new St(K?"block":"top",bt||0,null)}},token:function(bt,S){if(!S.tokenize&&bt.eatSpace())return null;var A=(S.tokenize||kt)(bt,S);return A&&typeof A=="object"&&(ot=A[1],A=A[0]),ht=A,ot!="comment"&&(S.state=cn[S.state](ot,bt,S)),ht},indent:function(bt,S){var A=bt.context,J=S&&S.charAt(0),lt=A.indent;return A.type!="prop"||J!="}"&&J!=")"||(A=A.prev),A.prev&&(J!="}"||A.type!="block"&&A.type!="top"&&A.type!="interpolation"&&A.type!="restricted_atBlock"?(J!=")"||A.type!="parens"&&A.type!="atBlock_parens")&&(J!="{"||A.type!="at"&&A.type!="atBlock")||(lt=Math.max(0,A.indent-G)):lt=(A=A.prev).indent),lt},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:jt,fold:"brace"}});var R=["domain","regexp","url","url-prefix"],F=pt(R),H=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],E=pt(H),_=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover","prefers-color-scheme"],O=pt(_),x=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive","dark","light"],N=pt(x),V=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","all","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","binding","bleed","block-size","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-content","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","left","letter-spacing","line-break","line-height","line-height-step","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","place-content","place-items","place-self","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotate","rotation","rotation-point","row-gap","ruby-align","ruby-overhang","ruby-position","ruby-span","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-type","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-orientation","text-outline","text-overflow","text-rendering","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","touch-action","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","paint-order","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],Y=pt(V),st=["accent-color","aspect-ratio","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","content-visibility","margin-block","margin-block-end","margin-block-start","margin-inline","margin-inline-end","margin-inline-start","overflow-anchor","overscroll-behavior","padding-block","padding-block-end","padding-block-start","padding-inline","padding-inline-end","padding-inline-start","scroll-snap-stop","scrollbar-3d-light-color","scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-track-color","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","shape-inside","zoom"],ct=pt(st),Tt=pt(["font-display","font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"]),Et=pt(["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"]),vt=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],ft=pt(vt),wt=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","blur","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","brightness","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","contrast","copy","counter","counters","cover","crop","cross","crosshair","cubic-bezier","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","drop-shadow","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","grayscale","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","hue-rotate","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","manipulation","match","matrix","matrix3d","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiple_mask_images","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturate","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","self-start","self-end","semi-condensed","semi-expanded","separate","sepia","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","square-button","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],Ot=pt(wt),te=R.concat(H).concat(_).concat(x).concat(V).concat(st).concat(vt).concat(wt);function Ft(D,W){for(var K,ot=!1;(K=D.next())!=null;){if(ot&&K=="/"){W.tokenize=null;break}ot=K=="*"}return["comment","comment"]}$.registerHelper("hintWords","css",te),$.defineMIME("text/css",{documentTypes:F,mediaTypes:E,mediaFeatures:O,mediaValueKeywords:N,propertyKeywords:Y,nonStandardPropertyKeywords:ct,fontProperties:Tt,counterDescriptors:Et,colorKeywords:ft,valueKeywords:Ot,tokenHooks:{"/":function(D,W){return!!D.eat("*")&&(W.tokenize=Ft,Ft(D,W))}},name:"css"}),$.defineMIME("text/x-scss",{mediaTypes:E,mediaFeatures:O,mediaValueKeywords:N,propertyKeywords:Y,nonStandardPropertyKeywords:ct,colorKeywords:ft,valueKeywords:Ot,fontProperties:Tt,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(D,W){return D.eat("/")?(D.skipToEnd(),["comment","comment"]):D.eat("*")?(W.tokenize=Ft,Ft(D,W)):["operator","operator"]},":":function(D){return!!D.match(/^\s*\{/,!1)&&[null,null]},$:function(D){return D.match(/^[\w-]+/),D.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(D){return!!D.eat("{")&&[null,"interpolation"]}},name:"css",helperType:"scss"}),$.defineMIME("text/x-less",{mediaTypes:E,mediaFeatures:O,mediaValueKeywords:N,propertyKeywords:Y,nonStandardPropertyKeywords:ct,colorKeywords:ft,valueKeywords:Ot,fontProperties:Tt,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(D,W){return D.eat("/")?(D.skipToEnd(),["comment","comment"]):D.eat("*")?(W.tokenize=Ft,Ft(D,W)):["operator","operator"]},"@":function(D){return D.eat("{")?[null,"interpolation"]:!D.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i,!1)&&(D.eatWhile(/[\w\\\-]/),D.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),$.defineMIME("text/x-gss",{documentTypes:F,mediaTypes:E,mediaFeatures:O,propertyKeywords:Y,nonStandardPropertyKeywords:ct,fontProperties:Tt,counterDescriptors:Et,colorKeywords:ft,valueKeywords:Ot,supportsAtComponent:!0,tokenHooks:{"/":function(D,W){return!!D.eat("*")&&(W.tokenize=Ft,Ft(D,W))}},name:"css",helperType:"gss"})})(it(4408))},8253:(C,q,it)=>{(function($){"use strict";var pt={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]};function R(N,V,Y){var st=N.current(),ct=st.search(V);return ct>-1?N.backUp(st.length-ct):st.match(/<\/?$/)&&(N.backUp(st.length),N.match(V,!1)||N.match(st)),Y}var F={};function H(N){var V=F[N];return V||(F[N]=new RegExp("\\s+"+N+`\\s*=\\s*('|")?([^'"]+)('|")?\\s*`))}function E(N,V){var Y=N.match(H(V));return Y?/^\s*(.*?)\s*$/.exec(Y[2])[1]:""}function _(N,V){return new RegExp((V?"^":"")+"</s*"+N+"s*>","i")}function O(N,V){for(var Y in N)for(var st=V[Y]||(V[Y]=[]),ct=N[Y],Tt=ct.length-1;Tt>=0;Tt--)st.unshift(ct[Tt])}function x(N,V){for(var Y=0;Y<N.length;Y++){var st=N[Y];if(!st[0]||st[1].test(E(V,st[0])))return st[2]}}$.defineMode("htmlmixed",function(N,V){var Y=$.getMode(N,{name:"xml",htmlMode:!0,multilineTagIndentFactor:V.multilineTagIndentFactor,multilineTagIndentPastTag:V.multilineTagIndentPastTag,allowMissingTagName:V.allowMissingTagName}),st={},ct=V&&V.tags,Tt=V&&V.scriptTypes;if(O(pt,st),ct&&O(ct,st),Tt)for(var Et=Tt.length-1;Et>=0;Et--)st.script.unshift(["type",Tt[Et].matches,Tt[Et].mode]);function vt(ft,wt){var Ot,te=Y.token(ft,wt.htmlState),Ft=/\btag\b/.test(te);if(Ft&&!/[<>\s\/]/.test(ft.current())&&(Ot=wt.htmlState.tagName&&wt.htmlState.tagName.toLowerCase())&&st.hasOwnProperty(Ot))wt.inTag=Ot+" ";else if(wt.inTag&&Ft&&/>$/.test(ft.current())){var D=/^([\S]+) (.*)/.exec(wt.inTag);wt.inTag=null;var W=ft.current()==">"&&x(st[D[1]],D[2]),K=$.getMode(N,W),ot=_(D[1],!0),ht=_(D[1],!1);wt.token=function(G,xt){return G.match(ot,!1)?(xt.token=vt,xt.localState=xt.localMode=null,null):R(G,ht,xt.localMode.token(G,xt.localState))},wt.localMode=K,wt.localState=$.startState(K,Y.indent(wt.htmlState,"",""))}else wt.inTag&&(wt.inTag+=ft.current(),ft.eol()&&(wt.inTag+=" "));return te}return{startState:function(){return{token:vt,inTag:null,localMode:null,localState:null,htmlState:$.startState(Y)}},copyState:function(ft){var wt;return ft.localState&&(wt=$.copyState(ft.localMode,ft.localState)),{token:ft.token,inTag:ft.inTag,localMode:ft.localMode,localState:wt,htmlState:$.copyState(Y,ft.htmlState)}},token:function(ft,wt){return wt.token(ft,wt)},indent:function(ft,wt,Ot){return!ft.localMode||/^\s*<\//.test(wt)?Y.indent(ft.htmlState,wt,Ot):ft.localMode.indent?ft.localMode.indent(ft.localState,wt,Ot):$.Pass},innerMode:function(ft){return{state:ft.localState||ft.htmlState,mode:ft.localMode||Y}}}},"xml","javascript","css"),$.defineMIME("text/html","htmlmixed")})(it(4408),it(9701),it(6061),it(7389))},6061:(C,q,it)=>{(function($){"use strict";$.defineMode("javascript",function(pt,R){var F,H,E=pt.indentUnit,_=R.statementIndent,O=R.jsonld,x=R.json||O,N=R.trackScope!==!1,V=R.typescript,Y=R.wordCharacters||/[\w$\xa1-\uffff]/,st=function(){function M(Wn){return{type:Wn,style:"keyword"}}var tt=M("keyword a"),zt=M("keyword b"),be=M("keyword c"),Oe=M("keyword d"),ge=M("operator"),Ke={type:"atom",style:"atom"};return{if:M("if"),while:tt,with:tt,else:zt,do:zt,try:zt,finally:zt,return:Oe,break:Oe,continue:Oe,new:M("new"),delete:be,void:be,throw:be,debugger:M("debugger"),var:M("var"),const:M("var"),let:M("var"),function:M("function"),catch:M("catch"),for:M("for"),switch:M("switch"),case:M("case"),default:M("default"),in:ge,typeof:ge,instanceof:ge,true:Ke,false:Ke,null:Ke,undefined:Ke,NaN:Ke,Infinity:Ke,this:M("this"),class:M("class"),super:M("atom"),yield:be,export:M("export"),import:M("import"),extends:be,await:be}}(),ct=/[+\-*&%=<>!?|~^@]/,Tt=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function Et(M){for(var tt,zt=!1,be=!1;(tt=M.next())!=null;){if(!zt){if(tt=="/"&&!be)return;tt=="["?be=!0:be&&tt=="]"&&(be=!1)}zt=!zt&&tt=="\\"}}function vt(M,tt,zt){return F=M,H=zt,tt}function ft(M,tt){var zt=M.next();if(zt=='"'||zt=="'")return tt.tokenize=wt(zt),tt.tokenize(M,tt);if(zt=="."&&M.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return vt("number","number");if(zt=="."&&M.match(".."))return vt("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(zt))return vt(zt);if(zt=="="&&M.eat(">"))return vt("=>","operator");if(zt=="0"&&M.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return vt("number","number");if(/\d/.test(zt))return M.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),vt("number","number");if(zt=="/")return M.eat("*")?(tt.tokenize=Ot,Ot(M,tt)):M.eat("/")?(M.skipToEnd(),vt("comment","comment")):ke(M,tt,1)?(Et(M),M.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),vt("regexp","string-2")):(M.eat("="),vt("operator","operator",M.current()));if(zt=="`")return tt.tokenize=te,te(M,tt);if(zt=="#"&&M.peek()=="!")return M.skipToEnd(),vt("meta","meta");if(zt=="#"&&M.eatWhile(Y))return vt("variable","property");if(zt=="<"&&M.match("!--")||zt=="-"&&M.match("->")&&!/\S/.test(M.string.slice(0,M.start)))return M.skipToEnd(),vt("comment","comment");if(ct.test(zt))return zt==">"&&tt.lexical&&tt.lexical.type==">"||(M.eat("=")?zt!="!"&&zt!="="||M.eat("="):/[<>*+\-|&?]/.test(zt)&&(M.eat(zt),zt==">"&&M.eat(zt))),zt=="?"&&M.eat(".")?vt("."):vt("operator","operator",M.current());if(Y.test(zt)){M.eatWhile(Y);var be=M.current();if(tt.lastType!="."){if(st.propertyIsEnumerable(be)){var Oe=st[be];return vt(Oe.type,Oe.style,be)}if(be=="async"&&M.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return vt("async","keyword",be)}return vt("variable","variable",be)}}function wt(M){return function(tt,zt){var be,Oe=!1;if(O&&tt.peek()=="@"&&tt.match(Tt))return zt.tokenize=ft,vt("jsonld-keyword","meta");for(;(be=tt.next())!=null&&(be!=M||Oe);)Oe=!Oe&&be=="\\";return Oe||(zt.tokenize=ft),vt("string","string")}}function Ot(M,tt){for(var zt,be=!1;zt=M.next();){if(zt=="/"&&be){tt.tokenize=ft;break}be=zt=="*"}return vt("comment","comment")}function te(M,tt){for(var zt,be=!1;(zt=M.next())!=null;){if(!be&&(zt=="`"||zt=="$"&&M.eat("{"))){tt.tokenize=ft;break}be=!be&&zt=="\\"}return vt("quasi","string-2",M.current())}var Ft="([{}])";function D(M,tt){tt.fatArrowAt&&(tt.fatArrowAt=null);var zt=M.string.indexOf("=>",M.start);if(!(zt<0)){if(V){var be=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(M.string.slice(M.start,zt));be&&(zt=be.index)}for(var Oe=0,ge=!1,Ke=zt-1;Ke>=0;--Ke){var Wn=M.string.charAt(Ke),Mn=Ft.indexOf(Wn);if(Mn>=0&&Mn<3){if(!Oe){++Ke;break}if(--Oe==0){Wn=="("&&(ge=!0);break}}else if(Mn>=3&&Mn<6)++Oe;else if(Y.test(Wn))ge=!0;else if(/["'\/`]/.test(Wn))for(;;--Ke){if(Ke==0)return;if(M.string.charAt(Ke-1)==Wn&&M.string.charAt(Ke-2)!="\\"){Ke--;break}}else if(ge&&!Oe){++Ke;break}}ge&&!Oe&&(tt.fatArrowAt=Ke)}}var W={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function K(M,tt,zt,be,Oe,ge){this.indented=M,this.column=tt,this.type=zt,this.prev=Oe,this.info=ge,be!=null&&(this.align=be)}function ot(M,tt){if(!N)return!1;for(var zt=M.localVars;zt;zt=zt.next)if(zt.name==tt)return!0;for(var be=M.context;be;be=be.prev)for(zt=be.vars;zt;zt=zt.next)if(zt.name==tt)return!0}function ht(M,tt,zt,be,Oe){var ge=M.cc;for(G.state=M,G.stream=Oe,G.marked=null,G.cc=ge,G.style=tt,M.lexical.hasOwnProperty("align")||(M.lexical.align=!0);;)if((ge.length?ge.pop():x?Yt:me)(zt,be)){for(;ge.length&&ge[ge.length-1].lex;)ge.pop()();return G.marked?G.marked:zt=="variable"&&ot(M,be)?"variable-2":tt}}var G={state:null,column:null,marked:null,cc:null};function xt(){for(var M=arguments.length-1;M>=0;M--)G.cc.push(arguments[M])}function I(){return xt.apply(null,arguments),!0}function Nt(M,tt){for(var zt=tt;zt;zt=zt.next)if(zt.name==M)return!0;return!1}function Pt(M){var tt=G.state;if(G.marked="def",N){if(tt.context){if(tt.lexical.info=="var"&&tt.context&&tt.context.block){var zt=ne(M,tt.context);if(zt!=null)return void(tt.context=zt)}else if(!Nt(M,tt.localVars))return void(tt.localVars=new Ht(M,tt.localVars))}R.globalVars&&!Nt(M,tt.globalVars)&&(tt.globalVars=new Ht(M,tt.globalVars))}}function ne(M,tt){if(tt){if(tt.block){var zt=ne(M,tt.prev);return zt?zt==tt.prev?tt:new Ut(zt,tt.vars,!0):null}return Nt(M,tt.vars)?tt:new Ut(tt.prev,new Ht(M,tt.vars),!1)}return null}function _t(M){return M=="public"||M=="private"||M=="protected"||M=="abstract"||M=="readonly"}function Ut(M,tt,zt){this.prev=M,this.vars=tt,this.block=zt}function Ht(M,tt){this.name=M,this.next=tt}var ee=new Ht("this",new Ht("arguments",null));function Zt(){G.state.context=new Ut(G.state.context,G.state.localVars,!1),G.state.localVars=ee}function le(){G.state.context=new Ut(G.state.context,G.state.localVars,!0),G.state.localVars=null}function ce(){G.state.localVars=G.state.context.vars,G.state.context=G.state.context.prev}function jt(M,tt){var zt=function(){var be=G.state,Oe=be.indented;if(be.lexical.type=="stat")Oe=be.lexical.indented;else for(var ge=be.lexical;ge&&ge.type==")"&&ge.align;ge=ge.prev)Oe=ge.indented;be.lexical=new K(Oe,G.stream.column(),M,null,be.lexical,tt)};return zt.lex=!0,zt}function Xt(){var M=G.state;M.lexical.prev&&(M.lexical.type==")"&&(M.indented=M.lexical.indented),M.lexical=M.lexical.prev)}function pe(M){function tt(zt){return zt==M?I():M==";"||zt=="}"||zt==")"||zt=="]"?xt():I(tt)}return tt}function me(M,tt){return M=="var"?I(jt("vardef",tt),En,pe(";"),Xt):M=="keyword a"?I(jt("form"),St,me,Xt):M=="keyword b"?I(jt("form"),me,Xt):M=="keyword d"?G.stream.match(/^\s*$/,!1)?I():I(jt("stat"),je,pe(";"),Xt):M=="debugger"?I(pe(";")):M=="{"?I(jt("}"),le,se,Xt,ce):M==";"?I():M=="if"?(G.state.lexical.info=="else"&&G.state.cc[G.state.cc.length-1]==Xt&&G.state.cc.pop()(),I(jt("form"),St,me,Xt,Vi)):M=="function"?I(Bn):M=="for"?I(jt("form"),le,pr,me,ce,Xt):M=="class"||V&&tt=="interface"?(G.marked="keyword",I(jt("form",M=="class"?M:tt),jn,Xt)):M=="variable"?V&&tt=="declare"?(G.marked="keyword",I(me)):V&&(tt=="module"||tt=="enum"||tt=="type")&&G.stream.match(/^\s*\w/,!1)?(G.marked="keyword",tt=="enum"?I(Io):tt=="type"?I(Kr,pe("operator"),Mt,pe(";")):I(jt("form"),kn,pe("{"),jt("}"),se,Xt,Xt)):V&&tt=="namespace"?(G.marked="keyword",I(jt("form"),Yt,me,Xt)):V&&tt=="abstract"?(G.marked="keyword",I(me)):I(jt("stat"),Vt):M=="switch"?I(jt("form"),St,pe("{"),jt("}","switch"),le,se,Xt,Xt,ce):M=="case"?I(Yt,pe(":")):M=="default"?I(pe(":")):M=="catch"?I(jt("form"),Zt,kt,me,Xt,ce):M=="export"?I(jt("stat"),lo,Xt):M=="import"?I(jt("stat"),he,Xt):M=="async"?I(me):tt=="@"?I(Yt,me):xt(jt("stat"),Yt,pe(";"),Xt)}function kt(M){if(M=="(")return I(Hn,pe(")"))}function Yt(M,tt){return ae(M,tt,!1)}function de(M,tt){return ae(M,tt,!0)}function St(M){return M!="("?xt():I(jt(")"),je,pe(")"),Xt)}function ae(M,tt,zt){if(G.state.fatArrowAt==G.stream.start){var be=zt?S:bt;if(M=="(")return I(Zt,jt(")"),Ue(Hn,")"),Xt,pe("=>"),be,ce);if(M=="variable")return xt(Zt,kn,pe("=>"),be,ce)}var Oe=zt?qe:He;return W.hasOwnProperty(M)?I(Oe):M=="function"?I(Bn,Oe):M=="class"||V&&tt=="interface"?(G.marked="keyword",I(jt("form"),Or,Xt)):M=="keyword c"||M=="async"?I(zt?de:Yt):M=="("?I(jt(")"),je,pe(")"),Xt,Oe):M=="operator"||M=="spread"?I(zt?de:Yt):M=="["?I(jt("]"),Lo,Xt,Oe):M=="{"?en(Qt,"}",null,Oe):M=="quasi"?xt(gn,Oe):M=="new"?I(A(zt)):I()}function je(M){return M.match(/[;\}\)\],]/)?xt():xt(Yt)}function He(M,tt){return M==","?I(je):qe(M,tt,!1)}function qe(M,tt,zt){var be=zt==0?He:qe,Oe=zt==0?Yt:de;return M=="=>"?I(Zt,zt?S:bt,ce):M=="operator"?/\+\+|--/.test(tt)||V&&tt=="!"?I(be):V&&tt=="<"&&G.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?I(jt(">"),Ue(Mt,">"),Xt,be):tt=="?"?I(Yt,pe(":"),Oe):I(Oe):M=="quasi"?xt(gn,be):M!=";"?M=="("?en(de,")","call",be):M=="."?I(qt,be):M=="["?I(jt("]"),je,pe("]"),Xt,be):V&&tt=="as"?(G.marked="keyword",I(Mt,be)):M=="regexp"?(G.state.lastType=G.marked="operator",G.stream.backUp(G.stream.pos-G.stream.start-1),I(Oe)):void 0:void 0}function gn(M,tt){return M!="quasi"?xt():tt.slice(tt.length-2)!="${"?I(gn):I(je,cn)}function cn(M){if(M=="}")return G.marked="string-2",G.state.tokenize=te,I(gn)}function bt(M){return D(G.stream,G.state),xt(M=="{"?me:Yt)}function S(M){return D(G.stream,G.state),xt(M=="{"?me:de)}function A(M){return function(tt){return tt=="."?I(M?lt:J):tt=="variable"&&V?I(ur,M?qe:He):xt(M?de:Yt)}}function J(M,tt){if(tt=="target")return G.marked="keyword",I(He)}function lt(M,tt){if(tt=="target")return G.marked="keyword",I(qe)}function Vt(M){return M==":"?I(Xt,me):xt(He,pe(";"),Xt)}function qt(M){if(M=="variable")return G.marked="property",I()}function Qt(M,tt){return M=="async"?(G.marked="property",I(Qt)):M=="variable"||G.style=="keyword"?(G.marked="property",tt=="get"||tt=="set"?I(Ie):(V&&G.state.fatArrowAt==G.stream.start&&(zt=G.stream.match(/^\s*:\s*/,!1))&&(G.state.fatArrowAt=G.stream.pos+zt[0].length),I(We))):M=="number"||M=="string"?(G.marked=O?"property":G.style+" property",I(We)):M=="jsonld-keyword"?I(We):V&&_t(tt)?(G.marked="keyword",I(Qt)):M=="["?I(Yt,vn,pe("]"),We):M=="spread"?I(de,We):tt=="*"?(G.marked="keyword",I(Qt)):M==":"?xt(We):void 0;var zt}function Ie(M){return M!="variable"?xt(We):(G.marked="property",I(Bn))}function We(M){return M==":"?I(de):M=="("?xt(Bn):void 0}function Ue(M,tt,zt){function be(Oe,ge){if(zt?zt.indexOf(Oe)>-1:Oe==","){var Ke=G.state.lexical;return Ke.info=="call"&&(Ke.pos=(Ke.pos||0)+1),I(function(Wn,Mn){return Wn==tt||Mn==tt?xt():xt(M)},be)}return Oe==tt||ge==tt?I():zt&&zt.indexOf(";")>-1?xt(M):I(pe(tt))}return function(Oe,ge){return Oe==tt||ge==tt?I():xt(M,be)}}function en(M,tt,zt){for(var be=3;be<arguments.length;be++)G.cc.push(arguments[be]);return I(jt(tt,zt),Ue(M,tt),Xt)}function se(M){return M=="}"?I():xt(me,se)}function vn(M,tt){if(V){if(M==":")return I(Mt);if(tt=="?")return I(vn)}}function U(M,tt){if(V&&(M==":"||tt=="in"))return I(Mt)}function rt(M){if(V&&M==":")return G.stream.match(/^\s*\w+\s+is\b/,!1)?I(Yt,dt,Mt):I(Mt)}function dt(M,tt){if(tt=="is")return G.marked="keyword",I()}function Mt(M,tt){return tt=="keyof"||tt=="typeof"||tt=="infer"||tt=="readonly"?(G.marked="keyword",I(tt=="typeof"?de:Mt)):M=="variable"||tt=="void"?(G.marked="type",I(go)):tt=="|"||tt=="&"?I(Mt):M=="string"||M=="number"||M=="atom"?I(go):M=="["?I(jt("]"),Ue(Mt,"]",","),Xt,go):M=="{"?I(jt("}"),Le,Xt,go):M=="("?I(Ue(xn,")"),Kt,go):M=="<"?I(Ue(Mt,">"),Mt):M=="quasi"?xt(Pn,go):void 0}function Kt(M){if(M=="=>")return I(Mt)}function Le(M){return M.match(/[\}\)\]]/)?I():M==","||M==";"?I(Le):xt(Me,Le)}function Me(M,tt){return M=="variable"||G.style=="keyword"?(G.marked="property",I(Me)):tt=="?"||M=="number"||M=="string"?I(Me):M==":"?I(Mt):M=="["?I(pe("variable"),U,pe("]"),Me):M=="("?xt(mn,Me):M.match(/[;\}\)\],]/)?void 0:I()}function Pn(M,tt){return M!="quasi"?xt():tt.slice(tt.length-2)!="${"?I(Pn):I(Mt,Fn)}function Fn(M){if(M=="}")return G.marked="string-2",G.state.tokenize=te,I(Pn)}function xn(M,tt){return M=="variable"&&G.stream.match(/^\s*[?:]/,!1)||tt=="?"?I(xn):M==":"?I(Mt):M=="spread"?I(xn):xt(Mt)}function go(M,tt){return tt=="<"?I(jt(">"),Ue(Mt,">"),Xt,go):tt=="|"||M=="."||tt=="&"?I(Mt):M=="["?I(Mt,pe("]"),go):tt=="extends"||tt=="implements"?(G.marked="keyword",I(Mt)):tt=="?"?I(Mt,pe(":"),Mt):void 0}function ur(M,tt){if(tt=="<")return I(jt(">"),Ue(Mt,">"),Xt,go)}function dn(){return xt(Mt,Ko)}function Ko(M,tt){if(tt=="=")return I(Mt)}function En(M,tt){return tt=="enum"?(G.marked="keyword",I(Io)):xt(kn,vn,Zn,Fo)}function kn(M,tt){return V&&_t(tt)?(G.marked="keyword",I(kn)):M=="variable"?(Pt(tt),I()):M=="spread"?I(kn):M=="["?en(Oo,"]"):M=="{"?en(Jn,"}"):void 0}function Jn(M,tt){return M!="variable"||G.stream.match(/^\s*:/,!1)?(M=="variable"&&(G.marked="property"),M=="spread"?I(kn):M=="}"?xt():M=="["?I(Yt,pe("]"),pe(":"),Jn):I(pe(":"),kn,Zn)):(Pt(tt),I(Zn))}function Oo(){return xt(kn,Zn)}function Zn(M,tt){if(tt=="=")return I(de)}function Fo(M){if(M==",")return I(En)}function Vi(M,tt){if(M=="keyword b"&&tt=="else")return I(jt("form","else"),me,Xt)}function pr(M,tt){return tt=="await"?I(pr):M=="("?I(jt(")"),fi,Xt):void 0}function fi(M){return M=="var"?I(En,Do):M=="variable"?I(Do):xt(Do)}function Do(M,tt){return M==")"?I():M==";"?I(Do):tt=="in"||tt=="of"?(G.marked="keyword",I(Yt,Do)):xt(Yt,Do)}function Bn(M,tt){return tt=="*"?(G.marked="keyword",I(Bn)):M=="variable"?(Pt(tt),I(Bn)):M=="("?I(Zt,jt(")"),Ue(Hn,")"),Xt,rt,me,ce):V&&tt=="<"?I(jt(">"),Ue(dn,">"),Xt,Bn):void 0}function mn(M,tt){return tt=="*"?(G.marked="keyword",I(mn)):M=="variable"?(Pt(tt),I(mn)):M=="("?I(Zt,jt(")"),Ue(Hn,")"),Xt,rt,ce):V&&tt=="<"?I(jt(">"),Ue(dn,">"),Xt,mn):void 0}function Kr(M,tt){return M=="keyword"||M=="variable"?(G.marked="type",I(Kr)):tt=="<"?I(jt(">"),Ue(dn,">"),Xt):void 0}function Hn(M,tt){return tt=="@"&&I(Yt,Hn),M=="spread"?I(Hn):V&&_t(tt)?(G.marked="keyword",I(Hn)):V&&M=="this"?I(vn,Zn):xt(kn,vn,Zn)}function Or(M,tt){return M=="variable"?jn(M,tt):Kn(M,tt)}function jn(M,tt){if(M=="variable")return Pt(tt),I(Kn)}function Kn(M,tt){return tt=="<"?I(jt(">"),Ue(dn,">"),Xt,Kn):tt=="extends"||tt=="implements"||V&&M==","?(tt=="implements"&&(G.marked="keyword"),I(V?Mt:Yt,Kn)):M=="{"?I(jt("}"),Cn,Xt):void 0}function Cn(M,tt){return M=="async"||M=="variable"&&(tt=="static"||tt=="get"||tt=="set"||V&&_t(tt))&&G.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(G.marked="keyword",I(Cn)):M=="variable"||G.style=="keyword"?(G.marked="property",I(Sn,Cn)):M=="number"||M=="string"?I(Sn,Cn):M=="["?I(Yt,vn,pe("]"),Sn,Cn):tt=="*"?(G.marked="keyword",I(Cn)):V&&M=="("?xt(mn,Cn):M==";"||M==","?I(Cn):M=="}"?I():tt=="@"?I(Yt,Cn):void 0}function Sn(M,tt){if(tt=="!"||tt=="?")return I(Sn);if(M==":")return I(Mt,Zn);if(tt=="=")return I(de);var zt=G.state.lexical.prev;return xt(zt&&zt.info=="interface"?mn:Bn)}function lo(M,tt){return tt=="*"?(G.marked="keyword",I(nn,pe(";"))):tt=="default"?(G.marked="keyword",I(Yt,pe(";"))):M=="{"?I(Ue(ln,"}"),nn,pe(";")):xt(me)}function ln(M,tt){return tt=="as"?(G.marked="keyword",I(pe("variable"))):M=="variable"?xt(de,ln):void 0}function he(M){return M=="string"?I():M=="("?xt(Yt):M=="."?xt(He):xt(Qn,Yo,nn)}function Qn(M,tt){return M=="{"?en(Qn,"}"):(M=="variable"&&Pt(tt),tt=="*"&&(G.marked="keyword"),I(to))}function Yo(M){if(M==",")return I(Qn,Yo)}function to(M,tt){if(tt=="as")return G.marked="keyword",I(Qn)}function nn(M,tt){if(tt=="from")return G.marked="keyword",I(Yt)}function Lo(M){return M=="]"?I():xt(Ue(de,"]"))}function Io(){return xt(jt("form"),kn,pe("{"),jt("}"),Ue(Yr,"}"),Xt,Xt)}function Yr(){return xt(kn,Zn)}function Jt(M,tt){return M.lastType=="operator"||M.lastType==","||ct.test(tt.charAt(0))||/[,.]/.test(tt.charAt(0))}function ke(M,tt,zt){return tt.tokenize==ft&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(tt.lastType)||tt.lastType=="quasi"&&/\{\s*$/.test(M.string.slice(0,M.pos-(zt||0)))}return ce.lex=!0,Xt.lex=!0,{startState:function(M){var tt={tokenize:ft,lastType:"sof",cc:[],lexical:new K((M||0)-E,0,"block",!1),localVars:R.localVars,context:R.localVars&&new Ut(null,null,!1),indented:M||0};return R.globalVars&&typeof R.globalVars=="object"&&(tt.globalVars=R.globalVars),tt},token:function(M,tt){if(M.sol()&&(tt.lexical.hasOwnProperty("align")||(tt.lexical.align=!1),tt.indented=M.indentation(),D(M,tt)),tt.tokenize!=Ot&&M.eatSpace())return null;var zt=tt.tokenize(M,tt);return F=="comment"?zt:(tt.lastType=F!="operator"||H!="++"&&H!="--"?F:"incdec",ht(tt,zt,F,H,M))},indent:function(M,tt){if(M.tokenize==Ot||M.tokenize==te)return $.Pass;if(M.tokenize!=ft)return 0;var zt,be=tt&&tt.charAt(0),Oe=M.lexical;if(!/^\s*else\b/.test(tt))for(var ge=M.cc.length-1;ge>=0;--ge){var Ke=M.cc[ge];if(Ke==Xt)Oe=Oe.prev;else if(Ke!=Vi&&Ke!=ce)break}for(;(Oe.type=="stat"||Oe.type=="form")&&(be=="}"||(zt=M.cc[M.cc.length-1])&&(zt==He||zt==qe)&&!/^[,\.=+\-*:?[\(]/.test(tt));)Oe=Oe.prev;_&&Oe.type==")"&&Oe.prev.type=="stat"&&(Oe=Oe.prev);var Wn=Oe.type,Mn=be==Wn;return Wn=="vardef"?Oe.indented+(M.lastType=="operator"||M.lastType==","?Oe.info.length+1:0):Wn=="form"&&be=="{"?Oe.indented:Wn=="form"?Oe.indented+E:Wn=="stat"?Oe.indented+(Jt(M,tt)?_||E:0):Oe.info!="switch"||Mn||R.doubleIndentSwitch==0?Oe.align?Oe.column+(Mn?0:1):Oe.indented+(Mn?0:E):Oe.indented+(/^(?:case|default)\b/.test(tt)?E:2*E)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:x?null:"/*",blockCommentEnd:x?null:"*/",blockCommentContinue:x?null:" * ",lineComment:x?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:x?"json":"javascript",jsonldMode:O,jsonMode:x,expressionAllowed:ke,skipExpression:function(M){ht(M,"atom","atom","true",new $.StringStream("",2,null))}}}),$.registerHelper("wordChars","javascript",/[\w$]/),$.defineMIME("text/javascript","javascript"),$.defineMIME("text/ecmascript","javascript"),$.defineMIME("application/javascript","javascript"),$.defineMIME("application/x-javascript","javascript"),$.defineMIME("application/ecmascript","javascript"),$.defineMIME("application/json",{name:"javascript",json:!0}),$.defineMIME("application/x-json",{name:"javascript",json:!0}),$.defineMIME("application/manifest+json",{name:"javascript",json:!0}),$.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),$.defineMIME("text/typescript",{name:"javascript",typescript:!0}),$.defineMIME("application/typescript",{name:"javascript",typescript:!0})})(it(4408))},9701:(C,q,it)=>{(function($){"use strict";var pt={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},R={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};$.defineMode("xml",function(F,H){var E,_,O=F.indentUnit,x={},N=H.htmlMode?pt:R;for(var V in N)x[V]=N[V];for(var V in H)x[V]=H[V];function Y(I,Nt){function Pt(_t){return Nt.tokenize=_t,_t(I,Nt)}var ne=I.next();return ne=="<"?I.eat("!")?I.eat("[")?I.match("CDATA[")?Pt(Tt("atom","]]>")):null:I.match("--")?Pt(Tt("comment","-->")):I.match("DOCTYPE",!0,!0)?(I.eatWhile(/[\w\._\-]/),Pt(Et(1))):null:I.eat("?")?(I.eatWhile(/[\w\._\-]/),Nt.tokenize=Tt("meta","?>"),"meta"):(E=I.eat("/")?"closeTag":"openTag",Nt.tokenize=st,"tag bracket"):ne=="&"?(I.eat("#")?I.eat("x")?I.eatWhile(/[a-fA-F\d]/)&&I.eat(";"):I.eatWhile(/[\d]/)&&I.eat(";"):I.eatWhile(/[\w\.\-:]/)&&I.eat(";"))?"atom":"error":(I.eatWhile(/[^&<]/),null)}function st(I,Nt){var Pt=I.next();if(Pt==">"||Pt=="/"&&I.eat(">"))return Nt.tokenize=Y,E=Pt==">"?"endTag":"selfcloseTag","tag bracket";if(Pt=="=")return E="equals",null;if(Pt=="<"){Nt.tokenize=Y,Nt.state=te,Nt.tagName=Nt.tagStart=null;var ne=Nt.tokenize(I,Nt);return ne?ne+" tag error":"tag error"}return/[\'\"]/.test(Pt)?(Nt.tokenize=ct(Pt),Nt.stringStartCol=I.column(),Nt.tokenize(I,Nt)):(I.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function ct(I){var Nt=function(Pt,ne){for(;!Pt.eol();)if(Pt.next()==I){ne.tokenize=st;break}return"string"};return Nt.isInAttribute=!0,Nt}function Tt(I,Nt){return function(Pt,ne){for(;!Pt.eol();){if(Pt.match(Nt)){ne.tokenize=Y;break}Pt.next()}return I}}function Et(I){return function(Nt,Pt){for(var ne;(ne=Nt.next())!=null;){if(ne=="<")return Pt.tokenize=Et(I+1),Pt.tokenize(Nt,Pt);if(ne==">"){if(I==1){Pt.tokenize=Y;break}return Pt.tokenize=Et(I-1),Pt.tokenize(Nt,Pt)}}return"meta"}}function vt(I){return I&&I.toLowerCase()}function ft(I,Nt,Pt){this.prev=I.context,this.tagName=Nt||"",this.indent=I.indented,this.startOfLine=Pt,(x.doNotIndent.hasOwnProperty(Nt)||I.context&&I.context.noIndent)&&(this.noIndent=!0)}function wt(I){I.context&&(I.context=I.context.prev)}function Ot(I,Nt){for(var Pt;;){if(!I.context||(Pt=I.context.tagName,!x.contextGrabbers.hasOwnProperty(vt(Pt))||!x.contextGrabbers[vt(Pt)].hasOwnProperty(vt(Nt))))return;wt(I)}}function te(I,Nt,Pt){return I=="openTag"?(Pt.tagStart=Nt.column(),Ft):I=="closeTag"?D:te}function Ft(I,Nt,Pt){return I=="word"?(Pt.tagName=Nt.current(),_="tag",ot):x.allowMissingTagName&&I=="endTag"?(_="tag bracket",ot(I,Nt,Pt)):(_="error",Ft)}function D(I,Nt,Pt){if(I=="word"){var ne=Nt.current();return Pt.context&&Pt.context.tagName!=ne&&x.implicitlyClosed.hasOwnProperty(vt(Pt.context.tagName))&&wt(Pt),Pt.context&&Pt.context.tagName==ne||x.matchClosing===!1?(_="tag",W):(_="tag error",K)}return x.allowMissingTagName&&I=="endTag"?(_="tag bracket",W(I,Nt,Pt)):(_="error",K)}function W(I,Nt,Pt){return I!="endTag"?(_="error",W):(wt(Pt),te)}function K(I,Nt,Pt){return _="error",W(I,Nt,Pt)}function ot(I,Nt,Pt){if(I=="word")return _="attribute",ht;if(I=="endTag"||I=="selfcloseTag"){var ne=Pt.tagName,_t=Pt.tagStart;return Pt.tagName=Pt.tagStart=null,I=="selfcloseTag"||x.autoSelfClosers.hasOwnProperty(vt(ne))?Ot(Pt,ne):(Ot(Pt,ne),Pt.context=new ft(Pt,ne,_t==Pt.indented)),te}return _="error",ot}function ht(I,Nt,Pt){return I=="equals"?G:(x.allowMissing||(_="error"),ot(I,Nt,Pt))}function G(I,Nt,Pt){return I=="string"?xt:I=="word"&&x.allowUnquoted?(_="string",ot):(_="error",ot(I,Nt,Pt))}function xt(I,Nt,Pt){return I=="string"?xt:ot(I,Nt,Pt)}return Y.isInText=!0,{startState:function(I){var Nt={tokenize:Y,state:te,indented:I||0,tagName:null,tagStart:null,context:null};return I!=null&&(Nt.baseIndent=I),Nt},token:function(I,Nt){if(!Nt.tagName&&I.sol()&&(Nt.indented=I.indentation()),I.eatSpace())return null;E=null;var Pt=Nt.tokenize(I,Nt);return(Pt||E)&&Pt!="comment"&&(_=null,Nt.state=Nt.state(E||Pt,I,Nt),_&&(Pt=_=="error"?Pt+" error":_)),Pt},indent:function(I,Nt,Pt){var ne=I.context;if(I.tokenize.isInAttribute)return I.tagStart==I.indented?I.stringStartCol+1:I.indented+O;if(ne&&ne.noIndent)return $.Pass;if(I.tokenize!=st&&I.tokenize!=Y)return Pt?Pt.match(/^(\s*)/)[0].length:0;if(I.tagName)return x.multilineTagIndentPastTag!==!1?I.tagStart+I.tagName.length+2:I.tagStart+O*(x.multilineTagIndentFactor||1);if(x.alignCDATA&&/<!\[CDATA\[/.test(Nt))return 0;var _t=Nt&&/^<(\/)?([\w_:\.-]*)/.exec(Nt);if(_t&&_t[1])for(;ne;){if(ne.tagName==_t[2]){ne=ne.prev;break}if(!x.implicitlyClosed.hasOwnProperty(vt(ne.tagName)))break;ne=ne.prev}else if(_t)for(;ne;){var Ut=x.contextGrabbers[vt(ne.tagName)];if(!Ut||!Ut.hasOwnProperty(vt(_t[2])))break;ne=ne.prev}for(;ne&&ne.prev&&!ne.startOfLine;)ne=ne.prev;return ne?ne.indent+O:I.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:x.htmlMode?"html":"xml",helperType:x.htmlMode?"html":"xml",skipAttribute:function(I){I.state==G&&(I.state=ot)},xmlCurrentTag:function(I){return I.tagName?{name:I.tagName,close:I.type=="closeTag"}:null},xmlCurrentContext:function(I){for(var Nt=[],Pt=I.context;Pt;Pt=Pt.prev)Nt.push(Pt.tagName);return Nt.reverse()}}}),$.defineMIME("text/xml","xml"),$.defineMIME("application/xml","xml"),$.mimeModes.hasOwnProperty("text/html")||$.defineMIME("text/html",{name:"xml",htmlMode:!0})})(it(4408))},7058:(C,q,it)=>{"use strict";it.d(q,{A:()=>F});var $,pt=it(9156),R=($=function(H,E){return $=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,O){_.__proto__=O}||function(_,O){for(var x in O)Object.prototype.hasOwnProperty.call(O,x)&&(_[x]=O[x])},$(H,E)},function(H,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");function _(){this.constructor=H}$(H,E),H.prototype=E===null?Object.create(E):(_.prototype=E.prototype,new _)});const F=function(H){function E(_,O,x){var N=H.call(this,O,x)||this;return N._module=_,N}return R(E,H),Object.defineProperty(E.prototype,"module",{get:function(){return this._module},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"config",{get:function(){return this._module.config},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"em",{get:function(){return this._module.em},enumerable:!1,configurable:!0}),E}(pt.Kx)},179:(C,q,it)=>{"use strict";it.d(q,{A:()=>H,F:()=>pt});var $,pt,R=it(7058),F=($=function(E,_){return $=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,x){O.__proto__=x}||function(O,x){for(var N in x)Object.prototype.hasOwnProperty.call(x,N)&&(O[N]=x[N])},$(E,_)},function(E,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");function O(){this.constructor=E}$(E,_),E.prototype=_===null?Object.create(_):(O.prototype=_.prototype,new O)});(function(E){E.Select="select",E.Hover="hover",E.Spacing="spacing",E.Target="target",E.Resize="resize"})(pt||(pt={}));const H=function(E){function _(){return E!==null&&E.apply(this,arguments)||this}return F(_,E),_.prototype.defaults=function(){return{id:"",type:""}},Object.defineProperty(_.prototype,"type",{get:function(){return this.get("type")||""},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"component",{get:function(){var O;return this.get("component")||((O=this.get("componentView"))===null||O===void 0?void 0:O.model)},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"componentView",{get:function(){var O;return this.get("componentView")||((O=this.get("component"))===null||O===void 0?void 0:O.getView())},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"el",{get:function(){var O;return(O=this.componentView)===null||O===void 0?void 0:O.el},enumerable:!1,configurable:!0}),_.prototype.getBoxRect=function(O){var x=this.el,N=this.em.Canvas.getCanvasView(),V=this.get("boxRect");return V||(x&&N?N.getElBoxRect(x,O):{x:0,y:0,width:0,height:0})},_.prototype.getStyle=function(O){O===void 0&&(O={});var x=O.boxRect||this.getBoxRect(O),N=x.width,V=x.height,Y=x.x,st=x.y;return{width:"".concat(N,"px"),height:"".concat(V,"px"),top:"0",left:"0",position:"absolute",translate:"".concat(Y,"px ").concat(st,"px")}},_.prototype.isType=function(O){return this.type===O},_}(R.A)},1738:(C,q,it)=>{"use strict";var $;it.d(q,{A:()=>pt}),function(R){R.run="command:run",R.runCommand="command:run:",R.runBeforeCommand="command:run:before:",R.abort="command:abort:",R.stop="command:stop",R.stopCommand="command:stop:",R.stopBeforeCommand="command:stop:before:",R.call="command:call",R.callCommand="command:call:"}($||($={}));const pt=$},9484:(C,q,it)=>{"use strict";it.r(q),it.d(q,{default:()=>$});const $={run:function(pt){pt.Components.clear(),pt.Css.clear()}}},9516:(C,q,it)=>{"use strict";it.r(q),it.d(q,{default:()=>F});var $=it(5706),pt=it(9966),R=it(6294);const F={run:function(H){(0,$.bindAll)(this,"onKeyUp","enableDragger","disableDragger"),this.editor=H,this.canvasModel=this.canvas.getCanvasView().model,this.toggleMove(1)},stop:function(H){this.toggleMove(),this.disableDragger()},onKeyUp:function(H){(0,R.Ch)(H)===" "&&this.editor.stopCommand(this.id)},enableDragger:function(H){this.toggleDragger(1,H)},disableDragger:function(H){this.toggleDragger(0,H)},toggleDragger:function(H,E){var _=this.canvasModel,O=this.em,x=this.dragger,N=H?"add":"remove";this.getCanvas().classList[N]("".concat(this.ppfx,"is__grabbing")),x||(x=new pt.A({getPosition:function(){return{x:_.get("x"),y:_.get("y")}},setPosition:function(V){var Y=V.x,st=V.y;_.set({x:Y,y:st})},onStart:function(V,Y){O.trigger("canvas:move:start",Y)},onDrag:function(V,Y){O.trigger("canvas:move",Y)},onEnd:function(V,Y){O.trigger("canvas:move:end",Y)}}),this.dragger=x),H?x.start(E):x.stop()},toggleMove:function(H){var E=this.ppfx,_=H?"add":"remove",O=H?"on":"off",x={on:R.on,off:R.AU},N=this.getCanvas(),V=["".concat(E,"is__grab")];!H&&V.push("".concat(E,"is__grabbing")),V.forEach(function(Y){return N.classList[_](Y)}),x[O](document,"keyup",this.onKeyUp),x[O](N,"mousedown",this.enableDragger),x[O](document,"mouseup",this.disableDragger)}}},9946:(C,q,it)=>{"use strict";it.r(q),it.d(q,{default:()=>_,defineCommand:()=>E});var $,pt=it(9156),R=it(1738),F=($=function(O,x){return $=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,V){N.__proto__=V}||function(N,V){for(var Y in V)Object.prototype.hasOwnProperty.call(V,Y)&&(N[Y]=V[Y])},$(O,x)},function(O,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function N(){this.constructor=O}$(O,x),O.prototype=x===null?Object.create(x):(N.prototype=x.prototype,new N)}),H=function(){return H=Object.assign||function(O){for(var x,N=1,V=arguments.length;N<V;N++)for(var Y in x=arguments[N])Object.prototype.hasOwnProperty.call(x,Y)&&(O[Y]=x[Y]);return O},H.apply(this,arguments)};function E(O){return O}const _=function(O){function x(N){var V=O.call(this,0)||this;V.config=N||{},V.em=V.config.em||{};var Y=V.config.stylePrefix;return V.pfx=Y,V.ppfx=V.config.pStylePrefix,V.hoverClass="".concat(Y,"hover"),V.badgeClass="".concat(Y,"badge"),V.plhClass="".concat(Y,"placeholder"),V.freezClass="".concat(V.ppfx,"freezed"),V.canvas=V.em.Canvas,V.init(V.config),V}return F(x,O),x.prototype.onFrameScroll=function(N){},x.prototype.getCanvas=function(){return this.canvas.getElement()},x.prototype.getCanvasBody=function(){return this.canvas.getBody()},x.prototype.getCanvasTools=function(){return this.canvas.getToolsEl()},x.prototype.offset=function(N){var V=N.getBoundingClientRect();return{top:V.top+N.ownerDocument.body.scrollTop,left:V.left+N.ownerDocument.body.scrollLeft}},x.prototype.init=function(N){},x.prototype.callRun=function(N,V){V===void 0&&(V={});var Y=this.id;if(N.trigger("".concat(R.A.runBeforeCommand).concat(Y),{options:V}),!V.abort){var st=V.sender||N,ct=this.run(N,st,V),Tt={id:Y,result:ct,options:V},Et=H(H({},Tt),{type:"run"});return this.noStop||(N.Commands.active[Y]=ct),N.trigger("".concat(R.A.runCommand).concat(Y),Tt),N.trigger("".concat(R.A.callCommand).concat(Y),Et),N.trigger(R.A.run,Tt),N.trigger(R.A.call,Et),ct}N.trigger("".concat(R.A.abort).concat(Y),{options:V})},x.prototype.callStop=function(N,V){V===void 0&&(V={});var Y=this.id,st=V.sender||N;N.trigger("".concat(R.A.stopBeforeCommand).concat(Y),{options:V});var ct=this.stop(N,st,V),Tt={id:Y,result:ct,options:V},Et=H(H({},Tt),{type:"stop"});return delete N.Commands.active[Y],N.trigger("".concat(R.A.stopCommand).concat(Y),Tt),N.trigger("".concat(R.A.callCommand).concat(Y),Et),N.trigger(R.A.stop,Tt),N.trigger(R.A.call,Et),ct},x.prototype.stopCommand=function(N){this.em.Commands.stop(this.id,N)},x.prototype.run=function(N,V,Y){},x.prototype.stop=function(N,V,Y){},x}(pt.Kx)},7801:(C,q,it)=>{"use strict";it.r(q),it.d(q,{default:()=>R});var $=it(5706),pt=function(F,H,E){if(E||arguments.length===2)for(var _,O=0,x=H.length;O<x;O++)!_&&O in H||(_||(_=Array.prototype.slice.call(H,0,O)),_[O]=H[O]);return F.concat(_||Array.prototype.slice.call(H))};const R={run:function(F,H,E){var _=this;E===void 0&&(E={});var O=[],x=E.component||F.getSelectedAll();return(x=(0,$.isArray)(x)?pt([],x,!0):[x]).filter(Boolean).forEach(function(N){var V,Y;if(!N.get("removable"))return _.em.logWarning("The element is not removable",{component:N});O.push(N),(((Y=(V=N.delegate)===null||V===void 0?void 0:V.remove)===null||Y===void 0?void 0:Y.call(V,N))||N).remove()}),F.selectRemove(O),O}}},4864:(C,q,it)=>{"use strict";it.r(q),it.d(q,{default:()=>E});var $=it(5706),pt=it(9966),R=it(1166),F=function(){return F=Object.assign||function(_){for(var O,x=1,N=arguments.length;x<N;x++)for(var V in O=arguments[x])Object.prototype.hasOwnProperty.call(O,V)&&(_[V]=O[V]);return _},F.apply(this,arguments)},H="dmode";const E={run:function(_,O,x){var N,V,Y=this;if(x===void 0&&(x={}),(0,$.bindAll)(this,"setPosition","onStart","onDrag","onEnd","getPosition","getGuidesStatic","renderGuide","getGuidesTarget"),!x.target)throw new Error("Target option is required");var st=F({doc:(N=x.target.getEl())===null||N===void 0?void 0:N.ownerDocument,onStart:this.onStart,onEnd:this.onEnd,onDrag:this.onDrag,getPosition:this.getPosition,setPosition:this.setPosition,guidesStatic:function(){var Tt;return(Tt=Y.guidesStatic)!==null&&Tt!==void 0?Tt:[]},guidesTarget:function(){var Tt;return(Tt=Y.guidesTarget)!==null&&Tt!==void 0?Tt:[]}},(V=x.dragger)!==null&&V!==void 0?V:{});this.setupGuides(),this.opts=x,this.editor=_,this.em=_.getModel(),this.target=x.target,this.isTran=x.mode=="translate",this.guidesContainer=this.getGuidesContainer(),this.guidesTarget=this.getGuidesTarget(),this.guidesStatic=this.getGuidesStatic();var ct=this.dragger;return ct?ct.setOptions(st):(ct=new pt.A(st),this.dragger=ct),x.event&&ct.start(x.event),this.toggleDrag(!0),this.em.trigger("".concat(H,":start"),this.getEventOpts()),ct},getEventOpts:function(){var _,O,x=(O=(_=this.guidesTarget)===null||_===void 0?void 0:_.filter(function(N){return N.active}))!==null&&O!==void 0?O:[];return{mode:this.opts.mode,component:this.target,target:this.target,guidesTarget:this.guidesTarget,guidesStatic:this.guidesStatic,guidesMatched:this.getGuidesMatched(x),command:this}},stop:function(){this.toggleDrag()},setupGuides:function(){var _;((_=this.guides)!==null&&_!==void 0?_:[]).forEach(function(O){var x,N=O.guide;(x=N?.parentNode)===null||x===void 0||x.removeChild(N)}),this.guides=[]},getGuidesContainer:function(){var _,O,x,N,V=this,Y=this.guidesEl;if(!Y){var st=this,ct=st.editor,Tt=st.em,Et=st.opts,vt=(_=ct.getConfig().stylePrefix)!==null&&_!==void 0?_:"",ft=document.createElement("div"),wt=document.createElement("div"),Ot='<div class="'.concat(vt,"guide-info__line ").concat(vt,`danger-bg">
        <div class="`).concat(vt,"guide-info__content ").concat(vt,`danger-color"></div>
      </div>`);(Y=document.createElement("div")).className="".concat(vt,"guides"),ft.className="".concat(vt,"guide-info ").concat(vt,"guide-info__x"),wt.className="".concat(vt,"guide-info ").concat(vt,"guide-info__y"),ft.innerHTML=Ot,wt.innerHTML=Ot,Y.appendChild(ft),Y.appendChild(wt),(O=ct.Canvas.getGlobalToolsEl())===null||O===void 0||O.appendChild(Y),this.guidesEl=Y,this.elGuideInfoX=ft,this.elGuideInfoY=wt,this.elGuideInfoContentX=(x=ft.querySelector(".".concat(vt,"guide-info__content")))!==null&&x!==void 0?x:void 0,this.elGuideInfoContentY=(N=wt.querySelector(".".concat(vt,"guide-info__content")))!==null&&N!==void 0?N:void 0,Tt.on("canvas:update frame:scroll",(0,$.debounce)(function(){var te;V.updateGuides(),Et.debug&&((te=V.guides)===null||te===void 0||te.forEach(function(Ft){return V.renderGuide(Ft)}))},200))}return Y},getGuidesStatic:function(){var _=this,O=[],x=this.target.getEl(),N=x?.parentElement;return N?((0,$.each)(N.children,function(V){return O=O.concat(x!==V?_.getElementGuides(V):[])}),O.concat(this.getElementGuides(N))):[]},getGuidesTarget:function(){return this.getElementGuides(this.target.getEl())},updateGuides:function(_){var O,x,N,V=this;((O=_??this.guides)!==null&&O!==void 0?O:[]).forEach(function(Y){var st=Y.origin,ct=x===st?N:V.getElementPos(st);x=st,N=ct,(0,$.each)(V.getGuidePosUpdate(Y,ct),function(Tt,Et){Y[Et]=Tt}),Y.originRect=ct})},getGuidePosUpdate:function(_,O){var x={},N=O.top,V=O.height,Y=O.left,st=O.width;switch(_.type){case"t":x.y=N;break;case"b":x.y=N+V;break;case"l":x.x=Y;break;case"r":x.x=Y+st;break;case"x":x.x=Y+st/2;break;case"y":x.y=N+V/2}return x},renderGuide:function(_){var O,x;if(!this.opts.skipGuidesRender){var N=(O=_.guide)!==null&&O!==void 0?O:document.createElement("div"),V="px",Y=_.active?2:1;if(N.style.cssText="position: absolute; background-color: ".concat(_.active?"green":"red",";"),!N.children.length){var st=document.createElement("div");st.style.cssText="position: absolute; color: red; padding: 5px; top: 0; left: 0;",N.appendChild(st)}return _.y?(N.style.width="100%",N.style.height="".concat(Y).concat(V),N.style.top="".concat(_.y).concat(V),N.style.left="0"):(N.style.width="".concat(Y).concat(V),N.style.height="100%",N.style.left="".concat(_.x).concat(V),N.style.top="0".concat(V)),!_.guide&&((x=this.guidesContainer)===null||x===void 0||x.appendChild(N)),N}},getElementPos:function(_){return this.editor.Canvas.getElementPos(_,{noScroll:1})},getElementGuides:function(_){var O=this,x=this.opts,N=_,V=this.getElementPos(_),Y=(0,R.getComponentModel)(_),st=(0,R.getComponentView)(_),ct=V.top,Tt=V.height,Et=V.left,vt=V.width,ft=[{type:"t",y:ct},{type:"b",y:ct+Tt},{type:"l",x:Et},{type:"r",x:Et+vt},{type:"x",x:Et+vt/2},{type:"y",y:ct+Tt/2}].map(function(wt){var Ot=x.debug?O.renderGuide(wt):void 0;return F(F({},wt),{component:Y,componentView:st,componentEl:N,origin:N,componentElRect:V,originRect:V,guideEl:Ot,guide:Ot})});return ft.forEach(function(wt){var Ot;return(Ot=O.guides)===null||Ot===void 0?void 0:Ot.push(wt)}),ft},getTranslate:function(_,O){O===void 0&&(O="x");var x=0;return(_||"").split(" ").forEach(function(N){var V=N.trim(),Y="translate".concat(O.toUpperCase(),"(");V.indexOf(Y)===0&&(x=parseFloat(V.replace(Y,"")))}),x},setTranslate:function(_,O,x){var N="translate".concat(O.toUpperCase(),"("),V="".concat(N).concat(x,")"),Y=(_||"").split(" ").map(function(st){return st.trim().indexOf(N)===0&&(st=V),st}).join(" ");return Y.indexOf(N)<0&&(Y+=" ".concat(V)),Y},getPosition:function(){var _=this.target,O=this.isTran,x=_.getStyle(),N=x.transform,V=x.left,Y=x.top,st=0,ct=0;return O&&N?(st=this.getTranslate(N),ct=this.getTranslate(N,"y")):(st=parseFloat(V??"0"),ct=parseFloat(Y??"0")),{x:st,y:ct}},setPosition:function(_){var O,x,N=_.x,V=_.y,Y=_.end,st=_.position,ct=_.width,Tt=_.height,Et=this,vt=Et.target,ft=Et.isTran,wt=Et.em,Ot=Et.opts,te="px",Ft=!Y,D="".concat(parseInt("".concat(N),10)).concat(te),W="".concat(parseInt("".concat(V),10)).concat(te),K={};if(ft){var ot=(x=(O=vt.getStyle())===null||O===void 0?void 0:O.transform)!==null&&x!==void 0?x:"";ot=this.setTranslate(ot,"x",D),K={transform:ot=this.setTranslate(ot,"y",W),__p:Ft}}else{var ht={position:st,width:ct,height:Tt},G={left:D,top:W,__p:Ft};(0,$.keys)(ht).forEach(function(xt){var I=ht[xt];I&&(G[xt]=I)}),K=G}Ot.addStyle?Ot.addStyle({component:vt,styles:K,partial:!Y}):vt.addStyle(K,{avoidStore:!Y}),wt.Styles.__emitCmpStyleUpdate(K,{components:wt.getSelected()})},_getDragData:function(){var _=this.target;return{target:_,parent:_.parent(),index:_.index()}},onStart:function(_){var O,x=this,N=x.target,V=x.editor,Y=x.isTran,st=x.opts,ct=V.Canvas,Tt=N.getStyle(),Et="absolute",vt=[Et,"relative"];if((O=st.onStart)===null||O===void 0||O.call(st,this._getDragData()),!Y){if(Tt.position!==Et){var ft=ct.offset(N.getEl()),wt=ft.left,Ot=ft.top,te=ft.width,Ft=ft.height,D=N.parent(),W=null;do{var K=D?.getStyle(),ot=K?.position;ot&&(W=vt.indexOf(ot)>=0?D:null),D=D?.parent()}while(D&&!W);if(st.center){var ht=ct.getMouseRelativeCanvas(_);wt=ht.x,Ot=ht.y}else if(W){var G=ct.offset(W.getEl());wt-=G.left,Ot-=G.top}this.setPosition({x:wt,y:Ot,width:"".concat(te,"px"),height:"".concat(Ft,"px"),position:Et})}this.guidesStatic=this.getGuidesStatic()}},onDrag:function(_){var O,x,N=this,V=this.guidesTarget,Y=this.opts;this.updateGuides(V),Y.debug&&V?.forEach(function(st){return N.renderGuide(st)}),Y.guidesInfo&&this.renderGuideInfo((O=V?.filter(function(st){return st.active}))!==null&&O!==void 0?O:[]),(x=Y.onDrag)===null||x===void 0||x.call(Y,this._getDragData()),this.opts.event=_,this.em.trigger("".concat(H,":move"),this.getEventOpts())},onEnd:function(_,O,x){var N,V=this,Y=V.editor,st=V.opts,ct=V.id;(N=st.onEnd)===null||N===void 0||N.call(st,_,x,F(F({event:_},x),this._getDragData())),Y.stopCommand("".concat(ct)),this.hideGuidesInfo(),this.em.trigger("".concat(H,":end"),this.getEventOpts())},hideGuidesInfo:function(){var _=this;["X","Y"].forEach(function(O){var x=_["elGuideInfo".concat(O)];x&&(x.style.display="none")})},renderGuideInfo:function(_){var O=this;_===void 0&&(_=[]),this.hideGuidesInfo(),this.getGuidesMatched(_).forEach(function(x){O.opts.skipGuidesRender||O.renderSingleGuideInfo(x),O.em.trigger("".concat(H,":active"),F(F({},O.getEventOpts()),x))})},renderSingleGuideInfo:function(_){var O=_.posFirst,x=_.posSecond,N=_.size,V=_.sizeRaw,Y=_.guide,st=_.elGuideInfo,ct=_.elGuideInfoCnt,Tt=((0,$.isUndefined)(Y.x)?"y":"x")=="y",Et=st.style;Et.display="",Et[Tt?"top":"left"]="".concat(O,"px"),Et[Tt?"left":"top"]="".concat(x,"px"),Et[Tt?"width":"height"]="".concat(N,"px"),ct.innerHTML="".concat(Math.round(V),"px")},getGuidesMatched:function(_){var O=this;_===void 0&&(_=[]);var x=this.guidesStatic,N=x===void 0?[]:x;return _.map(function(V){var Y=V.origin,st=V.x,ct=O.getElementPos(Y),Tt=(0,$.isUndefined)(st)?"y":"x",Et=Tt==="y",vt=ct[Et?"left":"top"],ft=ct.rect[Et?"left":"top"],wt=Et?vt+ct.width:vt+ct.height,Ot=Et?ft+ct.rect.width:ft+ct.rect.height,te=N.filter(function(ce){var jt;return ce.type===V.type||((jt={l:["r","x"],r:["l","x"],x:["l","r"],t:["b","y"],b:["t","y"],y:["t","b"]}[V.type])===null||jt===void 0?void 0:jt.includes(ce.type))}).map(function(ce){var jt=ce.originRect,Xt=jt.left,pe=jt.width,me=jt.top,kt=jt.height,Yt=Et?Xt+pe:me+kt;return{gap:Yt<vt?vt-Yt:(Et?Xt:me)-wt,guide:ce}}).filter(function(ce){return ce.gap>0}).sort(function(ce,jt){return ce.gap-jt.gap}).map(function(ce){return ce.guide}).filter(function(ce){switch(V.type){case"l":case"r":case"x":return Math.abs(ce.x-V.x)<1;case"t":case"b":case"y":return Math.abs(ce.y-V.y)<1;default:return!1}}),Ft=te[0];if(Ft){var D=Ft.originRect,W=D.left,K=D.width,ot=D.top,ht=D.height,G=D.rect,xt=Et?W<ct.left:ot<ct.top,I=Et?W:ot,Nt=Et?G.left:G.top,Pt=Et?W+K:ot+ht,ne=Et?G.left+G.width:G.top+G.height,_t=Et?V.y:V.x,Ut=xt?Pt:wt,Ht=xt?vt-Pt:I-wt,ee=xt?ft-ne:Nt-Ot,Zt=O["elGuideInfo".concat(Tt.toUpperCase())],le=O["elGuideInfoContent".concat(Tt.toUpperCase())];return{guide:V,guidesStatic:N,matched:Ft,posFirst:_t,posSecond:Ut,size:Ht,sizeRaw:ee,elGuideInfo:Zt,elGuideInfoCnt:le}}return null}).filter(Boolean)},toggleDrag:function(_){var O=this.ppfx,x=this.editor,N=_?"add":"remove",V=["".concat(O,"is__grabbing")],Y=x.Canvas,st=Y.getBody();V.forEach(function(ct){return st.classList[N](ct)}),Y[_?"startAutoscroll":"stopAutoscroll"]()},editor:void 0,em:void 0,opts:void 0,target:void 0}},6134:(C,q,it)=>{"use strict";it.r(q),it.d(q,{default:()=>$});const $={run:function(pt){if(pt.Canvas.hasFocus()){var R=[];pt.getSelectedAll().forEach(function(F){var H=F.components(),E=H&&H.filter(function(_){return _.get("selectable")})[0];E&&R.push(E)}),R.length&&pt.select(R)}}}},914:(C,q,it)=>{"use strict";it.r(q),it.d(q,{default:()=>$});const $={run:function(pt,R,F){if(F===void 0&&(F={}),pt.Canvas.hasFocus()||F.force){var H=[];pt.getSelectedAll().forEach(function(E){for(var _=E.parent();_&&!_.get("selectable");)_=_.parent();_&&H.push(_)}),H.length&&pt.select(H)}}}},5547:(C,q,it)=>{"use strict";it.r(q),it.d(q,{default:()=>$});const $={run:function(pt){if(pt.Canvas.hasFocus()){var R=[];pt.getSelectedAll().forEach(function(F){var H=F.parent();if(H){var E,_=H.components().length,O=0,x=0;do O++,E=(x=F.index()+O)<=_?H.getChildAt(x):null;while(E&&!E.get("selectable"));R.push(E||F)}}),R.length&&pt.select(R)}}}},8655:(C,q,it)=>{"use strict";it.r(q),it.d(q,{default:()=>$});const $={run:function(pt){if(pt.Canvas.hasFocus()){var R=[];pt.getSelectedAll().forEach(function(F){var H=F.parent();if(H){var E,_=0,O=0;do _++,E=(O=F.index()-_)>=0?H.getChildAt(O):null;while(E&&!E.get("selectable"));R.push(E||F)}}),R.length&&pt.select(R)}}}},7640:(C,q,it)=>{"use strict";it.r(q),it.d(q,{default:()=>pt});var $=it(5706);const pt={run:function(R,F,H){H===void 0&&(H={});var E=H.target,_=[];if(!E.get("styles"))return _;var O=E.get("type"),x=R.Pages.getAllWrappers();if(!(0,$.flatten)(x.map(function(V){return V.findType(O)})).length){var N=R.CssComposer.getAll();_=N.filter(function(V){return V.get("group")==="cmp:".concat(O)}),N.remove(_)}return _}}},5837:(C,q,it)=>{"use strict";it.r(q),it.d(q,{default:()=>pt});var $=function(R,F,H){if(H||arguments.length===2)for(var E,_=0,O=F.length;_<O;_++)!E&&_ in F||(E||(E=Array.prototype.slice.call(F,0,_)),E[_]=F[_]);return R.concat(E||Array.prototype.slice.call(F))};const pt={run:function(R){var F=R.getModel(),H=$([],R.getSelectedAll(),!0).map(function(E){var _,O;return((O=(_=E.delegate)===null||_===void 0?void 0:_.copy)===null||O===void 0?void 0:O.call(_,E))||E}).filter(Boolean);H.length&&F.set("clipboard",H)}}},6477:(C,q,it)=>{"use strict";it.r(q),it.d(q,{default:()=>pt});var $=it(6294);const pt={run:function(R,F,H){var E=this;H===void 0&&(H={}),F&&F.set&&F.set("active",0);var _=R.getConfig(),O=R.Modal,x=_.stylePrefix;if(this.cm=R.CodeManager||null,!this.editors){var N=this.buildEditor("htmlmixed","hopscotch","HTML"),V=this.buildEditor("css","hopscotch","CSS");this.htmlEditor=N.model,this.cssEditor=V.model;var Y=(0,$.a_)("div",{class:"".concat(x,"export-dl")});Y.appendChild(N.el),Y.appendChild(V.el),this.editors=Y}O.open({title:_.textViewCode,content:this.editors}).getModel().once("change:open",function(){return R.stopCommand("".concat(E.id))}),this.htmlEditor.setContent(R.getHtml(H.optsHtml)),this.cssEditor.setContent(R.getCss(H.optsCss))},stop:function(R){var F=R.Modal;F&&F.close()},buildEditor:function(R,F,H){var E=this.em.CodeManager,_=E.createViewer({label:H,codeName:R,theme:F});return{model:_,el:new E.EditorView({model:_,config:E.getConfig()}).render().el}}}},1772:(C,q,it)=>{"use strict";it.r(q),it.d(q,{default:()=>pt});var $=it(5706);const pt={isEnabled:function(){var R=document;return!!(R.fullscreenElement||R.webkitFullscreenElement||R.mozFullScreenElement)},enable:function(R){var F="";return R.requestFullscreen?R.requestFullscreen():R.webkitRequestFullscreen?(F="webkit",R.webkitRequestFullscreen()):R.mozRequestFullScreen?(F="moz",R.mozRequestFullScreen()):R.msRequestFullscreen&&R.msRequestFullscreen(),F},disable:function(){var R=document;this.isEnabled()&&(R.exitFullscreen?R.exitFullscreen():R.webkitExitFullscreen?R.webkitExitFullscreen():R.mozCancelFullScreen?R.mozCancelFullScreen():R.msExitFullscreen&&R.msExitFullscreen())},fsChanged:function(R){this.isEnabled()||(this.stopCommand({sender:this.sender}),document.removeEventListener("".concat(R||"","fullscreenchange"),this.fsChanged))},run:function(R,F,H){H===void 0&&(H={}),this.sender=F;var E=H.target,_=(0,$.isElement)(E)?E:document.querySelector(E),O=this.enable(_||R.getContainer());this.fsChanged=this.fsChanged.bind(this,O),document.addEventListener(O+"fullscreenchange",this.fsChanged)},stop:function(R,F){F&&F.set&&F.set("active",!1),this.disable()}}},741:(C,q,it)=>{"use strict";it.r(q),it.d(q,{default:()=>E});var $=it(5706),pt=it(7774),R=it(6294),F=it(9317),H=it(1406);const E=(0,$.extend)({},H.default,F.default,{init:function(_){F.default.init.apply(this,arguments),(0,$.bindAll)(this,"initSorter","rollback","onEndMove"),this.opt=_,this.hoverClass=this.ppfx+"highlighter-warning",this.badgeClass=this.ppfx+"badge-warning",this.noSelClass=this.ppfx+"no-select"},enable:function(){for(var _=[],O=0;O<arguments.length;O++)_[O]=arguments[O];F.default.enable.apply(this,_),this.getBadgeEl().addClass(this.badgeClass),this.getHighlighterEl().addClass(this.hoverClass);var x=this.$wrapper;x.css("cursor","move"),x.on("mousedown",this.initSorter),x.addClass(this.noSelClass)},toggleClipboard:function(){},initSorter:function(_){var O=(0,pt.default)(_.target).data("model").get("draggable");O&&(this.cacheEl=null,this.startSelectPosition(_.target,this.frameEl.contentDocument),this.sorter.draggable=O,this.sorter.eventHandlers.legacyOnEndMove=this.onEndMove.bind(this),this.stopSelectComponent(),this.$wrapper.off("mousedown",this.initSorter),(0,R.on)(this.getContentWindow(),"keydown",this.rollback))},initSorterFromModel:function(_){var O=_.get("draggable");if(O){this.cacheEl=null;var x=_.view.el;this.startSelectPosition(x,this.frameEl.contentDocument),this.sorter.draggable=O,this.sorter.eventHandlers.legacyOnEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),(0,R.on)(this.getContentWindow(),"keydown",this.rollback)}},initSorterFromModels:function(_){this.cacheEl=null;var O=_[_.length-1],x=this.em.getCurrentFrame(),N=O.getEl(x?.model).ownerDocument,V=_.map(function(Y){var st;return(st=Y?.view)===null||st===void 0?void 0:st.el});this.startSelectPosition(V,N,{onStart:this.onStart}),this.sorter.eventHandlers.legacyOnMoveClb=this.onDrag,this.sorter.eventHandlers.legacyOnEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),(0,R.on)(this.getContentWindow(),"keydown",this.rollback)},onEndMoveFromModel:function(){(0,R.AU)(this.getContentWindow(),"keydown",this.rollback)},onEndMove:function(){this.enable(),(0,R.AU)(this.getContentWindow(),"keydown",this.rollback)},onSelect:function(_,O){},rollback:function(_,O){((_.which||_.keyCode)==27||O)&&this.sorter.cancelDrag()},getBadgeEl:function(){return this.$badge||(this.$badge=(0,pt.default)(this.getBadge())),this.$badge},getHighlighterEl:function(){return this.$hl||(this.$hl=(0,pt.default)(this.canvas.getHighlighter())),this.$hl},stop:function(){for(var _=[],O=0;O<arguments.length;O++)_[O]=arguments[O];F.default.stop.apply(this,_),this.getBadgeEl().removeClass(this.badgeClass),this.getHighlighterEl().removeClass(this.hoverClass),this.$wrapper.css("cursor","").unbind().removeClass(this.noSelClass)}})},2924:(C,q,it)=>{"use strict";it.r(q),it.d(q,{default:()=>R});var $=it(5706),pt=it(6294);const R={open:function(F){var H=this,E=this,_=E.editor,O=E.title,x=E.config,N=E.am,V=x.custom;if((0,$.isFunction)(V.open))return V.open(N.__customData());_.Modal.open({title:O,content:F}).onceClose(function(){return _.stopCommand(H.id)})},close:function(){var F=this.config.custom;if((0,$.isFunction)(F.close))return F.close(this.am.__customData());var H=this.editor.Modal;H&&H.close()},run:function(F,H,E){E===void 0&&(E={});var _=F.AssetManager,O=_.getConfig(),x=E.types,N=x===void 0?[]:x,V=E.accept,Y=E.select;if(this.title=E.modalTitle||F.t("assetManager.modalTitle")||"",this.editor=F,this.config=O,this.am=_,_.setTarget(E.target),_.onClick(E.onClick),_.onDblClick(E.onDblClick),_.onSelect(E.onSelect),_.__behaviour({select:Y,types:N,options:E}),O.custom)this.rendered=this.rendered||(0,pt.a_)("div"),this.rendered.className="".concat(O.stylePrefix,"custom-wrp"),_.__behaviour({container:this.rendered}),_.__trgCustom();else{if(!this.rendered||N){var st=_.getAll().filter(function(Tt){return Tt});N&&N.length&&(st=st.filter(function(Tt){return N.indexOf(Tt.get("type"))!==-1})),_.render(st),this.rendered=_.getContainer()}if(V){var ct=this.rendered.querySelector("input#".concat(O.stylePrefix,"uploadFile"));ct&&ct.setAttribute("accept",V)}}return this.open(this.rendered),this},stop:function(F){this.editor=F,this.close(this.rendered)}}},3963:(C,q,it)=>{"use strict";it.r(q),it.d(q,{default:()=>R});var $=it(5706),pt=it(6294);const R={open:function(){var F=this,H=F.container,E=F.editor,_=F.bm,O=F.config,x=O.custom,N=O.appendTo;if((0,$.isFunction)(x.open))return x.open(_.__customData());if(this.firstRender&&!N){var V="views-container",Y=E.Panels;(Y.getPanel(V)||Y.addPanel({id:V})).set("appendContent",H).trigger("change:appendContent"),x||H.appendChild(_.render())}H&&(H.style.display="block")},close:function(){var F=this.container,H=this.config.custom;if((0,$.isFunction)(H.close))return H.close(this.bm.__customData());F&&(F.style.display="none")},run:function(F){var H=F.Blocks;this.config=H.getConfig(),this.firstRender=!this.container,this.container=this.container||(0,pt.a_)("div"),this.editor=F,this.bm=H;var E=this.container;H.__behaviour({container:E}),this.config.custom&&H.__trgCustom(),this.open()},stop:function(){this.close()}}},1479:(C,q,it)=>{"use strict";it.r(q),it.d(q,{default:()=>$});const $={run:function(pt){var R=pt.LayerManager,F=pt.Panels,H=R.getConfig();if(!H.appendTo){if(!this.layers){var E="views-container",_=document.createElement("div"),O=F.getPanel(E)||F.addPanel({id:E});H.custom?R.__trgCustom({container:_}):_.appendChild(R.render()),O.set("appendContent",_).trigger("change:appendContent"),this.layers=_}this.layers.style.display="block"}},stop:function(){var pt=this.layers;pt&&(pt.style.display="none")}}},3473:(C,q,it)=>{"use strict";it.r(q),it.d(q,{default:()=>pt});var $=it(7774);const pt={run:function(R,F){if(this.sender=F,!this.$cnt){var H=R.getConfig(),E=R.Panels,_=R.DeviceManager,O=R.SelectorManager,x=R.StyleManager,N="change:appendContent",V=(0,$.default)("<div></div>"),Y=(0,$.default)("<div></div>"),st=(0,$.default)("<div></div>"),ct=(0,$.default)("<div></div>");if(this.$cnt=V,this.$cntInner=Y,Y.append(st),Y.append(ct),V.append(Y),_&&H.showDevices){var Tt=E.addPanel({id:"devices-c"}),Et=_.render();Tt.set("appendContent",Et).trigger(N)}var vt=O.getConfig();vt.custom?O.__trgCustom({container:st.get(0)}):vt.appendTo||st.append(O.render([])),this.sm=x;var ft=x.getConfig(),wt=ft.stylePrefix;this.$header=(0,$.default)('<div class="'.concat(wt,'header">').concat(R.t("styleManager.empty"),"</div>")),V.append(this.$header),ft.custom?x.__trgCustom({container:ct.get(0)}):ft.appendTo||ct.append(x.render());var Ot="views-container";(E.getPanel(Ot)||E.addPanel({id:Ot})).set("appendContent",V).trigger(N);var te=R.getModel();this.listenTo(te,x.events.target,this.toggleSm)}this.toggleSm()},toggleSm:function(){var R=this,F=R.sender,H=R.sm,E=R.$cntInner,_=R.$header;F&&F.get&&!F.get("active")||!H||(H.getSelected()?(E?.show(),_?.hide()):(E?.hide(),_?.show()))},stop:function(){var R,F;(R=this.$cntInner)===null||R===void 0||R.hide(),(F=this.$header)===null||F===void 0||F.hide()}}},5054:(C,q,it)=>{"use strict";it.r(q),it.d(q,{default:()=>pt});var $=it(7774);const pt={run:function(R,F){this.sender=F;var H,E=R.getModel(),_=R.Config.stylePrefix,O=R.TraitManager,x=O.getConfig();if(!x.appendTo){if(!this.$cn){this.$cn=(0,$.default)("<div></div>"),this.$cn2=(0,$.default)("<div></div>"),this.$cn.append(this.$cn2),this.$header=(0,$.default)("<div>").append('<div class="'.concat(x.stylePrefix,'header">').concat(E.t("traitManager.empty"),"</div>")),this.$cn.append(this.$header),x.custom?O.__trgCustom({container:this.$cn2.get(0)}):(this.$cn2.append('<div class="'.concat(_,'traits-label">').concat(E.t("traitManager.label"),"</div>")),this.$cn2.append(O.render()));var N=R.Panels;(H=N.getPanel("views-container")?N.getPanel("views-container"):N.addPanel({id:"views-container"}))==null||H.set("appendContent",this.$cn.get(0)).trigger("change:appendContent"),this.target=R.getModel(),this.listenTo(this.target,"component:toggled",this.toggleTm)}this.toggleTm()}},toggleTm:function(){var R=this.sender;R&&R.get&&!R.get("active")||(this.target.getSelectedAll().length===1?(this.$cn2.show(),this.$header.hide()):(this.$cn2.hide(),this.$header.show()))},stop:function(){this.$cn2&&this.$cn2.hide(),this.$header&&this.$header.hide()}}},6979:(C,q,it)=>{"use strict";it.r(q),it.d(q,{default:()=>pt});var $=it(5706);const pt={run:function(F,H,E){E===void 0&&(E={});var _=F.getModel(),O=_.get("clipboard"),x=F.getSelected();O?.length&&x&&(F.getSelectedAll().forEach(function(N){var V,Y,st,ct,Tt=((Y=(V=N.delegate)===null||V===void 0?void 0:V.copy)===null||Y===void 0?void 0:Y.call(V,N))||N,Et=Tt.collection;if(Et){var vt={at:Tt.index()+1,action:E.action||"paste-component"};ct=(0,$.contains)(O,Tt)&&Tt.get("copyable")?Et.add(Tt.clone(),vt):R(F,O,Tt.parent(),vt)}else{var ft=(st=_.Pages.getSelected())===null||st===void 0?void 0:st.getMainComponent();vt={at:ft?.components().length||0,action:E.action||"paste-component"},ct=R(F,O,ft,vt)}(ct=(0,$.isArray)(ct)?ct:[ct]).forEach(function(wt){return F.trigger("component:paste",wt)})}),x.emitUpdate())}};function R(F,H,E,_){var O=H.filter(function(x){return x.get("copyable")}).filter(function(x){return F.Components.canMove(E,x).result});return E.components().add(O.map(function(x){return x.clone()}),_)}},4457:(C,q,it)=>{"use strict";it.r(q),it.d(q,{default:()=>F});var $=it(5706),pt=function(H,E,_){if(_||arguments.length===2)for(var O,x=0,N=E.length;x<N;x++)!O&&x in E||(O||(O=Array.prototype.slice.call(E,0,x)),O[x]=E[x]);return H.concat(O||Array.prototype.slice.call(E))},R="core:component-outline";const F={getPanels:function(H){return this.panels||(this.panels=H.Panels.getPanels()),this.panels},preventDrag:function(H){H.abort=1},tglEffects:function(H){var E=this.em,_=H?"on":"off";if(E){var O=E.Canvas,x=O.getBody(),N=O.getToolbarEl();N&&(N.style.display=H?"none":"");var V=x.querySelectorAll(".".concat(this.ppfx,"no-pointer"));(0,$.each)(V,function(Y){return Y.style.pointerEvents=H?"all":""}),E[_]("run:tlb-move:before",this.preventDrag)}},run:function(H,E){var _=this;this.sender=E,this.selected=pt([],H.getSelectedAll(),!0),H.select(),this.shouldRunSwVisibility||(this.shouldRunSwVisibility=H.Commands.isActive(R)),this.shouldRunSwVisibility&&H.stopCommand(R),H.getModel().stopDefault();var O=this.getPanels(H),x=H.Canvas.getElement(),N=H.getEl(),V=H.Config.stylePrefix;if(!this.helper){var Y=document.createElement("span");Y.className="".concat(V,"off-prv fa fa-eye-slash"),N.appendChild(Y),Y.onclick=function(){return _.stopCommand()},this.helper=Y}this.helper.style.display="inline-block",O.forEach(function(ct){return ct.set("visible",!1)});var st=x.style;st.width="100%",st.height="100%",st.top="0",st.left="0",st.padding="0",st.margin="0",H.refresh(),this.tglEffects(1)},stop:function(H){var E=this.sender,_=E===void 0?{}:E,O=this.selected;_.set&&_.set("active",0);var x=this.getPanels(H);this.shouldRunSwVisibility&&(H.runCommand(R),this.shouldRunSwVisibility=!1),H.getModel().runDefault(),x.forEach(function(N){return N.set("visible",!0)}),H.Canvas.getElement().setAttribute("style",""),O&&H.select(O),delete this.selected,this.helper&&(this.helper.style.display="none"),H.refresh(),this.tglEffects()}}},5493:(C,q,it)=>{"use strict";it.r(q),it.d(q,{ConvertUnitsToPx:()=>$,default:()=>E});var $,pt=it(2225),R=it(1166),F=function(){return F=Object.assign||function(_){for(var O,x=1,N=arguments.length;x<N;x++)for(var V in O=arguments[x])Object.prototype.hasOwnProperty.call(O,V)&&(_[V]=O[V]);return _},F.apply(this,arguments)},H=function(_,O){var x={};for(var N in _)Object.prototype.hasOwnProperty.call(_,N)&&O.indexOf(N)<0&&(x[N]=_[N]);if(_!=null&&typeof Object.getOwnPropertySymbols=="function"){var V=0;for(N=Object.getOwnPropertySymbols(_);V<N.length;V++)O.indexOf(N[V])<0&&Object.prototype.propertyIsEnumerable.call(_,N[V])&&(x[N[V]]=_[N[V]])}return x};(function(_){_.pt="pt",_.pc="pc",_.in="in",_.cm="cm",_.mm="mm",_.vw="vw",_.vh="vh",_.vmin="vmin",_.vmax="vmax",_.svw="svw",_.lvw="lvw",_.dvw="dvw",_.svh="svh",_.lvh="lvh",_.dvh="dvh",_.perc="%"})($||($={}));const E={run:function(_,O,x){var N,V,Y=this,st=_.Canvas,ct=_.Utils,Tt=_.em,Et=st.getCanvasView(),vt=Tt.config.stylePrefix||"",ft="".concat(vt,"resizing"),wt=x.onStart,Ot=wt===void 0?function(){}:wt,te=x.onMove,Ft=te===void 0?function(){}:te,D=x.onEnd,W=D===void 0?function(){}:D,K=x.updateTarget,ot=K===void 0?function(){}:K,ht=x.el,G=x.componentView,xt=x.component,I=x.skipPositionUpdate,Nt=H(x,["onStart","onMove","onEnd","updateTarget","el","componentView","component","skipPositionUpdate"]),Pt=ht||G?.el||xt.getEl(),ne={component:xt,el:Pt},_t=function(ee,Zt,le){var ce=le.docs;ce&&ce.forEach(function(jt){var Xt=jt.body,pe=Xt.className||"";Xt.className=(ee=="add"?"".concat(pe," ").concat(ft):pe.replace(ft,"")).trim()})},Ut=F(F({appendTo:st.getResizerEl(),prefix:_.getConfig().stylePrefix,posFetcher:Et.getElementPos.bind(Et),mousePosFetcher:st.getMouseRelativePos.bind(st),docs:[document],updateOnMove:!0,skipUnitAdjustments:!0,onStart:function(ee,Zt){var le;Ot(ee,Zt);var ce=Zt.el,jt=Zt.config,Xt=Zt.resizer,pe=jt.keyHeight,me=jt.keyWidth,kt=jt.currentUnit,Yt=jt.keepAutoHeight,de=jt.keepAutoWidth;_t("add",0,Zt),N=Tt.Styles.getModelToStyle(xt),V=getComputedStyle(ce);var St=N.getStyle(),ae=F({},Xt.startDim),je=St[me];jt.autoWidth=de&&je==="auto",isNaN(parseFloat(je))&&(je=V[me]);var He=St[pe];jt.autoHeight=Yt&&He==="auto",isNaN(parseFloat(He))&&(He=V[pe]);var qe=parseFloat(je),gn=parseFloat(He),cn=(0,R.getUnitFromValue)(je),bt=(0,R.getUnitFromValue)(He);kt&&(jt.unitWidth=cn,jt.unitHeight=bt);var S=F(F({},ne),{event:ee,rect:ae,model:N,modelWidth:{value:je,property:me,number:qe,unit:cn},modelHeight:{value:He,property:pe,number:gn,unit:bt}});_.trigger(pt.I.resizeStart,S),_.trigger(pt.I.resize,F(F({},S),{type:"start"})),(le=x.afterStart)===null||le===void 0||le.call(x)},onMove:function(ee,Zt){Ft(ee,Zt);var le=Zt.resizer,ce=F(F({},ne),{event:ee,delta:le.delta,pointer:le.currentPos,rect:le.rectDim});_.trigger(pt.I.resizeStart,ce),_.trigger(pt.I.resize,F(F({},ce),{type:"move"}))},onEnd:function(ee,Zt){var le;W(ee,Zt),_t("remove",0,Zt);var ce=Zt.resizer,jt=F(F({},ne),{event:ee,rect:ce.rectDim,moved:ce.moved});_.trigger(pt.I.resizeEnd,jt),_.trigger(pt.I.resize,F(F({},ne),{type:"end"})),(le=x.afterEnd)===null||le===void 0||le.call(x)},updateTarget:function(ee,Zt,le){var ce;if(ot(ee,Zt,le),N){var jt=le.store,Xt=le.selectedHandler,pe=le.config,me=le.resizer,kt=le.event,Yt=pe.keyHeight,de=pe.keyWidth,St=pe.autoHeight,ae=pe.autoWidth,je=pe.unitWidth,He=pe.unitHeight,qe=["tc","bc"].indexOf(Xt)>=0,gn=["cl","cr"].indexOf(Xt)>=0,cn=!jt,bt={};if(!qe){var S=((ce=st.getBody())===null||ce===void 0?void 0:ce.offsetWidth)||0,A=Zt.w<S?Zt.w:S;bt[de]=ae?"auto":Y.convertPxToUnit({el:Pt,elComputedStyle:V,valuePx:A,unit:je})}gn||(bt[Yt]=St?"auto":Y.convertPxToUnit({el:Pt,elComputedStyle:V,valuePx:Zt.h,unit:He,isHeight:!0})),!I&&Tt.getDragMode(xt)&&(bt.top="".concat(Zt.t,"px"),bt.left="".concat(Zt.l,"px"));var J=!1,lt=function(qt){J=!0;var Qt=F(F({},qt||bt),{__p:cn});N.addStyle(Qt,{avoidStore:cn}),Tt.Styles.__emitCmpStyleUpdate(Qt,{components:xt})},Vt=F(F({},ne),{rect:Zt,partial:cn,event:kt,style:bt,updateStyle:lt,convertPxToUnit:function(qt){return Y.convertPxToUnit(F({el:Pt,elComputedStyle:V},qt))},delta:me.delta,pointer:me.currentPos});_.trigger(pt.I.resizeUpdate,Vt),!J&&lt()}}},Nt),x.options),Ht=this.canvasResizer;return Ht||(this.canvasResizer=new ct.Resizer(Ut),Ht=this.canvasResizer),Ht.setOptions(Ut,!0),Ht.blur(),Ht.focus(Pt),Ht},stop:function(){var _;(_=this.canvasResizer)===null||_===void 0||_.blur()},convertPxToUnit:function(_){var O=_.el,x=_.valuePx,N=_.unit,V=_.dpi,Y=V===void 0?96:V,st=_.roundDecimals,ct=st===void 0?3:st,Tt=_.isHeight,Et=_.elComputedStyle,vt=O.ownerDocument.defaultView,ft=vt?.innerWidth||1,wt=window.innerHeight||1,Ot=x,te=N;switch(N){case $.pt:Ot=x*(72/Y);break;case $.pc:Ot=x*(6/Y);break;case $.in:Ot=x/Y;break;case $.cm:Ot=x/(Y/2.54);break;case $.mm:Ot=x/(Y/25.4);break;case $.vw:Ot=x/ft*100;break;case $.vh:Ot=x/wt*100;break;case $.vmin:Ot=x/Math.min(ft,wt)*100;break;case $.vmax:Ot=x/Math.max(ft,wt)*100;break;case $.perc:var Ft=O.parentElement,D=O.offsetParent,W=Et?.position==="absolute"?D:Ft,K=W?.offsetWidth||1,ot=W?.offsetHeight||1;Ot=x/(Tt?ot:K)*100;break;case $.svw:case $.lvw:case $.dvw:Ot=x/ft*100;break;case $.svh:case $.lvh:case $.dvh:Ot=x/wt*100;break;default:te="px"}return"".concat(+Ot.toFixed(ct)).concat(te)}}},9317:(C,q,it)=>{"use strict";it.r(q),it.d(q,{default:()=>Ft});var $,pt=it(5706),R=it(179),F=it(9156),H=($=function(D,W){return $=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(K,ot){K.__proto__=ot}||function(K,ot){for(var ht in ot)Object.prototype.hasOwnProperty.call(ot,ht)&&(K[ht]=ot[ht])},$(D,W)},function(D,W){if(typeof W!="function"&&W!==null)throw new TypeError("Class extends value "+String(W)+" is not a constructor or null");function K(){this.constructor=D}$(D,W),D.prototype=W===null?Object.create(W):(K.prototype=W.prototype,new K)});const E=function(D){function W(){return D!==null&&D.apply(this,arguments)||this}return H(W,D),W.prototype.defaults=function(){return{command:"",attributes:{}}},W}(F.Kx);var _=function(){var D=function(W,K){return D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ot,ht){ot.__proto__=ht}||function(ot,ht){for(var G in ht)Object.prototype.hasOwnProperty.call(ht,G)&&(ot[G]=ht[G])},D(W,K)};return function(W,K){if(typeof K!="function"&&K!==null)throw new TypeError("Class extends value "+String(K)+" is not a constructor or null");function ot(){this.constructor=W}D(W,K),W.prototype=K===null?Object.create(K):(ot.prototype=K.prototype,new ot)}}(),O=function(D){function W(){return D!==null&&D.apply(this,arguments)||this}return _(W,D),W}(F.pM);const x=O;O.prototype.model=E;var N=it(2225),V=it(8242),Y=function(){var D=function(W,K){return D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ot,ht){ot.__proto__=ht}||function(ot,ht){for(var G in ht)Object.prototype.hasOwnProperty.call(ht,G)&&(ot[G]=ht[G])},D(W,K)};return function(W,K){if(typeof K!="function"&&K!==null)throw new TypeError("Class extends value "+String(K)+" is not a constructor or null");function ot(){this.constructor=W}D(W,K),W.prototype=K===null?Object.create(K):(ot.prototype=K.prototype,new ot)}}(),st=function(){return st=Object.assign||function(D){for(var W,K=1,ot=arguments.length;K<ot;K++)for(var ht in W=arguments[K])Object.prototype.hasOwnProperty.call(W,ht)&&(D[ht]=W[ht]);return D},st.apply(this,arguments)};const ct=function(D){function W(K){var ot=D.call(this,K)||this;return ot.em=K.config.em,ot}return Y(W,D),W.prototype.events=function(){return this.model.get("events")||{mousedown:"handleClick"}},W.prototype.attributes=function(){return this.model.get("attributes")},W.prototype.handleClick=function(K){K.preventDefault(),K.stopPropagation();var ot=this.em,ht=ot.Canvas.getFrameEl().getBoundingClientRect(),G=ht.left,xt=ht.top,I=st(st({},K),{clientX:K.clientX-G,clientY:K.clientY-xt});ot.trigger("toolbar:run:before",{event:I}),this.execCommand(I)},W.prototype.execCommand=function(K){var ot=this.em,ht={event:K},G=this.model.get("command"),xt=ot.Editor;(0,pt.isFunction)(G)&&G(xt,null,ht),(0,pt.isString)(G)&&xt.runCommand(G,ht)},W.prototype.render=function(){var K=this,ot=K.em,ht=K.$el,G=K.model,xt=G.get("id"),I=G.get("label"),Nt=ot.getConfig().stylePrefix;return ht.addClass("".concat(Nt,"toolbar-item")),xt&&ht.addClass("".concat(Nt,"toolbar-item__").concat(xt)),I&&ht.append(I),this},W}(F.Ss);var Tt=function(){var D=function(W,K){return D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ot,ht){ot.__proto__=ht}||function(ot,ht){for(var G in ht)Object.prototype.hasOwnProperty.call(ht,G)&&(ot[G]=ht[G])},D(W,K)};return function(W,K){if(typeof K!="function"&&K!==null)throw new TypeError("Class extends value "+String(K)+" is not a constructor or null");function ot(){this.constructor=W}D(W,K),W.prototype=K===null?Object.create(K):(ot.prototype=K.prototype,new ot)}}(),Et=function(D){function W(K){var ot=D.call(this,K)||this,ht=K.em;return ot.em=ht,ot.config={em:ht},ot.listenTo(ot.collection,"reset",ot.render),ot}return Tt(W,D),W.prototype.onRender=function(){var K=this.em.config.stylePrefix;this.el.className="".concat(K,"toolbar-items")},W}(V.A);const vt=Et;Et.prototype.itemView=ct;var ft,wt=it(6294),Ot=it(1166),te=function(){return te=Object.assign||function(D){for(var W,K=1,ot=arguments.length;K<ot;K++)for(var ht in W=arguments[K])Object.prototype.hasOwnProperty.call(W,ht)&&(D[ht]=W[ht]);return D},te.apply(this,arguments)};const Ft={activeResizer:!1,init:function(){this.onSelect=(0,pt.debounce)(this.onSelect,0),(0,pt.bindAll)(this,"onHover","onOut","onClick","onCanvasScroll","onFrameScroll","onFrameResize","onFrameUpdated","onContainerChange")},enable:function(){this.frameOff=this.canvasOff=this.adjScroll=null,this.startSelectComponent(),ft=!0},startSelectComponent:function(){this.toggleSelectComponent(1),this.em.getSelected()&&this.onSelect()},stopSelectComponent:function(){this.toggleSelectComponent()},toggleSelectComponent:function(D){var W=this,K=this.em,ot=this.canvas.getCanvasView().el,ht=K.getConfig().listenToEl,G=K.getContainer().parentNode,xt=D?"on":"off",I={on:wt.on,off:wt.AU},Nt=N.I.update;!ht.length&&G&&ht.push(G),I[xt](window,"resize",this.onFrameUpdated),I[xt](ht,"scroll",this.onContainerChange),K[xt]("component:toggled ".concat(Nt," undo redo"),this.onSelect,this),K[xt]("change:componentHovered",this.onHovered,this),K[xt]("".concat(N.I.resize," styleable:change ").concat(N.I.input),this.updateGlobalPos,this),K[xt]("".concat(Nt,":toolbar"),this._upToolbar,this),K[xt]("frame:updated",this.onFrameUpdated,this),K[xt]("canvas:updateTools",this.onFrameUpdated,this),K[xt](K.Canvas.events.refresh,this.updateAttached,this),K.Canvas.getFrames().forEach(function(Pt){var ne=Pt.view,_t=ne?.getWindow();_t&&function(Ut,Ht,ee){I[xt](ee,"scroll",W.onCanvasScroll,!0),I[xt](Ht,"mouseover",W.onHover),I[xt](Ht,"mouseleave",W.onOut),I[xt](Ht,"click",W.onClick),I[xt](Ut,"scroll",W.onFrameScroll,!0),I[xt](Ut,"resize",W.onFrameResize)}(_t,ne?.getBody(),ot)})},onHover:function(D){D.stopPropagation();var W=this.em,K=D.target,ot=(0,Ot.getComponentView)(K),ht=ot?.frameView,G=ot?.model;if(!G)for(var xt=K.parentNode;!G&&xt&&!(0,wt.ZQ)(xt);)G=(0,Ot.getComponentModel)(xt),xt=xt.parentNode;this.currentDoc=K.ownerDocument,W.setHovered(G,{useValid:!0}),ht&&W.setCurrentFrame(ht)},onFrameUpdated:function(){this.updateLocalPos(),this.updateGlobalPos()},onHovered:function(D,W){var K,ot=this,ht={};W?(K=W.views)===null||K===void 0||K.forEach(function(G){var xt=G.el,I=ot.getElementPos(xt);ht={el:xt,pos:I,component:W,view:G},xt.ownerDocument===ot.currentDoc&&(ot.elHovered=ht),ot.updateToolsLocal(ht)}):(this.currentDoc=null,this.elHovered=0,this.updateToolsLocal(),this.canvas.getFrames().forEach(function(G){var xt=G.view,I=xt&&xt.getToolsEl();I&&ot.toggleToolsEl(0,0,{el:I})}))},onSelect:function(){var D=this.em,W=D.getSelected(),K=D.getCurrentFrame(),ot=W&&W.getView(K?.model),ht=ot?.el,G={};ht&&(0,wt.zN)(ht)&&(G={el:ht,pos:this.getElementPos(ht),component:W,view:ot}),this.elSelected=G,this.updateToolsGlobal(),this.updateLocalPos(G),this.initResize(W)},updateGlobalPos:function(){var D=this.getElSelected();D.el&&(D.pos=this.getElementPos(D.el),this.updateToolsGlobal())},updateLocalPos:function(D){var W=this.getElHovered();W.el&&(W.pos=this.getElementPos(W.el),this.updateToolsLocal(D))},getElHovered:function(){return this.elHovered||{}},getElSelected:function(){return this.elSelected||{}},onOut:function(){this.em.setHovered()},toggleToolsEl:function(D,W,K){K===void 0&&(K={});var ot=K.el||this.canvas.getToolsEl(W);return ot&&(ot.style.display=D?"":"none"),ot||{}},showElementOffset:function(D,W,K){K===void 0&&(K={}),ft&&this.editor.runCommand("show-offset",{el:D,elPos:W,view:K.view,force:1,top:0,left:0})},hideElementOffset:function(D){this.editor.stopCommand("show-offset",{view:D})},showFixedElementOffset:function(D,W){this.editor.runCommand("show-offset",{el:D,elPos:W,state:"Fixed"})},hideFixedElementOffset:function(){this.editor&&this.editor.stopCommand("show-offset",{state:"Fixed"})},hideHighlighter:function(D){this.canvas.getHighlighter(D).style.opacity=0},onClick:function(D){D.stopPropagation(),D.preventDefault();var W=this.em;if(W.get("_cmpDrag"))return W.set("_cmpDrag");var K=D.target,ot=(0,Ot.getComponentModel)(K);if(!ot)for(var ht=K.parentNode;!ot&&ht&&!(0,wt.ZQ)(ht);)ot=(0,Ot.getComponentModel)(ht),ht=ht.parentNode;if(ot){if(W.isEditing()&&(!ot.get("textable")&&ot.isChildOf("text")||W.getEditing()!==ot))return;this.select(ot,D)}},select:function(D,W){if(D){var K=this.em;K.setSelected(D,{event:W,useValid:!0}),this.initResize(K.getSelected())}},updateBadge:function(D,W,K){K===void 0&&(K={});var ot=this.canvas,ht=(0,Ot.getComponentModel)(D),G=this.getBadge(K),xt=G.style;if(ht&&ht.get("badgable")){if(!K.posOnly){var I=this.canvas.getConfig(),Nt=ht.getIcon(),Pt=I.pStylePrefix||"",ne="".concat(Pt,"badge"),_t=I.customBadgeLabel,Ut="".concat(Nt?'<div class="'.concat(ne,'__icon">').concat(Nt,"</div>"):"",`
        <div class="`).concat(ne,'__name">').concat(ht.getName(),"</div>");G.innerHTML=_t?_t(ht):Ut}var Ht="px";xt.display="block";var ee=ot.getTargetToElementFixed(D,G,{pos:W}).top,Zt=K.leftOff<0?-K.leftOff:0;xt.top=ee+Ht,xt.left=Zt+Ht}else xt.display="none"},showHighlighter:function(D){this.canvas.getHighlighter(D).style.opacity=""},initResize:function(D){var W,K=this,ot=this.em,ht=this.canvas,G=ot.Editor,xt=!(0,pt.isElement)(D)&&(0,wt.GW)(D)?D:ot.getSelected(),I=(W=xt?.get)===null||W===void 0?void 0:W.call(xt,"resizable"),Nt=R.F.Resize,Pt=ht.hasCustomSpot(Nt);ht.removeSpots({type:Nt});var ne={component:xt,hasCustomResize:Pt,resizable:I};xt&&ot.trigger(N.I.resizeInit,ne);var _t=ne.resizable;if(xt&&_t){ht.addSpot({type:Nt,component:xt});var Ut=(0,pt.isElement)(D)?D:xt.getEl(),Ht=(0,Ot.isObject)(_t)?_t:{};if(Pt||!Ut||this.activeResizer)return;this.resizer=G.runCommand("resize",te(te({},Ht),{el:Ut,component:xt,force:!0,afterStart:function(){ft=!1,K.activeResizer=!0},afterEnd:function(){ft=!0,K.activeResizer=!1}}))}else{if(Pt)return;G.stopCommand("resize"),this.resizer=null}},updateToolbar:function(D){var W=this.canvas,K=this.config.em,ot=D===K?K.getSelected():D,ht=W.getToolbarEl(),G=ht.style,xt=ot.get("toolbar"),I=K.config.showToolbar,Nt=!W.hasCustomSpot(R.F.Select);if(ot&&I&&xt&&xt.length&&Nt){if(G.display="",!this.toolbar){ht.innerHTML="",this.toolbar=new x(xt);var Pt=new vt({collection:this.toolbar,em:K});ht.appendChild(Pt.render().el)}this.toolbar.reset(xt),G.top="-100px",G.left="0"}else G.display="none"},updateToolbarPos:function(D){var W="px",K=this.canvas.getToolbarEl().style;K.top="".concat(D.top).concat(W),K.left="".concat(D.left).concat(W),K.opacity=""},getCanvasPosition:function(){return this.canvas.getCanvasView().getPosition()},getBadge:function(D){return D===void 0&&(D={}),this.canvas.getBadgeEl(D.view)},onCanvasScroll:function(D){this.onFrameScroll(D),this.onContainerChange()},onFrameScroll:function(){this.updateTools(),this.canvas.refreshSpots()},onFrameResize:function(){this.canvas.refresh({all:!0})},updateTools:function(){this.updateLocalPos(),this.updateGlobalPos()},isCompSelected:function(D){return D&&D.get("status")==="selected"},updateToolsLocal:function(D){var W=this.em.getConfig(),K=D||this.getElHovered(),ot=K.el,ht=K.pos,G=K.view,xt=K.component;if(ot){var I=xt.get("hoverable"),Nt=this.lastHovered!==ot,Pt=Nt?{}:{posOnly:1},ne=this.canvas.hasCustomSpot(R.F.Hover);Nt&&I&&(this.lastHovered=ot,ne?this.hideHighlighter(G):this.showHighlighter(G),this.showElementOffset(ot,ht,{view:G})),this.isCompSelected(xt)&&(this.hideHighlighter(G),!W.showOffsetsSelected&&this.hideElementOffset(G));var _t="px",Ut=this.toggleToolsEl(1,G),Ht=Ut.style,ee=this.canvas.canvasRectOffset(ot,ht),Zt=ee.top,le=ee.left;!ne&&this.updateBadge(ot,ht,te(te({},Pt),{view:G,topOff:Zt,leftOff:le})),Ht.top=Zt+_t,Ht.left=le+_t,Ht.width=ht.width+_t,Ht.height=ht.height+_t,this._trgToolUp("local",{component:xt,el:Ut,top:Zt,left:le,width:ht.width,height:ht.height})}else this.lastHovered=0},_upToolbar:(0,pt.debounce)(function(){this.updateToolsGlobal({force:1})},0),_trgToolUp:function(D,W){W===void 0&&(W={}),this.em.trigger("canvas:tools:update",te({type:D},W))},updateToolsGlobal:function(D){D===void 0&&(D={});var W=this.getElSelected(),K=W.el,ot=W.pos,ht=W.component;if(!K)return this.toggleToolsEl(),void(this.lastSelected=0);var G=this.canvas;(this.lastSelected!==K||D.force)&&(this.lastSelected=K,this.updateToolbar(ht));var xt="px",I=this.toggleToolsEl(1),Nt=I.style,Pt=G.getTargetToElementFixed(K,G.getToolbarEl(),{pos:ot}),ne=Pt.canvasOffsetTop,_t=Pt.canvasOffsetLeft;Nt.top=ne+xt,Nt.left=_t+xt,Nt.width=ot.width+xt,Nt.height=ot.height+xt,this.updateToolbarPos({top:Pt.top,left:Pt.left}),this._trgToolUp("global",{component:ht,el:I,top:ne,left:_t,width:ot.width,height:ot.height})},updateAttached:(0,pt.debounce)(function(){this.updateGlobalPos()},0),onContainerChange:(0,pt.debounce)(function(){this.em.refreshCanvas()},150),getElementPos:function(D){return this.canvas.getCanvasView().getElementPos(D,{noScroll:!0})},hideBadge:function(){this.getBadge().style.display="none"},cleanPrevious:function(D){D&&D.set({status:"",state:""})},getContentWindow:function(){return this.canvas.getWindow()},run:function(D){(0,Ot.hasWin)()&&(this.editor=D&&D.get("Editor"),this.enable())},stop:function(D,W,K){if(K===void 0&&(K={}),(0,Ot.hasWin)()){var ot=this.em,ht=this.editor;this.onHovered(),this.stopSelectComponent(),!K.preserveSelected&&ot.setSelected(),this.toggleToolsEl(),this.updateAttached.cancel(),ht&&ht.stopCommand("resize")}}}},1406:(C,q,it)=>{"use strict";it.r(q),it.d(q,{default:()=>F});var $=it(7774),pt=it(1447),R=it(8433);const F={startSelectPosition:function(H,E,_){_===void 0&&(_={}),this.isPointed=!1;var O=this.em.Utils,x=H[0].ownerDocument.body;O&&(this.sorter=new O.ComponentSorter({em:this.em,treeClass:pt.A,containerContext:{container:x,containerSel:"*",itemSel:"*",pfx:this.ppfx,document:E,placeholderElement:this.canvas.getPlacerEl()},positionOptions:{windowMargin:1,canvasRelative:!0},dragBehavior:{dragDirection:R.A.BothDirections,nested:!0}})),_.onStart&&(this.sorter.eventHandlers.legacyOnStartSort=_.onStart),H&&H.length>0&&this.sorter.startSort(H.map(function(N){return{element:N}}))},getOffsetDim:function(){var H=this.offset(this.canvas.getFrameEl()),E=this.offset(this.canvas.getElement());return{top:H.top-E.top,left:H.left-E.left}},stopSelectPosition:function(){this.posTargetCollection=null,this.posIndex=this.posMethod=="after"&&this.cDim.length!==0?this.posIndex+1:this.posIndex,this.sorter&&this.sorter.cancelDrag(),this.cDim&&(this.posIsLastEl=this.cDim.length!==0&&this.posMethod=="after"&&this.posIndex==this.cDim.length,this.posTargetEl=this.cDim.length===0?(0,$.default)(this.outsideElem):!this.posIsLastEl&&this.cDim[this.posIndex]?(0,$.default)(this.cDim[this.posIndex][5]).parent():(0,$.default)(this.outsideElem),this.posTargetModel=this.posTargetEl.data("model"),this.posTargetCollection=this.posTargetEl.data("model-comp"))},enable:function(){this.startSelectPosition()},nearFloat:function(H,E,_){var O=H||0,x=E||"before",N=_.length,V=N!==0&&x=="after"&&O==N;return N!==0&&(!V&&!_[O][4]||_[O-1]&&!_[O-1][4]||V&&!_[O-1][4])?1:0},run:function(){this.enable()},stop:function(){this.stopSelectPosition(),this.$wrapper.css("cursor",""),this.$wrapper.unbind()}}},9395:(C,q,it)=>{"use strict";it.r(q),it.d(q,{default:()=>H});var $=it(5706),pt=it(179),R=it(7774),F=function(){return F=Object.assign||function(E){for(var _,O=1,x=arguments.length;O<x;O++)for(var N in _=arguments[O])Object.prototype.hasOwnProperty.call(_,N)&&(E[N]=_[N]);return E},F.apply(this,arguments)};const H={getOffsetMethod:function(E){return"get"+(E||"")+"OffsetViewerEl"},run:function(E,_,O){var x=this.canvas,N=O||{},V=N.state||"",Y=E.getConfig(),st=this.em.getZoomDecimal(),ct=N.el;if(Y.showOffsets&&ct instanceof HTMLElement&&(Y.showOffsetsSelected||V!="Fixed")){if(!x.hasCustomSpot(pt.F.Spacing)){var Tt=F({},N.elPos||x.getElementPos(ct));(0,$.isUndefined)(N.top)||(Tt.top=N.top),(0,$.isUndefined)(N.left)||(Tt.left=N.left);var Et=window.getComputedStyle(ct),vt=this.ppfx,ft=V+"State",wt=x[this.getOffsetMethod(V)](O.view);wt.style.opacity="";var Ot=this["marginT"+V],te=this["marginB"+V],Ft=this["marginL"+V],D=this["marginR"+V],W=this["padT"+V],K=this["padB"+V],ot=this["padL"+V],ht=this["padR"+V];if(wt.childNodes.length&&(this[ft]="1",Ot=wt.querySelector("[data-offset-m-t]"),te=wt.querySelector("[data-offset-m-b]"),Ft=wt.querySelector("[data-offset-m-l]"),D=wt.querySelector("[data-offset-m-r]"),W=wt.querySelector("[data-offset-p-t]"),K=wt.querySelector("[data-offset-p-b]"),ot=wt.querySelector("[data-offset-p-l]"),ht=wt.querySelector("[data-offset-p-r]")),!this[ft]){var G=V.toLowerCase(),xt=G+"margin-v",I=G+"padding-v",Nt=(0,R.default)('<div class="'.concat(vt,'marginName">')).get(0),Pt=(0,R.default)('<div class="'.concat(vt,'paddingName">')).get(0),ne=vt+I+"-el",_t="".concat(vt+xt+"-el"," ").concat(vt+xt),Ut="".concat(ne," ").concat(vt+I);Ot=(0,R.default)('<div class="'.concat(_t,'-top"></div>')).get(0),te=(0,R.default)('<div class="'.concat(_t,'-bottom"></div>')).get(0),Ft=(0,R.default)('<div class="'.concat(_t,'-left"></div>')).get(0),D=(0,R.default)('<div class="'.concat(_t,'-right"></div>')).get(0),W=(0,R.default)('<div class="'.concat(Ut,'-top"></div>')).get(0),K=(0,R.default)('<div class="'.concat(Ut,'-bottom"></div>')).get(0),ot=(0,R.default)('<div class="'.concat(Ut,'-left"></div>')).get(0),ht=(0,R.default)('<div class="'.concat(Ut,'-right"></div>')).get(0),this["marginT"+V]=Ot,this["marginB"+V]=te,this["marginL"+V]=Ft,this["marginR"+V]=D,this["padT"+V]=W,this["padB"+V]=K,this["padL"+V]=ot,this["padR"+V]=ht,Nt.appendChild(Ot),Nt.appendChild(te),Nt.appendChild(Ft),Nt.appendChild(D),Pt.appendChild(W),Pt.appendChild(K),Pt.appendChild(ot),Pt.appendChild(ht),wt.appendChild(Nt),wt.appendChild(Pt),this[ft]="1"}var Ht="px",ee=parseFloat(Et.marginLeft.replace(Ht,""))*st,Zt=parseFloat(Et.marginRight.replace(Ht,""))*st,le=parseFloat(Et.marginTop.replace(Ht,""))*st,ce=parseFloat(Et.marginBottom.replace(Ht,""))*st,jt=Ot.style,Xt=te.style,pe=Ft.style,me=D.style,kt=W.style,Yt=K.style,de=ot.style,St=ht.style,ae=parseFloat(Tt.left),je=parseFloat(Et.width)*st+Ht;jt.height=le+Ht,jt.width=je,jt.top=Tt.top-le+Ht,jt.left=ae+Ht,Xt.height=ce+Ht,Xt.width=je,Xt.top=Tt.top+Tt.height+Ht,Xt.left=ae+Ht;var He=Tt.height+le+ce+Ht,qe=Tt.top-le+Ht;pe.height=He,pe.width=ee+Ht,pe.top=qe,pe.left=ae-ee+Ht,me.height=He,me.width=Zt+Ht,me.top=qe,me.left=ae+Tt.width+Ht;var gn=parseFloat(Et.paddingTop)*st;kt.height=gn+Ht;var cn=parseFloat(Et.paddingBottom)*st;Yt.height=cn+Ht;var bt=Tt.height-cn-gn+Ht,S=Tt.top+gn+Ht;de.height=bt,de.width=parseFloat(Et.paddingLeft)*st+Ht,de.top=S;var A=parseFloat(Et.paddingRight)*st;St.height=bt,St.width=A+Ht,St.top=S}}else E.stopCommand("".concat(this.id),O)},stop:function(E,_,O){O===void 0&&(O={});var x=(O||{}).state||"",N=this.getOffsetMethod(x),V=O.view;this.canvas[N](V).style.opacity=0}}},7285:(C,q,it)=>{"use strict";it.r(q),it.d(q,{default:()=>R});var $=it(5706),pt=it(1166);const R={init:function(){(0,$.bindAll)(this,"_onFramesChange")},run:function(F){this.toggleVis(F,!0)},stop:function(F){this.toggleVis(F,!1)},toggleVis:function(F,H){if(H===void 0&&(H=!0),!F.Commands.isActive("preview")){var E=F.Canvas,_=H?"on":"off";E.getModel()[_]("change:frames",this._onFramesChange),this.handleFrames(E.getFrames(),H)}},handleFrames:function(F,H){var E=this;F.forEach(function(_){var O;!((O=_.view)===null||O===void 0)&&O.loaded&&E._upFrame(_,H),_.__ol||(_.on("loaded",function(){return E._upFrame(_)}),_.__ol=!0)})},_onFramesChange:function(F,H){this.handleFrames(H)},_upFrame:function(F,H){var E,_=this,O=_.ppfx,x=_.em,N=_.id,V=((0,pt.isDef)(H)?H:x.Commands.isActive(N))?"add":"remove",Y="".concat(O,"dashed");(E=F.view)===null||E===void 0||E.getBody().classList[V](Y)}}},9156:(C,q,it)=>{"use strict";it.d(q,{Kx:()=>O,Ss:()=>N,e2:()=>_,lK:()=>V,pM:()=>x,x2:()=>pt});var $,pt,R=it(4193),F=it.n(R),H=($=function(Y,st){return $=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ct,Tt){ct.__proto__=Tt}||function(ct,Tt){for(var Et in Tt)Object.prototype.hasOwnProperty.call(Tt,Et)&&(ct[Et]=Tt[Et])},$(Y,st)},function(Y,st){if(typeof st!="function"&&st!==null)throw new TypeError("Class extends value "+String(st)+" is not a constructor or null");function ct(){this.constructor=Y}$(Y,st),Y.prototype=st===null?Object.create(st):(ct.prototype=st.prototype,new ct)}),E=function(){return E=Object.assign||function(Y){for(var st,ct=1,Tt=arguments.length;ct<Tt;ct++)for(var Et in st=arguments[ct])Object.prototype.hasOwnProperty.call(st,Et)&&(Y[Et]=st[Et]);return Y},E.apply(this,arguments)},_="add remove reset change",O=function(Y){function st(){return Y!==null&&Y.apply(this,arguments)||this}return H(st,Y),st}(F().Model),x=function(Y){function st(){return Y!==null&&Y.apply(this,arguments)||this}return H(st,Y),st}(F().Collection),N=function(Y){function st(){return Y!==null&&Y.apply(this,arguments)||this}return H(st,Y),st}(F().View);(function(Y){Y.Screen="screen",Y.World="world"})(pt||(pt={}));var V={x:0,y:0};E(E({},V),{width:0,height:0})},2225:(C,q,it)=>{"use strict";var $,pt;it.d(q,{I:()=>pt,t:()=>$}),function(R){R.remove="component:remove",R.add="component:add",R.move="component:move"}($||($={})),function(R){R.add="component:add",R.remove="component:remove",R.removeBefore="component:remove:before",R.removed="component:removed",R.create="component:create",R.update="component:update",R.updateInside="component:update-inside",R.styleUpdate="component:styleUpdate",R.styleUpdateProperty="component:styleUpdate:",R.select="component:select",R.selectBefore="component:select:before",R.mount="component:mount",R.scriptMount="component:script:mount",R.scriptMountBefore="component:script:mount:before",R.scriptUnmount="component:script:unmount",R.render="component:render",R.input="component:input",R.resize="component:resize",R.resizeStart="component:resize:start",R.resizeMove="component:resize:move",R.resizeEnd="component:resize:end",R.resizeUpdate="component:resize:update",R.resizeInit="component:resize:init",R.symbolMainAdd="symbol:main:add",R.symbolMainUpdate="symbol:main:update",R.symbolMainUpdateDeep="symbol:main:update-deep",R.symbolMainRemove="symbol:main:remove",R.symbolMain="symbol:main",R.symbolInstanceAdd="symbol:instance:add",R.symbolInstanceRemove="symbol:instance:remove",R.symbolInstance="symbol:instance",R.symbol="symbol"}(pt||(pt={}))},8242:(C,q,it)=>{"use strict";it.d(q,{A:()=>E});var $,pt=it(5706),R=it(9156),F=($=function(_,O){return $=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,N){x.__proto__=N}||function(x,N){for(var V in N)Object.prototype.hasOwnProperty.call(N,V)&&(x[V]=N[V])},$(_,O)},function(_,O){if(typeof O!="function"&&O!==null)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function x(){this.constructor=_}$(_,O),_.prototype=O===null?Object.create(O):(x.prototype=O.prototype,new x)}),H=function(_){function O(x,N,V){x===void 0&&(x={}),V===void 0&&(V=!1);var Y=_.call(this,x)||this;return Y.itemsView="",Y.itemType="type",Y.reuseView=!1,Y.config=N||x.config||{},V&&Y.listenTo(Y.collection,"add",Y.addTo),Y.items=[],Y}return F(O,_),O.prototype.addTo=function(x){this.add(x)},O.prototype.itemViewNotFound=function(x){var N=this.config,V=this.ns,Y=N.em,st="".concat(V?"[".concat(V,"]: "):"","'").concat(x,"' type not found");Y&&Y.logWarning(st)},O.prototype.add=function(x,N){var V,Y=this,st=Y.config,ct=Y.reuseView,Tt=Y.items,Et=this.itemsView||{},vt=N||null,ft=this.itemView,wt=x.get(this.itemType);Et[wt]?ft=Et[wt]:!wt||Et[wt]||(0,pt.includes)(["button","checkbox","color","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"],wt)||this.itemViewNotFound(wt),V=x.view&&ct?x.view:new ft({model:x,config:st},st),Tt&&Tt.push(V);var Ot=V.render().el;vt?vt.appendChild(Ot):this.$el.append(Ot)},O.prototype.render=function(){var x=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each(function(N){this.add(N,x)},this),this.$el.append(x),this.onRender(),this},O.prototype.onRender=function(){},O.prototype.onRemoveBefore=function(x,N){},O.prototype.onRemove=function(x,N){},O.prototype.remove=function(x){x===void 0&&(x={});var N=this.items;return this.onRemoveBefore(N,x),this.clearItems(),_.prototype.remove.call(this),this.onRemove(N,x),this},O.prototype.clearItems=function(){this.items},O}(R.Ss);const E=H;H.prototype.itemView=""},9966:(C,q,it)=>{"use strict";it.d(q,{A:()=>H});var $=it(5706),pt=it(6294),R=function(){return R=Object.assign||function(E){for(var _,O=1,x=arguments.length;O<x;O++)for(var N in _=arguments[O])Object.prototype.hasOwnProperty.call(_,N)&&(E[N]=_[N]);return E},R.apply(this,arguments)},F=["x","y"];const H=function(){function E(_){return _===void 0&&(_={}),this.opts={snapGuides:{x:5,y:5},snapOffset:5,scale:1},(0,$.bindAll)(this,"drag","stop","keyHandle","handleScroll"),this.setOptions(_),this.delta={x:0,y:0},this.lastScroll={x:0,y:0},this.lastScrollDiff={x:0,y:0},this.startPointer={x:0,y:0},this.startPosition={x:0,y:0},this.globScrollDiff={x:0,y:0},this.currentPointer={x:0,y:0},this.position={x:0,y:0},this.guidesStatic=[],this.guidesTarget=[],this.docs=[],this}return E.prototype.setOptions=function(_){_===void 0&&(_={}),this.opts=R(R({},this.opts),_)},E.prototype.toggleDrag=function(_){var O=this.getDocumentEl(),x=this.getContainerEl(),N=this.getWindowEl(),V=_?"on":"off",Y={on:pt.on,off:pt.AU};Y[V](x,"mousemove dragover",this.drag),Y[V](O,"mouseup dragend touchend",this.stop),Y[V](O,"keydown",this.keyHandle),Y[V](N,"scroll",this.handleScroll)},E.prototype.handleScroll=function(){var _=this.lastScroll,O=this.delta,x=this.getScrollInfo(),N={x:x.x-_.x,y:x.y-_.y};this.move(O.x+N.x,O.y+N.y),this.lastScrollDiff=N},E.prototype.start=function(_){var O=this.opts,x=O.onStart;this.toggleDrag(!0),this.startPointer=this.getPointerPos(_),this.guidesStatic=(0,$.result)(O,"guidesStatic")||[],this.guidesTarget=(0,$.result)(O,"guidesTarget")||[],(0,$.isFunction)(x)&&x(_,this),this.startPosition=this.getStartPosition(),this.lastScrollDiff={x:0,y:0},this.globScrollDiff={x:0,y:0},this.drag(_)},E.prototype.drag=function(_){var O=this,x=this,N=x.opts,V=x.lastScrollDiff,Y=x.globScrollDiff,st=N.onDrag,ct=this.startPointer,Tt=this.getPointerPos(_),Et={x:Y.x+V.x,y:Y.y+V.y};this.globScrollDiff=Et;var vt={x:Tt.x-ct.x+Et.x,y:Tt.y-ct.y+Et.y};this.lastScrollDiff={x:0,y:0};var ft=function(W){F.forEach(function(K){return W[K]=W[K]*(0,$.result)(N,"scale")}),O.delta=W,O.move(W.x,W.y),(0,$.isFunction)(st)&&st(_,O)},wt=R({},vt);if(this.currentPointer=Tt,this.lastScroll=this.getScrollInfo(),ft(vt),this.guidesTarget.length){var Ot=this.snapGuides(wt),te=Ot.newDelta,Ft=Ot.trgX,D=Ot.trgY;(Ft||D)&&ft(te)}_.which===0&&this.stop(_)},E.prototype.snapGuides=function(_){var O=this,x=R({},_),N=this.trgX,V=this.trgY;return this.guidesTarget.forEach(function(Y){Y.x&&O.trgX||Y.y&&O.trgY||(Y.active=!1,O.guidesStatic.forEach(function(st){if(!(Y.y&&st.x||Y.x&&st.y)){var ct=Y.y&&st.y,Tt=ct?"y":"x",Et=Y[Tt],vt=st[Tt],ft=_[Tt],wt=ct?V:N;if(O.isPointIn(Et,vt,{axis:Tt})&&(0,$.isUndefined)(wt)){var Ot=ft-(Et-vt);O.setGuideLock(Y,Ot)}}}))}),N=this.trgX,V=this.trgY,F.forEach(function(Y){var st=Y.toUpperCase(),ct=O["trg".concat(st)];ct&&!O.isPointIn(_[Y],ct.lock,{axis:Y})&&(O.setGuideLock(ct,null),ct=null),ct&&!(0,$.isUndefined)(ct.lock)&&(x[Y]=ct.lock)}),{newDelta:x,trgX:this.trgX,trgY:this.trgY}},E.prototype.isPointIn=function(_,O,x){var N,V=x===void 0?{}:x,Y=V.offset,st=V.axis,ct=this.opts,Tt=ct.snapGuides,Et=Tt===void 0?{}:Tt,vt=ct.snapOffset,ft=vt===void 0?0:vt,wt=st==="x"?Et.x:st==="y"?Et.y:void 0,Ot=wt===0?0:(N=Y??wt)!==null&&N!==void 0?N:ft;return Ot!==0&&(_>=O&&_<=O+Ot||_<=O&&_>=O-Ot)},E.prototype.setGuideLock=function(_,O){var x=(0,$.isUndefined)(_.x)?"Y":"X",N="trg".concat(x);return O!==null?(_.active=!0,_.lock=O,this[N]=_):(delete _.active,delete _.lock,delete this[N]),_},E.prototype.stop=function(_,O){O===void 0&&(O={});var x=this.delta,N=!!O.cancel,V=N?0:x.x,Y=N?0:x.y;this.toggleDrag(),this.move(V,Y,!0);var st=this.opts.onEnd;(0,$.isFunction)(st)&&st(_,this,{cancelled:N})},E.prototype.keyHandle=function(_){(0,pt.v$)(_)&&this.stop(_,{cancel:!0})},E.prototype.move=function(_,O,x){var N=this.el,V=this.opts,Y=this.startPosition;if(Y){var st=V.setPosition,ct=Y.x+_,Tt=Y.y+O;this.position={x:ct,y:Tt,end:x},(0,$.isFunction)(st)&&st(this.position),N&&(N.style.left="".concat(ct,"px"),N.style.top="".concat(Tt,"px"))}},E.prototype.getContainerEl=function(){var _=this.opts.container;return _?[_]:this.getDocumentEl()},E.prototype.getWindowEl=function(){return this.getContainerEl().map(function(_){var O=_.ownerDocument||_;return O.defaultView||O.parentWindow})},E.prototype.getDocumentEl=function(_){var O=this.opts.doc;if(_=_||this.el,!this.docs.length){var x=[document];_&&x.push(_.ownerDocument),O&&x.push(O),this.docs=x}return this.docs},E.prototype.getPointerPos=function(_){var O=this.opts.getPointerPosition,x=(0,pt.G2)(_);return O?O(_):{x:x.clientX,y:x.clientY}},E.prototype.getStartPosition=function(){var _=this.el,O=this.opts.getPosition,x={x:0,y:0};return(0,$.isFunction)(O)?x=O():_&&(x={x:parseFloat(_.style.left),y:parseFloat(_.style.top)}),x},E.prototype.getScrollInfo=function(){var _=this.opts.doc,O=_&&_.body;return{y:O?O.scrollTop:0,x:O?O.scrollLeft:0}},E.prototype.detectAxisLock=function(_,O){var x=_,N=O,V=Math.abs(x),Y=Math.abs(N);return N>=V||N<=-V?"x":x>Y||x<-Y?"y":void 0},E}()},7774:(C,q,it)=>{"use strict";it.r(q),it.d(q,{default:()=>vn});var $=typeof document<"u"?document:null,pt=typeof window<"u"?window:null,R=Array.prototype,F=R.filter,H=R.indexOf,E=R.map,_=R.push,O=R.reverse,x=R.slice,N=R.splice,V=/^#[\w-]*$/,Y=/^\.[\w-]*$/,st=/<.+>/,ct=/^\w+$/;function Tt(U,rt){return rt===void 0&&(rt=$),Y.test(U)?rt.getElementsByClassName(U.slice(1)):ct.test(U)?rt.getElementsByTagName(U):rt.querySelectorAll(U)}function Et(U,rt){if(rt===void 0&&(rt=$),U){if(U.__cash)return U;var dt=U;if(ot(U)){if(rt.__cash&&(rt=rt[0]),!(dt=V.test(U)?rt.getElementById(U.slice(1)):st.test(U)?Ue(U):Tt(U,rt)))return}else if(K(U))return this.ready(U);(dt.nodeType||dt===pt)&&(dt=[dt]),this.length=dt.length;for(var Mt=0,Kt=this.length;Mt<Kt;Mt++)this[Mt]=dt[Mt]}}function vt(U,rt){return new Et(U,rt)}var ft=vt.fn=vt.prototype=Et.prototype={constructor:vt,__cash:!0,length:0,splice:N};ft.get=function(U){return U===void 0?x.call(this):this[U<0?U+this.length:U]},ft.eq=function(U){return vt(this.get(U))},ft.first=function(){return this.eq(0)},ft.last=function(){return this.eq(-1)},ft.map=function(U){return vt(E.call(this,function(rt,dt){return U.call(rt,dt,rt)}))},ft.slice=function(){return vt(x.apply(this,arguments))};var wt=/(?:^\w|[A-Z]|\b\w)/g,Ot=/[\s-_]+/g;function te(U){return U.replace(wt,function(rt,dt){return rt[dt?"toUpperCase":"toLowerCase"]()}).replace(Ot,"")}function Ft(U,rt){for(var dt=0,Mt=U.length;dt<Mt&&rt.call(U[dt],U[dt],dt,U)!==!1;dt++);}vt.camelCase=te,vt.each=Ft,ft.each=function(U){return Ft(this,function(rt,dt){return U.call(rt,dt,rt)}),this},ft.removeProp=function(U){return this.each(function(rt,dt){delete dt[U]})},vt.extend=ft.extend=function(U){U===void 0&&(U=this);for(var rt=arguments,dt=rt.length,Mt=dt<2?0:1;Mt<dt;Mt++)for(var Kt in rt[Mt])U[Kt]=rt[Mt][Kt];return U};var D=1;function W(U,rt){var dt=U&&(U.matches||U.webkitMatchesSelector||U.mozMatchesSelector||U.msMatchesSelector||U.oMatchesSelector);return!!dt&&dt.call(U,rt)}function K(U){return typeof U=="function"}function ot(U){return typeof U=="string"}function ht(U){return!isNaN(parseFloat(U))&&isFinite(U)}vt.guid=D,vt.matches=W,vt.isFunction=K,vt.isString=ot,vt.isNumeric=ht;var G=Array.isArray;function xt(U){return ot(U)?function(rt,dt){return W(dt,U)}:U.__cash?function(rt,dt){return U.is(dt)}:function(rt,dt,Mt){return dt===Mt}}vt.isArray=G,ft.prop=function(U,rt){if(U){if(ot(U))return arguments.length<2?this[0]&&this[0][U]:this.each(function(Mt,Kt){Kt[U]=rt});for(var dt in U)this.prop(dt,U[dt]);return this}},ft.filter=function(U){if(!U)return vt();var rt=K(U)?U:xt(U);return vt(F.call(this,function(dt,Mt){return rt.call(dt,Mt,dt,U)}))};var I=/\S+/g;function Nt(U){return ot(U)&&U.match(I)||[]}function Pt(U){return U.filter(function(rt,dt,Mt){return Mt.indexOf(rt)===dt})}function ne(U,rt,dt){if(U.nodeType===1){var Mt=pt.getComputedStyle(U,null);return rt?dt?Mt.getPropertyValue(rt):Mt[rt]:Mt}}function _t(U,rt){return parseInt(ne(U,rt),10)||0}ft.hasClass=function(U){var rt=Nt(U),dt=!1;return rt.length&&this.each(function(Mt,Kt){return!(dt=Kt.classList.contains(rt[0]))}),dt},ft.removeAttr=function(U){var rt=Nt(U);return rt.length?this.each(function(dt,Mt){Ft(rt,function(Kt){Mt.removeAttribute(Kt)})}):this},ft.attr=function(U,rt){if(U){if(ot(U)){if(arguments.length<2){if(!this[0])return;var dt=this[0].getAttribute(U);return dt===null?void 0:dt}return rt===null?this.removeAttr(U):this.each(function(Kt,Le){Le.setAttribute(U,rt)})}for(var Mt in U)this.attr(Mt,U[Mt]);return this}},ft.toggleClass=function(U,rt){var dt=Nt(U),Mt=rt!==void 0;return dt.length?this.each(function(Kt,Le){Ft(dt,function(Me){Mt?rt?Le.classList.add(Me):Le.classList.remove(Me):Le.classList.toggle(Me)})}):this},ft.addClass=function(U){return this.toggleClass(U,!0)},ft.removeClass=function(U){return arguments.length?this.toggleClass(U,!1):this.attr("class","")},vt.unique=Pt,ft.add=function(U,rt){return vt(Pt(this.get().concat(vt(U,rt).get())))};var Ut=/^--/;function Ht(U){return Ut.test(U)}var ee={},Zt=$&&$.createElement("div"),le=Zt?Zt.style:{},ce=["webkit","moz","ms","o"];function jt(U,rt){if(rt===void 0&&(rt=Ht(U)),rt)return U;if(!ee[U]){var dt=te(U),Mt=""+dt.charAt(0).toUpperCase()+dt.slice(1);Ft((dt+" "+ce.join(Mt+" ")+Mt).split(" "),function(Kt){if(Kt in le)return ee[U]=Kt,!1})}return ee[U]}vt.prefixedProp=jt;var Xt={animationIterationCount:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0};function pe(U,rt,dt){return dt===void 0&&(dt=Ht(U)),dt||Xt[U]||!ht(rt)?rt:rt+"px"}ft.css=function(U,rt){if(ot(U)){var dt=Ht(U);return U=jt(U,dt),arguments.length<2?this[0]&&ne(this[0],U,dt):U?(rt=pe(U,rt,dt),this.each(function(Kt,Le){Le.nodeType===1&&(dt?Le.style.setProperty(U,rt):Le.style[U]=rt)})):this}for(var Mt in U)this.css(Mt,U[Mt]);return this};var me="__cashData",kt=/^data-(.*)/;function Yt(U){return U[me]=U[me]||{}}function de(U,rt){var dt=Yt(U);if(rt){if(!(rt in dt)){var Mt=U.dataset?U.dataset[rt]||U.dataset[te(rt)]:vt(U).attr("data-"+rt);if(Mt!==void 0){try{Mt=JSON.parse(Mt)}catch{}dt[rt]=Mt}}return dt[rt]}return dt}function St(U,rt){return _t(U,"border"+(rt?"Left":"Top")+"Width")+_t(U,"padding"+(rt?"Left":"Top"))+_t(U,"padding"+(rt?"Right":"Bottom"))+_t(U,"border"+(rt?"Right":"Bottom")+"Width")}function ae(U,rt){for(var dt=0,Mt=rt.length;dt<Mt;dt++)if(U.indexOf(rt[dt])<0)return!1;return!0}function je(U,rt,dt){Ft(U[dt],function(Mt){Mt[0];var Kt=Mt[1];rt.removeEventListener(dt,Kt)}),delete U[dt]}vt.hasData=function(U){return me in U},ft.data=function(U,rt){var dt=this;if(!U)return this[0]?(Ft(this[0].attributes,function(Kt){var Le=Kt.name.match(kt);Le&&dt.data(Le[1])}),de(this[0])):void 0;if(ot(U))return rt===void 0?this[0]&&de(this[0],U):this.each(function(Kt,Le){return function(Me,Pn,Fn){Yt(Me)[Pn]=Fn}(Le,U,rt)});for(var Mt in U)this.data(Mt,U[Mt]);return this},ft.removeData=function(U){return this.each(function(rt,dt){return function(Mt,Kt){Kt===void 0?delete Mt[me]:delete Yt(Mt)[Kt]}(dt,U)})},Ft(["Width","Height"],function(U){ft["inner"+U]=function(){if(this[0])return this[0]===pt?pt["inner"+U]:this[0]["client"+U]}}),Ft(["width","height"],function(U,rt){ft[U]=function(dt){return this[0]?arguments.length?(dt=parseInt(dt,10),this.each(function(Mt,Kt){if(Kt.nodeType===1){var Le=ne(Kt,"boxSizing");Kt.style[U]=pe(U,dt+(Le==="border-box"?St(Kt,!rt):0))}})):this[0]===pt?this[0][te("outer-"+U)]:this[0].getBoundingClientRect()[U]-St(this[0],!rt):dt===void 0?void 0:this}}),Ft(["Width","Height"],function(U,rt){ft["outer"+U]=function(dt){if(this[0])return this[0]===pt?pt["outer"+U]:this[0]["offset"+U]+(dt?_t(this[0],"margin"+(rt?"Top":"Left"))+_t(this[0],"margin"+(rt?"Bottom":"Right")):0)}});var He="__cashEvents",qe=".";function gn(U){return U[He]=U[He]||{}}function cn(U){var rt=U.split(qe);return[rt[0],rt.slice(1).sort()]}function bt(U,rt,dt,Mt){var Kt=gn(U);if(rt){var Le=Kt[rt];if(!Le)return;Mt&&(Mt.guid=Mt.guid||D++),Kt[rt]=Le.filter(function(Me){var Pn=Me[0],Fn=Me[1];if(Mt&&Fn.guid!==Mt.guid||!ae(Pn,dt))return!0;U.removeEventListener(rt,Fn)})}else if(dt&&dt.length)for(rt in Kt)bt(U,rt,dt,Mt);else for(rt in Kt)je(Kt,U,rt)}ft.off=function(U,rt){var dt=this;return U===void 0?this.each(function(Mt,Kt){return bt(Kt)}):Ft(Nt(U),function(Mt){var Kt=cn(Mt),Le=Kt[0],Me=Kt[1];dt.each(function(Pn,Fn){return bt(Fn,Le,Me,rt)})}),this},ft.on=function(U,rt,dt,Mt){var Kt=this;if(!ot(U)){for(var Le in U)this.on(Le,rt,U[Le]);return this}return K(rt)&&(dt=rt,rt=!1),Ft(Nt(U),function(Me){var Pn=cn(Me),Fn=Pn[0],xn=Pn[1];Kt.each(function(go,ur){var dn=function Ko(En){if(!En.namespace||ae(xn,En.namespace.split(qe))){var kn=ur;if(rt){for(var Jn=En.target;!W(Jn,rt);)if(Jn===ur||!(Jn=Jn.parentNode))return;kn=Jn}En.namespace=En.namespace||"";var Oo=dt.call(kn,En,En.data);Mt&&bt(ur,Fn,xn,Ko),Oo===!1&&(En.preventDefault(),En.stopPropagation())}};dn.guid=dt.guid=dt.guid||D++,function(Ko,En,kn,Jn){Jn.guid=Jn.guid||D++;var Oo=gn(Ko);Oo[En]=Oo[En]||[],Oo[En].push([kn,Jn]),Ko.addEventListener(En,Jn)}(ur,Fn,xn,dn)})}),this},ft.one=function(U,rt,dt){return this.on(U,rt,dt,!0)},ft.ready=function(U){var rt=function(){return U(vt)};return $.readyState!=="loading"?setTimeout(rt):$.addEventListener("DOMContentLoaded",rt),this},ft.trigger=function(U,rt){var dt=U;if(ot(U)){var Mt=cn(U),Kt=Mt[0],Le=Mt[1];(dt=$.createEvent("HTMLEvents")).initEvent(Kt,!0,!0),dt.namespace=Le.join(qe)}return dt.data=rt,this.each(function(Me,Pn){Pn.dispatchEvent(dt)})};var S=/select-one/i,A=/select-multiple/i;function J(U){var rt=U.type;return S.test(rt)?function(dt){return dt.selectedIndex<0?null:dt.options[dt.selectedIndex].value}(U):A.test(rt)?function(dt){var Mt=[];return Ft(dt.options,function(Kt){!Kt.selected||Kt.disabled||Kt.parentNode.disabled||Mt.push(Kt.value)}),Mt}(U):U.value}var lt=/%20/g,Vt=/file|reset|submit|button|image/i,qt=/radio|checkbox/i;ft.serialize=function(){var U="";return this.each(function(rt,dt){Ft(dt.elements||[dt],function(Mt){if(!Mt.disabled&&Mt.name&&Mt.tagName!=="FIELDSET"&&!Vt.test(Mt.type)&&(!qt.test(Mt.type)||Mt.checked)){var Kt=J(Mt);Kt!==void 0&&Ft(G(Kt)?Kt:[Kt],function(Le){U+=function(Me,Pn){return"&"+encodeURIComponent(Me)+"="+encodeURIComponent(Pn).replace(lt,"+")}(Mt.name,Le)})}})}),U.substr(1)},ft.val=function(U){return U===void 0?this[0]&&J(this[0]):this.each(function(rt,dt){var Mt=A.test(dt.type),Kt=U===null?Mt?[]:"":U;Mt&&G(Kt)?Ft(dt.options,function(Le){Le.selected=Kt.indexOf(Le.value)>=0}):dt.value=Kt})},ft.clone=function(){return this.map(function(U,rt){return rt.cloneNode(!0)})},ft.detach=function(){return this.each(function(U,rt){rt.parentNode&&rt.parentNode.removeChild(rt)})};var Qt,Ie=/^\s*<(\w+)[^>]*>/,We=/^\s*<(\w+)\s*\/?>(?:<\/\1>)?\s*$/;function Ue(U){if(function(){if(!Qt){var Mt=$.createElement("table"),Kt=$.createElement("tr");Qt={"*":$.createElement("div"),tr:$.createElement("tbody"),td:Kt,th:Kt,thead:Mt,tbody:Mt,tfoot:Mt}}}(),!ot(U))return[];if(We.test(U))return[$.createElement(RegExp.$1)];var rt=Ie.test(U)&&RegExp.$1,dt=Qt[rt]||Qt["*"];return dt.innerHTML=U,vt(dt.childNodes).detach().get()}function en(U,rt,dt){if(rt!==void 0){var Mt=ot(rt);!Mt&&rt.length?Ft(rt,function(Kt){return en(U,Kt,dt)}):Ft(U,Mt?function(Kt){Kt.insertAdjacentHTML(dt?"afterbegin":"beforeend",rt)}:function(Kt,Le){return function(Me,Pn,Fn){Fn?Me.insertBefore(Pn,Me.childNodes[0]):Me.appendChild(Pn)}(Kt,Le?rt.cloneNode(!0):rt,dt)})}}vt.parseHTML=Ue,ft.empty=function(){var U=this[0];if(U)for(;U.firstChild;)U.removeChild(U.firstChild);return this},ft.append=function(){var U=this;return Ft(arguments,function(rt){en(U,rt)}),this},ft.appendTo=function(U){return en(vt(U),this),this},ft.html=function(U){if(U===void 0)return this[0]&&this[0].innerHTML;var rt=U.nodeType?U[0].outerHTML:U;return this.each(function(dt,Mt){Mt.innerHTML=rt})},ft.insertAfter=function(U){var rt=this;return vt(U).each(function(dt,Mt){var Kt=Mt.parentNode;rt.each(function(Le,Me){Kt.insertBefore(dt?Me.cloneNode(!0):Me,Mt.nextSibling)})}),this},ft.after=function(){var U=this;return Ft(O.apply(arguments),function(rt){O.apply(vt(rt).slice()).insertAfter(U)}),this},ft.insertBefore=function(U){var rt=this;return vt(U).each(function(dt,Mt){var Kt=Mt.parentNode;rt.each(function(Le,Me){Kt.insertBefore(dt?Me.cloneNode(!0):Me,Mt)})}),this},ft.before=function(){var U=this;return Ft(arguments,function(rt){vt(rt).insertBefore(U)}),this},ft.prepend=function(){var U=this;return Ft(arguments,function(rt){en(U,rt,!0)}),this},ft.prependTo=function(U){return en(vt(U),O.apply(this.slice()),!0),this},ft.remove=function(){return this.detach().off()},ft.replaceWith=function(U){var rt=this;return this.each(function(dt,Mt){var Kt=Mt.parentNode;if(Kt){var Le=dt?vt(U).clone():vt(U);if(!Le[0])return rt.remove(),!1;Kt.replaceChild(Le[0],Mt),vt(Le[0]).after(Le.slice(1))}})},ft.replaceAll=function(U){return vt(U).replaceWith(this),this},ft.text=function(U){return U===void 0?this[0]?this[0].textContent:"":this.each(function(rt,dt){dt.textContent=U})};var se=$&&$.documentElement;ft.offset=function(){var U=this[0];if(U){var rt=U.getBoundingClientRect();return{top:rt.top+pt.pageYOffset-se.clientTop,left:rt.left+pt.pageXOffset-se.clientLeft}}},ft.offsetParent=function(){return vt(this[0]&&this[0].offsetParent)},ft.position=function(){var U=this[0];if(U)return{left:U.offsetLeft,top:U.offsetTop}},ft.children=function(U){var rt=[];return this.each(function(dt,Mt){_.apply(rt,Mt.children)}),rt=vt(Pt(rt)),U?rt.filter(function(dt,Mt){return W(Mt,U)}):rt},ft.contents=function(){var U=[];return this.each(function(rt,dt){_.apply(U,dt.tagName==="IFRAME"?[dt.contentDocument]:dt.childNodes)}),vt(U.length&&Pt(U))},ft.find=function(U){for(var rt=[],dt=0,Mt=this.length;dt<Mt;dt++){var Kt=Tt(U,this[dt]);Kt.length&&_.apply(rt,Kt)}return vt(rt.length&&Pt(rt))},ft.has=function(U){var rt=ot(U)?function(dt,Mt){return!!Tt(U,Mt).length}:function(dt,Mt){return Mt.contains(U)};return this.filter(rt)},ft.is=function(U){if(!U||!this[0])return!1;var rt=xt(U),dt=!1;return this.each(function(Mt,Kt){return!(dt=rt(Mt,Kt,U))}),dt},ft.next=function(){return vt(this[0]&&this[0].nextElementSibling)},ft.not=function(U){if(!U||!this[0])return this;var rt=xt(U);return this.filter(function(dt,Mt){return!rt(dt,Mt,U)})},ft.parent=function(){var U=[];return this.each(function(rt,dt){dt&&dt.parentNode&&U.push(dt.parentNode)}),vt(Pt(U))},ft.index=function(U){var rt=U?vt(U)[0]:this[0],dt=U?this:vt(rt).parent().children();return H.call(dt,rt)},ft.closest=function(U){return U&&this[0]?this.is(U)?this.filter(U):this.parent().closest(U):vt()},ft.parents=function(U){var rt,dt=[];return this.each(function(Mt,Kt){for(rt=Kt;rt&&rt.parentNode&&rt!==$.body.parentNode;)rt=rt.parentNode,(!U||U&&W(rt,U))&&dt.push(rt)}),vt(Pt(dt))},ft.prev=function(){return vt(this[0]&&this[0].previousElementSibling)},ft.siblings=function(){var U=this[0];return this.parent().children().filter(function(rt,dt){return dt!==U})};const vn=vt},6294:(C,q,it)=>{"use strict";it.d(q,{AU:()=>Pt,BC:()=>ct,C8:()=>te,Ch:()=>W,Ci:()=>ht,D8:()=>H,G2:()=>K,GW:()=>Ot,GZ:()=>Et,I6:()=>x,LJ:()=>xt,Sc:()=>st,X6:()=>N,Xy:()=>Ft,YZ:()=>_,ZQ:()=>E,_I:()=>ne,a_:()=>Tt,af:()=>ft,bG:()=>Y,cx:()=>O,ir:()=>wt,kk:()=>I,on:()=>Nt,rp:()=>G,v$:()=>ot,yL:()=>vt,zN:()=>V});var $=it(5706),pt=function(_t,Ut,Ht){if(Ht||arguments.length===2)for(var ee,Zt=0,le=Ut.length;Zt<le;Zt++)!ee&&Zt in Ut||(ee||(ee=Array.prototype.slice.call(Ut,0,Zt)),ee[Zt]=Ut[Zt]);return _t.concat(ee||Array.prototype.slice.call(Ut))},R="tag",F="attributes",H="transitionend oTransitionEnd transitionend webkitTransitionEnd",E=function(_t){return _t?.nodeType===Node.DOCUMENT_NODE},_=function(_t){var Ut=_t&&_t.parentNode;Ut&&Ut.removeChild(_t)};function O(){for(var _t=[],Ut=0;Ut<arguments.length;Ut++)_t[Ut]=arguments[Ut];return(Array.isArray(_t[0])?_t[0]:pt([],_t,!0)).filter(Boolean).join(" ")}var x=function(_t,Ut){return _t.querySelectorAll(Ut)},N=function(_t,Ut){return Ut===void 0&&(Ut={}),_t&&_t.setAttribute&&(0,$.each)(Ut,function(Ht,ee){return _t.setAttribute(ee,Ht)})},V=function(_t){var Ut;return _t&&!!(_t.offsetWidth||_t.offsetHeight||!((Ut=_t.getClientRects)===null||Ut===void 0)&&Ut.call(_t).length)},Y=function(_t,Ut){var Ht;(Ht=_t.parentNode)===null||Ht===void 0||Ht.replaceChild(Ut,_t)},st=function(_t,Ut,Ht){var ee=_t.childNodes,Zt=ee.length,le=(0,$.isUndefined)(Ht)?Zt:Ht;(0,$.isString)(Ut)&&(_t.insertAdjacentHTML("beforeEnd",Ut),Ut=_t.lastChild,_t.removeChild(Ut)),le>=Zt?_t.appendChild(Ut):_t.insertBefore(Ut,ee[le])},ct=function(_t,Ut){return st(_t,Ut)},Tt=function(_t,Ut,Ht){Ut===void 0&&(Ut={});var ee=document.createElement(_t);return Ut&&(0,$.each)(Ut,function(Zt,le){return ee.setAttribute(le,Zt)}),Ht&&((0,$.isString)(Ht)?ee.innerHTML=Ht:ee.appendChild(Ht)),ee},Et=function(_t){return document.createTextNode(_t)},vt=function(_t,Ut){var Ht,ee=_t.type;try{Ht=new window[Ut](ee,_t)}catch{(Ht=document.createEvent(Ut)).initEvent(ee,!0,!0)}return Ht._parentEvent=_t,ee.indexOf("key")===0&&(Ht.keyCodeVal=_t.keyCode,["keyCode","which"].forEach(function(Zt){Object.defineProperty(Ht,Zt,{get:function(){return this.keyCodeVal}})})),Ht},ft=function(_t,Ut){Ut===void 0&&(Ut=[]),(Array.isArray(Ut)?Ut:[Ut]).forEach(function(Ht){var ee=Ht[R]||"div",Zt=Ht[F]||{},le=document.createElement(ee);(0,$.each)(Zt,function(ce,jt){le.setAttribute(jt,ce)}),_t.appendChild(le)})},wt=function(_t){return _t?.nodeType===Node.TEXT_NODE},Ot=function(_t){return _t&&!wt(_t)&&!function(Ut){return Ut?.nodeType===Node.COMMENT_NODE}(_t)},te=function(_t){var Ut,Ht={top:0,left:0,width:0,height:0};if(!_t)return Ht;if(wt(_t)){var ee=document.createRange();ee.selectNode(_t),Ut=ee.getBoundingClientRect(),ee.detach()}return Ut||(_t.getBoundingClientRect?_t.getBoundingClientRect():Ht)},Ft=function(_t){var Ut=_t?.ownerDocument||document,Ht=Ut.documentElement,ee=Ut.defaultView||window;return{x:(ee.pageXOffset||Ht.scrollLeft||0)-(Ht.clientLeft||0),y:(ee.pageYOffset||Ht.scrollTop||0)-(Ht.clientTop||0)}},D=function(_t){return _t.which||_t.keyCode},W=function(_t){return String.fromCharCode(D(_t))},K=function(_t){return _t.touches&&_t.touches[0]?_t.touches[0]:_t},ot=function(_t){return D(_t)===27},ht=function(_t){return D(_t)===13},G=function(_t){return function(Ut){return Ut.ctrlKey}(_t)||_t.metaKey},xt=function(_t){if(!_t)return"";var Ut=_t.name,Ht=_t.publicId,ee=_t.systemId,Zt=Ht?' PUBLIC "'.concat(Ht,'"'):"",le=!Ht&&ee?' SYSTEM "'.concat(ee,'"'):"";return"<!DOCTYPE ".concat(Ut).concat(Zt).concat(le,">")},I=function(_t){_t===void 0&&(_t={});var Ut=[];return(0,$.each)(_t,function(Ht,ee){return Ut.push("".concat(ee,'="').concat(Ht,'"'))}),Ut.join(" ")},Nt=function(_t,Ut,Ht,ee){var Zt=Ut.split(/\s+/),le=(0,$.isArray)(_t)?_t:[_t];Zt.forEach(function(ce){le.forEach(function(jt){return jt?.addEventListener(ce,Ht,ee)})})},Pt=function(_t,Ut,Ht,ee){var Zt=Ut.split(/\s+/),le=(0,$.isArray)(_t)?_t:[_t];Zt.forEach(function(ce){le.forEach(function(jt){return jt?.removeEventListener(ce,Ht,ee)})})},ne=function(_t){return _t.replace(/-([a-zA-Z0-9])/g,function(Ut,Ht){return Ht.toUpperCase()})}},1166:(C,q,it)=>{"use strict";it.r(q),it.d(q,{appendStyles:()=>te,buildBase64UrlFromSvg:()=>me,camelCase:()=>K,capitalize:()=>Ht,createId:()=>pe,deepMerge:()=>Pt,escape:()=>I,escapeNodeContent:()=>Nt,find:()=>xt,get:()=>x,getComponentModel:()=>jt,getComponentView:()=>ce,getElement:()=>G,getGlobal:()=>Et,getModel:()=>ne,getUiClass:()=>Ot,getUnitFromValue:()=>D,getViewEl:()=>Zt,hasDnd:()=>ht,hasWin:()=>Tt,isBultInMethod:()=>V,isComponent:()=>le,isDef:()=>ct,isEmptyObj:()=>Ut,isObject:()=>_t,isRule:()=>ee,matches:()=>wt,normalizeFloat:()=>ot,normalizeKey:()=>Y,serialize:()=>N,setViewEl:()=>Xt,shallowDiff:()=>Ft,stringToPath:()=>O,toLowerCase:()=>vt,upFirst:()=>W,wait:()=>st});var $=it(5706),pt=it(6294),R=function(){return R=Object.assign||function(kt){for(var Yt,de=1,St=arguments.length;de<St;de++)for(var ae in Yt=arguments[de])Object.prototype.hasOwnProperty.call(Yt,ae)&&(kt[ae]=Yt[ae]);return kt},R.apply(this,arguments)},F=function(kt,Yt,de){if(de||arguments.length===2)for(var St,ae=0,je=Yt.length;ae<je;ae++)!St&&ae in Yt||(St||(St=Array.prototype.slice.call(Yt,0,ae)),St[ae]=Yt[ae]);return kt.concat(St||Array.prototype.slice.call(Yt))},H={},E=/\\(\\)?/g,_=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,O=function(kt){var Yt=[];return kt.charCodeAt(0)===46&&Yt.push(""),kt.replace(_,function(de,St,ae,je){return Yt.push(ae?je.replace(E,"$1"):St||de),""}),Yt},x=function(kt,Yt,de){for(var St,ae=function(qe,gn){return(0,$.isArray)(qe)?qe:gn.hasOwnProperty(qe)?[qe]:O(qe)}(Yt,kt),je=ae.length,He=0;kt!=null&&He<je;)kt=kt["".concat(ae[He++])];return(St=He&&He==je?kt:void 0)!==null&&St!==void 0?St:de},N=function(kt){return JSON.parse(JSON.stringify(kt))},V=function(kt){return(0,$.isFunction)(H[kt])},Y=function(kt){return V(kt)?"_".concat(kt):kt},st=function(kt){return kt===void 0&&(kt=0),new Promise(function(Yt){return setTimeout(Yt,kt)})},ct=function(kt){return kt!==void 0},Tt=function(){return typeof window<"u"},Et=function(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:it.g},vt=function(kt){return(kt||"").toLowerCase()},ft=Tt()?window.Element.prototype:{},wt=ft.matches||ft.webkitMatchesSelector||ft.mozMatchesSelector||ft.msMatchesSelector,Ot=function(kt,Yt){var de=kt.getConfig(),St=de.stylePrefix;return[de.customUI&&"".concat(St,"cui"),Yt].filter(function(ae){return ae}).join(" ")},te=function(kt,Yt){Yt===void 0&&(Yt={});var de=(0,$.isArray)(kt)?F([],kt,!0):[kt];if(de.length){var St=de.shift();if(St&&(!Yt.unique||!document.querySelector('link[href="'.concat(St,'"]')))){var ae=document.head,je=document.createElement("link");je.href=St,je.rel="stylesheet",Yt.prepand?ae.insertBefore(je,ae.firstChild):ae.appendChild(je)}te(de)}},Ft=function(kt,Yt){var de={},St=(0,$.keys)(Yt);for(var ae in kt)if(kt.hasOwnProperty(ae)){var je=kt[ae],He=Yt[ae];St.indexOf(ae)>=0?je!==He&&(de[ae]=He):de[ae]=null}for(var ae in Yt)Yt.hasOwnProperty(ae)&&(0,$.isUndefined)(kt[ae])&&(de[ae]=Yt[ae]);return de},D=function(kt){return kt.replace(parseFloat(kt),"")},W=function(kt){return kt[0].toUpperCase()+kt.toLowerCase().slice(1)},K=function(kt){return kt.replace(/-./g,function(Yt){return Yt[1].toUpperCase()})},ot=function(kt,Yt,de){Yt===void 0&&(Yt=1),de===void 0&&(de=0);var St=0;if(isNaN(kt))return de;if(kt=parseFloat(kt),Math.floor(kt)!==kt){var ae=Yt.toString().split(".")[1];St=ae?ae.length:0}return St?parseFloat(kt.toFixed(St)):kt},ht=function(kt){return"draggable"in document.createElement("i")&&(!kt||kt.config.nativeDnD)},G=function(kt){return(0,$.isElement)(kt)||(0,pt.ir)(kt)?kt:kt&&kt.getEl?kt.getEl():void 0},xt=function(kt,Yt){var de=null;return kt.some(function(St,ae){return Yt(St,ae,kt)?(de=St,1):0}),de},I=function(kt){return kt===void 0&&(kt=""),"".concat(kt).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/`/g,"&#96;")},Nt=function(kt){return kt===void 0&&(kt=""),"".concat(kt).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},Pt=function(){for(var kt=[],Yt=0;Yt<arguments.length;Yt++)kt[Yt]=arguments[Yt];for(var de=R({},kt[0]),St=1;St<kt.length;St++){var ae=R({},kt[St]);for(var je in ae){var He=de[je],qe=ae[je];_t(He)&&_t(qe)?de[je]=Pt(He,qe):de[je]=qe}}return de},ne=function(kt,Yt){var de;return!Yt&&kt&&kt.__cashData?de=kt.__cashData.model:Yt&&(0,$.isElement)(kt)&&(de=Yt(kt).data("model")),de},_t=function(kt){return kt&&!Array.isArray(kt)&&typeof kt=="object"},Ut=function(kt){return Object.keys(kt).length<=0},Ht=function(kt){return kt===void 0&&(kt=""),kt&&kt.charAt(0).toUpperCase()+kt.substring(1)},ee=function(kt){return kt&&kt.toCSS},Zt=function(kt){return kt?.__gjsv},le=function(kt){return!!kt?.toHTML},ce=function(kt){return Zt(kt)},jt=function(kt){var Yt;return(Yt=ce(kt))===null||Yt===void 0?void 0:Yt.model},Xt=function(kt,Yt){kt.__gjsv=Yt},pe=function(kt){kt===void 0&&(kt=16);for(var Yt="",de="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",St=de.length,ae=0;ae<kt;ae++)Yt+=de.charAt(Math.floor(Math.random()*St));return Yt},me=function(kt){if(kt&&kt.substr(0,4)==="<svg"){var Yt="";return Tt()?Yt=window.btoa(kt):typeof Buffer<"u"&&(Yt=Buffer.from(kt,"utf8").toString("base64")),Yt?"data:image/svg+xml;base64,".concat(Yt):kt}return kt}},6756:(C,q,it)=>{"use strict";it.d(q,{h:()=>F});var $,pt=it(3178),R=($=function(H,E){return $=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,O){_.__proto__=O}||function(_,O){for(var x in O)Object.prototype.hasOwnProperty.call(O,x)&&(_[x]=O[x])},$(H,E)},function(H,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");function _(){this.constructor=H}$(H,E),H.prototype=E===null?Object.create(E):(_.prototype=E.prototype,new _)}),F=function(H){function E(){var _=H!==null&&H.apply(this,arguments)||this;return _.displayCache=new Map,_}return R(E,H),E.prototype.getChildren=function(){return this.getDisplayedChildren()},E.prototype.getDisplayedChildren=function(){var _=this;return this.model.components().filter(function(O){return _.isChildDisplayed(O)}).map(function(O){return new _.constructor(O)})},E.prototype.isChildDisplayed=function(_){if(this.displayCache.has(_))return this.displayCache.get(_);var O=function(x){return!!x&&typeof x=="object"&&x.nodeType===Node.ELEMENT_NODE&&window.getComputedStyle(x).display!=="none"&&x.offsetWidth>0&&x.offsetHeight>0}(_.getEl());return this.displayCache.set(_,O),O},E.prototype.getParent=function(){var _=this.model.parent();return _?new this.constructor(_):null},E.prototype.addChildAt=function(_,O,x){var N,V,Y,st,ct,Tt,Et,vt;if(x===void 0&&(x={action:"add-component"}),((V=(N=this.model)===null||N===void 0?void 0:N.isInstanceOf)===null||V===void 0?void 0:V.call(N,"text"))&&((st=(Y=_?.model)===null||Y===void 0?void 0:Y.get)===null||st===void 0?void 0:st.call(Y,"textable")))return(vt=(Et=(Tt=(ct=this.model)===null||ct===void 0?void 0:ct.getView)===null||Tt===void 0?void 0:Tt.call(ct))===null||Et===void 0?void 0:Et.insertComponent)===null||vt===void 0?void 0:vt.call(Et,_?.model,{action:x.action});var ft=this.model.components().add(_.model,{at:this.getRealIndex(O),action:x.action});return new this.constructor(ft)},E.prototype.removeChildAt=function(_,O){O===void 0&&(O={temporary:!1});var x=this.model.components().at(this.getRealIndex(_));x&&this.model.components().remove(x,O)},E.prototype.indexOfChild=function(_){return this.getDisplayIndex(_)},E.prototype.getDisplayIndex=function(_){var O=this.getDisplayedChildren();return O?O.findIndex(function(x){return x.model===_.model}):-1},E.prototype.getRealIndex=function(_){if(_===-1)return-1;for(var O=0,x=this.model.components(),N=0;N<x.length;N++){var V=x.at(N);if(this.isChildDisplayed(V)&&O++,O===_+1)return N}return-1},E.prototype.canMove=function(_,O){return this.model.em.Components.canMove(this.model,_.model,this.getRealIndex(O)).result},E.prototype.equals=function(_){return!!_?._model&&this._model.getId()===_._model.getId()},E.prototype.restNodeState=function(){this.clearState();var _=this.model;this.setContentEditable(!1),_.em.getEditing()===_&&this.disableEditing()},E.prototype.setContentEditable=function(_){this.element&&this.isTextNode()&&(this.element.contentEditable=_?"true":"false")},E.prototype.disableEditing=function(){var _,O;(O=(_=this.view)===null||_===void 0?void 0:_.disableEditing)===null||O===void 0||O.call(_)},E.prototype.clearState=function(){var _,O;(O=(_=this.model).set)===null||O===void 0||O.call(_,"status","")},E.prototype.setSelectedParentState=function(){var _,O;(O=(_=this.model).set)===null||O===void 0||O.call(_,"status","selected-parent")},E.prototype.isTextNode=function(){var _,O;return(O=(_=this.model).isInstanceOf)===null||O===void 0?void 0:O.call(_,"text")},E.prototype.isTextable=function(){var _,O;return(O=(_=this.model).get)===null||O===void 0?void 0:O.call(_,"textable")},E}(pt.$)},1447:(C,q,it)=>{"use strict";it.d(q,{A:()=>F});var $,pt=it(6756),R=($=function(H,E){return $=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,O){_.__proto__=O}||function(_,O){for(var x in O)Object.prototype.hasOwnProperty.call(O,x)&&(_[x]=O[x])},$(H,E)},function(H,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");function _(){this.constructor=H}$(H,E),H.prototype=E===null?Object.create(E):(_.prototype=E.prototype,new _)});const F=function(H){function E(){var _=H!==null&&H.apply(this,arguments)||this;return _._dropAreaConfig={ratio:.8,minUndroppableDimension:1,maxUndroppableDimension:15},_}return R(E,H),Object.defineProperty(E.prototype,"view",{get:function(){var _,O;return(O=(_=this.model).getView)===null||O===void 0?void 0:O.call(_)},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"element",{get:function(){var _,O;return(O=(_=this.model).getEl)===null||O===void 0?void 0:O.call(_)},enumerable:!1,configurable:!0}),E}(pt.h)},3178:(C,q,it)=>{"use strict";it.d(q,{$:()=>$});var $=function(){function pt(R,F){F===void 0&&(F={}),this._dropAreaConfig={ratio:1,minUndroppableDimension:0,maxUndroppableDimension:0},this._model=R,this._dragSource=F}return Object.defineProperty(pt.prototype,"model",{get:function(){return this._model},enumerable:!1,configurable:!0}),Object.defineProperty(pt.prototype,"dragSource",{get:function(){return this._dragSource},enumerable:!1,configurable:!0}),Object.defineProperty(pt.prototype,"dropArea",{get:function(){var R,F;return this.getParent()?(F=this.nodeDimensions)===null||F===void 0?void 0:F.getDropArea(this._dropAreaConfig):(R=this.nodeDimensions)===null||R===void 0?void 0:R.clone()},enumerable:!1,configurable:!0}),pt.prototype.isWithinDropBounds=function(R,F){return!!this.dropArea&&this.dropArea.isWithinBounds(R,F)},pt.prototype.equals=function(R){return!!R?._model&&this._model===R._model},pt.prototype.adjustDimensions=function(R){var F,H;R.topDifference===0&&R.leftDifference===0||((F=this.nodeDimensions)===null||F===void 0||F.adjustDimensions(R),(H=this.childrenDimensions)===null||H===void 0||H.forEach(function(E){return E.adjustDimensions(R)}))},pt}()},8433:(C,q,it)=>{"use strict";var $;it.d(q,{A:()=>$}),function(pt){pt.Vertical="Vertical",pt.Horizontal="Horizontal",pt.BothDirections="BothDirections"}($||($={}))},585:(C,q,it)=>{var $={"./CanvasClear":9484,"./CanvasClear.ts":9484,"./CanvasMove":9516,"./CanvasMove.ts":9516,"./CommandAbstract":9946,"./CommandAbstract.ts":9946,"./ComponentDelete":7801,"./ComponentDelete.ts":7801,"./ComponentDrag":4864,"./ComponentDrag.ts":4864,"./ComponentEnter":6134,"./ComponentEnter.ts":6134,"./ComponentExit":914,"./ComponentExit.ts":914,"./ComponentNext":5547,"./ComponentNext.ts":5547,"./ComponentPrev":8655,"./ComponentPrev.ts":8655,"./ComponentStyleClear":7640,"./ComponentStyleClear.ts":7640,"./CopyComponent":5837,"./CopyComponent.ts":5837,"./ExportTemplate":6477,"./ExportTemplate.ts":6477,"./Fullscreen":1772,"./Fullscreen.ts":1772,"./MoveComponent":741,"./MoveComponent.ts":741,"./OpenAssets":2924,"./OpenAssets.ts":2924,"./OpenBlocks":3963,"./OpenBlocks.ts":3963,"./OpenLayers":1479,"./OpenLayers.ts":1479,"./OpenStyleManager":3473,"./OpenStyleManager.ts":3473,"./OpenTraitManager":5054,"./OpenTraitManager.ts":5054,"./PasteComponent":6979,"./PasteComponent.ts":6979,"./Preview":4457,"./Preview.ts":4457,"./Resize":5493,"./Resize.ts":5493,"./SelectComponent":9317,"./SelectComponent.ts":9317,"./SelectPosition":1406,"./SelectPosition.ts":1406,"./ShowOffset":9395,"./ShowOffset.ts":9395,"./SwitchVisibility":7285,"./SwitchVisibility.ts":7285};function pt(F){var H=R(F);return it(H)}function R(F){if(!it.o($,F)){var H=new Error("Cannot find module '"+F+"'");throw H.code="MODULE_NOT_FOUND",H}return $[F]}pt.keys=function(){return Object.keys($)},pt.resolve=R,C.exports=pt,pt.id=585},5706:(C,q,it)=>{"use strict";it.r(q),it.d(q,{VERSION:()=>pt,after:()=>Xo,all:()=>ua,allKeys:()=>vn,any:()=>ei,assign:()=>Zn,before:()=>sa,bind:()=>Hr,bindAll:()=>eo,chain:()=>hi,chunk:()=>Js,clone:()=>fi,collect:()=>Zo,compact:()=>Ks,compose:()=>Zr,constant:()=>je,contains:()=>co,countBy:()=>Za,create:()=>pr,debounce:()=>fr,default:()=>Wi,defaults:()=>Fo,defer:()=>zs,delay:()=>Ri,detect:()=>Pr,difference:()=>Dn,drop:()=>gr,each:()=>Ho,escape:()=>ke,every:()=>ua,extend:()=>Oo,extendOwn:()=>Zn,filter:()=>Yn,find:()=>Pr,findIndex:()=>Tr,findKey:()=>Qr,findLastIndex:()=>vi,findWhere:()=>Jo,first:()=>uo,flatten:()=>fn,foldl:()=>ti,foldr:()=>Fi,forEach:()=>Ho,functions:()=>kn,get:()=>Hn,groupBy:()=>Gs,has:()=>Or,head:()=>uo,identity:()=>jn,include:()=>co,includes:()=>co,indexBy:()=>yi,indexOf:()=>ca,initial:()=>$n,inject:()=>ti,intersection:()=>Ys,invert:()=>En,invoke:()=>Uo,isArguments:()=>de,isArray:()=>me,isArrayBuffer:()=>Ut,isBoolean:()=>ot,isDataView:()=>pe,isDate:()=>Nt,isElement:()=>ht,isEmpty:()=>Vt,isEqual:()=>se,isError:()=>ne,isFinite:()=>St,isFunction:()=>Zt,isMap:()=>Fn,isMatch:()=>qt,isNaN:()=>ae,isNull:()=>W,isNumber:()=>I,isObject:()=>D,isRegExp:()=>Pt,isSet:()=>go,isString:()=>xt,isSymbol:()=>_t,isTypedArray:()=>S,isUndefined:()=>K,isWeakMap:()=>xn,isWeakSet:()=>ur,iteratee:()=>ln,keys:()=>lt,last:()=>fa,lastIndexOf:()=>mi,map:()=>Zo,mapObject:()=>Qn,matcher:()=>Kn,matches:()=>Kn,max:()=>kr,memoize:()=>Xa,methods:()=>kn,min:()=>pa,mixin:()=>ha,negate:()=>Jr,noop:()=>Yo,now:()=>Io,object:()=>zi,omit:()=>oo,once:()=>Bs,pairs:()=>Ko,partial:()=>gi,partition:()=>Je,pick:()=>Hi,pluck:()=>zr,property:()=>Cn,propertyOf:()=>to,random:()=>Lo,range:()=>Ar,reduce:()=>ti,reduceRight:()=>Fi,reject:()=>Ja,rest:()=>gr,restArguments:()=>Ft,result:()=>Mn,sample:()=>Qo,select:()=>Yn,shuffle:()=>$s,size:()=>Qa,some:()=>ei,sortBy:()=>qs,sortedIndex:()=>la,tail:()=>gr,take:()=>uo,tap:()=>Do,template:()=>Wn,templateSettings:()=>tt,throttle:()=>aa,times:()=>nn,toArray:()=>zo,toPath:()=>Bn,transpose:()=>_i,unescape:()=>M,union:()=>bi,uniq:()=>tr,unique:()=>tr,uniqueId:()=>Xr,unzip:()=>_i,values:()=>dn,where:()=>hr,without:()=>Ui,wrap:()=>To,zip:()=>Xs});var $={};it.r($),it.d($,{VERSION:()=>pt,after:()=>Xo,all:()=>ua,allKeys:()=>vn,any:()=>ei,assign:()=>Zn,before:()=>sa,bind:()=>Hr,bindAll:()=>eo,chain:()=>hi,chunk:()=>Js,clone:()=>fi,collect:()=>Zo,compact:()=>Ks,compose:()=>Zr,constant:()=>je,contains:()=>co,countBy:()=>Za,create:()=>pr,debounce:()=>fr,default:()=>es,defaults:()=>Fo,defer:()=>zs,delay:()=>Ri,detect:()=>Pr,difference:()=>Dn,drop:()=>gr,each:()=>Ho,escape:()=>ke,every:()=>ua,extend:()=>Oo,extendOwn:()=>Zn,filter:()=>Yn,find:()=>Pr,findIndex:()=>Tr,findKey:()=>Qr,findLastIndex:()=>vi,findWhere:()=>Jo,first:()=>uo,flatten:()=>fn,foldl:()=>ti,foldr:()=>Fi,forEach:()=>Ho,functions:()=>kn,get:()=>Hn,groupBy:()=>Gs,has:()=>Or,head:()=>uo,identity:()=>jn,include:()=>co,includes:()=>co,indexBy:()=>yi,indexOf:()=>ca,initial:()=>$n,inject:()=>ti,intersection:()=>Ys,invert:()=>En,invoke:()=>Uo,isArguments:()=>de,isArray:()=>me,isArrayBuffer:()=>Ut,isBoolean:()=>ot,isDataView:()=>pe,isDate:()=>Nt,isElement:()=>ht,isEmpty:()=>Vt,isEqual:()=>se,isError:()=>ne,isFinite:()=>St,isFunction:()=>Zt,isMap:()=>Fn,isMatch:()=>qt,isNaN:()=>ae,isNull:()=>W,isNumber:()=>I,isObject:()=>D,isRegExp:()=>Pt,isSet:()=>go,isString:()=>xt,isSymbol:()=>_t,isTypedArray:()=>S,isUndefined:()=>K,isWeakMap:()=>xn,isWeakSet:()=>ur,iteratee:()=>ln,keys:()=>lt,last:()=>fa,lastIndexOf:()=>mi,map:()=>Zo,mapObject:()=>Qn,matcher:()=>Kn,matches:()=>Kn,max:()=>kr,memoize:()=>Xa,methods:()=>kn,min:()=>pa,mixin:()=>ha,negate:()=>Jr,noop:()=>Yo,now:()=>Io,object:()=>zi,omit:()=>oo,once:()=>Bs,pairs:()=>Ko,partial:()=>gi,partition:()=>Je,pick:()=>Hi,pluck:()=>zr,property:()=>Cn,propertyOf:()=>to,random:()=>Lo,range:()=>Ar,reduce:()=>ti,reduceRight:()=>Fi,reject:()=>Ja,rest:()=>gr,restArguments:()=>Ft,result:()=>Mn,sample:()=>Qo,select:()=>Yn,shuffle:()=>$s,size:()=>Qa,some:()=>ei,sortBy:()=>qs,sortedIndex:()=>la,tail:()=>gr,take:()=>uo,tap:()=>Do,template:()=>Wn,templateSettings:()=>tt,throttle:()=>aa,times:()=>nn,toArray:()=>zo,toPath:()=>Bn,transpose:()=>_i,unescape:()=>M,union:()=>bi,uniq:()=>tr,unique:()=>tr,uniqueId:()=>Xr,unzip:()=>_i,values:()=>dn,where:()=>hr,without:()=>Ui,wrap:()=>To,zip:()=>Xs});var pt="1.13.1",R=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},F=Array.prototype,H=Object.prototype,E=typeof Symbol<"u"?Symbol.prototype:null,_=F.push,O=F.slice,x=H.toString,N=H.hasOwnProperty,V=typeof ArrayBuffer<"u",Y=typeof DataView<"u",st=Array.isArray,ct=Object.keys,Tt=Object.create,Et=V&&ArrayBuffer.isView,vt=isNaN,ft=isFinite,wt=!{toString:null}.propertyIsEnumerable("toString"),Ot=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],te=Math.pow(2,53)-1;function Ft(T,L){return L=L==null?T.length-1:+L,function(){for(var et=Math.max(arguments.length-L,0),at=Array(et),Ct=0;Ct<et;Ct++)at[Ct]=arguments[Ct+L];switch(L){case 0:return T.call(this,at);case 1:return T.call(this,arguments[0],at);case 2:return T.call(this,arguments[0],arguments[1],at)}var gt=Array(L+1);for(Ct=0;Ct<L;Ct++)gt[Ct]=arguments[Ct];return gt[L]=at,T.apply(this,gt)}}function D(T){var L=typeof T;return L==="function"||L==="object"&&!!T}function W(T){return T===null}function K(T){return T===void 0}function ot(T){return T===!0||T===!1||x.call(T)==="[object Boolean]"}function ht(T){return!(!T||T.nodeType!==1)}function G(T){var L="[object "+T+"]";return function(et){return x.call(et)===L}}const xt=G("String"),I=G("Number"),Nt=G("Date"),Pt=G("RegExp"),ne=G("Error"),_t=G("Symbol"),Ut=G("ArrayBuffer");var Ht=G("Function"),ee=R.document&&R.document.childNodes;typeof Int8Array!="object"&&typeof ee!="function"&&(Ht=function(T){return typeof T=="function"||!1});const Zt=Ht,le=G("Object");var ce=Y&&le(new DataView(new ArrayBuffer(8))),jt=typeof Map<"u"&&le(new Map),Xt=G("DataView");const pe=ce?function(T){return T!=null&&Zt(T.getInt8)&&Ut(T.buffer)}:Xt,me=st||G("Array");function kt(T,L){return T!=null&&N.call(T,L)}var Yt=G("Arguments");(function(){Yt(arguments)||(Yt=function(T){return kt(T,"callee")})})();const de=Yt;function St(T){return!_t(T)&&ft(T)&&!isNaN(parseFloat(T))}function ae(T){return I(T)&&vt(T)}function je(T){return function(){return T}}function He(T){return function(L){var et=T(L);return typeof et=="number"&&et>=0&&et<=te}}function qe(T){return function(L){return L?.[T]}}const gn=qe("byteLength"),cn=He(gn);var bt=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;const S=V?function(T){return Et?Et(T)&&!pe(T):cn(T)&&bt.test(x.call(T))}:je(!1),A=qe("length");function J(T,L){L=function(Bt){for(var ue={},Ne=Bt.length,Ye=0;Ye<Ne;++Ye)ue[Bt[Ye]]=!0;return{contains:function(un){return ue[un]},push:function(un){return ue[un]=!0,Bt.push(un)}}}(L);var et=Ot.length,at=T.constructor,Ct=Zt(at)&&at.prototype||H,gt="constructor";for(kt(T,gt)&&!L.contains(gt)&&L.push(gt);et--;)(gt=Ot[et])in T&&T[gt]!==Ct[gt]&&!L.contains(gt)&&L.push(gt)}function lt(T){if(!D(T))return[];if(ct)return ct(T);var L=[];for(var et in T)kt(T,et)&&L.push(et);return wt&&J(T,L),L}function Vt(T){if(T==null)return!0;var L=A(T);return typeof L=="number"&&(me(T)||xt(T)||de(T))?L===0:A(lt(T))===0}function qt(T,L){var et=lt(L),at=et.length;if(T==null)return!at;for(var Ct=Object(T),gt=0;gt<at;gt++){var Bt=et[gt];if(L[Bt]!==Ct[Bt]||!(Bt in Ct))return!1}return!0}function Qt(T){return T instanceof Qt?T:this instanceof Qt?void(this._wrapped=T):new Qt(T)}function Ie(T){return new Uint8Array(T.buffer||T,T.byteOffset||0,gn(T))}Qt.VERSION=pt,Qt.prototype.value=function(){return this._wrapped},Qt.prototype.valueOf=Qt.prototype.toJSON=Qt.prototype.value,Qt.prototype.toString=function(){return String(this._wrapped)};var We="[object DataView]";function Ue(T,L,et,at){if(T===L)return T!==0||1/T==1/L;if(T==null||L==null)return!1;if(T!=T)return L!=L;var Ct=typeof T;return(Ct==="function"||Ct==="object"||typeof L=="object")&&en(T,L,et,at)}function en(T,L,et,at){T instanceof Qt&&(T=T._wrapped),L instanceof Qt&&(L=L._wrapped);var Ct=x.call(T);if(Ct!==x.call(L))return!1;if(ce&&Ct=="[object Object]"&&pe(T)){if(!pe(L))return!1;Ct=We}switch(Ct){case"[object RegExp]":case"[object String]":return""+T==""+L;case"[object Number]":return+T!=+T?+L!=+L:+T==0?1/+T==1/L:+T==+L;case"[object Date]":case"[object Boolean]":return+T==+L;case"[object Symbol]":return E.valueOf.call(T)===E.valueOf.call(L);case"[object ArrayBuffer]":case We:return en(Ie(T),Ie(L),et,at)}var gt=Ct==="[object Array]";if(!gt&&S(T)){if(gn(T)!==gn(L))return!1;if(T.buffer===L.buffer&&T.byteOffset===L.byteOffset)return!0;gt=!0}if(!gt){if(typeof T!="object"||typeof L!="object")return!1;var Bt=T.constructor,ue=L.constructor;if(Bt!==ue&&!(Zt(Bt)&&Bt instanceof Bt&&Zt(ue)&&ue instanceof ue)&&"constructor"in T&&"constructor"in L)return!1}at=at||[];for(var Ne=(et=et||[]).length;Ne--;)if(et[Ne]===T)return at[Ne]===L;if(et.push(T),at.push(L),gt){if((Ne=T.length)!==L.length)return!1;for(;Ne--;)if(!Ue(T[Ne],L[Ne],et,at))return!1}else{var Ye,un=lt(T);if(Ne=un.length,lt(L).length!==Ne)return!1;for(;Ne--;)if(!kt(L,Ye=un[Ne])||!Ue(T[Ye],L[Ye],et,at))return!1}return et.pop(),at.pop(),!0}function se(T,L){return Ue(T,L)}function vn(T){if(!D(T))return[];var L=[];for(var et in T)L.push(et);return wt&&J(T,L),L}function U(T){var L=A(T);return function(et){if(et==null)return!1;var at=vn(et);if(A(at))return!1;for(var Ct=0;Ct<L;Ct++)if(!Zt(et[T[Ct]]))return!1;return T!==Me||!Zt(et[rt])}}var rt="forEach",dt="has",Mt=["clear","delete"],Kt=["get",dt,"set"],Le=Mt.concat(rt,Kt),Me=Mt.concat(Kt),Pn=["add"].concat(Mt,rt,dt);const Fn=jt?U(Le):G("Map"),xn=jt?U(Me):G("WeakMap"),go=jt?U(Pn):G("Set"),ur=G("WeakSet");function dn(T){for(var L=lt(T),et=L.length,at=Array(et),Ct=0;Ct<et;Ct++)at[Ct]=T[L[Ct]];return at}function Ko(T){for(var L=lt(T),et=L.length,at=Array(et),Ct=0;Ct<et;Ct++)at[Ct]=[L[Ct],T[L[Ct]]];return at}function En(T){for(var L={},et=lt(T),at=0,Ct=et.length;at<Ct;at++)L[T[et[at]]]=et[at];return L}function kn(T){var L=[];for(var et in T)Zt(T[et])&&L.push(et);return L.sort()}function Jn(T,L){return function(et){var at=arguments.length;if(L&&(et=Object(et)),at<2||et==null)return et;for(var Ct=1;Ct<at;Ct++)for(var gt=arguments[Ct],Bt=T(gt),ue=Bt.length,Ne=0;Ne<ue;Ne++){var Ye=Bt[Ne];L&&et[Ye]!==void 0||(et[Ye]=gt[Ye])}return et}}const Oo=Jn(vn),Zn=Jn(lt),Fo=Jn(vn,!0);function Vi(T){if(!D(T))return{};if(Tt)return Tt(T);var L=function(){};L.prototype=T;var et=new L;return L.prototype=null,et}function pr(T,L){var et=Vi(T);return L&&Zn(et,L),et}function fi(T){return D(T)?me(T)?T.slice():Oo({},T):T}function Do(T,L){return L(T),T}function Bn(T){return me(T)?T:[T]}function mn(T){return Qt.toPath(T)}function Kr(T,L){for(var et=L.length,at=0;at<et;at++){if(T==null)return;T=T[L[at]]}return et?T:void 0}function Hn(T,L,et){var at=Kr(T,mn(L));return K(at)?et:at}function Or(T,L){for(var et=(L=mn(L)).length,at=0;at<et;at++){var Ct=L[at];if(!kt(T,Ct))return!1;T=T[Ct]}return!!et}function jn(T){return T}function Kn(T){return T=Zn({},T),function(L){return qt(L,T)}}function Cn(T){return T=mn(T),function(L){return Kr(L,T)}}function Sn(T,L,et){if(L===void 0)return T;switch(et??3){case 1:return function(at){return T.call(L,at)};case 3:return function(at,Ct,gt){return T.call(L,at,Ct,gt)};case 4:return function(at,Ct,gt,Bt){return T.call(L,at,Ct,gt,Bt)}}return function(){return T.apply(L,arguments)}}function lo(T,L,et){return T==null?jn:Zt(T)?Sn(T,L,et):D(T)&&!me(T)?Kn(T):Cn(T)}function ln(T,L){return lo(T,L,1/0)}function he(T,L,et){return Qt.iteratee!==ln?Qt.iteratee(T,L):lo(T,L,et)}function Qn(T,L,et){L=he(L,et);for(var at=lt(T),Ct=at.length,gt={},Bt=0;Bt<Ct;Bt++){var ue=at[Bt];gt[ue]=L(T[ue],ue,T)}return gt}function Yo(){}function to(T){return T==null?Yo:function(L){return Hn(T,L)}}function nn(T,L,et){var at=Array(Math.max(0,T));L=Sn(L,et,1);for(var Ct=0;Ct<T;Ct++)at[Ct]=L(Ct);return at}function Lo(T,L){return L==null&&(L=T,T=0),T+Math.floor(Math.random()*(L-T+1))}Qt.toPath=Bn,Qt.iteratee=ln;const Io=Date.now||function(){return new Date().getTime()};function Yr(T){var L=function(gt){return T[gt]},et="(?:"+lt(T).join("|")+")",at=RegExp(et),Ct=RegExp(et,"g");return function(gt){return gt=gt==null?"":""+gt,at.test(gt)?gt.replace(Ct,L):gt}}const Jt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},ke=Yr(Jt),M=Yr(En(Jt)),tt=Qt.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var zt=/(.)^/,be={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Oe=/\\|'|\r|\n|\u2028|\u2029/g;function ge(T){return"\\"+be[T]}var Ke=/^\s*(\w|\$)+\s*$/;function Wn(T,L,et){!L&&et&&(L=et),L=Fo({},L,Qt.templateSettings);var at=RegExp([(L.escape||zt).source,(L.interpolate||zt).source,(L.evaluate||zt).source].join("|")+"|$","g"),Ct=0,gt="__p+='";T.replace(at,function(Ye,un,mo,po,Po){return gt+=T.slice(Ct,Po).replace(Oe,ge),Ct=Po+Ye.length,un?gt+=`'+
((__t=(`+un+`))==null?'':_.escape(__t))+
'`:mo?gt+=`'+
((__t=(`+mo+`))==null?'':__t)+
'`:po&&(gt+=`';
`+po+`
__p+='`),Ye}),gt+=`';
`;var Bt,ue=L.variable;if(ue){if(!Ke.test(ue))throw new Error("variable is not a bare identifier: "+ue)}else gt=`with(obj||{}){
`+gt+`}
`,ue="obj";gt=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+gt+`return __p;
`;try{Bt=new Function(ue,"_",gt)}catch(Ye){throw Ye.source=gt,Ye}var Ne=function(Ye){return Bt.call(this,Ye,Qt)};return Ne.source="function("+ue+`){
`+gt+"}",Ne}function Mn(T,L,et){var at=(L=mn(L)).length;if(!at)return Zt(et)?et.call(T):et;for(var Ct=0;Ct<at;Ct++){var gt=T?.[L[Ct]];gt===void 0&&(gt=et,Ct=at),T=Zt(gt)?gt.call(T):gt}return T}var dr=0;function Xr(T){var L=++dr+"";return T?T+L:L}function hi(T){var L=Qt(T);return L._chain=!0,L}function Rr(T,L,et,at,Ct){if(!(at instanceof L))return T.apply(et,Ct);var gt=Vi(T.prototype),Bt=T.apply(gt,Ct);return D(Bt)?Bt:gt}var Fr=Ft(function(T,L){var et=Fr.placeholder,at=function(){for(var Ct=0,gt=L.length,Bt=Array(gt),ue=0;ue<gt;ue++)Bt[ue]=L[ue]===et?arguments[Ct++]:L[ue];for(;Ct<arguments.length;)Bt.push(arguments[Ct++]);return Rr(T,at,this,this,Bt)};return at});Fr.placeholder=Qt;const gi=Fr,Hr=Ft(function(T,L,et){if(!Zt(T))throw new TypeError("Bind must be called on a function");var at=Ft(function(Ct){return Rr(T,at,L,this,et.concat(Ct))});return at}),vo=He(A);function Ur(T,L,et,at){if(at=at||[],L||L===0){if(L<=0)return at.concat(T)}else L=1/0;for(var Ct=at.length,gt=0,Bt=A(T);gt<Bt;gt++){var ue=T[gt];if(vo(ue)&&(me(ue)||de(ue)))if(L>1)Ur(ue,L-1,et,at),Ct=at.length;else for(var Ne=0,Ye=ue.length;Ne<Ye;)at[Ct++]=ue[Ne++];else et||(at[Ct++]=ue)}return at}const eo=Ft(function(T,L){var et=(L=Ur(L,!1,!1)).length;if(et<1)throw new Error("bindAll must be passed function names");for(;et--;){var at=L[et];T[at]=Hr(T[at],T)}return T});function Xa(T,L){var et=function(at){var Ct=et.cache,gt=""+(L?L.apply(this,arguments):at);return kt(Ct,gt)||(Ct[gt]=T.apply(this,arguments)),Ct[gt]};return et.cache={},et}const Ri=Ft(function(T,L,et){return setTimeout(function(){return T.apply(null,et)},L)}),zs=gi(Ri,Qt,1);function aa(T,L,et){var at,Ct,gt,Bt,ue=0;et||(et={});var Ne=function(){ue=et.leading===!1?0:Io(),at=null,Bt=T.apply(Ct,gt),at||(Ct=gt=null)},Ye=function(){var un=Io();ue||et.leading!==!1||(ue=un);var mo=L-(un-ue);return Ct=this,gt=arguments,mo<=0||mo>L?(at&&(clearTimeout(at),at=null),ue=un,Bt=T.apply(Ct,gt),at||(Ct=gt=null)):at||et.trailing===!1||(at=setTimeout(Ne,mo)),Bt};return Ye.cancel=function(){clearTimeout(at),ue=0,at=Ct=gt=null},Ye}function fr(T,L,et){var at,Ct,gt,Bt,ue,Ne=function(){var un=Io()-Ct;L>un?at=setTimeout(Ne,L-un):(at=null,et||(Bt=T.apply(ue,gt)),at||(gt=ue=null))},Ye=Ft(function(un){return ue=this,gt=un,Ct=Io(),at||(at=setTimeout(Ne,L),et&&(Bt=T.apply(ue,gt))),Bt});return Ye.cancel=function(){clearTimeout(at),at=gt=ue=null},Ye}function To(T,L){return gi(L,T)}function Jr(T){return function(){return!T.apply(this,arguments)}}function Zr(){var T=arguments,L=T.length-1;return function(){for(var et=L,at=T[L].apply(this,arguments);et--;)at=T[et].call(this,at);return at}}function Xo(T,L){return function(){if(--T<1)return L.apply(this,arguments)}}function sa(T,L){var et;return function(){return--T>0&&(et=L.apply(this,arguments)),T<=1&&(L=null),et}}const Bs=gi(sa,2);function Qr(T,L,et){L=he(L,et);for(var at,Ct=lt(T),gt=0,Bt=Ct.length;gt<Bt;gt++)if(L(T[at=Ct[gt]],at,T))return at}function Ws(T){return function(L,et,at){et=he(et,at);for(var Ct=A(L),gt=T>0?0:Ct-1;gt>=0&&gt<Ct;gt+=T)if(et(L[gt],gt,L))return gt;return-1}}const Tr=Ws(1),vi=Ws(-1);function la(T,L,et,at){for(var Ct=(et=he(et,at,1))(L),gt=0,Bt=A(T);gt<Bt;){var ue=Math.floor((gt+Bt)/2);et(T[ue])<Ct?gt=ue+1:Bt=ue}return gt}function no(T,L,et){return function(at,Ct,gt){var Bt=0,ue=A(at);if(typeof gt=="number")T>0?Bt=gt>=0?gt:Math.max(gt+ue,Bt):ue=gt>=0?Math.min(gt+1,ue):gt+ue+1;else if(et&&gt&&ue)return at[gt=et(at,Ct)]===Ct?gt:-1;if(Ct!=Ct)return(gt=L(O.call(at,Bt,ue),ae))>=0?gt+Bt:-1;for(gt=T>0?Bt:ue-1;gt>=0&&gt<ue;gt+=T)if(at[gt]===Ct)return gt;return-1}}const ca=no(1,Tr,la),mi=no(-1,vi);function Pr(T,L,et){var at=(vo(T)?Tr:Qr)(T,L,et);if(at!==void 0&&at!==-1)return T[at]}function Jo(T,L){return Pr(T,Kn(L))}function Ho(T,L,et){var at,Ct;if(L=Sn(L,et),vo(T))for(at=0,Ct=T.length;at<Ct;at++)L(T[at],at,T);else{var gt=lt(T);for(at=0,Ct=gt.length;at<Ct;at++)L(T[gt[at]],gt[at],T)}return T}function Zo(T,L,et){L=he(L,et);for(var at=!vo(T)&&lt(T),Ct=(at||T).length,gt=Array(Ct),Bt=0;Bt<Ct;Bt++){var ue=at?at[Bt]:Bt;gt[Bt]=L(T[ue],ue,T)}return gt}function Er(T){return function(L,et,at,Ct){var gt=arguments.length>=3;return function(Bt,ue,Ne,Ye){var un=!vo(Bt)&&lt(Bt),mo=(un||Bt).length,po=T>0?0:mo-1;for(Ye||(Ne=Bt[un?un[po]:po],po+=T);po>=0&&po<mo;po+=T){var Po=un?un[po]:po;Ne=ue(Ne,Bt[Po],Po,Bt)}return Ne}(L,Sn(et,Ct,4),at,gt)}}const ti=Er(1),Fi=Er(-1);function Yn(T,L,et){var at=[];return L=he(L,et),Ho(T,function(Ct,gt,Bt){L(Ct,gt,Bt)&&at.push(Ct)}),at}function Ja(T,L,et){return Yn(T,Jr(he(L)),et)}function ua(T,L,et){L=he(L,et);for(var at=!vo(T)&&lt(T),Ct=(at||T).length,gt=0;gt<Ct;gt++){var Bt=at?at[gt]:gt;if(!L(T[Bt],Bt,T))return!1}return!0}function ei(T,L,et){L=he(L,et);for(var at=!vo(T)&&lt(T),Ct=(at||T).length,gt=0;gt<Ct;gt++){var Bt=at?at[gt]:gt;if(L(T[Bt],Bt,T))return!0}return!1}function co(T,L,et,at){return vo(T)||(T=dn(T)),(typeof et!="number"||at)&&(et=0),ca(T,L,et)>=0}const Uo=Ft(function(T,L,et){var at,Ct;return Zt(L)?Ct=L:(L=mn(L),at=L.slice(0,-1),L=L[L.length-1]),Zo(T,function(gt){var Bt=Ct;if(!Bt){if(at&&at.length&&(gt=Kr(gt,at)),gt==null)return;Bt=gt[L]}return Bt==null?Bt:Bt.apply(gt,et)})});function zr(T,L){return Zo(T,Cn(L))}function hr(T,L){return Yn(T,Kn(L))}function kr(T,L,et){var at,Ct,gt=-1/0,Bt=-1/0;if(L==null||typeof L=="number"&&typeof T[0]!="object"&&T!=null)for(var ue=0,Ne=(T=vo(T)?T:dn(T)).length;ue<Ne;ue++)(at=T[ue])!=null&&at>gt&&(gt=at);else L=he(L,et),Ho(T,function(Ye,un,mo){((Ct=L(Ye,un,mo))>Bt||Ct===-1/0&&gt===-1/0)&&(gt=Ye,Bt=Ct)});return gt}function pa(T,L,et){var at,Ct,gt=1/0,Bt=1/0;if(L==null||typeof L=="number"&&typeof T[0]!="object"&&T!=null)for(var ue=0,Ne=(T=vo(T)?T:dn(T)).length;ue<Ne;ue++)(at=T[ue])!=null&&at<gt&&(gt=at);else L=he(L,et),Ho(T,function(Ye,un,mo){((Ct=L(Ye,un,mo))<Bt||Ct===1/0&&gt===1/0)&&(gt=Ye,Bt=Ct)});return gt}function Qo(T,L,et){if(L==null||et)return vo(T)||(T=dn(T)),T[Lo(T.length-1)];var at=vo(T)?fi(T):dn(T),Ct=A(at);L=Math.max(Math.min(L,Ct),0);for(var gt=Ct-1,Bt=0;Bt<L;Bt++){var ue=Lo(Bt,gt),Ne=at[Bt];at[Bt]=at[ue],at[ue]=Ne}return at.slice(0,L)}function $s(T){return Qo(T,1/0)}function qs(T,L,et){var at=0;return L=he(L,et),zr(Zo(T,function(Ct,gt,Bt){return{value:Ct,index:at++,criteria:L(Ct,gt,Bt)}}).sort(function(Ct,gt){var Bt=Ct.criteria,ue=gt.criteria;if(Bt!==ue){if(Bt>ue||Bt===void 0)return 1;if(Bt<ue||ue===void 0)return-1}return Ct.index-gt.index}),"value")}function da(T,L){return function(et,at,Ct){var gt=L?[[],[]]:{};return at=he(at,Ct),Ho(et,function(Bt,ue){var Ne=at(Bt,ue,et);T(gt,Bt,Ne)}),gt}}const Gs=da(function(T,L,et){kt(T,et)?T[et].push(L):T[et]=[L]}),yi=da(function(T,L,et){T[et]=L}),Za=da(function(T,L,et){kt(T,et)?T[et]++:T[et]=1}),Je=da(function(T,L,et){T[et?0:1].push(L)},!0);var Jl=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function zo(T){return T?me(T)?O.call(T):xt(T)?T.match(Jl):vo(T)?Zo(T,jn):dn(T):[]}function Qa(T){return T==null?0:vo(T)?T.length:lt(T).length}function Br(T,L,et){return L in et}const Hi=Ft(function(T,L){var et={},at=L[0];if(T==null)return et;Zt(at)?(L.length>1&&(at=Sn(at,L[1])),L=vn(T)):(at=Br,L=Ur(L,!1,!1),T=Object(T));for(var Ct=0,gt=L.length;Ct<gt;Ct++){var Bt=L[Ct],ue=T[Bt];at(ue,Bt,T)&&(et[Bt]=ue)}return et}),oo=Ft(function(T,L){var et,at=L[0];return Zt(at)?(at=Jr(at),L.length>1&&(et=L[1])):(L=Zo(Ur(L,!1,!1),String),at=function(Ct,gt){return!co(L,gt)}),Hi(T,at,et)});function $n(T,L,et){return O.call(T,0,Math.max(0,T.length-(L==null||et?1:L)))}function uo(T,L,et){return T==null||T.length<1?L==null||et?void 0:[]:L==null||et?T[0]:$n(T,T.length-L)}function gr(T,L,et){return O.call(T,L==null||et?1:L)}function fa(T,L,et){return T==null||T.length<1?L==null||et?void 0:[]:L==null||et?T[T.length-1]:gr(T,Math.max(0,T.length-L))}function Ks(T){return Yn(T,Boolean)}function fn(T,L){return Ur(T,L,!1)}const Dn=Ft(function(T,L){return L=Ur(L,!0,!0),Yn(T,function(et){return!co(L,et)})}),Ui=Ft(function(T,L){return Dn(T,L)});function tr(T,L,et,at){ot(L)||(at=et,et=L,L=!1),et!=null&&(et=he(et,at));for(var Ct=[],gt=[],Bt=0,ue=A(T);Bt<ue;Bt++){var Ne=T[Bt],Ye=et?et(Ne,Bt,T):Ne;L&&!et?(Bt&&gt===Ye||Ct.push(Ne),gt=Ye):et?co(gt,Ye)||(gt.push(Ye),Ct.push(Ne)):co(Ct,Ne)||Ct.push(Ne)}return Ct}const bi=Ft(function(T){return tr(Ur(T,!0,!0))});function Ys(T){for(var L=[],et=arguments.length,at=0,Ct=A(T);at<Ct;at++){var gt=T[at];if(!co(L,gt)){var Bt;for(Bt=1;Bt<et&&co(arguments[Bt],gt);Bt++);Bt===et&&L.push(gt)}}return L}function _i(T){for(var L=T&&kr(T,A).length||0,et=Array(L),at=0;at<L;at++)et[at]=zr(T,at);return et}const Xs=Ft(_i);function zi(T,L){for(var et={},at=0,Ct=A(T);at<Ct;at++)L?et[T[at]]=L[at]:et[T[at][0]]=T[at][1];return et}function Ar(T,L,et){L==null&&(L=T||0,T=0),et||(et=L<T?-1:1);for(var at=Math.max(Math.ceil((L-T)/et),0),Ct=Array(at),gt=0;gt<at;gt++,T+=et)Ct[gt]=T;return Ct}function Js(T,L){if(L==null||L<1)return[];for(var et=[],at=0,Ct=T.length;at<Ct;)et.push(O.call(T,at,at+=L));return et}function ts(T,L){return T._chain?Qt(L).chain():L}function ha(T){return Ho(kn(T),function(L){var et=Qt[L]=T[L];Qt.prototype[L]=function(){var at=[this._wrapped];return _.apply(at,arguments),ts(this,et.apply(Qt,at))}}),Qt}Ho(["pop","push","reverse","shift","sort","splice","unshift"],function(T){var L=F[T];Qt.prototype[T]=function(){var et=this._wrapped;return et!=null&&(L.apply(et,arguments),T!=="shift"&&T!=="splice"||et.length!==0||delete et[0]),ts(this,et)}}),Ho(["concat","join","slice"],function(T){var L=F[T];Qt.prototype[T]=function(){var et=this._wrapped;return et!=null&&(et=L.apply(et,arguments)),ts(this,et)}});const es=Qt;var Bi=ha($);Bi._=Bi;const Wi=Bi}},$e={};function _e(C){var q=$e[C];if(q!==void 0)return q.exports;var it=$e[C]={exports:{}};return Gn[C].call(it.exports,it,it.exports,_e),it.exports}_e.n=C=>{var q=C&&C.__esModule?()=>C.default:()=>C;return _e.d(q,{a:q}),q},_e.d=(C,q)=>{for(var it in q)_e.o(q,it)&&!_e.o(C,it)&&Object.defineProperty(C,it,{enumerable:!0,get:q[it]})},_e.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),_e.o=(C,q)=>Object.prototype.hasOwnProperty.call(C,q),_e.r=C=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(C,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(C,"__esModule",{value:!0})};var Be={};return(()=>{"use strict";_e.d(Be,{default:()=>Ub});var C=_e(5706),q=_e(1166);function it(a){for(var o=[],t=1;t<arguments.length;t++)o[t-1]=arguments[t];var e=a.raw;return e.reduce(function(n,r,l){var p=o[l-1],d=e[l-1];return Array.isArray(p)?p=p.join(""):d&&d.slice(-1)==="$"?n=n.slice(0,-1):p=(0,q.escape)(p),n+p+r})}const $=function(){return{stylePrefix:"gjs-",components:"",style:"",fromElement:!1,projectData:void 0,noticeOnUnload:!0,showOffsets:!1,showOffsetsSelected:!1,forceClass:!0,height:"900px",width:"100%",log:["warning","error"],baseCss:"",protectedCss:"* { box-sizing: border-box; } body {margin: 0;}",canvasCss:"",defaultCommand:"select-comp",showToolbar:!0,showDevices:!0,devicePreviewMode:!1,mediaCondition:"max-width",tagVarStart:"{[ ",tagVarEnd:" ]}",jsInHtml:!0,nativeDnD:!0,multipleSelection:!0,optsHtml:{},optsCss:{},avoidInlineStyle:!0,avoidDefaults:!0,clearStyles:!1,listenToEl:[],cssIcons:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css",icons:{close:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',move:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z"/></svg>',plus:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" /></svg>',caret:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M7,10L12,15L17,10H7Z" /></svg>',delete:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" /></svg>',copy:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z" /></svg>',arrowUp:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z" /></svg>',chevron:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z" /></svg>',eye:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z" /></svg>',eyeOff:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z" /></svg>'},i18n:{},undoManager:{},assetManager:{},canvas:{},layerManager:{},storageManager:{},richTextEditor:{},domComponents:{},modal:{},codeManager:{},panels:{},commands:{},cssComposer:{},selectorManager:{},deviceManager:{},styleManager:{},blockManager:{},traitManager:{},textViewCode:"Code",keepUnusedStyles:!1,customUI:!1,telemetry:!0}};var pt=_e(4193),R=_e.n(pt),F=_e(7774),H,E=_e(9156),_=(H=function(a,o){return H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},H(a,o)},function(a,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function t(){this.constructor=a}H(a,o),a.prototype=o===null?Object.create(o):(t.prototype=o.prototype,new t)}),O=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return _(o,a),o}(E.Kx);const x=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return _(o,a),o.prototype.getByComponent=function(t){var e=this;return this.filter(function(n){return e.getComponent(n)===t})[0]},o.prototype.addComponent=function(t,e){var n=this,r=((0,C.isArray)(t)?t:[t]).filter(function(l){return!n.hasComponent(l)}).map(function(l){return new O({component:l})})[0];return this.push(r,e)},o.prototype.getComponent=function(t){return t.get("component")},o.prototype.hasComponent=function(t){var e=this.getByComponent(t);return e&&this.contains(e)},o.prototype.lastComponent=function(){var t=this.last();return t?this.getComponent(t):void 0},o.prototype.allComponents=function(){var t=this;return this.map(function(e){return t.getComponent(e)}).filter(function(e){return e})},o.prototype.removeComponent=function(t,e){var n=this,r=((0,C.isArray)(t)?t:[t]).map(function(l){return n.getByComponent(l)});return this.remove(r,e)},o}(E.pM);var N=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),V=function(){return V=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},V.apply(this,arguments)},Y=function(a,o,t){if(t||arguments.length===2)for(var e,n=0,r=o.length;n<r;n++)!e&&n in o||(e||(e=Array.prototype.slice.call(o,0,n)),e[n]=o[n]);return a.concat(e||Array.prototype.slice.call(o))},st=function(){function a(o,t,e){this.debounced=[],this.collections=[],this.cls=[],this.events={},this._em=o,this._name=t;var n=this.name.charAt(0).toLowerCase()+this.name.slice(1),r=(0,C.isUndefined)(o.config[n])?o.config[this.name]:o.config[n],l=r===!0?{}:r||{};l.pStylePrefix=o.config.pStylePrefix||"",(0,C.isUndefined)(r)||r||(l._disable=1),l.em=o,this._config=(0,q.deepMerge)(e||{},l)}return Object.defineProperty(a.prototype,"em",{get:function(){return this._em},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),a.prototype.render=function(o){},a.prototype.postLoad=function(o){},a.prototype.onInit=function(){},Object.defineProperty(a.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),a.prototype.getConfig=function(o){return o?this.config[o]:this.config},a.prototype.__logWarn=function(o,t){t===void 0&&(t={}),this.em.logWarning("[".concat(this.name,"]: ").concat(o),t)},a.prototype.destroy=function(){this.__destroy()},a.prototype.__destroy=function(){var o,t,e;(o=this.view)===null||o===void 0||o.remove(),(t=this.state)===null||t===void 0||t.stopListening(),(e=this.state)===null||e===void 0||e.clear(),this.debounced.forEach(function(n){return n.cancel()}),this.collections.forEach(function(n){n.stopListening(),n.reset()})},a.prototype.__appendTo=function(){var o=this.getConfig().appendTo;if(o){var t=(0,C.isElement)(o)?o:document.querySelector(o);if(!t)return this.__logWarn('"appendTo" element not found');t.appendChild(this.render())}},a}();const ct=st;var Tt=function(a){function o(t,e,n,r,l,p){p===void 0&&(p={});var d=a.call(this,t,e,l)||this;return d.cls=[],d.private=!1,d.all=n,r&&(d.events=r),!p.skipListen&&d.__initListen(),d}return N(o,a),o.prototype.postLoad=function(t){},o.prototype.render=function(t){},o.prototype.getProjectData=function(t){var e={},n=this.storageKey;return n&&(e[n]=t||this.getAll()),e},o.prototype.loadProjectData=function(t,e){t===void 0&&(t={}),e===void 0&&(e={});var n=e.all,r=e.onResult,l=e.reset,p=this.storageKey,d={action:"load"},g=n||this.all,h=t[p];if(typeof h=="string")try{h=JSON.parse(h)}catch{this.__logWarn("Data parsing failed",{input:h})}return l&&h&&g.reset(void 0,d),r?h&&r(h,d):h&&(0,q.isDef)(h.length)&&g.reset(h,d),h},o.prototype.clear=function(t){t===void 0&&(t={});var e=this.all;return e&&e.reset(void 0,t),this},o.prototype.getAll=function(){return Y([],this.all.models,!0)},o.prototype.getAllMap=function(){return this.getAll().reduce(function(t,e){return t[e.get(e.idAttribute)]=e,t},{})},o.prototype.__initListen=function(t){t===void 0&&(t={});var e=this,n=e.all,r=e.em,l=e.events;n&&r&&n.on("add",function(p,d,g){return r.trigger(l.add,p,g)}).on("remove",function(p,d,g){return r.trigger(l.remove,p,g)}).on("change",function(p,d){return r.trigger(l.update,p,p.changedAttributes(),d)}).on("all",this.__catchAllEvent,this),this.cls=[n].concat(t.collections||[]),(t.propagate||[]).forEach(function(p){var d=p.entity,g=p.event;d.on("all",function(h,m,w,k){var z=V({event:h},k||w);[r,n].map(function(B){return B.trigger(g,m,z)})})})},o.prototype.__remove=function(t,e){var n=this;e===void 0&&(e={});var r=this.em,l=(0,C.isString)(t)?this.get(t):t,p=function(){return l&&n.all.remove(l,e),l};return!e.silent&&r?.trigger(this.events.removeBefore,l,p,e),!e.abort&&p()},o.prototype.__catchAllEvent=function(t,e,n,r){var l=this.em,p=this.events,d=r||n;l&&p.all&&l.trigger(p.all,{event:t,model:e,options:d}),this.__onAllEvent()},o.prototype.__appendTo=function(t){var e=this.config.appendTo;if(e){var n=(0,C.isElement)(e)?e:document.querySelector(e);if(!n)return this.__logWarn('"appendTo" element not found');n.appendChild(this.render(t))}},o.prototype.__onAllEvent=function(){},o.prototype._createId=function(t){t===void 0&&(t=16);var e,n=this.getAll().length+t,r=this.getAllMap();do e=(0,q.createId)(n);while(r[e]);return e},o.prototype.__listenAdd=function(t,e){var n=this;t.on("add",function(r,l,p){return n.em.trigger(e,r,p)})},o.prototype.__listenRemove=function(t,e){var n=this;t.on("remove",function(r,l,p){return n.em.trigger(e,r,p)})},o.prototype.__listenUpdate=function(t,e){var n=this;t.on("change",function(r,l){return n.em.trigger(e,r,r.changedAttributes(),l)})},o.prototype.__destroy=function(){var t;this.cls.forEach(function(e){e.stopListening(),e.reset()}),(t=this.view)===null||t===void 0||t.remove(),this.view=void 0},o}(st);const Et=function(){return{stylePrefix:"cv-",scripts:[],styles:[],customBadgeLabel:void 0,autoscrollLimit:50,extHl:!1,frameContent:"<!DOCTYPE html>",frameStyle:`
    body { background-color: #fff }
    * ::-webkit-scrollbar-track { background: rgba(0, 0, 0, 0.1) }
    * ::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.2) }
    * ::-webkit-scrollbar { width: 10px }
  `,notTextable:["button","a","input[type=checkbox]","input[type=radio]"],allowExternalDrop:!0}};var vt,ft=_e(7058);(function(a){a.add="device:add",a.addBefore="device:add:before",a.remove="device:remove",a.removeBefore="device:remove:before",a.select="device:select",a.selectBefore="device:select:before",a.update="device:update",a.all="device"})(vt||(vt={}));const wt=vt;var Ot;(function(a){a.add="page:add",a.addBefore="page:add:before",a.remove="page:remove",a.removeBefore="page:remove:before",a.select="page:select",a.selectBefore="page:select:before",a.update="page:update",a.all="page"})(Ot||(Ot={}));const te=Ot;var Ft=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),D=function(a){function o(t,e,n){return a.call(this,e,{module:t,modelConstructor:n})||this}return Ft(o,a),o.prototype.add=function(t,e){var n,r=this,l=(0,C.isArray)(t)?t:(0,C.isUndefined)(t)?void 0:[t];return l=(n=l?.map(function(p){return p instanceof r.newModel?p:new r.newModel(r.module,p)}))!==null&&n!==void 0?n:[void 0],a.prototype.add.call(this,(0,C.isArray)(t)?l:l[0],e)},o.prototype.preinitialize=function(t,e){this.newModel=e.modelConstructor,this.module=e.module},o}(E.pM);const W=D;var K;(function(a){a.dragEnter="canvas:dragenter",a.dragOver="canvas:dragover",a.dragEnd="canvas:dragend",a.dragData="canvas:dragdata",a.drop="canvas:drop",a.spot="canvas:spot",a.spotAdd="canvas:spot:add",a.spotUpdate="canvas:spot:update",a.spotRemove="canvas:spot:remove",a.coords="canvas:coords",a.zoom="canvas:zoom",a.pointer="canvas:pointer",a.refresh="canvas:refresh",a.frameLoad="canvas:frame:load",a.frameLoadHead="canvas:frame:load:head",a.frameLoadBody="canvas:frame:load:body",a.frameUnload="canvas:frame:unload"})(K||(K={}));const ot=K;var ht=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),G=function(){return G=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},G.apply(this,arguments)},xt=function(a,o,t){if(t||arguments.length===2)for(var e,n=0,r=o.length;n<r;n++)!e&&n in o||(e||(e=Array.prototype.slice.call(o,0,n)),e[n]=o[n]);return a.concat(e||Array.prototype.slice.call(o))},I="__aw",Nt="__ah",Pt=function(a,o){var t,e=a.get(o),n=(t=a.view)===null||t===void 0?void 0:t.el[o==="width"?"offsetWidth":"offsetHeight"];return(0,C.isNumber)(e)?e:(0,C.isString)(e)&&e.endsWith("px")?parseFloat(e):n||0},ne=function(a){function o(t,e){var n=a.call(this,t,e)||this,r=n.em,l=n.attributes,p=l.styles,d=l.component,g=r.Components,h=g.getConfig(),m=r.Css.getAll(),w={},k={em:r,config:h,frame:n,idMap:w};if(!(0,q.isComponent)(d)){var z=(0,q.isObject)(d)?d:{components:d};!z.type&&(z.type="wrapper");var B=g.getType("wrapper").model;n.set("component",new B(z,k))}if(p){if(!(0,q.isObject)(p)){var nt=p;(0,C.keys)(w).length&&(nt=(0,C.isString)(nt)?r.Parser.parseCss(nt):nt,r.Css.checkId(nt,{idMap:w})),m.add(nt),n.set("styles",m)}}else n.set("styles",m);return!e.width&&n.set(I,1),!e.height&&n.set(Nt,1),!n.id&&n.set("id",(0,q.createId)()),n}return ht(o,a),o.prototype.defaults=function(){return{x:0,y:0,changesCount:0,attributes:{},width:null,height:null,head:[],component:"",styles:"",refFrame:null,_undo:!0,_undoexc:["changesCount"]}},Object.defineProperty(o.prototype,"width",{get:function(){return Pt(this,"width")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"height",{get:function(){return Pt(this,"height")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"head",{get:function(){return this.get("head")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"refFrame",{get:function(){return this.get("refFrame")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"root",{get:function(){var t=this.refFrame;return t?.getComponent()||this.getComponent()},enumerable:!1,configurable:!0}),o.prototype.initRefs=function(){var t=this.refFrame;if((0,C.isString)(t)){var e=this.module.framesById[t];e&&this.set({refFrame:e},{silent:!0})}},o.prototype.getBoxRect=function(){var t=this.attributes;return{x:t.x,y:t.y,width:this.width,height:this.height}},o.prototype.onRemove=function(){!this.refFrame&&this.getComponent().remove({root:1})},o.prototype.changesUp=function(t){t===void 0&&(t={}),t.temporary||t.noCount||t.avoidStore||this.set("changesCount",this.get("changesCount")+1)},o.prototype.getComponent=function(){return this.get("component")},o.prototype.getStyles=function(){return this.get("styles")},o.prototype.disable=function(){this.trigger("disable")},o.prototype.remove=function(){var t;(t=this.view)===null||t===void 0||t.remove(),this.view=void 0;var e=this.collection;return e&&e.remove(this)},o.prototype.getHead=function(){return xt([],this.head,!0)},o.prototype.setHead=function(t){return this.set("head",xt([],t,!0))},o.prototype.addHeadItem=function(t){this.head.push(t)},o.prototype.getHeadByAttr=function(t,e,n){return this.head.filter(function(r){return r.attributes&&r.attributes[t]==e&&(!n||n===r.tag)})[0]},o.prototype.removeHeadByAttr=function(t,e,n){var r=this.getHeadByAttr(t,e,n),l=this.head.indexOf(r);l>=0&&this.head.splice(l,1)},o.prototype.addLink=function(t){var e="link";!this.getHeadByAttr("href",t,e)&&this.addHeadItem({tag:e,attributes:{href:t,rel:"stylesheet"}})},o.prototype.removeLink=function(t){this.removeHeadByAttr("href",t,"link")},o.prototype.addScript=function(t){var e="script";!this.getHeadByAttr("src",t,e)&&this.addHeadItem({tag:e,attributes:{src:t}})},o.prototype.removeScript=function(t){this.removeHeadByAttr("src",t,"script")},o.prototype.getPage=function(){var t;return(t=this.collection)===null||t===void 0?void 0:t.page},o.prototype._emitUpdated=function(t){t===void 0&&(t={}),this.em.trigger("frame:updated",G({frame:this},t))},o.prototype._emitUnload=function(){this._emitWithEditor(ot.frameUnload,{frame:this})},o.prototype._emitWithEditor=function(t,e){[this.em,this].forEach(function(n){return n?.trigger(t,e)})},o.prototype.hasAutoHeight=function(){return!(this.attributes.height!=="auto"&&!this.config.infiniteCanvas)},o.prototype.toJSON=function(t){t===void 0&&(t={});var e=ft.A.prototype.toJSON.call(this,t),n=(0,C.result)(this,"defaults");return t.fromUndo&&delete e.component,delete e.styles,delete e.changesCount,e[I]&&delete e.width,e[Nt]&&delete e.height,e.refFrame&&(e.refFrame=e.refFrame.id,delete e.component),(0,C.forEach)(e,function(r,l){l.indexOf("_")===0&&delete e[l]}),(0,C.forEach)(n,function(r,l){e[l]===r&&delete e[l]}),(0,C.forEach)(["attributes","head"],function(r){(0,C.isEmpty)(e[r])&&delete e[r]}),e},o}(ft.A);const _t=ne;var Ut=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Ht=function(a){function o(t,e){e===void 0&&(e=[]);var n=a.call(this,t,e,_t)||this;return n.loadedItems=0,n.itemsToLoad=0,(0,C.bindAll)(n,"itemLoaded"),n.on("add",n.onAdd),n.on("reset",n.onReset),n.on("remove",n.onRemove),n.forEach(function(r){return n.onAdd(r)}),n}return Ut(o,a),o.prototype.onAdd=function(t){this.module.framesById[t.id]=t},o.prototype.onReset=function(t,e){var n=this;(e?.previousModels||[]).map(function(r){return n.onRemove(r)})},o.prototype.onRemove=function(t){t.onRemove(),delete this.module.framesById[t.id]},o.prototype.initRefs=function(){this.forEach(function(t){return t.initRefs()})},o.prototype.itemLoaded=function(){this.loadedItems++,this.loadedItems>=this.itemsToLoad&&(this.trigger("loaded:all"),this.listenToLoadItems(!1))},o.prototype.listenToLoad=function(){this.loadedItems=0,this.itemsToLoad=this.length,this.listenToLoadItems(!0)},o.prototype.listenToLoadItems=function(t){var e=this;this.forEach(function(n){return n[t?"on":"off"]("loaded",e.itemLoaded)})},o}(W);var ee=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Zt=function(a){function o(t){var e=this,n=t.em,r=t.config,l=r.scripts,p=r.styles;return(e=a.call(this,t,{scripts:l,styles:p})||this).set("frames",new Ht(t)),e.on("change:zoom",e.onZoomChange),e.on("change:x change:y",e.onCoordsChange),e.on("change:pointer change:pointerScreen",e.onPointerChange),e.listenTo(n,"change:device ".concat(wt.update),e.updateDevice),e.listenTo(n,te.select,e._pageUpdated),e}return ee(o,a),o.prototype.defaults=function(){return{frame:"",frames:[],rulers:!1,zoom:100,x:0,y:0,scripts:[],styles:[],pointer:E.lK,pointerScreen:E.lK}},Object.defineProperty(o.prototype,"frames",{get:function(){return this.get("frames")},enumerable:!1,configurable:!0}),o.prototype.init=function(){var t=this.em.Pages._initPage();this.set("frames",t.getFrames()),this.updateDevice({frame:t.getMainFrame()})},o.prototype._pageUpdated=function(t,e){var n=this.em;n.setSelected(),n.get("readyCanvas")&&n.stopDefault(),e?.getFrames().map(function(r){r.disable(),r._emitUnload()}),this.set("frames",t.getFrames()),this.updateDevice({frame:t.getMainFrame()})},o.prototype.updateDevice=function(t){t===void 0&&(t={});var e=this.em,n=e.getDeviceModel(),r=t.frame||e.getCurrentFrameModel();if(r&&n){var l=n.attributes,p=l.width,d=l.height,g=l.minHeight;r.set({width:p,height:d,minHeight:g},{noUndo:1})}},o.prototype.onZoomChange=function(t,e,n){var r=this.em,l=this.module;this.get("zoom")<1&&this.set("zoom",1),r.trigger(l.events.zoom,{options:n})},o.prototype.onCoordsChange=function(){var t=this.em,e=this.module;t.trigger(e.events.coords)},o.prototype.onPointerChange=function(){var t=this.em,e=this.module;t.trigger(e.events.pointer)},o.prototype.getPointerCoords=function(t){t===void 0&&(t=E.x2.World);var e=this.attributes,n=e.pointer,r=e.pointerScreen;return t===E.x2.World?n:r},o}(ft.A);const le=Zt;var ce=_e(179),jt=_e(2225),Xt=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),pe=function(a){function o(t,e){e===void 0&&(e=[]);var n=a.call(this,t,e,ce.A)||this;n.on("add",n.onAdd),n.on("change",n.onChange),n.on("remove",n.onRemove);var r=n.em;n.refreshDbn=(0,C.debounce)(function(){return n.refresh()},0);var l="".concat(jt.I.resize," styleable:change ").concat(jt.I.input," ").concat(jt.I.update," frame:updated undo redo");return n.listenTo(r,l,function(){return n.refreshDbn()}),n}return Xt(o,a),Object.defineProperty(o.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"events",{get:function(){return this.module.events},enumerable:!1,configurable:!0}),o.prototype.refresh=function(){var t=this.em,e=this.events;t.trigger(e.spot)},o.prototype.onAdd=function(t){this.__trgEvent(this.events.spotAdd,{spot:t})},o.prototype.onChange=function(t){this.__trgEvent(this.events.spotUpdate,{spot:t})},o.prototype.onRemove=function(t){this.__trgEvent(this.events.spotRemove,{spot:t})},o.prototype.__trgEvent=function(t,e){this.module.em.trigger(t,e),this.refreshDbn()},o}(W);const me=pe;var kt=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Yt=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return kt(o,a),Object.defineProperty(o.prototype,"pfx",{get:function(){return this.ppfx+this.config.stylePrefix||""},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"ppfx",{get:function(){return this.em.config.stylePrefix||""},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"module",{get:function(){var t,e;return(e=(t=this.model)===null||t===void 0?void 0:t.module)!==null&&e!==void 0?e:this.collection.module},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"config",{get:function(){return this.module.config},enumerable:!1,configurable:!0}),o.prototype.preinitialize=function(t){this.className=""},o}(E.Ss);const de=Yt;var St=_e(6294),ae=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const je=function(a){function o(t,e){t===void 0&&(t={}),e===void 0&&(e=!1);var n=a.call(this,t)||this;return n.itemsView="",n.itemType="type",n.reuseView=!1,n.viewCollection=[],e&&n.listenTo(n.collection,"add",n.addTo),n}return ae(o,a),o.prototype.addTo=function(t){this.add(t)},o.prototype.itemViewNotFound=function(t){},o.prototype.add=function(t,e){var n,r=this.reuseView,l=this.viewCollection,p=e||null,d=t.get(this.itemType);n=t.view&&r?t.view:this.renderView(t,d),l.push(n);var g=n.render().el;p?p.appendChild(g):this.$el.append(g)},o.prototype.render=function(){var t=this,e=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each(function(n){return t.add(n,e)}),this.$el.append(e),this.onRender(),this},o.prototype.onRender=function(){},o.prototype.onRemoveBefore=function(t,e){},o.prototype.onRemove=function(t,e){},o.prototype.remove=function(t){t===void 0&&(t={});var e=this.viewCollection;return this.onRemoveBefore(e,t),this.clearItems(),E.Ss.prototype.remove.apply(this,t),this.onRemove(e,t),this},o.prototype.clearItems=function(){this.viewCollection},o}(de);var He;(function(a){a.mount="css:mount",a.mountBefore="css:mount:before"})(He||(He={}));var qe=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),gn=function(a){function o(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.config=t.config||{};var n=e.model;return e.listenTo(n,"change",e.render),e.listenTo(n,"destroy remove",e.remove),e.listenTo(n.get("selectors"),"change",e.render),n.setView(e),e}return qe(o,a),Object.defineProperty(o.prototype,"frameView",{get:function(){return this.config.frameView},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"em",{get:function(){return this.model.em},enumerable:!1,configurable:!0}),o.prototype.remove=function(){return a.prototype.remove.call(this),this.model.removeView(this),this},o.prototype.updateStyles=function(){this.render()},o.prototype.tagName=function(){return"style"},o.prototype.render=function(){var t=this,e=t.model,n=t.el,r=t.em,l=e.get("important"),p=e.toCSS({important:l}),d={rule:e,ruleView:this,css:p};return r?.trigger(He.mountBefore,d),n.innerHTML=d.css,r?.trigger(He.mount,d),this},o}(E.Ss);const cn=gn;var bt=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const S=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return bt(o,a),o.prototype._createElement=function(){return document.createTextNode("")},o.prototype.render=function(){var t=this.model,e=t.get("important");return this.el.textContent=t.getDeclaration({important:e}),this},o}(cn);var A=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),J=function(a,o){return"".concat(a).concat(o?"-".concat(parseFloat(o)):"")},lt=function(a){function o(t){var e=a.call(this,t)||this;(0,C.bindAll)(e,"sortRules");var n=t.config||{};e.atRules={},e.config=n,e.em=n.em,e.pfx=n.stylePrefix||"",e.className=e.pfx+"rules";var r=e.collection;return e.listenTo(r,"add",e.addTo),e.listenTo(r,"reset",e.render),e}return A(o,a),o.prototype.addTo=function(t){this.addToCollection(t)},o.prototype.addToCollection=function(t,e){if(this.renderStarted){var n,r,l=e||null,p={model:t,config:this.config};if(t.get("atRuleType")==="keyframes"){var d=t.getAtRule(),g=this.atRules[d];if(!g){var h=document.createElement("style");g=document.createTextNode(""),h.appendChild(document.createTextNode("".concat(d,"{"))),h.appendChild(g),h.appendChild(document.createTextNode("}")),this.atRules[d]=g,n=h}r=new S(p),g.appendData(r.render().el.textContent)}else n=(r=new cn(p)).render().el;var m=this.className,w=t.get("mediaText"),k=J(m),z=k;if(w&&(z=J(m,this.getMediaWidth(w))),n){var B=l||this.el,nt=void 0;try{nt=B.querySelector("#".concat(z))}catch{}nt||(nt=B.querySelector("#".concat(k))),nt?.appendChild(n)}return n}},o.prototype.getMediaWidth=function(t){return t&&t.replace("(".concat(this.em.getConfig().mediaCondition,": "),"").replace(")","")},o.prototype.sortRules=function(t,e){var n=(this.em.getConfig().mediaCondition||"").indexOf("min-width")!==-1;return n?(n?t:e)-(n?e:t):0},o.prototype.render=function(){var t=this;this.renderStarted=!0,this.atRules={};var e=this,n=e.em,r=e.$el,l=e.collection,p=this.className,d=document.createDocumentFragment();r.empty();var g=n.Devices.getAll().pluck("priority").sort(this.sortRules);return g.every(function(h){return h})&&g.unshift(0),g.forEach(function(h){return d.appendChild((0,St.a_)("div",{id:J(p,h)}))}),l.each(function(h){return t.addToCollection(h,d)}),r.append(d),r.attr("class",p),this},o}(E.Ss);const Vt=lt;var qt="text/html",Qt=qt,Ie;(function(a){a.html="parse:html",a.htmlRoot="parse:html:root",a.htmlBefore="parse:html:before",a.css="parse:css",a.cssBefore="parse:css:before",a.all="parse"})(Ie||(Ie={}));var We=function(){return We=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},We.apply(this,arguments)},Ue="data-gjs-";const en=function(a,o){return o===void 0&&(o={}),{compTypes:[],modelAttrStart:Ue,getPropAttribute:function(t,e){var n=t.replace(this.modelAttrStart,""),r=e?.length||0,l=e?.substring(0,1),p=e?.substring(r-1),d=e==="true"||e!=="false"&&e;try{d=l=="{"&&p=="}"||l=="["&&p=="]"?JSON.parse(d):d}catch{}return{name:n,value:d}},splitPropsFromAttr:function(t){var e=this;t===void 0&&(t={});var n={},r={};return(0,C.each)(t,function(l,p){if(p.indexOf(e.modelAttrStart)===0){var d=e.getPropAttribute(p,l);n[d.name]=d.value}else r[p]=l}),{props:n,attrs:r}},parseStyle:function(t){for(var e={};t.indexOf("/*")>=0;){var n=t.indexOf("/*"),r=t.indexOf("*/"),l=r>-1?r+2:void 0;t=t.replace(t.slice(n,l),"")}for(var p=t.split(";"),d=0,g=p.length;d<g;d++){var h=p[d].trim();if(h){var m=h.split(":"),w=m[0].trim(),k=m.slice(1).join(":").trim();e[w]?((0,C.isArray)(e[w])||(e[w]=[e[w]]),e[w].push(k)):e[w]=k}}return e},parseClass:function(t){for(var e=[],n=t.split(" "),r=0,l=n.length;r<l;r++){var p=n[r].trim();p&&e.push(p)}return e},parseNodeAttr:function(t,e){for(var n,r,l=e||{},p=t.attributes||[],d=p.length,g=!!(!((n=o?.optionsHtml)===null||n===void 0)&&n.convertDataGjsAttributesHyphens),h=g&&!!l.type&&(0,C.result)((r=a?.Components.getType(l.type))===null||r===void 0?void 0:r.model.prototype,"defaults")||{},m=0;m<d;m++){var w=p[m].nodeName,k=p[m].nodeValue;if(w=="style")l.style=this.parseStyle(k);else if(w=="class")l.classes=this.parseClass(k);else{if(w=="contenteditable")continue;if(w.indexOf(this.modelAttrStart)===0){var z=this.getPropAttribute(w,k),B=z.name;if(g&&!(B in h)){var nt=(0,St._I)(B);B=nt in h?nt:B}l[B]=z.value}else k===""&&t[w]===!0&&(k=!0),l.attributes||(l.attributes={}),l.attributes[w]=k}}return l},detectNode:function(t,e){var n;e===void 0&&(e={});var r=this.compTypes,l={};if(r){var p=(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"".concat(this.modelAttrStart,"type"));if(p)l={type:p};else for(var d=0;d<r.length;d++){var g=r[d],h=g.model.isComponent(t,e);if(h){typeof h!="object"&&(h={type:g.id}),l=h;break}}}return l},parseNode:function(t,e){var n;e===void 0&&(e={});var r=((n=t.content)===null||n===void 0?void 0:n.childNodes)||t.childNodes,l=r.length,p=this.detectNode(t,e);if(!p.tagName){var d=t.tagName||"",g=t.namespaceURI||"";p.tagName=d&&g==="http://www.w3.org/1999/xhtml"?d.toLowerCase():d}if(p=this.parseNodeAttr(t,p),l||"".concat(t.outerHTML).slice(-2)!=="/>"||(p.void=!0),l&&!p.components&&!e.skipChildren){var h=r[0];l===1&&h.nodeType===3?(!p.type&&(p.type="text"),p.components={type:"textnode",content:h.nodeValue}):p.components=this.parseNodes(t,We(We({},e),{inSvg:e.inSvg||p.type==="svg"}))}var m=p.components;if(!p.type&&m?.length){for(var w=o.textTypes,k=w===void 0?[]:w,z=o.textTags,B=z===void 0?[]:z,nt=!0,X=!1,At=0;At<m.length;At++){var It=m[At],Wt=It.type;if(!k.includes(Wt)&&!B.includes(It.tagName)){nt=!1;break}Wt==="textnode"&&(X=!0)}nt&&X&&(p.type="text")}return p},parseNodes:function(t,e){var n;e===void 0&&(e={});for(var r=[],l=((n=t.content)===null||n===void 0?void 0:n.childNodes)||t.childNodes,p=l.length,d=0;d<p;d++){var g=l[d],h=r[r.length-1],m=this.parseNode(g,e);if(m.type==="textnode"){if(h?.type==="textnode"){h.content+=m.content;continue}if(!e.keepEmptyTextNodes){var w=g.nodeValue||"",k=d===0||d===p-1,z=w.includes(`
`);if(w!=" "&&!w.trim()&&(k||z))continue}}!m.tagName&&(0,C.isUndefined)(m.content)||r.push(m)}return r},parse:function(t,e,n){var r,l,p;n===void 0&&(n={});var d=a?.get("Config")||{},g=a?.Parser,h={html:[]},m=We(We(We({},o.optionsHtml),{htmlType:((r=o.optionsHtml)===null||r===void 0?void 0:r.htmlType)||o.htmlType}),n),w=We(We({},m),{asDocument:this.__checkAsDocument(t,m)}),k=We(We({},o),w),z=w.preParser,B=w.asDocument,nt={input:(0,C.isFunction)(z)?z(t,{editor:a?.getEditor()}):t};g?.__emitEvent(Ie.htmlBefore,nt);var X=nt.input,At=(0,C.isFunction)(k.parserHtml)?k.parserHtml(X,w):function(Xn,xo){xo===void 0&&(xo={});var Ir,ji=new DOMParser,Mi=xo.htmlType||Qt,li=Mi===qt,ci=li?Xn:"<div>".concat(Xn,"</div>"),Nr=ji.parseFromString(ci,Mi);if(li){if(xo.asDocument)return Nr;var ui=Nr.head,Vr=Nr.body,xf=ui.querySelectorAll("script");(0,C.each)(xf,function(Ns){return Vr.appendChild(Ns)});var kp=[];(0,C.each)(ui.children,function(Ns){return kp.push(Ns)}),(0,C.each)(kp,function(Ns,Cf){return Vr.insertBefore(Ns,Vr.children[Cf])}),Ir=Vr}else Ir=Nr.firstChild;return Ir}(X,w),It=At,Wt=At;B&&(It=Wt.documentElement,h.doctype=(0,St.LJ)(Wt.doctype));var oe=It.querySelectorAll("script"),ve=oe.length;if(!((0,C.isUndefined)(d.allowScripts)?w.allowScripts:d.allowScripts))for(;ve--;)(l=oe[ve].parentNode)===null||l===void 0||l.removeChild(oe[ve]);if(w.allowUnsafeAttr&&w.allowUnsafeAttrValue||this.__sanitizeNode(It,w),e){for(var we=It.querySelectorAll("style"),Ve=we.length,Ze="";Ve--;)Ze=we[Ve].innerHTML+Ze,(p=we[Ve].parentNode)===null||p===void 0||p.removeChild(we[Ve]);Ze&&(h.css=e.parse(Ze))}g?.__emitEvent(Ie.htmlRoot,{input:X,root:It});var Xe=[];if(B)h.head=this.parseNode(Wt.head,k),h.root=this.parseNodeAttr(It),Xe=this.parseNode(Wt.body,k);else{var Un=this.parseNodes(It,k);Xe=Un.length!==1||k.returnArray?Un:Un[0]}return h.html=Xe,g?.__emitEvent(Ie.html,{input:X,output:h,options:w}),h},__sanitizeNode:function(t,e){var n=this,r=t.attributes||[],l=t.childNodes||[],p=[];(0,C.each)(r,function(d){var g=d.nodeName||"",h=d.nodeValue||"";!e.allowUnsafeAttr&&g.startsWith("on")&&p.push(g),!e.allowUnsafeAttrValue&&h.startsWith("javascript:")&&p.push(g)}),p.map(function(d){return t.removeAttribute(d)}),(0,C.each)(l,function(d){return n.__sanitizeNode(d,e)})},__checkAsDocument:function(t,e){return(0,q.isDef)(e.asDocument)?e.asDocument:(0,C.isFunction)(e.detectDocument)?!!e.detectDocument(t):e.detectDocument?t.toLowerCase().trim().startsWith("<!doctype"):void 0}}};var se;(function(a){a.add="data:add",a.addBefore="data:add:before",a.remove="data:remove",a.removeBefore="data:remove:before",a.update="data:update",a.path="data:path",a.pathSource="data:pathSource:",a.all="data"})(se||(se={}));var vn,U="data-collection",rt="data-collection-item",dt="dataResolver",Mt=function(){function a(o,t,e){this.operator=o,this.statements=t,this.opts=e}return a.prototype.evaluate=function(){var o=this,t=this.statements.map(function(e){return new Oo({condition:e},o.opts).evaluate()});return this.operator.evaluate(t)},a}(),Kt=function(){function a(o,t){this.operationString=o,this.em=t.em}return a.prototype.getOperations=function(){return o=this.operationsEnum,Object.keys(o).filter(function(t){return isNaN(Number(t))}).map(function(t){return o[t]});var o},a}(),Le=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();(function(a){a.equals="equals",a.isTruthy="isTruthy",a.isFalsy="isFalsy",a.isDefined="isDefined",a.isNull="isNull",a.isUndefined="isUndefined",a.isArray="isArray",a.isObject="isObject",a.isString="isString",a.isNumber="isNumber",a.isBoolean="isBoolean",a.isDefaultValue="isDefaultValue"})(vn||(vn={}));var Me,Pn=function(a){function o(){var t=a!==null&&a.apply(this,arguments)||this;return t.operationsEnum=vn,t}return Le(o,a),o.prototype.evaluate=function(t,e){var n;switch(this.operationString){case"equals":return t===e;case"isTruthy":return!!t;case"isFalsy":return!t;case"isDefined":return t!=null;case"isNull":return t===null;case"isUndefined":return t===void 0;case"isArray":return Array.isArray(t);case"isObject":return typeof t=="object"&&t!==null;case"isString":return typeof t=="string";case"isNumber":return typeof t=="number";case"isBoolean":return typeof t=="boolean";case"isDefaultValue":return t instanceof Mn&&t.get("defaultValue")===e;default:return(n=this.em)===null||n===void 0||n.logWarning("Unsupported generic operation: ".concat(this.operationString)),!1}},o}(Kt),Fn=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();(function(a){a.and="and",a.or="or",a.xor="xor"})(Me||(Me={}));var xn,go=function(a){function o(){var t=a!==null&&a.apply(this,arguments)||this;return t.operationsEnum=Me,t}return Fn(o,a),o.prototype.evaluate=function(t){if(!t?.length)return!1;switch(this.operationString){case Me.and:return t.every(Boolean);case Me.or:return t.some(Boolean);case Me.xor:return t.filter(Boolean).length===1;default:return this.em.logWarning("Unsupported boolean operation: ".concat(this.operationString)),!1}},o}(Kt),ur=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();(function(a){a.greaterThan=">",a.lessThan="<",a.greaterThanOrEqual=">=",a.lessThanOrEqual="<=",a.equals="=",a.notEquals="!="})(xn||(xn={}));var dn,Ko=function(a){function o(){var t=a!==null&&a.apply(this,arguments)||this;return t.operationsEnum=xn,t}return ur(o,a),o.prototype.evaluate=function(t,e){if(typeof t!="number")return!1;switch(this.operationString){case xn.greaterThan:return t>e;case xn.lessThan:return t<e;case xn.greaterThanOrEqual:return t>=e;case xn.lessThanOrEqual:return t<=e;case xn.equals:return t===e;case xn.notEquals:return t!==e;default:return this.em.logWarning("Unsupported number operation: ".concat(this.operationString)),!1}},o}(Kt),En=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();(function(a){a.contains="contains",a.startsWith="startsWith",a.endsWith="endsWith",a.matchesRegex="matchesRegex",a.equalsIgnoreCase="equalsIgnoreCase",a.trimEquals="trimEquals"})(dn||(dn={}));var kn=function(a){function o(){var t=a!==null&&a.apply(this,arguments)||this;return t.operationsEnum=dn,t}return En(o,a),o.prototype.evaluate=function(t,e){if(typeof t!="string")return!1;switch(this.operationString){case dn.contains:return t.includes(e);case dn.startsWith:return t.startsWith(e);case dn.endsWith:return t.endsWith(e);case dn.matchesRegex:return e||this.em.logWarning("Regex pattern must be provided."),new RegExp(e??"").test(t);case dn.equalsIgnoreCase:return t.toLowerCase()===e.toLowerCase();case dn.trimEquals:return t.trim()===e.trim();default:return this.em.logWarning("Unsupported string operation: ".concat(this.operationString)),!1}},o}(Kt),Jn=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Oo=function(a){function o(t,e){var n,r=a.call(this,t)||this;return r.collectionsStateMap={},r.em=e.em,r.collectionsStateMap=(n=e.collectionsStateMap)!==null&&n!==void 0?n:{},r}return Jn(o,a),o.prototype.evaluate=function(){var t=this.get("condition");if(!t||(0,C.isBoolean)(t))return!!t;var e=this.getOperator();return!!e&&e.evaluate(this.getResolvedLeftValue(),this.getResolvedRightValue())},o.prototype.getDependentDataVariables=function(){var t=this.get("condition");return t?this.extractDataVariables(t):[]},o.prototype.getOperations=function(){var t=this.getOperator();return!t||t instanceof Mt?[]:t.getOperations()},o.prototype.updateCollectionStateMap=function(t){this.collectionsStateMap=t},o.prototype.getOperator=function(){var t={em:this.em,collectionsStateMap:this.collectionsStateMap},e=this.get("condition");if(e&&!(0,C.isBoolean)(e)){var n;if(this.isLogicGroup(e)){var r=e.logicalOperator,l=e.statements,p=new go(r,t);n=new Mt(p,l,t)}if(this.isExpression(e)){var d=e.left,g=(p=e.operator,M(d,t));n=this.resolveOperator(g,p)}return n}},o.prototype.resolveOperator=function(t,e){var n=this.em;return this.isOperatorInEnum(e,vn)?new Pn(e,{em:n}):typeof t=="number"?new Ko(e,{em:n}):typeof t=="string"?new kn(e,{em:n}):void 0},o.prototype.extractDataVariables=function(t){var e=this,n=[];return this.isExpression(t)?(ke(t.left)&&n.push(t.left),ke(t.right)&&n.push(t.right)):this.isLogicGroup(t)&&t.statements.forEach(function(r){return n.push.apply(n,e.extractDataVariables(r))}),n},o.prototype.isLogicGroup=function(t){return t&&t.logicalOperator!==void 0&&Array.isArray(t.statements)},o.prototype.isExpression=function(t){return t&&t.left!==void 0&&typeof t.operator=="string"},o.prototype.isOperatorInEnum=function(t,e){return Object.values(e).includes(t)},o.prototype.resolveExpressionSide=function(t){var e=this.get("condition"),n=this.em,r=this.collectionsStateMap;return e&&typeof e!="boolean"?e&&typeof e=="object"&&t in e?M(e[t],{em:n,collectionsStateMap:r}):void 0:e},o.prototype.getResolvedLeftValue=function(){return this.resolveExpressionSide("left")},o.prototype.getResolvedRightValue=function(){return this.resolveExpressionSide("right")},o.prototype.toJSON=function(t){var e=this.get("condition");return typeof e=="object"?JSON.parse(JSON.stringify(e)):e},o}(E.Kx),Zn=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Fo="data-condition",Vi="data-condition-evaluation-changed",pr="data-condition-output-changed",fi=function(a){function o(t,e){var n,r=a.call(this,t,e)||this;r.collectionsStateMap={},r.resolverListeners=[],r._previousEvaluationResult=null,r.em=e.em,r.collectionsStateMap=(n=e.collectionsStateMap)!==null&&n!==void 0?n:{};var l=t.condition,p=new Oo({condition:l===void 0?{}:l},{em:r.em});return r._conditionEvaluator=p,r.listenToDataVariables(),r.listenToPropsChange(),r}return Zn(o,a),o.prototype.defaults=function(){return{type:Fo,condition:{left:"",operator:dn.equalsIgnoreCase,right:""},ifTrue:{},ifFalse:{}}},o.prototype.getCondition=function(){return this._conditionEvaluator.get("condition")},o.prototype.getIfTrue=function(){return this.get("ifTrue")},o.prototype.getIfFalse=function(){return this.get("ifFalse")},o.prototype.getOperations=function(){return this._conditionEvaluator.getOperations()},o.prototype.setCondition=function(t){this.set("condition",t),this._conditionEvaluator.set("condition",t),this.trigger(pr,this.getDataValue())},o.prototype.setIfTrue=function(t){this.set("ifTrue",t)},o.prototype.setIfFalse=function(t){this.set("ifFalse",t)},o.prototype.isTrue=function(){return this._conditionEvaluator.evaluate()},o.prototype.getDataValue=function(t){t===void 0&&(t=!1);var e={em:this.em,collectionsStateMap:this.collectionsStateMap},n=this.getIfTrue(),r=this.getIfFalse(),l=this.isTrue();return t?l?n:r:M(l?n:r,e)},o.prototype.resolvesFromCollection=function(){return!1},o.prototype.updateCollectionsStateMap=function(t){this.collectionsStateMap=t,this._conditionEvaluator.updateCollectionStateMap(t),this.listenToDataVariables(),this.emitConditionEvaluationChange()},o.prototype.listenToPropsChange=function(){var t=this;this.on("change:condition",this.handleConditionChange.bind(this)),this.on("change:condition change:ifTrue change:ifFalse",function(){t.listenToDataVariables()})},o.prototype.handleConditionChange=function(){this.setCondition(this.get("condition"))},o.prototype.listenToDataVariables=function(){this.cleanupListeners(),this.setupConditionDataVariableListeners(),this.setupOutputDataVariableListeners()},o.prototype.setupConditionDataVariableListeners=function(){var t=this;this._conditionEvaluator.getDependentDataVariables().forEach(function(e){t.addListener(e,function(){t.emitConditionEvaluationChange()})})},o.prototype.setupOutputDataVariableListeners=function(){var t=this.isTrue();this.setupOutputVariableListener(this.getIfTrue(),t),this.setupOutputVariableListener(this.getIfFalse(),!t)},o.prototype.setupOutputVariableListener=function(t,e){var n=this;ke(t)&&this.addListener(t,function(){e&&n.trigger(pr,t)})},o.prototype.addListener=function(t,e){var n=new Xr({em:this.em,resolver:new Mn(t,{em:this.em,collectionsStateMap:this.collectionsStateMap}),onUpdate:e});this.resolverListeners.push(n)},o.prototype.emitConditionEvaluationChange=function(){var t=this.isTrue();this._previousEvaluationResult!==t&&(this._previousEvaluationResult=t,this.trigger(Vi,t),this.emitOutputValueChange())},o.prototype.emitOutputValueChange=function(){var t=this.getDataValue();this.trigger(pr,t)},o.prototype.cleanupListeners=function(){this.resolverListeners.forEach(function(t){return t.destroy()}),this.resolverListeners=[]},o.prototype.toJSON=function(){var t=this.getIfTrue(),e=this.getIfFalse();return{type:Fo,condition:this._conditionEvaluator.toJSON(),ifTrue:t,ifFalse:e}},o}(E.Kx),Do="data-condition-true-content",Bn="data-condition-false-content",mn=function(){return mn=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},mn.apply(this,arguments)},Kr=function(a,o,t){if(t||arguments.length===2)for(var e,n=0,r=o.length;n<r;n++)!e&&n in o||(e||(e=Array.prototype.slice.call(o,0,n)),e[n]=o[n]);return a.concat(e||Array.prototype.slice.call(o))},Hn=function(a){return(0,C.isArray)(a.get(oo))},Or=function(a){return!!a.get($n)},jn=function(a){return!(!Hn(a)&&!Or(a))},Kn=function(a){var o=a.parent();return jn(a)&&(!o||!jn(o))},Cn=function(a){a.__symbReady||(a.on("change",a.__upSymbProps),a.__symbReady=!0)},Sn=function(a){var o=a.get($n);if(o&&(0,C.isString)(o)){var t=a.__getAllById()[o];t?(o=t,a.set($n,t)):o=0}return o||void 0},lo=function(a){var o=a?.get(oo);return o&&(0,C.isArray)(o)&&(o.forEach(function(t,e){t&&(0,C.isString)(t)&&(o[e]=a.__getAllById()[t])}),o=o.filter(function(t){return t&&!(0,C.isString)(t)})),o||void 0},ln=function(a,o){o===void 0&&(o="");var t=a?.get(uo),e=o.split(":")[0],n=o!==e?[o,e]:[o];return t===!0||(0,C.isArray)(t)&&n.some(function(r){return t.indexOf(r)>=0})},he=function(a,o){o===void 0&&(o={});var t=[],e=o.changed;if(o.fromInstance||o.noPropagate||o.fromUndo||e&&ln(a,e))return t;var n=lo(a)||[],r=Sn(a);return t=(r?Kr([r],lo(r)||[],!0):n).filter(function(l){return l!==a}).filter(function(l){return!(e&&ln(l,e))})},Qn=function(a,o){for(var t=a,e=a.parent(o);e&&jn(e);)t=e,e=e.parent(o);return t},Yo=function(a,o){o===void 0&&(o={});var t=Sn(a),e=t&&lo(t);!o.skipRefs&&e&&t.set(oo,e.filter(function(n){return n!==a})),a.set($n,0),a.components().forEach(function(n){return Yo(n,o)})},to=function(a,o,t,e){e===void 0&&(e={});var n=Sn(a),r=lo(a);(n||r)&&a.em.log(o,{model:a,toUp:t,context:"symbols",opts:e})},nn=function(a,o){["status","open",oo,$n,uo,"attributes"].forEach(function(t){return delete a[t]}),delete o.id,(0,q.isEmptyObj)(o)||(a.attributes=o)},Lo=function(a,o){(0,C.keys)(a).forEach(function(t){Io(a,t,o)||delete a[t]})},Io=function(a,o,t){var e=function(){var n;if(o==="attributes"){var r=a.attributes;return Object.values(r).some(function(l){return!!l?.collectionId})}return!!(!((n=a[o])===null||n===void 0)&&n.collectionId)}();return!ln(t,o)||e},Yr=function(a,o,t,e){var n=e||t||{},r={fromInstance:n.fromInstance,fromUndo:n.fromUndo},l=o.opt.temporary;if(e)if(e.add){var p=[],d=!!lo(a);if((At=he(a,mn(mn({},r),{changed:"components:add"}))).length){var g=Sn(o);p=lo(g||o)||[],(p=Kr([],p,!0)).push(g||o)}!l&&to(a,"add",At,{opts:e,addedInstances:p.map(function(oe){return oe.cid}),added:o.cid}),At.forEach(function(oe){var ve=Qn(oe),we=p.filter(function(Ve){var Ze=Qn(Ve,{prev:1});return ve&&Ze&&Ze===ve})[0]||o.clone({symbol:!0,symbolInv:d});oe.append(we,mn({fromInstance:a},e))})}else{var h=Sn(o);if(h&&!e.temporary&&h.set(oo,lo(h).filter(function(oe){return oe!==o})),!Kn(o)&&!e.skipRefsUp){var m="components:remove",w=e.index,k=o.parent(),z=mn({fromInstance:o},e),B=Kn(o),nt=function(oe){var ve=oe.parent();ve&&!ln(ve,m)&&oe.remove(z)};At=ln(k,m)?[]:he(o,r),B&&(At=k&&he(k,mn(mn({},r),{changed:m})),nt=function(oe){var ve=oe.components().at(w);ve&&ve.remove(mn({fromInstance:k},z))}),!l&&to(a,"remove",At,{opts:e,removed:o.cid,isSymbNested:B}),At.forEach(nt)}}else{var X=o,At=he(a,mn(mn({},r),{changed:"components:reset"})),It=X.models,Wt=new Set;to(a,"reset",At,{components:It}),At.forEach(function(oe){var ve=oe.components(),we=It.map(function(Ve,Ze){return a.get(dt)?Ve.clone({symbol:jn(Ve)}):!jn(Ve)||Wt.has(Ve)?(Wt.add(Ve),Ve.clone({symbol:!0})):ve.at(Ze)});ve.reset(we,mn({fromInstance:a},t))})}a.__changesUp(n)};function Jt(a){return typeof a=="object"&&[Ke,Fo].includes(a?.type)}function ke(a){return a?.type===Ke}function M(a,o){return Jt(a)?(ke(a)&&Mn.resolveDataResolver(a,o),zt(a,o)):a}function tt(a,o){var t,e,n=a.type;switch(n){case Ke:e=new Mn(a,o);break;case Fo:e=new fi(a,o);break;default:return void((t=o.em)===null||t===void 0||t.logWarning("Unsupported dynamic type: ".concat(n)))}return e}function zt(a,o){var t=tt(a,o);return t?.getDataValue()}function be(a){var o=function(e){var n=e.collectionsStateMap;if(!n)return!1;var r=Object.keys(n);if(!r.length)return!1;var l=Sn(e);if(!l||l===e)return!1;var p=l.collectionsStateMap;return Object.keys(p).every(function(d){return r.includes(d)})}(a),t=o?function(e){var n=Sn(e);return n?n.getId():""}(a):null;return{shouldSync:o,itemId:t}}var Oe=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ge=function(){return ge=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},ge.apply(this,arguments)},Ke="data-variable",Wn=function(a){function o(t,e){var n=a.call(this,t,e)||this;return n.em=e.em,n.collectionsStateMap=e.collectionsStateMap,n}return Oe(o,a),o.prototype.defaults=function(){return{type:Ke,defaultValue:"",path:"",collectionId:void 0,variableType:void 0,asPlainText:void 0}},Object.defineProperty(o.prototype,"path",{get:function(){var t;return(t=this.get("path"))!==null&&t!==void 0?t:""},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"defaultValue",{get:function(){var t;return(t=this.get("defaultValue"))!==null&&t!==void 0?t:""},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"collectionId",{get:function(){return this.get("collectionId")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"variableType",{get:function(){return this.get("variableType")},enumerable:!1,configurable:!0}),o.prototype.resolvesFromCollection=function(){return!!this.collectionId},o.prototype.updateCollectionsStateMap=function(t){this.collectionsStateMap=t,this.trigger("change")},o.prototype.getResolverPath=function(){var t;if(this.resolvesFromCollection()){var e=this.resolveCollectionVariable();return!!ke(e)&&((t=e.path)!==null&&t!==void 0?t:"")}return this.path},o.prototype.toJSON=function(t){var e=this.defaults(),n=a.prototype.toJSON.call(this,t),r=Object.fromEntries(Object.entries(n).filter(function(l){var p=l[0];return l[1]!==e[p]}));return ge(ge({},r),{type:Ke})},o.prototype.getDataValue=function(){var t={em:this.em,collectionsStateMap:this.collectionsStateMap};return o.resolveDataResolver({path:this.path,defaultValue:this.defaultValue,collectionId:this.collectionId,variableType:this.variableType},t)},o.resolveDataSourceVariable=function(t,e){var n,r;return e.em.DataSources.getValue((n=t.path)!==null&&n!==void 0?n:"",(r=t.defaultValue)!==null&&r!==void 0?r:"")},o.resolveDataResolver=function(t,e){var n,r,l,p;if(t.collectionId){var d=o.resolveCollectionVariable(t,e);return ke(d)?o.resolveDataSourceVariable({path:(n=d.path)!==null&&n!==void 0?n:"",defaultValue:(r=t.defaultValue)!==null&&r!==void 0?r:""},{em:e.em}):d}return o.resolveDataSourceVariable({path:(l=t.path)!==null&&l!==void 0?l:"",defaultValue:(p=t.defaultValue)!==null&&p!==void 0?p:""},{em:e.em})},o.prototype.resolveCollectionVariable=function(){var t=this.em,e=this.collectionsStateMap;return o.resolveCollectionVariable(this.attributes,{em:t,collectionsStateMap:e})},o.resolveCollectionVariable=function(t,e){var n=t.collectionId,r=n===void 0?"":n,l=t.variableType,p=t.path,d=t.defaultValue,g=d===void 0?"":d,h=e.em,m=e.collectionsStateMap;if(!m)return g;var w=m[r];return w?l?l==="currentItem"?o.resolveCurrentItem(w,p,r,h):w[l]:(h.logError("Missing collection variable type for collection: ".concat(r)),g):g},o.resolveCurrentItem=function(t,e,n,r){var l=t.currentItem;if(!l)return r.logError("Current item is missing for collection: ".concat(n)),"";if(l.type===Ke){var p=l.path?"".concat(l.path,".").concat(e):e;return{type:Ke,path:p}}return e&&!l[e]?(r.logError("Path not found in current item: ".concat(e," for collection: ").concat(n)),""):e?l[e]:l},o}(E.Kx);const Mn=Wn;var dr=function(){function a(o){var t=this;this.listeners=[],this.model=new E.Kx,this.onChange=function(){var e=t.resolver.getDataValue();t.onUpdate(e)},this.em=o.em,this.resolver=o.resolver,this.onUpdate=o.onUpdate,this.listenToResolver()}return a.prototype.createListener=function(o,t,e){return e===void 0&&(e=this.onChange),{obj:o,event:t,callback:e}},a.prototype.listenToResolver=function(){var o=this.resolver,t=this.model;this.removeListeners();var e=[];switch(o.attributes.type){case Ke:e=this.listenToDataVariable(o);break;case Fo:e=this.listenToConditionalVariable(o)}e.forEach(function(n){return t.listenTo(n.obj,n.event,n.callback)}),this.listeners=e},a.prototype.listenToConditionalVariable=function(o){return[{obj:o,event:pr,callback:this.onChange}]},a.prototype.listenToDataVariable=function(o){var t=this,e=this.em,n=[],r=function(){t.listenToResolver(),t.onChange()};n.push(this.createListener(o,"change",r));var l=o.getResolverPath();if(!l)return n;var p=(0,q.stringToPath)(l||"").join("."),d=e.DataSources.fromPath(l),g=d[0],h=d[1];return g&&n.push(this.createListener(g.records,"add remove reset",r)),h&&n.push(this.createListener(h,"change")),n.push(this.createListener(e.DataSources.all,"add remove reset",r),this.createListener(e,"".concat(se.path,":").concat(p))),n},a.prototype.removeListeners=function(){var o=this;this.listeners.forEach(function(t){return o.model.stopListening(t.obj,t.event,t.callback)}),this.listeners=[]},a.prototype.destroy=function(){this.removeListeners()},a}();const Xr=dr;var hi=function(){return hi=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},hi.apply(this,arguments)},Rr=function(){function a(o,t,e){this.model=o,this.updateFn=t,this.resolverListeners={},this.em=e.em}return a.prototype.bindModel=function(o){this.model=o},a.prototype.setDynamicValues=function(o,t){return t===void 0&&(t={}),t.skipWatcherUpdates||t.fromDataSource||this.removeListeners(),this.addDynamicValues(o,t)},a.prototype.addDynamicValues=function(o,t){if(t===void 0&&(t={}),!o)return{};var e=this.evaluateValues(o);return t.skipWatcherUpdates||t.fromDataSource||this.updateListeners(o),e},a.prototype.onCollectionsStateMapUpdate=function(){var o=this,t=this.getValuesResolvingFromCollections();if(t.length){t.forEach(function(n){return o.resolverListeners[n].resolver.updateCollectionsStateMap(o.collectionsStateMap)});var e=this.addDynamicValues(this.getSerializableValues(Object.fromEntries(t.map(function(n){return[n,null]}))));Object.entries(e).forEach(function(n){var r=n[0],l=n[1];return o.updateFn(o.model,r,l)})}},Object.defineProperty(a.prototype,"collectionsStateMap",{get:function(){var o=this.model;return o instanceof fn?o.collectionsStateMap:{}},enumerable:!1,configurable:!0}),a.prototype.updateListeners=function(o){var t=this,e=this.em,n=this.collectionsStateMap;this.removeListeners(Object.keys(o));for(var r=Object.keys(o),l=function(g){var h=r[g],m=o[h];if(!Jt(m))return"continue";var w=tt(m,{em:e,collectionsStateMap:n});p.resolverListeners[h]=new Xr({em:e,resolver:w,onUpdate:function(k){return t.updateFn(t.model,h,k)}})},p=this,d=0;d<r.length;d++)l(d)},a.prototype.evaluateValues=function(o){for(var t=this.em,e=this.collectionsStateMap,n=hi({},o),r=Object.keys(o),l=0;l<r.length;l++){var p=r[l],d=o[p];Jt(d)&&(n[p]=zt(d,{em:t,collectionsStateMap:e}))}return n},a.prototype.removeListeners=function(o){var t=this,e=o||Object.keys(this.resolverListeners);return e.forEach(function(n){var r,l;t.resolverListeners[n]&&((l=(r=t.resolverListeners[n]).destroy)===null||l===void 0||l.call(r),delete t.resolverListeners[n])}),e},a.prototype.getSerializableValues=function(o){if(!o)return{};for(var t=hi({},o),e=Object.keys(t),n=0;n<e.length;n++){var r=e[n],l=this.resolverListeners[r];l&&(t[r]=l.resolver.toJSON())}return t},a.prototype.getAllSerializableValues=function(){for(var o={},t=Object.keys(this.resolverListeners),e=0;e<t.length;e++){var n=t[e];o[n]=this.resolverListeners[n].resolver.toJSON()}return o},a.prototype.getValuesResolvingFromCollections=function(){var o=this;return Object.keys(this.resolverListeners).filter(function(t){return o.resolverListeners[t].resolver.resolvesFromCollection()})},a.prototype.destroy=function(){this.removeListeners()},a}(),Fr=function(){return Fr=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},Fr.apply(this,arguments)},gi=function(a,o,t){if(t||arguments.length===2)for(var e,n=0,r=o.length;n<r;n++)!e&&n in o||(e||(e=Array.prototype.slice.call(o,0,n)),e[n]=o[n]);return a.concat(e||Array.prototype.slice.call(o))},Hr={fromDataSource:!0,avoidStore:!0},vo=function(){function a(o,t){this.model=o,this.propertyWatcher=new Rr(o,this.onPropertyUpdate,t),this.attributeWatcher=new Rr(o,this.onAttributeUpdate,t),this.styleWatcher=new Rr(o,this.onStyleUpdate,t)}return a.prototype.onPropertyUpdate=function(o,t,e){o?.set(t,e,Hr)},a.prototype.onAttributeUpdate=function(o,t,e){var n;o?.addAttributes(((n={})[t]=e,n),Hr)},a.prototype.onStyleUpdate=function(o,t,e){var n;o?.addStyle(((n={})[t]=e,n),Fr(Fr({},Hr),{partial:!0,avoidStore:!0}))},a.prototype.bindModel=function(o){this.model=o,this.propertyWatcher.bindModel(o),this.attributeWatcher.bindModel(o),this.styleWatcher.bindModel(o),this.updateSymbolOverride()},a.prototype.addProps=function(o,t){var e=this;t===void 0&&(t={});var n=["components","dataResolver"],r=Object.fromEntries(Object.entries(o).map(function(p){var d,g=p[0],h=p[1];return n.includes(g)?[g,h]:[g,e.propertyWatcher.addDynamicValues((d={},d[g]=h,d),t)[g]]}));if(o.attributes){var l=this.attributeWatcher.setDynamicValues(o.attributes,t);r.attributes=l}return t.skipWatcherUpdates||t.fromDataSource||this.updateSymbolOverride(),r},a.prototype.setStyles=function(o,t){return t===void 0&&(t={}),this.styleWatcher.setDynamicValues(o,t)},a.prototype.disableStyles=function(){this.styleWatcher.removeListeners(),this.styleWatcher.destroy()},a.prototype.removeAttributes=function(o){this.attributeWatcher.removeListeners(o),this.updateSymbolOverride()},a.prototype.updateSymbolOverride=function(){var o,t=this.model,e=!!Object.keys((o=t?.collectionsStateMap)!==null&&o!==void 0?o:{}).length;if(this.model&&e){var n=this.propertyWatcher.getValuesResolvingFromCollections(),r=this.attributeWatcher.getValuesResolvingFromCollections(),l=gi(["locked","layerable"],n,!0);Object.keys(r).length&&l.push("attributes"),he(t).forEach(function(p){p.setSymbolOverride(l,{fromDataSource:!0})}),t.setSymbolOverride(l,{fromDataSource:!0})}},a.prototype.onCollectionsStateMapUpdate=function(){this.propertyWatcher.onCollectionsStateMapUpdate(),this.attributeWatcher.onCollectionsStateMapUpdate(),this.styleWatcher.onCollectionsStateMapUpdate()},a.prototype.getDynamicPropsDefs=function(){return this.propertyWatcher.getAllSerializableValues()},a.prototype.getDynamicAttributesDefs=function(){return this.attributeWatcher.getAllSerializableValues()},a.prototype.getDynamicStylesDefs=function(){return this.styleWatcher.getAllSerializableValues()},a.prototype.getPropsDefsOrValues=function(o){return this.propertyWatcher.getSerializableValues(o)},a.prototype.getAttributesDefsOrValues=function(o){return this.attributeWatcher.getSerializableValues(o)},a.prototype.getStylesDefsOrValues=function(o){return this.styleWatcher.getSerializableValues(o)},a.prototype.destroy=function(){this.propertyWatcher.destroy(),this.attributeWatcher.destroy(),this.styleWatcher.destroy()},a}(),Ur=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),eo=function(){return eo=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},eo.apply(this,arguments)},Xa=en(),Ri=function(a){return(0,C.isArray)(a)?a[a.length-1]:a},zs=function(a){function o(t,e){e===void 0&&(e={});var n=this,r=e.em,l=new vo(void 0,{em:r});return(n=a.call(this,t,eo(eo({},e),{dataResolverWatchers:l}))||this).views=[],n.collectionsStateMap={},l.bindModel(n),l.setStyles(n.get("style")),n.dataResolverWatchers=l,n.em=e.em,n}return Ur(o,a),o.prototype.parseStyle=function(t){return Xa.parseStyle(t)},o.prototype.extendStyle=function(t){return eo(eo({},this.getStyle("",{skipResolve:!0})),t)},o.prototype.getStyle=function(t,e){e===void 0&&(e={});var n=eo({},this.get("style")||{});if(delete n.__p,!e.skipResolve)return t&&(0,C.isString)(t)?eo({},n)[t]:eo({},n);var r=eo(eo({},n),this.dataResolverWatchers.getDynamicStylesDefs());return t&&(0,C.isString)(t)?r[t]:r},o.prototype.setStyle=function(t,e){var n=this;t===void 0&&(t={}),e===void 0&&(e={}),(0,C.isString)(t)&&(t=this.parseStyle(t));var r=this.getStyle("",{skipResolve:!0});e.partial||e.avoidStore?(e.avoidStore=!0,t.__p=!0):delete t.__p;var l=eo({},t),p=eo({},l);(0,C.keys)(p).forEach(function(g){p[g]!==""||delete p[g]}),p=this.dataResolverWatchers.setStyles(p,e),this.set("style",p,e);var d=Object.keys((0,q.shallowDiff)(r,l)).reduce(function(g,h){var m;return eo(eo({},g),((m={})[h]=p[h],m))},{});return delete d.__p,(0,C.keys)(d).forEach(function(g){var h=n.em;e.noEvent||(n.trigger("change:style:".concat(g)),h&&(h.trigger("styleable:change",n,g,e),h.trigger("styleable:change:".concat(g),n,g,e)))}),p},o.prototype.getView=function(t){var e=this.views,n=this.em,r=t||n?.getCurrentFrameModel();return r?e.find(function(l){return l.frameView===r.view}):e[0]},o.prototype.setView=function(t){var e=this.views;!e.includes(t)&&e.push(t)},o.prototype.removeView=function(t){var e=this.views;e.splice(e.indexOf(t),1)},o.prototype.updateView=function(){this.views.forEach(function(t){return t.updateStyles()})},o.prototype.addStyle=function(t,e,n){var r;e===void 0&&(e=""),n===void 0&&(n={}),typeof t=="string"?((r={})[t]=e,t=r):n=e||{},n.addStyle=t,t=this.extendStyle(t),this.setStyle(t,n)},o.prototype.removeStyle=function(t){var e=this.getStyle();delete e[t],this.setStyle(e)},o.prototype.styleToString=function(t){t===void 0&&(t={});var e=[],n=t.style||this.getStyle(t),r=t.important,l=function(d){var g=(0,C.isArray)(r)?r.indexOf(d)>=0:r;if(d.substring(0,2)==="__")return"continue";var h=n[d];((0,C.isArray)(h)?h:[h]).forEach(function(m){var w="".concat(m).concat(g?" !important":"");w&&e.push("".concat(d,":").concat(w,";"))})};for(var p in n)l(p);return e.join("")},o.prototype.getSelectors=function(){return this.get("selectors")||this.get("classes")},o.prototype.getSelectorsString=function(t){return this.selectorsToString?this.selectorsToString(t):this.getSelectors().getFullString()},o}(E.Kx);const aa=zs;var fr=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),To=function(){return To=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},To.apply(this,arguments)},Jr=function(a,o){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&o.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(e=Object.getOwnPropertySymbols(a);n<e.length;n++)o.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(a,e[n])&&(t[e[n]]=a[e[n]])}return t},Zr=function(a,o,t){if(t||arguments.length===2)for(var e,n=0,r=o.length;n<r;n++)!e&&n in o||(e||(e=Array.prototype.slice.call(o,0,n)),e[n]=o[n]);return a.concat(e||Array.prototype.slice.call(o))},Xo=function(a,o){return o===void 0&&(o=[]),a?(((0,C.isArray)(a)||(0,C.isFunction)(a.map)?a:[a]).map(function(t){o.push(t.getId()),Xo(t.components().models,o)}),o):[]},sa=function(a,o,t){o===void 0&&(o={}),t===void 0&&(t={}),t.visitedCmps=t.visitedCmps||{};var e=t.visitedCmps;return((0,C.isArray)(a)?a:[a]).map(function(n){var r=n.attributes,l=r===void 0?{}:r,p=n.components,d=n.tagName,g=n.style,h=l.id,m=(l.draggable,Jr(l,["id","draggable"])),w=n;if(h){if(e[h])e[h].push(w),h=fn.getNewId(o),w.attributes.id=h;else if(e[h]=[],o[h]){var k=w=o[h];d&&k.set({tagName:d},To(To({},t),{silent:!0})),(0,C.keys)(m).length&&k.addAttributes(m,To({},t)),(0,C.keys)(g).length&&k.addStyle(g,t)}}var z=(0,C.isFunction)(w.components)?w:null;if(p){var B=sa(p,o,t);z?z.components().reset(B,t):w.components=B}else z&&z.components().reset([],t);return w})},Bs=function(a){function o(t,e){var n=a.call(this,t,e)||this;n.opt=e,n.listenTo(n,"add",n.onAdd),n.listenTo(n,"remove",n.removeChildren),n.listenTo(n,"reset",n.resetChildren);var r=e.em,l=e.config;return n.config=l,n.em=r,n.domc=e.domc||r?.Components,n}return fr(o,a),Object.defineProperty(o.prototype,"events",{get:function(){var t;return(t=this.domc)===null||t===void 0?void 0:t.events},enumerable:!1,configurable:!0}),o.prototype.resetChildren=function(t,e){var n=this;e===void 0&&(e={});var r=this,l=e.previousModels||[],p=l.filter(function(h){return!t.get(h.cid)}),d=Xo(t),g=Xo(l).filter(function(h){return d.indexOf(h)>=0});e.keepIds=(e.keepIds||[]).concat(g),p.forEach(function(h){return n.removeChildren(h,r,e)}),t.each(function(h){return n.onAdd(h)})},o.prototype.resetFromString=function(t,e){var n,r;t===void 0&&(t=""),e===void 0&&(e={}),e.keepIds=Xo(this);var l=this,p=l.domc,d=l.em,g=l.parent,h=d?.Css,m=p?.allById()||{},w=this.parseString(t,e),k=sa(w,m,e),z=e.visitedCmps,B=z===void 0?{}:z;Object.keys(B).forEach(function(nt){var X=B[nt];if(X.length){var At=h?.getRules("#".concat(nt))||[];At.length&&X.forEach(function(It){At.forEach(function(Wt){var oe=Wt.clone();oe.set("selectors",["#".concat(It.attributes.id)]),h.getAll().add(oe)})})}}),this.reset(k,e),d?.trigger("component:content",g,e,t),(r=(n=g).__checkInnerChilds)===null||r===void 0||r.call(n)},o.prototype.removeChildren=function(t,e,n){var r=this;if(n===void 0&&(n={}),t){var l=this.domc,p=this.em,d=n.temporary||n.fromUndo;if(t.prevColl=this,!d){var g=t.getId(),h=p.Selectors.getAll(),m=p.Css.getAll(),w=(n.keepIds||[]).indexOf(g)<0;delete(l?l.allById():{})[g];var k=w?m.remove(m.filter(function(X){return X.getSelectors().getFullString()==="#".concat(g)}),n):[];h.remove(k.map(function(X){return X.getSelectors().at(0)})),t.opt.temporary||(p.Commands.run("core:component-style-clear",{target:t}),t.views.forEach(function(X){X.scriptContainer&&t.emitWithEditor(jt.I.scriptUnmount,{component:t,view:X,el:X.el})}),t.removed(),t.trigger("removed"),p.trigger(jt.I.remove,t),l&&Or(t)&&Kn(t)&&l.symbols.__trgEvent(l.events.symbolInstanceRemove,{component:t},!0));var z=t.components();z.forEach(function(X){Yr(X,X,z,To(To({},n),{skipRefsUp:!0})),r.removeChildren(X,e,n)})}var B=t.components();if(p.stopListening(B),p.stopListening(t),p.stopListening(t.get("classes")),t.__postRemove(),!t.opt.temporary){var nt=function(X){X.emitWithEditor(jt.I.removed,X,{removeOptions:n}),X.components().forEach(function(At){return nt(At)})};nt(t)}}},o.prototype.model=function(t,e){var n,r=e.collection.opt,l=r.em,p=l.Components.componentTypes;e.em=l,e.config=r.config,e.componentTypes=p,e.domc=r.domc;for(var d=0;d<p.length;d++)if(p[d].id==t.type){n=p[d].model;break}return n||(n=p[p.length-1].model,l&&t.type&&l.logWarning("Component type '".concat(t.type,"' not found"),{attrs:t,options:e})),new n(t,e)},o.prototype.parseString=function(t,e){e===void 0&&(e={});var n=this,r=n.em,l=n.domc,p=n.parent,d=p?.is("wrapper"),g=e.asDocument&&d,h=r.Css,m=r.Parser.parseHtml(t,To({asDocument:g},e.parserOptions)),w=m.html;if(d&&m.doctype){var k=p,z=m.html||{},B=z.components,nt=B===void 0?[]:B,X=Jr(z,["components"]),At=m.head||{},It=At.components,Wt=Jr(At,["components"]);w=nt,k.set(X,e),k.head.set(Wt,e),k.head.components(It,e),k.docEl.set(m.root,e),k.set({doctype:m.doctype})}if(fn.checkId(w,m.css,l.componentsById,e),m.css&&h&&!e.temporary){e.at;var oe=Jr(e,["at"]);h.addCollection(m.css,To(To({},oe),{extend:1}))}return w},o.prototype.add=function(t,e){var n=this;if(e===void 0&&(e={}),t!=null){e.keepIds=Zr(Zr([],e.keepIds||[],!0),Xo(e.previousModels),!0),(0,C.isString)(t)?t=this.parseString(t,e):(0,C.isArray)(t)&&(t=Zr([],t,!0)).forEach(function(l,p){if((0,C.isString)(l)){var d=n.parseString(l,e);t[p]=(0,C.isArray)(d)&&!d.length?null:d}});var r=((0,C.isArray)(t)?t:[t]).filter(Boolean).map(function(l){return n.processDef(l)});return t=(0,C.isArray)(t)?(0,C.flatten)(r,1):r[0],a.prototype.add.call(this,t,e)}},o.prototype.processDef=function(t){if(t.cid&&t.ccid)return t;var e=this.em,n=this.config,r=(n===void 0?{}:n).processor,l=t;if(r){var p=r(l=To({},l));p&&((0,C.each)(l,function(k,z){return delete l[z]}),(0,C.extend)(l,p))}if(l.$$typeof&&typeof l.props=="object"){(l=To({},l)).props=To({},l.props);var d=e.Components,g=e.Parser.parserHtml;(0,C.each)(l,function(k,z){(0,C.includes)(["props","type"],z)||delete l[z]});var h=l.props,m=h.children;delete h.children,delete l.props;var w=g.splitPropsFromAttr(h);l.attributes=w.attrs,m&&(l.components=m),l.type?d.getType(l.type)||(l.tagName=l.type,delete l.type):l.type="textnode",(0,C.extend)(l,w.props)}return l},o.prototype.onAdd=function(t,e,n){n===void 0&&(n={});var r=this.domc,l=this.em,p=t.getStyle(),d=l&&l.getConfig().avoidInlineStyle;if(r&&r.Component.ensureInList(t),!(0,C.isEmpty)(p)&&!d&&l&&l.getConfig().forceClass&&!n.temporary){var g=t.cid;l.Css.setClassRule(g,p),t.setStyle({}),t.addClass(g)}if(t.__postAdd({recursive:!0}),l&&!n.temporary){var h=function(m){l.trigger(jt.I.add,m,n),m.components().forEach(function(w){return h(w)})};h(t),r&&Or(t)&&Kn(t)&&r.symbols.__trgEvent(r.events.symbolInstanceAdd,{component:t},!0)}},o}(E.pM);const Qr=Bs;var Ws=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Tr=1,vi=2,la=function(a){function o(t,e){e===void 0&&(e={});var n=a.call(this,t,e)||this,r=e.config,l=r===void 0?{}:r,p=n.get("name"),d=n.get("label");p?d||n.set("label",p):n.set("name",d);var g=n.get("name"),h=l.escapeName,m=h?h(g):o.escapeName(g);return n.set("name",m),n.em=e.em,n}return Ws(o,a),o.prototype.defaults=function(){return{name:"",label:"",type:Tr,active:!0,private:!1,protected:!1,_undo:!0}},o.prototype.isId=function(){return this.get("type")===vi},o.prototype.isClass=function(){return this.get("type")===Tr},o.prototype.getFullName=function(t){t===void 0&&(t={});var e=t.escape,n=this.get("name"),r="";switch(this.get("type")){case Tr:r=".";break;case vi:r="#"}return r+(e?e(n):n)},o.prototype.toString=function(){return this.getFullName()},o.prototype.getName=function(){return this.get("name")||""},o.prototype.getLabel=function(){return this.get("label")||""},o.prototype.setLabel=function(t){return this.set("label",t)},o.prototype.getActive=function(){return!!this.get("active")},o.prototype.setActive=function(t){return this.set("active",t)},o.prototype.toJSON=function(t){t===void 0&&(t={});var e=this.em,n=E.Kx.prototype.toJSON.call(this,[t]),r=(0,C.result)(this,"defaults");if(e?.getConfig().avoidDefaults){(0,C.forEach)(r,function(p,d){n[d]===p&&delete n[d]}),n.label===n.name&&delete n.label;var l=(0,C.keys)(n).length;l===1&&n.name&&(n=n.name),l===2&&n.name&&n.type&&(n=this.getFullName())}return n},o.escapeName=function(t){return"".concat(t).trim().replace(/\s+/g,"-")},o.TYPE_CLASS=Tr,o.TYPE_ID=vi,o}(E.Kx);const no=la;la.prototype.idAttribute="name";var ca=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),mi=function(a,o){return a.reduce(function(t,e,n){return t.concat(mi(a.slice(n+1),"".concat(o).concat(e)))},[o])},Pr=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return ca(o,a),o.prototype.modelId=function(t){return"".concat(t.name,"_").concat(t.type||no.TYPE_CLASS)},o.prototype.getStyleable=function(){return(0,C.filter)(this.models,function(t){return t.getActive()&&!t.get("private")})},o.prototype.getValid=function(t){var e=(t===void 0?{}:t).noDisabled;return(0,C.filter)(this.models,function(n){return!n.get("private")}).filter(function(n){return e?n.get("active"):1})},o.prototype.getFullString=function(t,e){e===void 0&&(e={});var n=[];return(t||this).forEach(function(r){return n.push(r.getFullName(e))}),e.sort&&n.sort(),n.join("").trim()},o.prototype.getFullName=function(t){t===void 0&&(t={});var e=t.combination,n=t.array,r=[],l=this.map(function(p){return p.getFullName(t)}).sort();return e?l.forEach(function(p,d){r=r.concat(mi(l.slice(d+1),p))}):r=l,n?r:e?r.join(","):r.join("")},o}(E.pM);const Jo=Pr;Pr.prototype.model=no;var Ho=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Zo=function(a,o,t){if(t||arguments.length===2)for(var e,n=0,r=o.length;n<r;n++)!e&&n in o||(e||(e=Array.prototype.slice.call(o,0,n)),e[n]=o[n]);return a.concat(e||Array.prototype.slice.call(o))};const Er=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return Ho(o,a),o.prototype.defaults=function(){return{id:"",label:"",open:!0,attributes:{}}},o.prototype.getId=function(){return this.get("id")},o.prototype.getLabel=function(){return this.get("label")},o}(E.Kx);function ti(a){var o=new Set,t=new Map,e={items:[]};a.forEach(function(r){var l=r.category;if(l){o.add(l);var p=t.get(l);p?p.push(r):t.set(l,[r])}else e.items.push(r)});var n=Array.from(o).map(function(r){return{category:r,items:t.get(r)||[]}});return Zo(Zo([],n,!0),[e],!1)}var Fi=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Yn="category",Ja=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return Fi(o,a),o.prototype.initCategory=function(t){var e=t.get(Yn),n=e instanceof Er;if(e&&!n){(0,C.isString)(e)?e={id:e,label:e}:(0,q.isObject)(e)&&!e.id&&(e.id=e.label);var r=this.getCategories().add(e);return t.set(Yn,r,{silent:!0}),r}if(n)return r=e,this.getCategories().add(r),r},o}(E.pM),ua=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ei=function(a){function o(t,e){e===void 0&&(e={});var n=a.call(this,t,e)||this,r=e.events,l=e.em,p=r?.update;return l&&p&&n.on("change",function(d,g){return l.trigger(p,{category:d,changes:d.changedAttributes(),options:g})}),n}return ua(o,a),o.prototype.add=function(t,e){return((0,C.isArray)(t)?t:[t]).forEach(function(n){return n&&(n.id=(0,q.normalizeKey)("".concat(n.id)))}),a.prototype.add.call(this,t,e)},o.prototype.get=function(t){return a.prototype.get.call(this,(0,C.isString)(t)?(0,q.normalizeKey)(t):t)},o}(E.pM);const co=ei;var Uo;ei.prototype.model=Er,function(a){a.select="trait:select",a.value="trait:value",a.categoryUpdate="trait:category:update",a.custom="trait:custom",a.all="trait"}(Uo||(Uo={}));const zr=Uo;var hr=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),kr=function(){return kr=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},kr.apply(this,arguments)},pa=function(a){function o(t,e){var n=a.call(this,t)||this,r=n.attributes,l=r.target,p=r.name;return!n.get("id")&&n.set("id",p),l&&n.setTarget(l),n.em=e,n}return hr(o,a),o.prototype.defaults=function(){return{type:"text",label:"",name:"",unit:"",step:1,value:"",default:"",placeholder:"",category:"",changeProp:!1,options:[]}},Object.defineProperty(o.prototype,"parent",{get:function(){return this.collection},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"category",{get:function(){var t=this.get("category");return t instanceof Er?t:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"component",{get:function(){return this.target},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"changeProp",{get:function(){return!!this.get("changeProp")},enumerable:!1,configurable:!0}),o.prototype.setTarget=function(t){if(t){var e=this.attributes,n=e.name,r=e.changeProp,l=e.value,p=e.getValue;this.target=t,this.unset("target");var d=r?"change:".concat(n):"change:attributes:".concat(n);this.listenTo(t,d,this.targetUpdated);var g=l||(p?void 0:this.getValue());!(0,C.isUndefined)(g)&&this.set({value:g},{silent:!0})}},o.prototype.getId=function(){return this.get("id")},o.prototype.getType=function(){return this.get("type")},o.prototype.getName=function(){return this.get("name")},o.prototype.getLabel=function(t){var e;t===void 0&&(t={});var n=t.locale,r=n===void 0||n,l=this.getId(),p=this.get("label")||this.getName();return r&&((e=this.em)===null||e===void 0?void 0:e.t("traitManager.traits.labels.".concat(l)))||p},o.prototype.getValue=function(t){return this.getTargetValue(t)},o.prototype.setValue=function(t,e){var n=this;e===void 0&&(e={});var r=this.component,l=this.em,p=e.partial,d={},g=this.attributes.setValue;g?g({value:t,component:r,editor:l?.getEditor(),trait:this,partial:!!p,options:e,emitUpdate:function(){return n.targetUpdated()}}):(p&&(d.avoidStore=!0),this.setTargetValue(t,d))},o.prototype.getDefault=function(){return this.get("default")},o.prototype.getOptions=function(){return this.get("options")||[]},o.prototype.getOption=function(t){var e=this,n=(0,q.isDef)(t)?t:this.getValue();return this.getOptions().filter(function(r){return e.getOptionId(r)===n})[0]},o.prototype.getOptionId=function(t){return t.id||t.value},o.prototype.getOptionLabel=function(t,e){var n;e===void 0&&(e={});var r=e.locale,l=r===void 0||r,p=(0,C.isString)(t)?this.getOption(t):t,d=this.getOptionId(p),g=p.label||p.name||d,h=this.getName();return l&&((n=this.em)===null||n===void 0?void 0:n.t("traitManager.traits.options.".concat(h,".").concat(d)))||g},o.prototype.getCategoryLabel=function(t){t===void 0&&(t={});var e=this.em,n=this.category,r=t.locale,l=r===void 0||r,p=n?.getId(),d=n?.getLabel();return l&&e?.t("traitManager.categories.".concat(p))||d||""},o.prototype.runCommand=function(){var t=this.em,e=this.attributes.command;if(e&&t)return(0,C.isString)(e)?t.Commands.run(e):e(t.Editor,this)},o.prototype.props=function(){return this.attributes},o.prototype.targetUpdated=function(){var t=this.component,e=this.em,n=this.getTargetValue({useType:!0});this.set({value:n},{fromTarget:1});var r={trait:this,component:t,value:n};t.trigger(zr.value,r),e?.trigger(zr.value,r),e?.trigger("trait:update",r)},o.prototype.getTargetValue=function(t){var e;t===void 0&&(t={});var n,r=this.component,l=this.em,p=this.getName(),d=this.get("getValue"),g=t.skipResolve;if(d?n=d({editor:l?.getEditor(),trait:this,component:r}):this.changeProp?(n=r.get(p),g&&(n=r.dataResolverWatchers.getPropsDefsOrValues((e={},e[p]=n,e))[p])):n=r.getAttributes({skipResolve:g})[p],t.useType&&this.getType()==="checkbox"){var h=this.attributes,m=h.valueTrue,w=h.valueFalse;(0,C.isUndefined)(m)||m!==n?(0,C.isUndefined)(w)||w!==n||(n=!1):n=!0}return(0,C.isUndefined)(n)?"":n},o.prototype.setTargetValue=function(t,e){var n;e===void 0&&(e={});var r=this.component,l=this.attributes,p=this.getName();if(!(0,C.isUndefined)(t)){var d=t;if(t==="false"?d=!1:t==="true"&&(d=!0),this.getType()==="checkbox"){var g=l.valueTrue,h=l.valueFalse;d&&!(0,C.isUndefined)(g)&&(d=g),d||(0,C.isUndefined)(h)||(d=h)}var m=((n={})[p]=d,n);m.__p=e.avoidStore?null:void 0,this.changeProp?r.set(m,e):r.addAttributes(m,e)}},o.prototype.setValueFromInput=function(t,e,n){e===void 0&&(e=!0),n===void 0&&(n={});var r={value:t};this.set(r,kr(kr({},n),{avoidStore:1})),e&&(this.set("value","",n),this.set(r,n))},o.prototype.getInitValue=function(){var t,e=this.component,n=this.getName();if(e){var r=e.get("attributes");t=this.changeProp?e.get(n):r[n]}return t||this.get("value")||this.get("default")},o}(E.Kx);const Qo=pa;var $s=function(){function a(o){o===void 0&&(o={}),this.config=o}return a.prototype.build=function(o,t){return(0,C.isString)(o)?this.buildFromString(o,t):new Qo(o,t)},a.prototype.buildFromString=function(o,t){var e={name:o,type:"text"};return o==="target"&&(e.type="select",e.default=!1,e.options=this.config.optionsTarget),new Qo(e,t)},a}();const qs=$s;var da=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Gs=function(a){function o(t,e){var n=a.call(this,t)||this;n.categories=new co;var r=e.em;n.em=r,n.categories=new co([],{em:r,events:{update:zr.categoryUpdate}}),n.on("add",n.handleAdd),n.on("reset",n.handleReset);var l=n.module,p=l?.getConfig();return n.tf=new qs(p),n}return da(o,a),Object.defineProperty(o.prototype,"module",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),o.prototype.getCategories=function(){return this.categories},o.prototype.handleReset=function(t,e){var n=(e===void 0?{}:e).previousModels;(n===void 0?[]:n).forEach(function(r){return r.trigger("remove")})},o.prototype.handleAdd=function(t){t.em=this.em;var e=this.target;e&&(t.target=e),this.initCategory(t)},o.prototype.setTarget=function(t){this.target=t,this.models.forEach(function(e){return e.setTarget(t)})},o.prototype.add=function(t,e){if(t!=null){var n=this.target,r=this.em;if((0,C.isArray)(t)){for(var l=[],p=0,d=t.length;p<d;p++){var g=t[p];l[p]=g instanceof Qo?g:this.tf.build(g,r),l[p].setTarget(n)}return a.prototype.add.call(this,l,e)}var h=t instanceof Qo?t:this.tf.build(t,r);return h.setTarget(n),a.prototype.add.call(this,h,e)}},o}(Ja);const yi=Gs;var Za=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Je=function(){return Je=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},Je.apply(this,arguments)},Jl=function(a,o){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&o.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(e=Object.getOwnPropertySymbols(a);n<e.length;n++)o.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(a,e[n])&&(t[e[n]]=a[e[n]])}return t},zo=function(a,o,t){if(t||arguments.length===2)for(var e,n=0,r=o.length;n<r;n++)!e&&n in o||(e||(e=Array.prototype.slice.call(o,0,n)),e[n]=o[n]);return a.concat(e||Array.prototype.slice.call(o))},Qa=function(a){return a.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},Br=function(a){return!!a?.getConfig().avoidInlineStyle},Hi="component:drag",oo="__symbols",$n="__symbol",uo="__symbol_ovrd",gr=jt.I.update,fa=jt.I.updateInside,Ks=function(a){function o(t,e){t===void 0&&(t={});var n=this,r=e.em;n=a.call(this,t,e)||this,(0,C.bindAll)(n,"__upSymbProps","__upSymbCls","__upSymbComps","syncOnComponentChange");var l=n.parent(),p=l?.attributes,d=n.get("propagate");if(d&&n.set("propagate",(0,C.isArray)(d)?d:[d]),p&&p.propagate&&!d){var g={},h=p.propagate;h.forEach(function(nt){return g[nt]=l.get(nt)}),g.propagate=h,n.set(Je(Je({},g),t))}e&&e.config&&e.config.voidElements.indexOf(n.get("tagName"))>=0&&n.set("void",!0),e.em=r,n.opt=e,n.em=r,n.config=e.config||{};var m=n.dataResolverWatchers.getDynamicAttributesDefs();if(n.setAttributes(Je(Je(Je({},(0,C.result)(n,"defaults").attributes||{}),n.get("attributes")||{}),m)),n.ccid=o.createId(n,e),n.preInit(),n.initClasses(),n.initComponents(),n.initTraits(),n.initToolbar(),n.initScriptProps(),n.listenTo(n,"change:script",n.scriptUpdated),n.listenTo(n,"change:tagName",n.tagUpdated),n.listenTo(n,"change:attributes",n.attrUpdated),n.listenTo(n,"change:attributes:id",n._idUpdated),n.on("change:toolbar",n.__emitUpdateTlb),n.on("change",n.__onChange),n.on(fa,n.__propToParent),n.set("status",""),n.views=[],["classes","traits","components"].forEach(function(nt){var X="add remove reset ".concat(nt!=="components"?"change":"");n.listenTo(n.get(nt),X.trim(),function(){for(var At=[],It=0;It<arguments.length;It++)At[It]=arguments[It];return n.emitUpdate.apply(n,zo([nt],At,!1))})}),!e.temporary){var w=r&&r.Css,k=n.attributes,z=k.styles,B=k.type;z&&w&&w.addCollection(z,{avoidUpdateStyle:!0},{group:"cmp:".concat(B)}),n._moveInlineStyleToRule(),n.__postAdd(),n.init(),jn(n)&&Cn(n),r?.trigger(jt.I.create,n,e)}return Br(r)&&n.dataResolverWatchers.disableStyles(),n}return Za(o,a),Object.defineProperty(o.prototype,"defaults",{get:function(){var t;return(t={tagName:"div",type:"",name:"",removable:!0,draggable:!0,droppable:!0,badgable:!0,stylable:!0,"stylable-require":"","style-signature":"",unstylable:"",highlightable:!0,copyable:!0,resizable:!1,editable:!1,layerable:!0,selectable:!0,hoverable:!0,void:!1,state:"",status:"",content:"",icon:"",style:"",styles:"",classes:"",script:"","script-props":"","script-export":"",attributes:{},traits:["id","title"],propagate:"",dmode:"",toolbar:null,delegate:null})[$n]=0,t[oo]=0,t[uo]=0,t._undo=!0,t._undoexc=["status","open"],t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"tagName",{get:function(){return this.get("tagName")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"classes",{get:function(){return this.get("classes")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"traits",{get:function(){return this.get("traits")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"content",{get:function(){var t;return(t=this.get("content"))!==null&&t!==void 0?t:""},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"toolbar",{get:function(){return this.get("toolbar")||[]},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"resizable",{get:function(){return this.get("resizable")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"delegate",{get:function(){return this.get("delegate")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"locked",{get:function(){return this.get("locked")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"frame",{get:function(){return this.opt.frame},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"page",{get:function(){var t;return(t=this.frame)===null||t===void 0?void 0:t.getPage()},enumerable:!1,configurable:!0}),o.prototype.getType=function(){return this.get("type")||"default"},o.prototype.preInit=function(){},o.prototype.init=function(){},o.prototype.updated=function(t,e,n){},o.prototype.removed=function(){},o.prototype.set=function(t,e,n){var r,l,p={skipWatcherUpdates:!1,fromDataSource:!1};typeof t=="object"?(l=t,p=e||p):typeof t=="string"?((r={})[t]=e,l=r,p=n||p):(l={},p=n||p),this.dataResolverWatchers=this.dataResolverWatchers||p.dataResolverWatchers;var d=this.dataResolverWatchers.addProps(l,p);return a.prototype.set.call(this,d,p)},o.prototype.onCollectionsStateMapUpdate=function(t){this.collectionsStateMap=t,this.dataResolverWatchers.onCollectionsStateMapUpdate(),this.components().forEach(function(e){return e.onCollectionsStateMapUpdate(t)})},o.prototype.syncComponentsCollectionState=function(){this.stopListening(this.components(),"add remove reset",this.syncOnComponentChange),this.listenTo(this.components(),"add remove reset",this.syncOnComponentChange),this.components().forEach(function(t){return t.syncComponentsCollectionState()})},o.prototype.stopSyncComponentCollectionState=function(){this.stopListening(this.components(),"add remove reset",this.syncOnComponentChange),this.collectionsStateMap={},this.components().forEach(function(t){return t.stopSyncComponentCollectionState()})},o.prototype.syncOnComponentChange=function(t,e,n){var r=this;if(this.collectionsStateMap&&Object.keys(this.collectionsStateMap).length){var l=n||e||{};if(n)if(l.add){var p=t;p.syncComponentsCollectionState(),p.onCollectionsStateMapUpdate(this.collectionsStateMap)}else t.stopSyncComponentCollectionState();else(l.previousModels||[]).forEach(function(d){return d.stopSyncComponentCollectionState()}),this.components().forEach(function(d){d.syncComponentsCollectionState(),d.onCollectionsStateMapUpdate(r.collectionsStateMap)})}},o.prototype.__postAdd=function(t){t===void 0&&(t={});var e=this.em,n=e?.UndoManager,r=this.components();n&&!this.__hasUm&&(n.add(r),n.add(this.getSelectors()),this.__hasUm=!0),t.recursive&&r.map(function(l){return l.__postAdd(t)})},o.prototype.__postRemove=function(){var t=this.em,e=t?.UndoManager;e&&(e.remove(this.components()),e.remove(this.getSelectors()),delete this.__hasUm)},o.prototype.__onChange=function(t,e){var n=this,r=this.changedAttributes()||{};(0,C.keys)(r).forEach(function(l){return n.emitUpdate(l)}),["status","open","toolbar","traits"].forEach(function(l){return delete r[l]}),(0,q.isEmptyObj)(r)||(this.__changesUp(e),this.__propSelfToParent({component:this,changed:r,options:e}))},o.prototype.__onStyleChange=function(t){var e=this;if(this.em){var n=(0,C.keys)(t),r={style:t};this.emitWithEditor(jt.I.styleUpdate,this,r),n.forEach(function(d){return e.emitWithEditor("".concat(jt.I.styleUpdateProperty).concat(d),e,r)});var l=this.collectionsStateMap,p=Object.keys(l);p.length&&p.every(function(d){return l[d].currentIndex===l[d].startIndex})&&he(this).forEach(function(d){var g=d.collectionsStateMap;Object.keys(g).every(function(h){return p.includes(h)})&&d.addStyle(t)})}},o.prototype.__changesUp=function(t){var e=this.em;[this.frame,e].forEach(function(n){return n&&n.changesUp(t)})},o.prototype.__propSelfToParent=function(t){this.trigger(gr,t),this.__propToParent(t)},o.prototype.__propToParent=function(t){var e=this.parent();e&&e.trigger(fa,t)},o.prototype.__emitUpdateTlb=function(){this.emitUpdate("toolbar")},o.prototype.__getAllById=function(){var t=this.em;return t?t.Components.allById():{}},o.prototype.__upSymbProps=function(t,e){e===void 0&&(e={}),function(n,r){r===void 0&&(r={});var l=n.dataResolverWatchers.getPropsDefsOrValues(mn({},n.changedAttributes())),p=n.dataResolverWatchers.getAttributesDefsOrValues(mn({},l.attributes));if(nn(l,p),!(0,q.isEmptyObj)(l)){var d=he(n,r);Lo(l,n),to(n,"props",d,{opts:r,changed:l}),d.forEach(function(g){var h=mn({},l);Lo(h,g),g.set(h,mn({fromInstance:n},r))})}}(this,e)},o.prototype.__upSymbCls=function(t,e,n){n===void 0&&(n={}),function(r,l){l===void 0&&(l={});var p=he(r,l);to(r,"classes",p,{opts:l}),p.forEach(function(d){d.set("classes",r.get("classes"),{fromInstance:r})}),r.__changesUp(l)}(this,n)},o.prototype.__upSymbComps=function(t,e,n){Yr(this,t,e,n)},o.prototype.__onDestroy=function(){},o.prototype.is=function(t){return this.get("type")==t},o.prototype.props=function(){return this.attributes},o.prototype.index=function(){var t=this.collection;return t?t.indexOf(this):0},o.prototype.setDragMode=function(t){return this.set("dmode",t)},o.prototype.getDragMode=function(){return this.get("dmode")||""},o.prototype.setSymbolOverride=function(t,e){var n,r;e===void 0&&(e={}),this.set(((n={})[uo]=(r=(0,C.isString)(t)?[t]:t)!==null&&r!==void 0?r:0,n),e)},o.prototype.getSymbolOverride=function(){return this.get(uo)},o.prototype.find=function(t){var e,n=[],r=(e=this.view)===null||e===void 0?void 0:e.$el.find(t);return r?.each(function(l){var p=r.eq(l).data("model");p&&n.push(p)}),n},o.prototype.findType=function(t){var e=[],n=function(r){return r.forEach(function(l){l.is(t)&&e.push(l),n(l.components())})};return n(this.components()),e},o.prototype.findFirstType=function(t){return this.findType(t).at(0)},o.prototype.closest=function(t){var e,n=(e=this.view)===null||e===void 0?void 0:e.$el.closest(t);return n?.length?n.data("model"):void 0},o.prototype.closestType=function(t){for(var e=this.parent();e&&!e.is(t);)e=e.parent();return e},o.prototype.contains=function(t){var e=!1;if(!t)return e;var n=function(r){!e&&r.forEach(function(l){l===t&&(e=!0),!e&&n(l.components())})};return n(this.components()),e},o.prototype.tagUpdated=function(){this.trigger("rerender")},o.prototype.replaceWith=function(t,e){e===void 0&&(e={});var n=this.collection,r=n.indexOf(this);n.remove(this);var l=n.add(t,Je(Je({},e),{at:r}));return(0,C.isArray)(l)?l:[l]},o.prototype.attrUpdated=function(t,e,n){var r=this;n===void 0&&(n={});var l=this.get("attributes"),p=l.class;p&&this.setClass(p),delete l.class;var d=l.style;d&&this.setStyle(d,n),delete l.style;var g=Je({},this.previous("attributes")),h=(0,q.shallowDiff)(g,this.get("attributes"));(0,C.keys)(h).forEach(function(m){var w,k="attributes:".concat(m);r.trigger("change:".concat(k),r,h[m],n),(w=r.em)===null||w===void 0||w.trigger("".concat(gr,":").concat(k),r,h[m],n)})},o.prototype.setAttributes=function(t,e){return e===void 0&&(e={skipWatcherUpdates:!1,fromDataSource:!1}),this.set("attributes",Je({},t),e),this},o.prototype.addAttributes=function(t,e){e===void 0&&(e={});var n=this.dataResolverWatchers.getDynamicAttributesDefs();return this.setAttributes(Je(Je(Je({},this.getAttributes({noClass:!0,noStyle:!0})),n),t),e)},o.prototype.removeAttributes=function(t,e){t===void 0&&(t=[]),e===void 0&&(e={});var n=Array.isArray(t)?t:[t];this.dataResolverWatchers.removeAttributes(n);var r=this.getAttributes();return n.map(function(l){return delete r[l]}),this.setAttributes(r,e)},o.prototype.getStyle=function(t,e){t===void 0&&(t={}),e===void 0&&(e={});var n=this.em,r=(0,C.isString)(t),l=r?t:"",p=r||t===""?e:t,d=!!p?.skipResolve;if(Br(n)&&!p.inline){var g=n.get("state"),h=n.Css.getIdRule(this.getId(),Je({state:g},p));return this.rule=h,h?h.getStyle(l,{skipResolve:d}):{}}return a.prototype.getStyle.call(this,l,{skipResolve:d})},o.prototype.setStyle=function(t,e){var n=this;t===void 0&&(t={}),e===void 0&&(e={});var r=this.opt,l=this.em;if(!Br(l)||r.temporary||e.inline)t=a.prototype.setStyle.apply(this,arguments);else{var p=this.get("style")||{};t=(0,C.isString)(t)?this.parseStyle(t):t,t=Je(Je({},t),p);var d=l.get("state"),g=l.Css,h=this.getStyle(Je(Je({},e),{skipResolve:!0}));this.rule=g.setIdRule(this.getId(),t,Je({state:d},e));var m=(0,q.shallowDiff)(h,t);this.set("style","",{silent:!0}),(0,C.keys)(m).forEach(function(w){return n.trigger("change:style:".concat(w))})}return r.temporary||this.__onStyleChange(e.addStyle||t),t},o.prototype.getAttributes=function(t){t===void 0&&(t={});var e=this.em,n=[],r=t.skipResolve?this.dataResolverWatchers.getDynamicAttributesDefs():{},l=Je(Je({},this.get("attributes")),r),p=e?.Selectors,d=this.getId();if(t.noClass?delete l.class:(this.classes.forEach(function(m){return n.push((0,C.isString)(m)?m:m.getName())}),n.length&&(l.class=n.join(" "))),!t.noStyle){var g=this.getStyle({inline:!0});(0,q.isObject)(g)&&!(0,q.isEmptyObj)(g)&&(l.style=this.styleToString({inline:!0}))}if(!(0,C.has)(l,"id")){var h=!1;!Br(e)&&(0,C.isEmpty)(this.getStyle())||(h=!!p?.get(d,p.Selector.TYPE_ID)),(jn(this)||this.get("script-export")||this.get("script"))&&(h=!0),h&&(l.id=d)}return l},o.prototype.addClass=function(t){var e=this.em.Selectors.addClass(t);return this.classes.add(e)},o.prototype.setClass=function(t){return this.classes.reset(),this.addClass(t)},o.prototype.removeClass=function(t){var e=[];t=(0,C.isArray)(t)?t:[t];var n=this.classes,r=no.TYPE_CLASS;return t.forEach(function(l){l.split(" ").forEach(function(p){var d=n.where({name:p,type:r})[0];d&&e.push(n.remove(d))})}),e},o.prototype.getClasses=function(){var t=this.getAttributes().class;return t?t.split(" "):[]},o.prototype.initClasses=function(t,e,n){n===void 0&&(n={});var r=this.get("attributes")||{},l=r.class,p=Jl(r,["class"]),d=[this,"change:classes",this.initClasses],g=this.get("classes")||l||[],h=(0,C.isString)(g)?g.split(" "):g;this.stopListening.apply(this,d);var m=this.normalizeClasses(h),w=new Jo([]);return this.set("classes",w,n),w.add(m),w.on("add remove reset",this.__upSymbCls),l&&m.length&&this.set("attributes",p),this.listenTo.apply(this,d),this},o.prototype.initComponents=function(){var t=[this,"change:components",this.initComponents];this.stopListening.apply(this,t);var e=new Qr([],this.opt);e.parent=this;var n=this.get("components"),r=!this.opt.avoidChildren;return this.set("components",e),r&&n&&e.add((0,C.isFunction)(n)?n(this):n,this.opt),e.on("add remove reset",this.__upSymbComps),this.listenTo.apply(this,t),this},o.prototype.initTraits=function(t){var e=this,n=this.em,r="change:traits";this.off(r,this.initTraits),this.__loadTraits();var l=Je({},this.get("attributes")),p=this.traits;p.each(function(g){var h=g.getName(),m=g.getInitValue();g.changeProp?(0,C.isUndefined)(e.get(h))&&e.set(h,m):h&&m&&(l[h]=m)});var d=this.dataResolverWatchers.getDynamicAttributesDefs();return p.length&&this.setAttributes(Je(Je({},l),d)),this.on(r,this.initTraits),t&&n&&n.trigger("component:toggled"),this},o.prototype.initScriptProps=function(){if(!this.opt.temporary){var t="script-props",e=["change:".concat(t),this.initScriptProps];this.off.apply(this,e);var n=this.previous(t)||[],r=this.get(t)||[],l=n.map(function(d){return"change:".concat(d)}).join(" "),p=r.map(function(d){return"change:".concat(d)}).join(" ");l&&this.off(l,this.__scriptPropsChange),p&&this.on(p,this.__scriptPropsChange),this.on.apply(this,e)}},o.prototype.__scriptPropsChange=function(t,e,n){n===void 0&&(n={}),n.avoidStore||this.trigger("rerender")},o.prototype.append=function(t,e){e===void 0&&(e={});var n=((0,C.isArray)(t)?zo([],t,!0):[t]).map(function(r){return(0,C.isString)(r)||r.collection&&r.collection.remove(r,{temporary:!0}),r});return this.components().add(n,Je({action:jt.t.add},e))},o.prototype.components=function(t,e){e===void 0&&(e={});var n=this.get("components");return(0,C.isUndefined)(t)?n:(n.reset(void 0,e),t?this.append(t,e):[])},o.prototype.getChildAt=function(t){return this.components().at(t||0)||void 0},o.prototype.getLastChild=function(){var t=this.components();return t.at(t.length-1)||null},o.prototype.empty=function(t){return t===void 0&&(t={}),this.components().reset(void 0,t),this},o.prototype.parent=function(t){t===void 0&&(t={});var e=this.collection||t.prev&&this.prevColl;return e?e.parent:void 0},o.prototype.parents=function(){var t=this.parent();return t?[t].concat(t.parents()):[]},o.prototype.scriptUpdated=function(){this.set("scriptUpdated",1)},o.prototype.initToolbar=function(){var t=this.em,e=this,n=t&&t.getConfig().stylePrefix||"";if(!e.get("toolbar")&&t){var r=[];e.collection&&r.push({label:t.getIcon("arrowUp"),command:function(l){return l.runCommand("core:component-exit",{force:1})}}),e.get("draggable")&&r.push({attributes:{class:"".concat(n,"no-touch-actions"),draggable:!0},label:t.getIcon("move"),command:"tlb-move"}),e.get("copyable")&&r.push({label:t.getIcon("copy"),command:"tlb-clone"}),e.get("removable")&&r.push({label:t.getIcon("delete"),command:"tlb-delete"}),e.set("toolbar",r)}},o.prototype.__loadTraits=function(t,e){e===void 0&&(e={});var n=t||this.traits;if(!(n instanceof yi)){n=(0,C.isFunction)(n)?n(this):n;var r=new yi([],this.opt);r.setTarget(this),n.length&&r.add(n),this.set({traits:r},e)}return this},o.prototype.getTraits=function(){return this.__loadTraits(),zo([],this.traits.models,!0)},o.prototype.setTraits=function(t){var e=(0,C.isArray)(t)?t:[t];return this.set({traits:e}),this.getTraits()},o.prototype.getTrait=function(t){return this.getTraits().filter(function(e){return e.get("id")===t||e.get("name")===t})[0]||null},o.prototype.updateTrait=function(t,e){var n,r=this.getTrait(t);return r&&r.set(e),(n=this.em)===null||n===void 0||n.trigger("component:toggled"),this},o.prototype.getTraitIndex=function(t){var e=this.getTrait(t);return e?this.traits.indexOf(e):-1},o.prototype.removeTrait=function(t){var e,n=this,r=((0,C.isArray)(t)?t:[t]).map(function(d){return n.getTrait(d)}),l=this.traits,p=r.length?l.remove(r):[];return(e=this.em)===null||e===void 0||e.trigger("component:toggled"),(0,C.isArray)(p)?p:[p]},o.prototype.addTrait=function(t,e){var n;e===void 0&&(e={}),this.__loadTraits();var r=this.traits.add(t,e);return(n=this.em)===null||n===void 0||n.trigger("component:toggled"),(0,C.isArray)(r)?r:[r]},o.prototype.normalizeClasses=function(t){var e=[],n=this.em,r=n?.Selectors;return r?t.models?zo([],t.models,!0):(t.forEach(function(l){return e.push(r.add(l))}),e):[]},o.prototype.clone=function(t){var e;t===void 0&&(t={});var n=this.em,r=Je(Je({},this.attributes),this.dataResolverWatchers.getDynamicPropsDefs()),l=Je({},this.opt),p=this.getId(),d=n?.Css;r.attributes=Je({},r.attributes?this.dataResolverWatchers.getAttributesDefsOrValues(r.attributes):void 0),r.components=[],r.classes=[],r.traits=[],Kn(this)&&(t.symbol=!0),this.get("components").each(function(B,nt){r.components[nt]=B.clone(Je(Je({},t),{_inner:1}))}),this.get("traits").each(function(B,nt){r.traits[nt]=B.clone()}),this.get("classes").each(function(B,nt){r.classes[nt]=B.get("name")}),r.status="",l.collection=null,l.forCloning=!0;var g=new this.constructor(r,l),h="#".concat(g.getId());(d?d.getRules("#".concat(p)):[]).forEach(function(B){var nt=B.clone();nt.set("selectors",[h]),d.getAll().add(nt)}),g.set(oo,0);var m=Sn(this),w=lo(this);if(t.symbol||!m&&!w)if(m){var k=(e=lo(m))!==null&&e!==void 0?e:[];m.set(oo,zo(zo([],k,!0),[g],!1)),Cn(g)}else t.symbol&&(Hn(this)?(this.set(oo,zo(zo([],w,!0),[g],!1)),g.set($n,this),Cn(g)):t.symbolInv?(this.set(oo,[g]),g.set($n,this),[this,g].map(function(B){return Cn(B)})):(g.set(oo,[this]),[this,g].map(function(B){return Cn(B)}),this.set($n,g)));else g.set($n,0),g.set(oo,0);var z="component:clone";return n&&n.trigger(z,g),this.trigger(z,g),g},o.prototype.getName=function(t){t===void 0&&(t={});var e=this.em,n=this.attributes,r=n.type,l=n.tagName,p=n.name,d=r||l,g=r?"":l,h="domComponents.names.",m=p&&e?.t("".concat(h).concat(p)),w=g&&e?.t("".concat(h).concat(g)),k=e&&(e.t("".concat(h).concat(r))||e.t("".concat(h).concat(l))),z=this.get("custom-name");return(t.noCustom?"":z)||m||p||w||(0,q.capitalize)(g)||k||(0,q.capitalize)(d)},o.prototype.setName=function(t,e){e===void 0&&(e={}),this.set("custom-name",t,e)},o.prototype.getIcon=function(){var t=this.get("icon");return t?t+" ":""},o.prototype.toHTML=function(t){t===void 0&&(t={});var e=t.tag||this.get("tagName");delete t.tag;var n=this.__attrToString(t),r=n?" ".concat(n):"",l=this.getInnerHTML(t),p=!l&&this.get("void"),d="<".concat(e).concat(r).concat(p?"/":"",">").concat(l);return!p&&(d+="</".concat(e,">")),d},o.prototype.getInnerHTML=function(t){return this.__innerHTML(t)},o.prototype.__innerHTML=function(t){t===void 0&&(t={});var e=this.components();return e.length?e.map(function(n){return n.toHTML(t)}).join(""):this.content},o.prototype.__attrToString=function(t){t===void 0&&(t={});var e=[],n=t.attributes,r=this.getAttrToHTML(t);if(n&&((0,C.isFunction)(n)?r=n(this,r)||{}:(0,q.isObject)(n)&&(r=n)),t.withProps){var l=this.toJSON();(0,C.forEach)(l,function(m,w){w[0]!=="_"&&["classes","attributes","components"].indexOf(w)<0&&(r["data-gjs-".concat(w)]=(0,C.isArray)(m)||(0,q.isObject)(m)?JSON.stringify(m):(0,C.isBoolean)(m)?"".concat(m):m)})}for(var p in r){var d=r[p];if(!(0,C.isUndefined)(d)&&d!==null)if((0,C.isBoolean)(d))d&&e.push(p);else{var g="";if(t.altQuoteAttr&&(0,C.isString)(d)&&d.indexOf('"')>=0)g="'".concat(d.replace(/'/g,"&apos;"),"'");else{var h=(0,C.isString)(d)?d.replace(/"/g,"&quot;"):d;g='"'.concat(h,'"')}e.push("".concat(p,"=").concat(g))}}return e.join(" ")},o.prototype.getAttrToHTML=function(t){var e=this.getAttributes();return Br(this.em)&&t?.keepInlineStyle!==!0&&delete e.style,e},o.prototype.toJSON=function(t){t===void 0&&(t={});var e=pt.Model.prototype.toJSON.call(this,t);if((e=Je(Je({},e),this.dataResolverWatchers.getDynamicPropsDefs())).attributes=this.dataResolverWatchers.getAttributesDefsOrValues(this.getAttributes()),delete e.dataResolverWatchers,delete e.attributes.class,delete e.toolbar,delete e.traits,delete e.status,delete e.open,delete e._undoexc,delete e.delegate,this.collectionsStateMap&&Object.getOwnPropertyNames(this.collectionsStateMap).length>0&&(delete e[$n],delete e[uo],delete e[oo],delete e.attributes.id),!t.fromUndo){var n=e[$n],r=e[oo];r&&(0,C.isArray)(r)&&(e[oo]=r.filter(function(l){return l}).map(function(l){return l.getId?l.getId():l})),n&&!(0,C.isString)(n)&&(e[$n]=n.getId())}return this.em.getConfig().avoidDefaults&&this.getChangedProps(e),e},o.prototype.getChangedProps=function(t){var e=t||pt.Model.prototype.toJSON.apply(this),n=(0,C.result)(this,"defaults");return(0,C.forEach)(n,function(r,l){["type"].indexOf(l)===-1&&e[l]===r&&delete e[l]}),(0,C.isEmpty)(e.type)&&delete e.type,(0,C.forEach)(["attributes","style"],function(r){(0,C.isEmpty)(n[r])&&(0,C.isEmpty)(e[r])&&delete e[r]}),(0,C.forEach)(["classes","components"],function(r){(!e[r]||(0,C.isEmpty)(n[r])&&!e[r].length)&&delete e[r]}),e},o.prototype.getId=function(){var t=this.get("attributes")||{},e=be(this),n=e.shouldSync,r=e.itemId;return n&&(t.id=r),t.id||this.ccid||this.cid},o.prototype.setId=function(t,e){return this.addAttributes({id:t},e),this},o.prototype.getEl=function(t){var e=this.getView(t);return e&&e.el},o.prototype.getView=function(t){var e=this,n=e.view,r=e.views,l=e.em,p=t||l?.getCurrentFrameModel();return p&&(n=r.filter(function(d){return d.frameView===p.view})[0]),n},o.prototype.getCurrentView=function(){var t=this.em.getCurrentFrame(),e=t?.model;return this.getView(e)},o.prototype.__getScriptProps=function(){var t=this.props();return(this.get("script-props")||[]).reduce(function(e,n){return e[n]=t[n],e},{})},o.prototype.getScriptString=function(t){var e=this,n=t||this.get("script")||"";if(!n)return n;if(this.get("script-props"))n=n.toString().trim();else{if((0,C.isFunction)(n)){var r=n.toString().trim();n=(r=r.slice(r.indexOf("{")+1,r.lastIndexOf("}"))).trim()}var l=this.em.getConfig(),p=Qa(l.tagVarStart||"{[ "),d=Qa(l.tagVarEnd||" ]}"),g=new RegExp("".concat(p,"([\\w\\d-]*)").concat(d),"g");n=n.replace(g,function(h,m){e.scriptUpdated();var w=e.attributes[m]||"";return(0,C.isArray)(w)||typeof w=="object"?JSON.stringify(w):w})}return n},o.prototype.emitUpdate=function(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var l=this.em,p=gr+(t?":".concat(t):""),d=t&&this.get(t);t&&this.updated.apply(this,zo([t,d,t&&this.previous(t)],n,!1)),this.trigger.apply(this,zo([p],n,!1)),l&&l.trigger.apply(l,zo([p,this],n,!1)),["components","classes"].indexOf(t)>=0&&this.__propSelfToParent({component:this,changed:(e={},e[t]=d,e),options:n[2]||n[1]||{}})},o.prototype.emitWithEditor=function(t,e,n){[this.em,this].forEach(function(r){return r?.trigger(t,e,n)})},o.prototype.onAll=function(t){return(0,C.isFunction)(t)&&(t(this),this.components().forEach(function(e){return e.onAll(t)})),this},o.prototype.forEachChild=function(t){(0,C.isFunction)(t)&&this.components().forEach(function(e){t(e),e.forEachChild(t)})},o.prototype.remove=function(t){var e=this;t===void 0&&(t={});var n=this.em,r=this.collection,l=function(){r&&r.remove(e,Je({action:jt.t.remove},t)),r||(e.components("",t),e.components().removeChildren(e,void 0,t))},p=Je({},t);return[this,n].map(function(d){return d.trigger(jt.I.removeBefore,e,l,p)}),!p.abort&&l(),this},o.prototype.destroy=function(t){return this.stopListening(this.components(),"add remove reset",this.syncOnComponentChange),this.dataResolverWatchers.destroy(),this.__onDestroy(),a.prototype.destroy.call(this,t)},o.prototype.move=function(t,e){if(e===void 0&&(e={}),t){var n=e.at,r=this.index(),l=t===this.parent();if(!l||!(r===n||r===n-1)){l&&n&&n>r&&(e.at=n-1);var p=jt.t.move;this.remove({action:p,temporary:1}),t.append(this,Je({action:p},e)),this.emitUpdate()}}return this},o.prototype.isInstanceOf=function(t){var e,n,r=(n=(e=this.em)===null||e===void 0?void 0:e.Components.getType(t))===null||n===void 0?void 0:n.model;if(!r)return!1;var l=this.constructor.typeExtends;return this instanceof r||l.has(t)},o.prototype.isChildOf=function(t){for(var e=(0,C.isString)(t),n=this.parent();n;){if(e){if(n.isInstanceOf(t))return!0}else if(n===t)return!0;n=n.parent()}return!1},o.prototype.resetId=function(t){t===void 0&&(t={});var e=this.em,n=this.getId();if(!n)return this;var r=o.createId(this);this.setId(r);var l=e?.Css.getIdRule(n),p=l?.get("selectors").at(0);return p?.set("name",r),this},o.prototype._getStyleRule=function(t){var e=(t===void 0?{}:t).id,n=this.em,r=e||this.getId();return n?.Css.getIdRule(r)},o.prototype._getStyleSelector=function(t){var e=this._getStyleRule(t);return e?.get("selectors").at(0)},o.prototype._moveInlineStyleToRule=function(){var t=this.get("style"),e=(0,C.isString)(t)&&t.length>0||(0,q.isObject)(t)&&Object.keys(t).length>0;Br(this.em)&&e&&(this.addStyle(t),this.set("style",""))},o.prototype._idUpdated=function(t,e,n){if(n===void 0&&(n={}),!n.idUpdate){var r=this.ccid,l=(this.get("attributes")||{}).id,p=(this.previous("attributes")||{}).id||r,d=o.getList(this);if(d[l]||!l&&p)return this.setId(p,{idUpdate:!0});delete d[p],d[l]=this,this.ccid=l;var g=this._getStyleSelector({id:p});g&&g.set({name:l,label:l})}},o.getDefaults=function(){return(0,C.result)(this.prototype,"defaults")},o.isComponent=function(t,e){return{tagName:(0,q.toLowerCase)(t.tagName)}},o.ensureInList=function(t){var e=o.getList(t),n=t.getId(),r=e[n];if(r){if(r!==t){var l=o.getIncrementId(n,e);t.setId(l),e[l]=t}}else e[n]=t;t.components().forEach(function(p){return o.ensureInList(p)})},o.createId=function(t,e){e===void 0&&(e={});var n,r=o.getList(t),l=e.idMap,p=l===void 0?{}:l,d=t.get("attributes").id;return d?(n=o.getIncrementId(d,r,e),t.setId(n),d!==n&&(p[d]=n)):n=o.getNewId(r),r[n]=t,n},o.getNewId=function(t){for(var e=Object.keys(t).length.toString().length+2,n=(Math.random()+1.1).toString(36).slice(-e),r="i".concat(n);t[r];)r=o.getNewId(t);return r},o.getIncrementId=function(t,e,n){n===void 0&&(n={});var r=n.keepIds,l=1,p=t;if((r===void 0?[]:r).indexOf(t)<0)for(;e[p];)l++,p="".concat(t,"-").concat(l);return p},o.getList=function(t){var e,n=t.em,r=n?.Components;return(e=r?.componentsById)!==null&&e!==void 0?e:{}},o.checkId=function(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n={}),r===void 0&&(r={});var l=(0,C.isArray)(t)?t:[t],p=r.keepIds,d=p===void 0?[]:p,g=r.idMap,h=g===void 0?{}:g;l.forEach(function(m){m.attributes;var w=m.attributes,k=w===void 0?{}:w,z=m.components,B=k.id;if(B&&n[B]&&d.indexOf(B)<0){var nt=o.getIncrementId(B,n);h[B]=nt,k.id=nt,(0,C.isArray)(e)&&e.forEach(function(X){var At=X.selectors;At.forEach(function(It,Wt){It==="#".concat(B)&&(At[Wt]="#".concat(nt))})})}z&&o.checkId(z,e,n,r)})},o.typeExtends=new Set,o}(aa);const fn=Ks;var Dn=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ui=function(){return Ui=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},Ui.apply(this,arguments)},tr="head",bi=["title","style","base","link","meta","script","noscript"],Ys=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return Dn(o,a),Object.defineProperty(o.prototype,"defaults",{get:function(){return Ui(Ui({},a.prototype.defaults),{type:tr,tagName:tr,draggable:!1,highlightable:!1,droppable:function(t){var e=t.tagName;return!e||bi.includes((0,q.toLowerCase)(e))}})},enumerable:!1,configurable:!0}),o.isComponent=function(t){return(0,q.toLowerCase)(t.tagName)===tr},o}(fn);const _i=Ys;var Xs=function(){function a(o,t){var e;o===void 0&&(o=50),this.dragging=!1,this.lastMaxHeight=0,this.zoom=1,this.rectIsInScrollIframe=!1,this.autoscrollLimit=o,this.lastMaxHeight=(e=t?.lastMaxHeight)!==null&&e!==void 0?e:0,this.onScroll=t?.onScroll,this.rectIsInScrollIframe=!!t?.rectIsInScrollIframe,(0,C.bindAll)(this,"start","autoscroll","updateClientY","stop")}return a.prototype.start=function(o,t,e){var n=this;this.eventEl=o,this.scrollEl=t,this.lastMaxHeight=e?.lastMaxHeight||Number.POSITIVE_INFINITY,this.zoom=e?.zoom||1,this.ignoredElement=e?.ignoredElement,setTimeout(function(){n.toggleAutoscrollFx(!0),requestAnimationFrame(n.autoscroll)},0)},a.prototype.autoscroll=function(){var o,t,e=this,n=this.scrollEl;if(this.dragging&&n)if(this.lastClientY!==void 0){var r=(o=this.lastClientY)!==null&&o!==void 0?o:0,l=this.autoscrollLimit,p=this.getEventElHeight()-l,d=0;r<l&&(d+=r-l),r>p&&(d+=r-p);var g=this.getElScrollTop(n);d=Math.min(d,this.lastMaxHeight-g),(d=Math.max(d,-g))!==0&&(n.scrollBy({top:d,behavior:"auto"}),(t=this.onScroll)===null||t===void 0||t.call(this)),requestAnimationFrame(this.autoscroll)}else setTimeout(function(){requestAnimationFrame(e.autoscroll)},50)},a.prototype.getEventElHeight=function(){var o=this.eventEl;return o?o.getBoundingClientRect().height:0},a.prototype.updateClientY=function(o){var t=o.target;if(!this.ignoredElement||!this.ignoredElement.contains(t)){var e=this.scrollEl;o.preventDefault();var n=this.rectIsInScrollIframe?0:this.getElScrollTop(e);this.lastClientY=(0,St.G2)(o).clientY*this.zoom-n}},a.prototype.getElScrollTop=function(o){return(o instanceof HTMLElement?o.scrollTop:o?.scrollY)||0},a.prototype.toggleAutoscrollFx=function(o){this.dragging=o;var t=this.eventEl;if(t){var e=o?"on":"off",n={on:St.on,off:St.AU};n[e](t,"mousemove dragover",this.updateClientY),n[e](t,"mouseup",this.stop)}},a.prototype.stop=function(){this.toggleAutoscrollFx(!1),this.lastClientY=void 0,this.ignoredElement=void 0},a}();const zi=Xs;var Ar=_e(8433),Js=_e(1447),ts=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ha=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return ts(o,a),o.prototype.canMove=function(t,e){var n=this,r=this.getRealIndex(e),l=t._dragSource,p=l.model,d=l.content,g=l.dragDef,h=!p||!this.isSourceSameSymbol(p),m=((0,C.isFunction)(d)?g:d)||t.model;return Array.isArray(m)?h&&m.every(function(w,k){return n.canMoveSingleContent(w,r+k)}):h&&this.canMoveSingleContent(m,r)},o.prototype.canMoveSingleContent=function(t,e){return this.model.em.Components.canMove(this.model,t,e).result},o.prototype.addChildAt=function(t,e){var n=t._dragSource.content,r=this.isTextNode()&&t.isTextable(),l=(0,C.isFunction)(n)?n():n;return Array.isArray(l)?this.addMultipleChildren(l,e,r):this.addSingleChild(l,e,r)},o.prototype.addSingleChild=function(t,e,n){var r,l,p,d,g;return g=n?(d=(p=(l=(r=this.model)===null||r===void 0?void 0:r.getView)===null||l===void 0?void 0:l.call(r))===null||p===void 0?void 0:p.insertComponent)===null||d===void 0?void 0:d.call(p,t,{action:"add-component"}):this.model.components().add(t,{at:this.getRealIndex(e),action:"add-component"}),new this.constructor(g)},o.prototype.addMultipleChildren=function(t,e,n){var r,l=this;return t.forEach(function(p,d){r=l.addSingleChild(p,e+d,n)}),r},o.prototype.isSourceSameSymbol=function(t){if(jn(this.model)){var e=Qn(this.model);if((Hn(e)?e:Sn(e))===t)return!0}return!1},Object.defineProperty(o.prototype,"content",{set:function(t){this._dragSource.content=t},enumerable:!1,configurable:!0}),o}(Js.A);const es=ha;var Bi=function(){return Bi=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},Bi.apply(this,arguments)},Wi=function(){function a(o,t){var e=this;this.em=o,this.canvas=o.Canvas;var n=t||this.canvas.getFrames().map(function(l){return l.getComponent().getEl()}),r=Array.isArray(n)?n:[n];this.el=r[0],this.counter=0,(0,C.bindAll)(this,"handleDragEnter","handleDragOver","handleDrop","handleDragLeave","handleDragEnd"),r.forEach(function(l){return e.toggleEffects(l,!0)})}return a.prototype.toggleEffects=function(o,t){var e={on:St.on,off:St.AU},n=t?"on":"off";e[n](o,"dragenter",this.handleDragEnter),e[n](o,"dragover",this.handleDragOver),e[n](o,"drop",this.handleDrop),e[n](o,"dragleave",this.handleDragLeave)},a.prototype.__customTglEff=function(o){var t,e=o?St.on:St.AU,n=this.el.ownerDocument,r=(t=n.defaultView)===null||t===void 0?void 0:t.frameElement;this.getSorterOptions=o?function(l){return{legacyOnStartSort:function(){(0,St.on)(r,"pointermove",l.onMove)},legacyOnEnd:function(){(0,St.AU)(r,"pointermove",l.onMove)},customTarget:function(p){var d=p.event;return n.elementFromPoint(d.clientX,d.clientY)}}}:void 0,e(r,"pointerenter",this.handleDragEnter),e(r,"pointermove",this.handleDragOver),e(document,"pointerup",this.handleDrop),e(r,"pointerout",this.handleDragLeave)},a.prototype.startCustom=function(){this.__customTglEff(!0)},a.prototype.endCustom=function(o){this.over?this.endDrop(o):this.__customTglEff(!1)},a.prototype.endDrop=function(o,t){var e=this.em,n=this.dragStop;this.counter=0,n&&n(o||!this.over),this.__customTglEff(!1),e.trigger("canvas:dragend",t)},a.prototype.handleDragLeave=function(o){this.updateCounter(-1,o)},a.prototype.updateCounter=function(o,t){this.counter+=o,this.counter===0&&this.endDrop(!0,t)},a.prototype.handleDragEnter=function(o){var t,e,n=this,r=this.em,l=this.canvas,p=o.dataTransfer,d=r.get("dragSource");if((d?.content||l.getConfig().allowExternalDrop)&&(this.updateCounter(1,o),!this.over)){this.over=!0;var g,h=r.Utils,m=d?.content||"<br>";if(r.stopDefault(),r.inAbsoluteMode()){var w=r.Components.getWrapper(),k=w.append({})[0],z=r.Commands.run("core:component-drag",{event:o,guidesInfo:1,center:1,target:k,onEnd:function(Wt,oe,ve){var we;if(!ve.cancelled&&m){we=w.append(m)[0];var Ve=l.getOffset(),Ze=k.getStyle(),Xe=Ze.top,Un=Ze.left,Xn=Ze.position,xo=(0,St.Xy)(Wt.target),Ir=parseInt("".concat(parseFloat(Un)+xo.x-Ve.left),10),ji=parseInt("".concat(parseFloat(Xe)+xo.y-Ve.top),10);we.addStyle({left:Ir+"px",top:ji+"px",position:Xn})}n.handleDragEnd(we,p),k.remove()}});g=function(Wt){return z.stop(o,{cancel:Wt})},this.setAbsoluteDragContent=function(Wt){return m=Wt}}else{var B=new h.ComponentSorter({em:r,treeClass:es,containerContext:{container:this.el,containerSel:"*",itemSel:"*",pfx:"gjs-",placeholderElement:l.getPlacerEl(),document:this.el.ownerDocument},dragBehavior:{dragDirection:Ar.A.BothDirections,nested:!0},positionOptions:{windowMargin:1,canvasRelative:!0},eventHandlers:{legacyOnEndMove:this.handleDragEnd}}),nt=(t=this.getSorterOptions)===null||t===void 0?void 0:t.call(this,B);nt&&(B.eventHandlers.legacyOnStartSort=nt.legacyOnStart,B.eventHandlers.legacyOnEnd=nt.legacyOnEnd,B.containerContext.customTarget=nt.customTarget);var X=r.Components.getShallowWrapper(),At=X?.append(m,{temporary:!0})[0],It=[{element:At?.getEl(),dragSource:Bi({model:At},d)}];B.startSort(It),this.sorter=B,this.draggedNode=(e=B.sourceNodes)===null||e===void 0?void 0:e[0],g=function(Wt){Wt?B.cancelDrag():B.endDrag()}}this.dragStop=g,r.trigger("canvas:dragenter",p,m)}},a.prototype.handleDragEnd=function(o,t){var e=this.em;this.over=!1,o&&(e.set("dragResult",o),e.trigger("canvas:drop",t,o)),e.runDefault({preserveSelected:1})},a.prototype.handleDragOver=function(o){o.preventDefault(),this.em.trigger("canvas:dragover",o)},a.prototype.handleDrop=function(o){var t;o.preventDefault();var e=o.dataTransfer,n=this.getContentByData(e).content;this.draggedNode&&(this.draggedNode.content=n),(t=this.setAbsoluteDragContent)===null||t===void 0||t.call(this,n),this.endDrop(!n,o)},a.prototype.getContentByData=function(o){var t=this.em,e=o&&o.types,n=o&&o.files||[],r=t.get("dragSource"),l=o&&o.getData("text");if(n.length){l=[];for(var p=0;p<n.length;p++){var d=n[p],g=d.type.split("/")[0];g=="image"&&l.push({type:g,file:d,attributes:{alt:d.name}})}}else if(r?.content)l=r.content;else if((0,C.indexOf)(e,"text/html")>=0)l=o&&o.getData("text/html").replace(/<\/?meta[^>]*>/g,"");else if((0,C.indexOf)(e,"text/uri-list")>=0)l={type:"link",attributes:{href:l},content:l};else if((0,C.indexOf)(e,"text/json")>=0){var h=o&&o.getData("text/json");h&&(l=JSON.parse(h))}else e.length===1&&e[0]==="text/plain"&&(l="<div>".concat(l,"</div>"));var m={content:l};return t.trigger("canvas:dragdata",o,m),m},a}();const T=Wi;var L=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),et=function(){return et=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},et.apply(this,arguments)},at=function(a,o,t){if(t||arguments.length===2)for(var e,n=0,r=o.length;n<r;n++)!e&&n in o||(e||(e=Array.prototype.slice.call(o,0,n)),e[n]=o[n]);return a.concat(e||Array.prototype.slice.call(o))},Ct=function(a){function o(t,e){var n=a.call(this,{model:t})||this;n.dragging=!1,n.loaded=!1,n.lastMaxHeight=0,n.tools={},(0,C.bindAll)(n,"startAutoscroll","stopAutoscroll","_emitUpdate");var r=n.el;n.module._config=et(et({},n.config||{}),{frameView:n}),n.frameWrapView=e,n.showGlobalTools=(0,C.debounce)(n.showGlobalTools.bind(n),50);var l=n.getCanvasModel();return n.listenTo(t,"change:head",n.updateHead),n.listenTo(l,"change:styles",n.renderStyles),t.view=n,(0,q.setViewEl)(r,n),n.autoScroller=new zi(n.config.autoscrollLimit,{rectIsInScrollIframe:!0,onScroll:function(){n.getGlobalToolsEl().style.opacity="0",n.showGlobalTools(),n.em.Canvas.spots.refreshDbn()}}),n}return L(o,a),Object.defineProperty(o.prototype,"tagName",{get:function(){return"iframe"},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"attributes",{get:function(){return{allowfullscreen:"allowfullscreen"}},enumerable:!1,configurable:!0}),o.prototype.getBoxRect=function(){var t=this.el,e=this.module,n=e.getCanvasView(),r=e.getCoords(),l=t.getBoundingClientRect(),p=n.getCanvasOffset(),d=n.getViewportDelta(),g=e.getZoomMultiplier();return{x:(l.x-p.left-d.x-r.x)*g,y:(l.y-p.top-d.y-r.y)*g,width:l.width*g,height:l.height*g}},o.prototype.updateHead=function(){var t=this.model,e=this.getHead(),n=[],r=[],l=t.head,p=t.previous("head"),d=function(h){return h===void 0&&(h={}),Object.keys(h).sort().map(function(m){return"[".concat(m,'="').concat(h[m],'"]')}).join("")},g=function(h,m,w){h.forEach(function(k){var z=k.tag,B=k.attributes;!m.some(function(nt){return nt.tag===z&&d(nt.attributes)===d(B)})&&w.push(k)})};g(l,p,r),g(p,l,n),n.forEach(function(h){var m,w=e.querySelector("".concat(h.tag).concat(d(h.attributes)));(m=w?.parentNode)===null||m===void 0||m.removeChild(w)}),(0,St.af)(e,r)},o.prototype.getEl=function(){return this.el},o.prototype.getCanvasModel=function(){var t;return(t=this==null?void 0:this.em.Canvas)===null||t===void 0?void 0:t.getModel()},o.prototype.getWindow=function(){return this.getEl().contentWindow},o.prototype.getDoc=function(){return this.getEl().contentDocument},o.prototype.getHead=function(){return this.getDoc().querySelector("head")},o.prototype.getBody=function(){return this.getDoc().querySelector("body")},o.prototype.getWrapper=function(){return this.getBody().querySelector("[data-gjs-type=wrapper]")},o.prototype.getJsContainer=function(){return this.jsContainer||(this.jsContainer=(0,St.a_)("div",{class:"".concat(this.ppfx,"js-cont")})),this.jsContainer},o.prototype.getToolsEl=function(){var t;return(t=this.frameWrapView)===null||t===void 0?void 0:t.elTools},o.prototype.getGlobalToolsEl=function(){return this.em.Canvas.getGlobalToolsEl()},o.prototype.getHighlighter=function(){return this._getTool("[data-hl]")},o.prototype.getBadgeEl=function(){return this._getTool("[data-badge]")},o.prototype.getOffsetViewerEl=function(){return this._getTool("[data-offset]")},o.prototype.getRect=function(){return this.rect||(this.rect=this.el.getBoundingClientRect()),this.rect},o.prototype.getOffsetRect=function(){var t=this.el,e=this.getBody(),n=e.scrollTop,r=e.scrollLeft,l=t.offsetHeight,p=t.offsetWidth;return{top:t.offsetTop,left:t.offsetLeft,height:l,width:p,scrollTop:n,scrollLeft:r,scrollBottom:n+l,scrollRight:r+p}},o.prototype._getTool=function(t){var e=this.tools,n=this.getToolsEl();return e[t]||(e[t]=n.querySelector(t)),e[t]},o.prototype.remove=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._toggleEffects(!1),this.tools={},(t=this.wrapper)===null||t===void 0||t.remove(),de.prototype.remove.apply(this,e),this},o.prototype.startAutoscroll=function(){this.autoScroller.start(this.el,this.getWindow(),{lastMaxHeight:this.getWrapper().offsetHeight-this.el.offsetHeight,zoom:this.em.getZoomDecimal(),ignoredElement:this.em.Canvas.getSpotsEl()})},o.prototype.stopAutoscroll=function(){this.autoScroller.stop()},o.prototype.showGlobalTools=function(){this.getGlobalToolsEl().style.opacity=""},o.prototype.render=function(){var t=this,e=t.$el,n=t.ppfx,r=t.em;return e.attr({class:"".concat(n,"frame")}),this.renderScripts(),r.trigger("frame:render",this),this},o.prototype.renderScripts=function(){var t=this,e=this,n=e.el,r=e.model,l=e.em,p="frame:load",d={el:n,model:r,view:this},g=this.getCanvasModel(),h=function(m){var w;if(m.length>0){var k=m.shift(),z=(0,St.a_)("script",et({type:"text/javascript"},(0,C.isString)(k)?{src:k}:k));(w=n.contentDocument)===null||w===void 0||w.head.appendChild(z),z.hasAttribute("nomodule")&&"noModule"in HTMLScriptElement.prototype?h(m):z.onerror=z.onload=h.bind(null,m)}else l?.trigger(ot.frameLoadHead,d),t.renderBody(),l?.trigger(ot.frameLoadBody,d),l?.trigger(p,d)};n.onload=function(){var m=t.config.frameContent;if(m){var w=t.getDoc();w.open(),w.write(m),w.close()}d.window=t.getWindow(),l?.trigger("".concat(p,":before"),d),l?.trigger(ot.frameLoad,d),t.renderHead(),h(at([],g.get("scripts"),!0))}},o.prototype.renderStyles=function(t){t===void 0&&(t={});var e=this.getHead(),n=this.getCanvasModel(),r=function(m){return m===void 0&&(m=[]),m.map(function(w){return{tag:"link",attributes:et({rel:"stylesheet"},(0,C.isString)(w)?{href:w}:w)}})},l=r(t.prev||n.previous("styles")),p=r(n?.get("styles")),d=[],g=[],h=function(m,w,k){m.forEach(function(z){var B=z.attributes.href;!w.some(function(nt){return nt.attributes.href===B})&&k.push(z)})};h(p,l,g),h(l,p,d),d.forEach(function(m){var w,k=e.querySelector('link[href="'.concat(m.attributes.href,'"]'));(w=k?.parentNode)===null||w===void 0||w.removeChild(k)}),(0,St.af)(e,g)},o.prototype.renderHead=function(){var t,e=this.model,n=this.em,r=e.root,l=(t=n?.Components)===null||t===void 0?void 0:t.getType(tr).view;l&&(this.headView=new l({el:this.getHead(),model:r.head,config:et(et({},r.config),{frameView:this})}).render())},o.prototype.renderBody=function(){var t,e=this,n=this,r=n.config,l=n.em,p=n.model,d=n.ppfx,g=this.getBody(),h=this.getWindow(),m=p.hasAutoHeight(),w=l.config;h._isEditor=!0,this.renderStyles({prev:[]}),(0,St.BC)(g,`<style>
      `.concat(w.baseCss||r.frameStyle||"",`

      `).concat(m?"body { overflow: hidden }":"",`

      [data-gjs-type="wrapper"] {
        `).concat(m?"":"min-height: 100vh;",`
        padding-top: 0.001em;
      }

      .`).concat(d,`dashed *[data-gjs-highlightable] {
        outline: 1px dashed rgba(170,170,170,0.7);
        outline-offset: -2px;
      }

      .`).concat(d,`selected {
        outline: 2px solid #3b97e3 !important;
        outline-offset: -2px;
      }

      .`).concat(d,`selected-parent {
        outline: 2px solid `).concat("#ffca6f",` !important
      }

      .`).concat(d,`no-select {
        user-select: none;
        -webkit-user-select:none;
        -moz-user-select: none;
      }

      .`).concat(d,`freezed {
        opacity: 0.5;
        pointer-events: none;
      }

      .`).concat(d,`no-pointer {
        pointer-events: none;
      }

      .`).concat(d,`pointer-init {
        pointer-events: initial;
      }

      .`).concat(d,`plh-image {
        background: #f5f5f5;
        border: none;
        height: 100px;
        width: 100px;
        display: block;
        outline: 3px solid #ffca6f;
        cursor: pointer;
        outline-offset: -2px
      }

      .`).concat(d,`grabbing {
        cursor: grabbing;
        cursor: -webkit-grabbing;
      }

      .`).concat(d,`is__grabbing {
        overflow-x: hidden;
      }

      .`).concat(d,`is__grabbing,
      .`).concat(d,`is__grabbing * {
        cursor: grabbing !important;
      }

      `).concat(w.canvasCss||"",`
      `).concat(w.protectedCss||"",`
    </style>`));var k=p.root,z=(((t=l?.Components)===null||t===void 0?void 0:t.getType("wrapper"))||{}).view;z&&((0,C.isFunction)(r.customRenderer)?r.customRenderer({editor:l.Editor,frame:p,window:h,frameView:this,onMount:function(B){e.wrapper=B,e._onRootMount(B)}}):(this.wrapper=new z({model:k,config:et(et({},k.config),{em:l,frameView:this})}).render(),this._onRootMount(this.wrapper)))},o.prototype._onRootMount=function(t){var e,n=this,r=this,l=r.config,p=r.em,d=r.model,g=this.getDoc(),h=g.body;(0,St.BC)(h,t.el),(0,St.BC)(h,new Vt({collection:d.getStyles(),config:et(et({},p.Css.getConfig()),{frameView:this})}).render().el),(0,St.BC)(h,this.getJsContainer()),(0,St.on)(h,"click",function(m){var w;return m&&((w=m.target)===null||w===void 0?void 0:w.tagName)=="A"&&m.preventDefault()}),(0,St.on)(h,"submit",function(m){return m&&m.preventDefault()}),[{event:"keydown keyup keypress",class:"KeyboardEvent"},{event:"mousedown mousemove mouseup",class:"MouseEvent"},{event:"pointerdown pointermove pointerup",class:"PointerEvent"},{event:"wheel",class:"WheelEvent",opts:{passive:!l.infiniteCanvas}}].forEach(function(m){return m.event.split(" ").forEach(function(w){g.addEventListener(w,function(k){return n.el.dispatchEvent((0,St.yL)(k,m.class))},m.opts)})}),this._toggleEffects(!0),(0,q.hasDnd)(p)&&(this.droppable=new T(p,(e=this.wrapper)===null||e===void 0?void 0:e.el)),this.loaded=!0,d.trigger("loaded")},o.prototype._toggleEffects=function(t){var e=t?St.on:St.AU,n=this.getWindow();n&&e(n,"".concat(St.D8," resize"),this._emitUpdate)},o.prototype._emitUpdate=function(){this.model._emitUpdated()},o}(de);const gt=Ct;var Bt=_e(9966),ue=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ne=function(){return Ne=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},Ne.apply(this,arguments)},Ye=function(a){function o(t,e){var n=a.call(this,{model:t})||this;return(0,C.bindAll)(n,"onScroll","frameLoaded","updateOffset","remove","startDrag"),Ne(Ne({},t.config),{frameWrapView:n}),n.cv=e,n.frame=new gt(t,n),n.classAnim="".concat(n.ppfx,"frame-wrapper--anim"),n.updateOffset=(0,C.debounce)(n.updateOffset.bind(n),0),n.updateSize=(0,C.debounce)(n.updateSize.bind(n),0),n.listenTo(t,"loaded",n.frameLoaded),n.listenTo(t,"change:x change:y",n.updatePos),n.listenTo(t,"change:width change:height",n.updateSize),n.listenTo(t,"destroy remove",n.remove),n.updatePos(),n.setupDragger(),n}return ue(o,a),o.prototype.events=function(){return{"click [data-action-remove]":"remove","mousedown [data-action-move]":"startDrag"}},o.prototype.setupDragger=function(){var t,e,n,r=this,l=this.module,p=this.model,d=function(g){l.toggleFramesEvents(g)};this.dragger=new Bt.A({onStart:function(){var g=p.attributes,h=g.x,m=g.y;n=r.em.getZoomMultiplier(),t=h,e=m,d(!1)},onEnd:function(){return d(!0)},setPosition:function(g){p.set({x:t+g.x*n,y:e+g.y*n})}})},o.prototype.startDrag=function(t){var e;t&&((e=this.dragger)===null||e===void 0||e.start(t))},o.prototype.__clear=function(t){var e=this.frame;e&&e.remove(t),(0,St.YZ)(this.elTools)},o.prototype.remove=function(t){var e,n=this;return(e=this.sizeObserver)===null||e===void 0||e.disconnect(),this.__clear(t),de.prototype.remove.apply(this,t),["frame","dragger","cv","elTools"].forEach(function(r){return n[r]=0}),this},o.prototype.updateOffset=function(){var t,e=this,n=e.em,r=e.$el,l=e.frame;n&&!n.destroyed&&(n.runDefault({preserveSelected:1}),r.removeClass(this.classAnim),(t=l?.model)===null||t===void 0||t._emitUpdated())},o.prototype.updatePos=function(t){var e=this.model,n=this.el,r=e.attributes,l=r.x,p=r.y,d=n.style;this.frame.rect=void 0,d.left=isNaN(l)?l:"".concat(l,"px"),d.top=isNaN(p)?p:"".concat(p,"px"),t&&this.updateOffset()},o.prototype.updateSize=function(){this.updateDim()},o.prototype.updateDim=function(){var t=this,e=t.em,n=t.el,r=t.$el,l=t.model,p=t.classAnim,d=t.frame;if(d){d.rect=void 0,r.addClass(p);var g=this.__handleSize(),h=g.noChanges,m=g.width,w=g.height;((0,C.isNull)(m)||(0,C.isNull)(w))&&l.set(Ne(Ne({},m?{}:{width:n.offsetWidth}),w?{}:{height:n.offsetHeight}),{silent:1}),e.stopDefault({preserveSelected:1}),h?this.updateOffset():setTimeout(this.updateOffset,350)}},o.prototype.onScroll=function(){var t=this.frame;this.em.trigger("frame:scroll",{frame:t,body:t.getBody(),target:t.getWindow()})},o.prototype.frameLoaded=function(){var t=this.frame;this.config,t.getWindow().onscroll=this.onScroll,this.updateDim()},o.prototype.__handleSize=function(){var t,e="px",n=this.model,r=this.el.style,l=n.attributes,p=l.width,d=l.height,g=r.width||"",h=r.height||"",m=p||"",w=d||"",k=g==m&&h==w,z=(0,C.isNumber)(m)?"".concat(m).concat(e):m,B=(0,C.isNumber)(w)?"".concat(w).concat(e):w;if(r.width=z,(t=this.sizeObserver)===null||t===void 0||t.disconnect(),n.hasAutoHeight()){var nt=this.frame.el.contentDocument;if(nt){var X=new ResizeObserver(function(){requestAnimationFrame(function(){var At=parseFloat(n.get("minHeight"))||0,It=Math.max(nt.body.scrollHeight,At);r.height="".concat(It,"px")})});X.observe(nt.body),this.sizeObserver=X}}else r.height=B,delete this.sizeObserver;return{noChanges:k,width:p,height:d,newW:m,newH:w}},o.prototype.render=function(){var t=this,e=t.frame,n=t.$el,r=t.ppfx,l=t.cv,p=t.model,d=t.el,g=p.attributes.onRender;this.__clear(),this.__handleSize(),e.render(),n.empty().attr({class:"".concat(r,"frame-wrapper")}).append(`
      <div class="`.concat(r,`frame-wrapper__top gjs-two-color" data-frame-top>
        <div class="`).concat(r,`frame-wrapper__name" data-action-move>
          `).concat(p.get("name")||"",`
        </div>
        <div class="`).concat(r,`frame-wrapper__top-r">
          <div class="`).concat(r,`frame-wrapper__icon" data-action-remove style="display: none">
            <svg viewBox="0 0 24 24"><path d="M19 4h-3.5l-1-1h-5l-1 1H5v2h14M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12z"></path></svg>
          </div>
        </div>
      </div>
      <div class="`).concat(r,`frame-wrapper__right" data-frame-right></div>
      <div class="`).concat(r,`frame-wrapper__left" data-frame-left></div>
      <div class="`).concat(r,`frame-wrapper__bottom" data-frame-bottom></div>
      `)).append(e.el);var h=(0,St.a_)("div",{class:"".concat(r,"tools"),style:"pointer-events:none; display: none"},`
      <div class="`.concat(r,`highlighter" data-hl></div>
      <div class="`).concat(r,`badge" data-badge></div>
      <div class="`).concat(r,`placeholder">
        <div class="`).concat(r,`placeholder-int"></div>
      </div>
      <div class="`).concat(r,`ghost"></div>
      <div class="`).concat(r,`toolbar" style="pointer-events:all"></div>
      <div class="`).concat(r,`resizer"></div>
      <div class="`).concat(r,`offset-v" data-offset>
        <div class="gjs-marginName" data-offset-m>
          <div class="gjs-margin-v-el gjs-margin-v-top" data-offset-m-t></div>
          <div class="gjs-margin-v-el gjs-margin-v-bottom" data-offset-m-b></div>
          <div class="gjs-margin-v-el gjs-margin-v-left" data-offset-m-l></div>
          <div class="gjs-margin-v-el gjs-margin-v-right" data-offset-m-r></div>
        </div>
        <div class="gjs-paddingName" data-offset-m>
          <div class="gjs-padding-v-el gjs-padding-v-top" data-offset-p-t></div>
          <div class="gjs-padding-v-el gjs-padding-v-bottom" data-offset-p-b></div>
          <div class="gjs-padding-v-el gjs-padding-v-left" data-offset-p-l></div>
          <div class="gjs-padding-v-el gjs-padding-v-right" data-offset-p-r></div>
        </div>
      </div>
      <div class="`).concat(r,`offset-fixed-v"></div>
    `));this.elTools=h;var m=l?.toolsWrapper;return m&&m.appendChild(h),g&&g({el:d,elTop:d.querySelector("[data-frame-top]"),elRight:d.querySelector("[data-frame-right]"),elBottom:d.querySelector("[data-frame-bottom]"),elLeft:d.querySelector("[data-frame-left]"),frame:p,frameWrapperView:this,remove:this.remove,startDrag:this.startDrag}),this},o}(de);const un=Ye;var mo=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),po=function(a){function o(t,e){t===void 0&&(t={});var n=a.call(this,t,!0)||this;return n.listenTo(n.collection,"reset",n.render),n.canvasView=e.canvasView,n._module=e.module,n}return mo(o,a),o.prototype.onRemoveBefore=function(t,e){e===void 0&&(e={}),t.forEach(function(n){return n.remove(e)})},o.prototype.onRender=function(){var t=this.$el,e=this.ppfx;t.attr({class:"".concat(e,"frames")})},o.prototype.clearItems=function(){(this.viewCollection||[]).forEach(function(t){return t.remove()}),this.viewCollection=[]},o.prototype.renderView=function(t,e){return new un(t,this.canvasView)},o}(je);const Po=po;var $i=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ns=function(){return ns=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},ns.apply(this,arguments)},Jc=function(a){function o(t){var e=a.call(this,{model:t})||this;e.ready=!1,(0,C.bindAll)(e,"clearOff","onKeyPress","onWheel","onPointer");var n=e,r=n.em,l=n.pfx,p=n.ppfx,d=e.module.events;return e.className="".concat(l,"canvas ").concat(p,"no-touch-actions").concat(r.config.customUI?"":" ".concat(l,"canvas-bg")),e.clsUnscale="".concat(l,"unscale"),e._initFrames(),e.listenTo(r,d.refresh,e.clearOff),e.listenTo(r,"component:selected",e.checkSelected),e.listenTo(r,"".concat(d.coords," ").concat(d.zoom),e.updateFrames),e.listenTo(t,"change:frames",e._onFramesUpdate),e.toggleListeners(!0),e}return $i(o,a),o.prototype.template=function(){var t=this.pfx;return`
      <div class="`.concat(t,`canvas__frames" data-frames>
        <div class="`).concat(t,`canvas__spots" data-spots></div>
      </div>
      <div id="`).concat(t,'tools" class="').concat(t,`canvas__tools" data-tools></div>
      <style data-canvas-style></style>
    `)},o.prototype._onFramesUpdate=function(){this._initFrames(),this._renderFrames()},o.prototype._initFrames=function(){var t=this,e=t.frames,n=t.model,r=t.config,l=t.em,p=n.frames;l.set("readyCanvas",0),p.once("loaded:all",function(){return l.set("readyCanvas",1)}),e?.remove(),this.frames=new Po({collection:p},ns(ns({},r),{canvasView:this}))},o.prototype.checkSelected=function(t,e){var n;e===void 0&&(e={});var r=e.scroll,l=this.em.getCurrentFrame();r&&((n=t.views)===null||n===void 0||n.forEach(function(p){p.frameView===l&&p.scrollIntoView(r)}))},o.prototype.remove=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return clearTimeout(this.timerZoom),(t=this.frames)===null||t===void 0||t.remove(),this.frames=void 0,de.prototype.remove.apply(this,e),this.toggleListeners(!1),this},o.prototype.preventDefault=function(t){var e;t&&(t.preventDefault(),(e=t._parentEvent)===null||e===void 0||e.preventDefault())},o.prototype.toggleListeners=function(t){var e=this.el,n=this.config,r=t?St.on:St.AU;r(document,"keypress",this.onKeyPress),r(window,"scroll resize",this.clearOff),r(e,"wheel",this.onWheel,{passive:!n.infiniteCanvas}),r(e,"pointermove",this.onPointer)},o.prototype.screenToWorld=function(t,e){var n=this.module,r=n.getCoords(),l=n.getZoomMultiplier(),p=this.getViewportDelta();return{x:(t-r.x-p.x)*l,y:(e-r.y-p.y)*l}},o.prototype.onPointer=function(t){if(this.config.infiniteCanvas){var e=this.getCanvasOffset(),n=(0,St.Xy)(),r={x:t.clientX-e.left+n.x,y:t.clientY-e.top+n.y};if(t._parentEvent){var l=t.target.getBoundingClientRect(),p=this.module.getZoomDecimal();r.x=l.left-e.left+n.x+t.clientX*p,r.y=l.top-e.top+n.y+t.clientY*p}this.model.set({pointerScreen:r,pointer:this.screenToWorld(r.x,r.y)})}},o.prototype.onKeyPress=function(t){var e=this.em;(0,St.Ch)(t)!==" "||e.getZoomDecimal()===1||e.Canvas.isInputFocused()||(this.preventDefault(t),e.Editor.runCommand("core:canvas-move"))},o.prototype.onWheel=function(t){var e=this.module;if(this.config.infiniteCanvas){this.preventDefault(t);var n=t.deltaX,r=t.deltaY,l=e.getZoomDecimal(),p=(0,St.rp)(t),d=e.getCoords();if(p){var g=l-r*l*.01;e.setZoom(100*g);var h=this.model.getPointerCoords(E.x2.Screen),m=this.getCanvasOffset(),w=h.x-m.width/2,k=h.y-m.height/2,z=g/l,B=w-(w-d.x)*z,nt=k-(k-d.y)*z;e.setCoords(B,nt)}else this.onPointer(t),e.setCoords(d.x-n,d.y-r)}},o.prototype.updateFrames=function(t){var e=this.em,n=this.toolsWrapper,r={preserveSelected:1};this.updateFramesArea(),this.clearOff(),n.style.display="none",e.trigger("canvas:update",t),clearTimeout(this.timerZoom),this.timerZoom=setTimeout(function(){e.stopDefault(r),e.runDefault(r),n.style.display=""},300)},o.prototype.updateFramesArea=function(){var t=this,e=t.framesArea,n=t.model,r=t.module,l=t.cvStyle,p=t.clsUnscale,d=r.getZoomMultiplier();if(e){var g=n.attributes,h=g.x,m=g.y,w=r.getZoomDecimal();e.style.transform="scale(".concat(w,") translate(").concat(h*d,"px, ").concat(m*d,"px)")}l&&(l.innerHTML=`
        .`.concat(p," { scale: ").concat(d,` }
      `))},o.prototype.fitViewport=function(t){var e,n,r;t===void 0&&(t={});var l=this,p=l.em,d=l.module,g=l.model;this.clearOff();var h=this.getCanvasOffset(),m=t.el,w=m&&((e=(0,q.getComponentView)(m))===null||e===void 0?void 0:e.frameView),k=w?w.model:t.frame||p.getCurrentFrameModel()||g.frames.at(0),z=k.attributes,B=z.x,nt=z.y,X={x:B??0,y:nt??0,width:k.width,height:k.height};if(m){var At=this.getElBoxRect(m);X.x=X.x+At.x,X.y=X.y+At.y,X.width=At.width,X.height=At.height}var It=t.ignoreHeight,Wt=(n=t.gap)!==null&&n!==void 0?n:0,oe=(0,C.isNumber)(Wt),ve=oe?Wt:Wt.x,we=oe?Wt:Wt.y,Ve=X.width+2*ve,Ze=X.height+2*we,Xe=h.width,Un=h.height,Xn=Xe/Ve,xo=Un/Ze,Ir=100*(It?Xn:Math.min(Xn,xo)),ji=(r=(0,C.isFunction)(t.zoom)?t.zoom(Ir):t.zoom)!==null&&r!==void 0?r:Ir;d.setZoom(ji,{from:"fitViewport"});var Mi=-X.x+(k.width>=Xe?Xe/2-Ve/2:-ve),li=-X.y+Un/2-Ze/2,ci=d.getZoomDecimal(),Nr={x:(Mi+ve)*ci,y:(li+we)*ci};if(It){var ui=d.getZoomMultiplier(),Vr=(Un*ui-Un)/2;Nr.y=(-X.y+we)*ci-Vr/ui}d.setCoords(Nr.x,Nr.y)},o.prototype.isElInViewport=function(t){var e=(0,q.getElement)(t),n=(0,St.C8)(e),r=this.getFrameOffset(e),l=n.top,p=n.left;return l>=0&&p>=0&&l<=r.height&&p<=r.width},o.prototype.offset=function(t,e){e===void 0&&(e={});var n=e.noScroll,r=(0,St.C8)(t),l=n?{x:0,y:0}:(0,St.Xy)(t);return{top:r.top+l.y,left:r.left+l.x,width:r.width,height:r.height}},o.prototype.getRectToScreen=function(t){var e,n,r,l,p=this.getCanvasScroll(),d=this.module.getZoomDecimal(),g=this.module.getCoords(),h=this.getViewportDelta();return{x:((e=t.x)!==null&&e!==void 0?e:0)*d-p.scrollLeft+g.x+h.x||0,y:((n=t.y)!==null&&n!==void 0?n:0)*d-p.scrollTop+g.y+h.y||0,width:((r=t.width)!==null&&r!==void 0?r:0)*d,height:((l=t.height)!==null&&l!==void 0?l:0)*d}},o.prototype.getElBoxRect=function(t,e){var n,r,l;e===void 0&&(e={});var p=this.module,d=(0,St.C8)(t),g=d.width,h=d.height,m=d.left,w=d.top,k=(n=(0,q.getComponentView)(t))===null||n===void 0?void 0:n.frameView,z=k?.getBoxRect(),B=p.getZoomMultiplier(),nt=(r=z?.x)!==null&&r!==void 0?r:0,X=(l=z?.y)!==null&&l!==void 0?l:0,At=this.el,It=(0,St.Xy)(),Wt={x:m+nt+(At.scrollLeft+It.x)*B,y:w+X+(At.scrollTop+It.y)*B,width:g,height:h};return e.local&&(Wt.x=m,Wt.y=w),e.toScreen?this.getRectToScreen(Wt):Wt},o.prototype.getViewportRect=function(t){t===void 0&&(t={});var e=this.getCanvasOffset(),n=e.top,r=e.left,l=e.width,p=e.height,d=this.module;if(t.toWorld){var g=d.getZoomMultiplier(),h=d.getCoords(),m=this.getViewportDelta();return{x:(-h.x-m.x||0)*g,y:(-h.y-m.y||0)*g,width:l*g,height:p*g}}return{x:r,y:n,width:l,height:p}},o.prototype.getViewportDelta=function(t){t===void 0&&(t={});var e=this.module.getZoomMultiplier(),n=this.getCanvasOffset(),r=n.width,l=n.height;return{x:(r*e-r)/2/e,y:(l*e-l)/2/e}},o.prototype.clearOff=function(){this.frmOff=void 0,this.cvsOff=void 0},o.prototype.getFrameOffset=function(t){var e;if(!this.frmOff||t){var n=(e=this.frame)===null||e===void 0?void 0:e.el,r=t?.ownerDocument.defaultView,l=r?r.frameElement:n;this.frmOff=this.offset(l||n)}return this.frmOff},o.prototype.getCanvasOffset=function(){return this.cvsOff||(this.cvsOff=this.offset(this.el)),this.cvsOff},o.prototype.getElementPos=function(t,e){e===void 0&&(e={});var n=this.module.getZoomDecimal(),r=this.getFrameOffset(t),l=this.el,p=this.getCanvasOffset(),d=this.offset(t,e),g=e.avoidFrameOffset?0:r.top,h=e.avoidFrameOffset?0:r.left,m=e.avoidFrameZoom?d.top:d.top*n,w=e.avoidFrameZoom?d.left:d.left*n;return{top:e.avoidFrameOffset?m:m+g-p.top+l.scrollTop,left:e.avoidFrameOffset?w:w+h-p.left+l.scrollLeft,height:e.avoidFrameZoom?d.height:d.height*n,width:e.avoidFrameZoom?d.width:d.width*n,zoom:n,rect:d}},o.prototype.getElementOffsets=function(t){if(!t||(0,St.ir)(t))return{};var e={},n=window.getComputedStyle(t),r=this.module.getZoomDecimal();return["marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"].forEach(function(l){e[l]=parseFloat(n[l])*r}),e},o.prototype.getPosition=function(t){var e;t===void 0&&(t={});var n=(e=this.frame)===null||e===void 0?void 0:e.el.contentDocument;if(!n)return{top:0,left:0,width:0,height:0};var r=n.body,l=this.module.getZoomDecimal(),p=this.getFrameOffset(),d=this.getCanvasOffset(),g=t.noScroll;return{top:p.top+(g?0:r.scrollTop)*l-d.top,left:p.left+(g?0:r.scrollLeft)*l-d.left,width:d.width,height:d.height}},o.prototype.getCanvasScroll=function(){return this.config.scrollableCanvas?{scrollTop:this.el.scrollTop,scrollLeft:this.el.scrollLeft}:{scrollTop:0,scrollLeft:0}},o.prototype.updateScript=function(t){var e=t.model,n=e.getId(),r={component:e,view:t,el:t.el};if(!t.scriptContainer){t.scriptContainer=(0,St.a_)("div",{"data-id":n});var l=this.getJsContainer();l?.appendChild(t.scriptContainer)}t.el.id=n,t.scriptContainer.innerHTML="";var p=document.createElement("script"),d=e.getScriptString(),g=e.get("script-props")?d:`function(){
`.concat(d,`
;}`),h=JSON.stringify(e.__getScriptProps());p.innerHTML=`
      setTimeout(function() {
        var item = document.getElementById('`.concat(n,`');
        if (!item) return;
        var script = (`).concat(g,`).bind(item);
        script(`).concat(h,`, { el: item });
      }, 1);`),setTimeout(function(){e.emitWithEditor(jt.I.scriptMountBefore,r);var m=t.scriptContainer;m?.appendChild(p),e.emitWithEditor(jt.I.scriptMount,r)},0)},o.prototype.getJsContainer=function(t){var e=this.getFrameView(t);return e?.getJsContainer()},o.prototype.getFrameView=function(t){return t?.frameView||this.em.getCurrentFrame()},o.prototype._renderFrames=function(){if(this.ready){var t=this,e=t.model,n=t.frames,r=t.em,l=t.framesArea,p=e.frames;p.listenToLoad(),n.render();var d=p.at(0),g=d?.view;r.setCurrentFrame(g),l?.appendChild(n.el),this.frame=g,this.updateFramesArea()}},o.prototype.renderFrames=function(){this._renderFrames()},o.prototype.render=function(){var t=this,e=t.el,n=t.$el,r=t.ppfx,l=t.config,p=t.em;n.html(this.template());var d=n.find("[data-frames]");this.framesArea=d.get(0);var g=n.find("[data-tools]");return this.toolsWrapper=g.get(0),g.append(`
      <div class="`.concat(r,"tools ").concat(r,`tools-gl" style="pointer-events:none">
        <div class="`).concat(r,`placeholder">
          <div class="`).concat(r,`placeholder-int"></div>
        </div>
      </div>
      <div id="`).concat(r,`tools" style="pointer-events:none">
        `).concat(l.extHl?'<div class="'.concat(r,'highlighter-sel"></div>'):"",`
        <div class="`).concat(r,`badge"></div>
        <div class="`).concat(r,`ghost"></div>
        <div class="`).concat(r,`toolbar" style="pointer-events:all"></div>
        <div class="`).concat(r,`resizer"></div>
        <div class="`).concat(r,`offset-v"></div>
        <div class="`).concat(r,`offset-fixed-v"></div>
      </div>
    `)),this.toolsEl=e.querySelector("#".concat(r,"tools")),this.hlEl=e.querySelector(".".concat(r,"highlighter")),this.badgeEl=e.querySelector(".".concat(r,"badge")),this.placerEl=e.querySelector(".".concat(r,"placeholder")),this.ghostEl=e.querySelector(".".concat(r,"ghost")),this.toolbarEl=e.querySelector(".".concat(r,"toolbar")),this.resizerEl=e.querySelector(".".concat(r,"resizer")),this.offsetEl=e.querySelector(".".concat(r,"offset-v")),this.fixedOffsetEl=e.querySelector(".".concat(r,"offset-fixed-v")),this.toolsGlobEl=e.querySelector(".".concat(r,"tools-gl")),this.spotsEl=e.querySelector("[data-spots]"),this.cvStyle=e.querySelector("[data-canvas-style]"),e.className=(0,q.getUiClass)(p,this.className),l.scrollableCanvas===!0&&(e.style.overflow="auto"),this.ready=!0,this._renderFrames(),this},o}(de);const Fp=Jc;var Hp=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),qi=function(){return qi=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},qi.apply(this,arguments)},Zc=function(a,o,t){if(t||arguments.length===2)for(var e,n=0,r=o.length;n<r;n++)!e&&n in o||(e||(e=Array.prototype.slice.call(o,0,n)),e[n]=o[n]);return a.concat(e||Array.prototype.slice.call(o))},Qc=function(a){function o(t){var e=a.call(this,t,"Canvas",Et())||this;return e.events=K,e.framesById={},e.canvas=new le(e),e.spots=new me(e),e.model=e.canvas,e.startAutoscroll=e.startAutoscroll.bind(e),e.stopAutoscroll=e.stopAutoscroll.bind(e),e.autoScroller=new zi,e}return Hp(o,a),o.prototype.getCanvasView=function(){return this.canvasView},o.prototype.postLoad=function(){this.model.init()},o.prototype.getModel=function(){return this.canvas},o.prototype.getElement=function(){return this.getCanvasView().el},o.prototype.getFrame=function(t){return this.getFrames()[t||0]},o.prototype.getFrameEl=function(){var t=(this.canvasView||{}).frame;return t?.el},o.prototype.getFramesEl=function(){var t;return(t=this.canvasView)===null||t===void 0?void 0:t.framesArea},o.prototype.getWindow=function(){var t=(this.canvasView||{}).frame;return t?.getWindow()},o.prototype.getDocument=function(){var t=this.getFrameEl();return t?.contentDocument},o.prototype.getBody=function(){var t=this.getDocument();return t?.body},o.prototype._getLocalEl=function(t,e,n){var r=t,l=e?.frameView;return r=l?l[n]():r},o.prototype.getGlobalToolsEl=function(){var t;return(t=this.canvasView)===null||t===void 0?void 0:t.toolsGlobEl},o.prototype.getToolsEl=function(t){return this._getLocalEl(this.getCanvasView().toolsEl,t,"getToolsEl")},o.prototype.getHighlighter=function(t){return this._getLocalEl(this.getCanvasView().hlEl,t,"getHighlighter")},o.prototype.getBadgeEl=function(t){return this._getLocalEl(this.getCanvasView().badgeEl,t,"getBadgeEl")},o.prototype.getPlacerEl=function(){return this.getCanvasView().placerEl},o.prototype.getGhostEl=function(){return this.getCanvasView().ghostEl},o.prototype.getToolbarEl=function(){return this.getCanvasView().toolbarEl},o.prototype.getResizerEl=function(){return this.getCanvasView().resizerEl},o.prototype.getOffsetViewerEl=function(t){return this._getLocalEl(this.getCanvasView().offsetEl,t,"getOffsetViewerEl")},o.prototype.getFixedOffsetViewerEl=function(){return this.getCanvasView().fixedOffsetEl},o.prototype.getSpotsEl=function(){var t;return(t=this.canvasView)===null||t===void 0?void 0:t.spotsEl},o.prototype.render=function(){var t;return(t=this.canvasView)===null||t===void 0||t.remove(),this.canvasView=new Fp(this.canvas),this.canvasView.render().el},o.prototype.getOffset=function(){var t=this.offset(this.getFrameEl()),e=this.offset(this.getElement());return{top:t.top-e.top,left:t.left-e.left}},o.prototype.offset=function(t){return this.getCanvasView().offset(t)},o.prototype.setCustomBadgeLabel=function(t){this.config.customBadgeLabel=t},o.prototype.getElementPos=function(t,e){return this.getCanvasView().getElementPos(t,e)},o.prototype.getElementOffsets=function(t){return this.getCanvasView().getElementOffsets(t)},o.prototype.getRect=function(){var t,e=(t=this.getCanvasView().getPosition())!==null&&t!==void 0?t:{},n=e.top,r=n===void 0?0:n,l=e.left,p=l===void 0?0:l;return qi(qi({},this.getCanvasView().getCanvasOffset()),{topScroll:r,leftScroll:p})},o.prototype.getTargetToElementDim=function(t,e,n){n===void 0&&(n={});var r=n||{},l=this.getCanvasView().getPosition();if(l){var p=r.elPos||this.getCanvasView().getElementPos(e),d=n.toRight||0,g=r.targetHeight||t.offsetHeight,h=r.targetWidth||t.offsetWidth,m=r.event||null,w=p.top-g,k=p.left;k+=d?p.width:0;var z=(k=d?k-h:k)<l.left?l.left:k,B=w<l.top?l.top:w,nt={top:B=B>p.top+p.height?p.top+p.height:B,left:z,elementTop:p.top,elementLeft:p.left,elementWidth:p.width,elementHeight:p.height,targetWidth:t.offsetWidth,targetHeight:t.offsetHeight,canvasTop:l.top,canvasLeft:l.left,canvasWidth:l.width,canvasHeight:l.height};return m&&this.em&&this.em.trigger(m,nt),nt}},o.prototype.canvasRectOffset=function(t,e,n){var r=this;n===void 0&&(n={});var l=function(p,d,g){d===void 0&&(d=1);var h=r.em.getZoomDecimal(),m=d?"top":"left",w=p.ownerDocument,k=n.offset?function(Ve){var Ze=Ve.defaultView;return Ze?.frameElement}(w):{},z=k.offsetTop,B=z===void 0?0:z,nt=k.offsetLeft,X=nt===void 0?0:nt,At=w.body||{},It=At.scrollTop,Wt=It===void 0?0:It,oe=At.scrollLeft,ve=d?Wt:oe===void 0?0:oe,we=d?B:X;return g[m]-(ve-we)*h};return{top:l(t,1,e),left:l(t,0,e)}},o.prototype.getTargetToElementFixed=function(t,e,n){n===void 0&&(n={});var r=n.pos||this.getElementPos(t,{noScroll:!0}),l=n.canvasOff||this.canvasRectOffset(t,r),p=e.offsetHeight||0,d=e.offsetWidth||0,g=this.getCanvasView(),h=g.getCanvasScroll(),m=h.scrollTop,w=h.scrollLeft,k=g.getPosition(),z=n.event,B=r.width-d,nt=-p,X=(0,C.isUndefined)(n.left)?B:n.left,At=Math.max(-r.left+w,0);X=Math.max(X,At);var It=r.width-d;X=Math.min(X,It);var Wt=k.width+w-d-r.left;X=Math.min(X,Wt);var oe=nt;if(l.top<p+m){var ve=r.height+p;if(ve<k.height)oe+=ve;else{var we=-l.top+m;oe=we<r.height?we:r.height}}var Ve={top:oe,left:X,canvasOffsetTop:l.top,canvasOffsetLeft:l.left,elRect:r,canvasOffset:l,canvasRect:k,targetWidth:d,targetHeight:p};return z&&this.em.trigger(z,Ve),Ve},o.prototype.getMouseRelativePos=function(t,e){e===void 0&&(e={});var n=e.subWinOffset,r=t.target,l=r.nodeType===Node.DOCUMENT_NODE?r:r.ownerDocument,p=l.defaultView||l.parentWindow,d=p.frameElement,g=n?p.pageYOffset:0,h=n?p.pageXOffset:0,m=this.getZoomMultiplier(),w=0,k=0;if(d){var z=d.getBoundingClientRect();w=z.top||0,k=z.left||0}return{y:(t.clientY+w-g)*m,x:(t.clientX+k-h)*m}},o.prototype.getMouseRelativeCanvas=function(t,e){var n,r=this.getZoomDecimal(),l=this.getCanvasView(),p=(n=l.getPosition(e))!==null&&n!==void 0?n:{top:0,left:0},d=l.getCanvasScroll(),g={top:p.top+d.scrollTop,left:p.left+d.scrollLeft},h=g.top,m=g.left;return{y:t.clientY*r+h,x:t.clientX*r+m}},o.prototype.startDrag=function(t){this.em.set("dragSource",t)},o.prototype.endDrag=function(){this.em.set({dragResult:null,dragSource:void 0})},o.prototype.hasFocus=function(){return this.getDocument().hasFocus()},o.prototype.isInputFocused=function(){var t=this.getDocument(),e=this.getFrameEl(),n=Zc(["body"],this.config.notTextable,!0),r=e&&document.activeElement===e?t&&t.activeElement:document.activeElement;return r&&!n.some(function(l){return r.matches(l)})},o.prototype.scrollTo=function(t,e){e===void 0&&(e={});var n=(0,q.getElement)(t),r=n&&(0,q.getViewEl)(n);r&&r.scrollIntoView(e)},o.prototype.startAutoscroll=function(t){var e=t&&t.view||this.em.getCurrentFrame();if(e&&e.startAutoscroll(),this.config.scrollableCanvas){var n=this.getCanvasView().el;this.autoScroller.start(n,n,{zoom:this.em.getZoomDecimal(),ignoredElement:this.getSpotsEl()})}},o.prototype.stopAutoscroll=function(t){var e=t&&t.view||this.em.getCurrentFrame();e&&e.stopAutoscroll(),this.config.scrollableCanvas&&this.autoScroller.stop()},o.prototype.setZoom=function(t,e){return e===void 0&&(e={}),this.canvas.set("zoom",typeof t=="string"?parseFloat(t):t,e),this},o.prototype.getZoom=function(){return parseFloat(this.canvas.get("zoom"))},o.prototype.setCoords=function(t,e,n){var r;n===void 0&&(n={});var l=t||t===0,p=e||e===0,d={x:this.canvas.get("x"),y:this.canvas.get("y")};if(l&&(d.x=parseFloat("".concat(t))),p&&(d.y=parseFloat("".concat(e))),n.toWorld){var g=(r=this.canvasView)===null||r===void 0?void 0:r.getViewportDelta();g&&(l&&(d.x=d.x-g.x),p&&(d.y=d.y-g.y))}return this.canvas.set(d),this},o.prototype.getCoords=function(){var t=this.canvas.attributes;return{x:t.x,y:t.y}},o.prototype.getPointer=function(t){var e=this.canvas.attributes,n=e.pointer,r=e.pointerScreen;return t?r:n},o.prototype.getZoomDecimal=function(){return this.getZoom()/100},o.prototype.getZoomMultiplier=function(){var t=this.getZoomDecimal();return t?1/t:1},o.prototype.fitViewport=function(t){var e;(e=this.canvasView)===null||e===void 0||e.fitViewport(t)},o.prototype.toggleFramesEvents=function(t){this.getFramesEl().style.pointerEvents=t?"":"none"},o.prototype.getFrames=function(){return this.canvas.frames.map(function(t){return t})},o.prototype.addFrame=function(t,e){return t===void 0&&(t={}),e===void 0&&(e={}),this.canvas.frames.add(new _t(this,qi({},t)),e)},o.prototype.getLastDragResult=function(){return this.em.get("dragResult")},o.prototype.addSpot=function(t,e){var n;e===void 0&&(e={});var r=t,l=this.getSpots(r);if(l.length){var p=l[0];return p.set(r),p}var d=r.componentView||((n=r.component)===null||n===void 0?void 0:n.view),g=new ce.A(this,qi(qi({},r),{id:r.id||"cs_".concat(r.type,"_").concat(d?.cid),type:r.type||""}));return this.spots.add(g,e),g},o.prototype.getSpots=function(t){return t===void 0&&(t={}),this.spots.where(t.id?{id:t.id}:t)},o.prototype.removeSpots=function(t){t===void 0&&(t={});var e=(0,C.isArray)(t)?t:this.getSpots(t);return this.spots.remove(e)},o.prototype.hasCustomSpot=function(t){var e=this.config.customSpots;return!!(e===!0||e&&t&&e[t])},o.prototype.getWorldRectToScreen=function(t){var e;return(e=this.canvasView)===null||e===void 0?void 0:e.getRectToScreen(t)},o.prototype.refresh=function(t){t===void 0&&(t={});var e=this,n=e.em,r=e.events,l=e.canvasView;l?.clearOff(),(t.spots||t.all)&&(this.refreshSpots(),n.trigger("canvas:updateTools")),n.set("canvasOffset",this.getOffset()),n.trigger(r.refresh,t)},o.prototype.refreshSpots=function(){this.spots.refresh()},o.prototype.destroy=function(){var t,e=this;this.canvas.stopListening(),(t=this.canvasView)===null||t===void 0||t.remove(),["model","droppable"].forEach(function(n){return e[n]={}})},o}(ct);const os=Qc,tu=function(){return{stylePrefix:"comp-",components:[],draggableComponents:!0,disableTextInnerChilds:!1,processor:void 0,useFrameDoc:!1,voidElements:["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]}};var eu=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ga=function(){return ga=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},ga.apply(this,arguments)},Zs=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return eu(o,a),Object.defineProperty(o.prototype,"defaults",{get:function(){return ga(ga({},a.prototype.defaults),{tagName:"",droppable:!1,layerable:!1,selectable:!1,editable:!0})},enumerable:!1,configurable:!0}),o.prototype.toHTML=function(){var t=this.content,e=this.parent();return e?.is("script")?t:this.__escapeContent(t)},o.prototype.__escapeContent=function(t){return(0,q.escapeNodeContent)(t)},o.isComponent=function(t){var e;if(t.nodeType===3)return{type:"textnode",content:(e=t.textContent)!==null&&e!==void 0?e:""}},o}(fn);const Zl=Zs;var Qs=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),er=function(){return er=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},er.apply(this,arguments)},nu=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return Qs(o,a),Object.defineProperty(o.prototype,"defaults",{get:function(){return er({},a.prototype.defaults)},enumerable:!1,configurable:!0}),o.prototype.toHTML=function(){return"<!--".concat(this.content,"-->")},o.isComponent=function(t){var e;if(t.nodeType==8)return{type:"comment",content:(e=t.textContent)!==null&&e!==void 0?e:""}},o}(Zl);const Ql=nu;var tc=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),rs=function(){return rs=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},rs.apply(this,arguments)},tl="iframe";const ec=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return tc(o,a),Object.defineProperty(o.prototype,"defaults",{get:function(){return rs(rs({},a.prototype.defaults),{type:tl,tagName:tl,droppable:!1,resizable:!0,traits:["id","title","src"],attributes:{frameborder:"0"}})},enumerable:!1,configurable:!0}),o.isComponent=function(t){return(0,q.toLowerCase)(t.tagName)===tl},o}(fn);var Up=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),el=function(){return el=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},el.apply(this,arguments)},ou='xmlns="http://www.w3.org/2000/svg" width="100" viewBox="0 0 24 24" style="fill: rgba(0,0,0,0.15); transform: scale(0.75)"',va=function(a){function o(t,e){t===void 0&&(t={});var n=a.call(this,t,e)||this,r=n.get("attributes").src;return r&&(0,q.buildBase64UrlFromSvg)((0,C.result)(n,"defaults").src)!==r&&n.set("src",r,{silent:!0}),n}return Up(o,a),Object.defineProperty(o.prototype,"defaults",{get:function(){return el(el({},a.prototype.defaults),{type:"image",tagName:"img",void:!0,droppable:0,editable:1,highlightable:0,resizable:{ratioDefault:1},traits:["alt"],src:"<svg ".concat(ou,`>
        <path d="M8.5 13.5l2.5 3 3.5-4.5 4.5 6H5m16 1V5a2 2 0 0 0-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2z"></path>
      </svg>`),fallback:"<svg ".concat(ou,`>
        <path d="M2.28 3L1 4.27l2 2V19c0 1.1.9 2 2 2h12.73l2 2L21 21.72 2.28 3m2.55 0L21 19.17V5a2 2 0 0 0-2-2H4.83M8.5 13.5l2.5 3 1-1.25L14.73 18H5l3.5-4.5z"></path>
      </svg>`),file:""})},enumerable:!1,configurable:!0}),o.prototype.initToolbar=function(){a.prototype.initToolbar.call(this);var t=this.em;if(t){var e="image-editor";if(t.Commands.has(e)){for(var n=!1,r=this.get("toolbar"),l=0;l<r.length;l++)if(r[l].command==="image-editor"){n=!0;break}n||(r.push({attributes:{class:"fa fa-pencil"},command:e}),this.set("toolbar",r))}}},o.prototype.getAttrToHTML=function(){var t=a.prototype.getAttrToHTML.call(this),e=this.getSrcResult();return e&&(t.src=e),t},o.prototype.getSrcResult=function(t){t===void 0&&(t={});var e=this.get(t.fallback?"fallback":"src")||"",n=e;return e&&e.substr(0,4)==="<svg"&&(n=(0,q.buildBase64UrlFromSvg)(e)),n},o.prototype.isDefaultSrc=function(){var t=this.get("src"),e=(0,C.result)(this,"defaults").src;return t===e||t===(0,q.buildBase64UrlFromSvg)(e)},o.prototype.toJSON=function(t){var e=a.prototype.toJSON.call(this,t),n=e.attributes;return n&&e.src===n.src&&delete e.src,e},o.prototype.parseUri=function(t){var e={};if((0,q.hasWin)())(e=document.createElement("a")).href=t;else if(typeof URL<"u")try{e=new URL(t)}catch{}return{hostname:e.hostname||"",pathname:e.pathname||"",protocol:e.protocol||"",search:e.search||"",hash:e.hash||"",port:e.port||"",query:function(n){n===void 0&&(n="");for(var r={},l=n.substring(1).split("&"),p=0;p<l.length;p++){var d=l[p].split("="),g=decodeURIComponent(d[0]);g&&(r[g]=decodeURIComponent(d[1]||""))}return r}(e.search)}},o.isComponent=function(t){return(0,q.toLowerCase)(t.tagName)==="img"},o}(fn);const wi=va;var nc=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ma=function(){return ma=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},ma.apply(this,arguments)};const nl=function(a){function o(t,e){t===void 0&&(t={});var n=a.call(this,t,e)||this;return n.__checkInnerChilds(),n}return nc(o,a),Object.defineProperty(o.prototype,"defaults",{get:function(){return ma(ma({},a.prototype.defaults),{type:"text",droppable:!1,editable:!0})},enumerable:!1,configurable:!0}),o.prototype.__checkInnerChilds=function(){var t=this.em.Components.config.disableTextInnerChilds;if(t){var e=function(n){n.isInstanceOf("textnode")||n.set({locked:!0,layerable:!1})};(0,C.isFunction)(t)?this.forEachChild(function(n){t(n)&&e(n)}):this.forEachChild(e)}},o}(fn);var oc=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Wr=function(){return Wr=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},Wr.apply(this,arguments)},ni="label";const No=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return oc(o,a),Object.defineProperty(o.prototype,"defaults",{get:function(){return Wr(Wr({},a.prototype.defaults),{type:ni,tagName:ni,traits:["id","title","for"]})},enumerable:!1,configurable:!0}),o.isComponent=function(t){return(0,q.toLowerCase)(t.tagName)===ni},o}(nl);var xi=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),jr=function(){return jr=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},jr.apply(this,arguments)},is="link",zp=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return xi(o,a),Object.defineProperty(o.prototype,"defaults",{get:function(){return jr(jr({},a.prototype.defaults),{type:is,tagName:"a",traits:["title","href","target"]})},enumerable:!1,configurable:!0}),o.isComponent=function(t,e){var n;if(e===void 0&&(e={}),(0,q.toLowerCase)(t.tagName)==="a"){var r=e.textTags||[];n={type:is,editable:!1};var l=t.childNodes;l.length||delete n.editable,(0,C.forEach)(l,function(p){var d=p.tagName;(p.nodeType==3&&p.textContent.trim()!==""||d&&r.indexOf((0,q.toLowerCase)(d))>=0)&&delete n.editable})}return n},o}(nl);const ru=zp;var as=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ss=function(){return ss=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},ss.apply(this,arguments)},iu=function(a){function o(t,e){t===void 0&&(t={});var n=a.call(this,t,e)||this;return n.get("src")?n.parseFromSrc():n.updateSrc(),n.listenTo(n,"change:address change:zoom change:mapType",n.updateSrc),n}return as(o,a),Object.defineProperty(o.prototype,"defaults",{get:function(){var t=a.prototype.defaults;return ss(ss({},t),{type:"map",src:"",void:!1,mapUrl:"https://maps.google.com/maps",tagName:"iframe",mapType:"q",address:"",zoom:"1",attributes:{frameborder:0},toolbar:t.toolbar,traits:[{label:"Address",name:"address",placeholder:"eg. London, UK",changeProp:!0},{type:"select",label:"Map type",name:"mapType",changeProp:!0,options:[{id:"q",label:"Roadmap"},{id:"w",label:"Satellite"}]},{label:"Zoom",name:"zoom",type:"range",min:1,max:20,changeProp:!0}]})},enumerable:!1,configurable:!0}),o.prototype.updateSrc=function(){this.set("src",this.getMapUrl())},o.prototype.getMapUrl=function(){var t=this.get("address"),e=this.get("zoom"),n=this.get("mapType");t=t?"&q="+t:"",e=e?"&z="+e:"",n=n?"&t="+n:"";var r=this.get("mapUrl")+"?"+t+e+n;return r+="&output=embed"},o.prototype.parseFromSrc=function(){var t=this.parseUri(this.get("src")).query;t.q&&this.set("address",t.q),t.z&&this.set("zoom",t.z),t.t&&this.set("mapType",t.t)},o.isComponent=function(t){if((0,q.toLowerCase)(t.tagName)=="iframe"&&/maps\.google\.com/.test(t.src))return{type:"map",src:t.src}},o}(wi);const ol=iu;var Bp=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ya=function(){return ya=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},ya.apply(this,arguments)},rl="script";const rc=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return Bp(o,a),Object.defineProperty(o.prototype,"defaults",{get:function(){return ya(ya({},a.prototype.defaults),{type:rl,tagName:rl,droppable:!1,draggable:!1,layerable:!1,highlightable:!1})},enumerable:!1,configurable:!0}),o.isComponent=function(t){return(0,q.toLowerCase)(t.tagName)===rl},o}(fn);var ic=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),oi=function(){return oi=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},oi.apply(this,arguments)},ba="svg";const ac=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return ic(o,a),Object.defineProperty(o.prototype,"defaults",{get:function(){return oi(oi({},a.prototype.defaults),{type:ba,tagName:ba,highlightable:!1,resizable:{ratioDefault:!0}})},enumerable:!1,configurable:!0}),o.prototype.getName=function(){var t=this.get("tagName"),e=this.get("custom-name");return t=t.charAt(0).toUpperCase()+t.slice(1),e||t},o.isComponent=function(t){return(0,q.toLowerCase)(t.tagName)===ba},o}(fn);var il=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),al=function(){return al=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},al.apply(this,arguments)};const Wp=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return il(o,a),Object.defineProperty(o.prototype,"defaults",{get:function(){return al(al({},a.prototype.defaults),{selectable:!1,hoverable:!1,layerable:!1})},enumerable:!1,configurable:!0}),o.isComponent=function(t,e){return e===void 0&&(e={}),!!e.inSvg},o}(ac);var $p=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),_a=function(){return _a=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},_a.apply(this,arguments)},ls="table";const wa=function(a){function o(t,e){t===void 0&&(t={});var n=a.call(this,t,e)||this,r=n.get("components");return!r.length&&r.add({type:"tbody"}),n}return $p(o,a),Object.defineProperty(o.prototype,"defaults",{get:function(){return _a(_a({},a.prototype.defaults),{type:ls,tagName:ls,droppable:["tbody","thead","tfoot"]})},enumerable:!1,configurable:!0}),o.isComponent=function(t){return(0,q.toLowerCase)(t.tagName)===ls},o}(fn);var cs=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),sl=function(){return sl=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},sl.apply(this,arguments)},xa="tbody";const ll=function(a){function o(t,e){t===void 0&&(t={});var n=a.call(this,t,e)||this,r=n.get("components"),l=n.get("columns"),p=n.get("rows");if(!r.length){for(var d=[];p--;){for(var g=[],h=l;h--;)g.push({type:"cell",classes:["cell"]});d.push({type:"row",classes:["row"],components:g})}r.add(d)}return n}return cs(o,a),Object.defineProperty(o.prototype,"defaults",{get:function(){return sl(sl({},a.prototype.defaults),{type:xa,tagName:xa,draggable:["table"],droppable:["tr"],columns:1,rows:1})},enumerable:!1,configurable:!0}),o.isComponent=function(t){return(0,q.toLowerCase)(t.tagName)===xa},o}(fn);var us=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ps=function(){return ps=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},ps.apply(this,arguments)};const Gi=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return us(o,a),Object.defineProperty(o.prototype,"defaults",{get:function(){return ps(ps({},a.prototype.defaults),{type:"cell",tagName:"td",draggable:["tr"]})},enumerable:!1,configurable:!0}),o.isComponent=function(t){return["td","th"].indexOf((0,q.toLowerCase)(t.tagName))>=0},o}(fn);var ds=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),$r=function(){return $r=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},$r.apply(this,arguments)},Ki="tfoot";const Ca=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return ds(o,a),Object.defineProperty(o.prototype,"defaults",{get:function(){return $r($r({},a.prototype.defaults),{type:Ki,tagName:Ki})},enumerable:!1,configurable:!0}),o.isComponent=function(t){return(0,q.toLowerCase)(t.tagName)===Ki},o}(ll);var au=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),fs=function(){return fs=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},fs.apply(this,arguments)},cl="thead";const qp=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return au(o,a),Object.defineProperty(o.prototype,"defaults",{get:function(){return fs(fs({},a.prototype.defaults),{type:cl,tagName:cl})},enumerable:!1,configurable:!0}),o.isComponent=function(t){return(0,q.toLowerCase)(t.tagName)===cl},o}(ll);var Yi=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),qr=function(){return qr=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},qr.apply(this,arguments)},su="tr";const Gp=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return Yi(o,a),Object.defineProperty(o.prototype,"defaults",{get:function(){return qr(qr({},a.prototype.defaults),{tagName:su,draggable:["thead","tbody","tfoot"],droppable:["th","td"]})},enumerable:!1,configurable:!0}),o.isComponent=function(t){return(0,q.toLowerCase)(t.tagName)===su},o}(fn);var Kp=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ul=function(){return ul=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},ul.apply(this,arguments)},sc="video",Sa="yt",ro="vi",An="ytnc",yo="so",qn=function(a){return a&&a!=="0"},hs=function(a){function o(t,e){t===void 0&&(t={});var n=a.call(this,t,e)||this;return n.get("src")&&n.parseFromSrc(),n.updatePropsFromAttr(),n.updateTraits(),n.on("change:provider",n.updateTraits),n.on("change:videoId change:provider",n.updateSrc),n}return Kp(o,a),Object.defineProperty(o.prototype,"defaults",{get:function(){return ul(ul({},a.prototype.defaults),{type:sc,tagName:sc,videoId:"",void:!1,provider:yo,ytUrl:"https://www.youtube.com/embed/",ytncUrl:"https://www.youtube-nocookie.com/embed/",viUrl:"https://player.vimeo.com/video/",loop:!1,poster:"",muted:!1,autoplay:!1,controls:!0,color:"",list:"",src:"",rel:1,modestbranding:0,sources:[],attributes:{allowfullscreen:"allowfullscreen"}})},enumerable:!1,configurable:!0}),o.prototype.updatePropsFromAttr=function(){if(this.get("provider")===yo){var t=this.get("attributes"),e=t.controls,n=t.autoplay,r=t.loop,l=t.muted,p={};(0,q.isDef)(e)&&(p.controls=!!e),(0,q.isDef)(n)&&(p.autoplay=!!n),(0,q.isDef)(r)&&(p.loop=!!r),(0,q.isDef)(l)&&(p.muted=!!l),(0,q.isEmptyObj)(p)||this.set(p)}},o.prototype.updateTraits=function(){var t,e=this.em,n="iframe";switch(this.get("provider")){case Sa:case An:t=this.getYoutubeTraits();break;case ro:t=this.getVimeoTraits();break;default:n="video",t=this.getSourceTraits()}this.set({tagName:n},{silent:!0}),this.set({traits:t}),e.get("ready")&&e.trigger("component:toggled")},o.prototype.parseFromSrc=function(){var t=this.get("provider"),e=this.parseUri(this.get("src")),n=e.query;switch(t){case Sa:case An:case ro:this.set("videoId",e.pathname.split("/").pop()),n.list&&this.set("list",n.list),qn(n.autoplay)&&this.set("autoplay",!0),qn(n.loop)&&this.set("loop",!0),parseInt(n.controls)===0&&this.set("controls",!1),qn(n.color)&&this.set("color",n.color),n.rel==="0"&&this.set("rel",0),n.modestbranding==="1"&&this.set("modestbranding",1),n.muted==="1"&&this.set("muted",!0)}},o.prototype.updateSrc=function(){var t="";switch(this.get("provider")){case Sa:t=this.getYoutubeSrc();break;case An:t=this.getYoutubeNoCookieSrc();break;case ro:t=this.getVimeoSrc()}this.set({src:t})},o.prototype.getAttrToHTML=function(){var t=a.prototype.getAttrToHTML.call(this);switch(this.get("provider")){case Sa:case An:case ro:break;default:t.loop=!!this.get("loop"),t.autoplay=!!this.get("autoplay"),t.controls=!!this.get("controls"),t.muted=!!this.get("muted")}return t},o.prototype.getProviderTrait=function(){return{type:"select",label:"Provider",name:"provider",changeProp:!0,options:[{value:"so",name:"HTML5 Source"},{value:Sa,name:"Youtube"},{value:An,name:"Youtube (no cookie)"},{value:ro,name:"Vimeo"}]}},o.prototype.getSourceTraits=function(){return[this.getProviderTrait(),{label:"Source",name:"src",placeholder:"eg. ./media/video.mp4",changeProp:!0},{label:"Poster",name:"poster",placeholder:"eg. ./media/image.jpg"},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait(),this.getMutedTrait()]},o.prototype.getYoutubeTraits=function(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. jNQXAC9IVRw",changeProp:!0},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait(),{type:"checkbox",label:"Related",name:"rel",changeProp:!0},{type:"checkbox",label:"Modest",name:"modestbranding",changeProp:!0},this.getMutedTrait()]},o.prototype.getVimeoTraits=function(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. 123456789",changeProp:!0},{label:"Color",name:"color",placeholder:"eg. FF0000",changeProp:!0},this.getAutoplayTrait(),this.getLoopTrait(),this.getMutedTrait()]},o.prototype.getAutoplayTrait=function(){return{type:"checkbox",label:"Autoplay",name:"autoplay",changeProp:!0}},o.prototype.getLoopTrait=function(){return{type:"checkbox",label:"Loop",name:"loop",changeProp:!0}},o.prototype.getControlsTrait=function(){return{type:"checkbox",label:"Controls",name:"controls",changeProp:!0}},o.prototype.getMutedTrait=function(){return{type:"checkbox",label:"Muted",name:"muted",changeProp:!0}},o.prototype.getYoutubeSrc=function(){var t=this.get("videoId"),e=this.get("ytUrl"),n=this.get("list");return e+=t+(t.indexOf("?")<0?"?":""),e+=n?"&list=".concat(n):"",e+=this.get("autoplay")?"&autoplay=1":"",e+=this.get("muted")?"&mute=1":"",e+=this.get("controls")?"":"&controls=0&showinfo=0",e+=this.get("loop")?"&loop=1&playlist=".concat(t):"",e+=this.get("rel")?"":"&rel=0",e+=this.get("modestbranding")?"&modestbranding=1":""},o.prototype.getYoutubeNoCookieSrc=function(){var t=this.getYoutubeSrc();return t=t.replace(this.get("ytUrl"),this.get("ytncUrl"))},o.prototype.getVimeoSrc=function(){var t=this.get("viUrl");return t+=this.get("videoId")+"?",t+=this.get("autoplay")?"&autoplay=1":"",t+=this.get("muted")?"&muted=1":"",t+=this.get("loop")?"&loop=1":"",t+=this.get("controls")?"":"&title=0&portrait=0&badge=0",t+=this.get("color")?"&color="+this.get("color"):""},o.isComponent=function(t){var e=t.tagName,n=t.src,r=/youtube\.com\/embed/.test(n),l=/youtube-nocookie\.com\/embed/.test(n),p=/player\.vimeo\.com\/video/.test(n),d=r||l||p;if((0,q.toLowerCase)(e)==sc||(0,q.toLowerCase)(e)=="iframe"&&d){var g={type:"video"};return n&&(g.src=n),d&&(r?g.provider=Sa:l?g.provider=An:p&&(g.provider=ro)),g}},o}(wi);const Yp=hs;var pl=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Oa=function(){return Oa=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},Oa.apply(this,arguments)},Xp=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return pl(o,a),Object.defineProperty(o.prototype,"defaults",{get:function(){return Oa(Oa({},a.prototype.defaults),{tagName:"body",removable:!1,copyable:!1,draggable:!1,components:[],traits:[],doctype:"",head:null,docEl:null,stylable:["background","background-color","background-image","background-repeat","background-attachment","background-position","background-size"]})},enumerable:!1,configurable:!0}),o.prototype.preInit=function(){var t,e,n=this.opt,r=this.attributes,l=(t=this.em)===null||t===void 0?void 0:t.Components,p=(e=l?.getType(tr))===null||e===void 0?void 0:e.model,d=l?.getType("default").model;if(p){var g=r.head,h=r.docEl;this.set({head:g&&g instanceof fn?g:new p(Oa({},g),n),docEl:h&&h instanceof fn?h:new d(Oa({tagName:"html"},h),n)},{silent:!0})}},Object.defineProperty(o.prototype,"head",{get:function(){return this.get("head")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"docEl",{get:function(){return this.get("docEl")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"doctype",{get:function(){return this.attributes.doctype||""},enumerable:!1,configurable:!0}),o.prototype.clone=function(t){var e=a.prototype.clone.call(this,t);return e.set("head",this.get("head").clone(t)),e.set("docEl",this.get("docEl").clone(t)),e},o.prototype.toHTML=function(t){t===void 0&&(t={});var e=this.doctype,n=(0,C.isUndefined)(t.asDocument)?!!e:t.asDocument,r=this.head,l=this.docEl,p=a.prototype.toHTML.call(this,t),d=n&&r?.toHTML(t)||"",g=n&&(0,St.kk)(l?.getAttrToHTML())||"",h=g?" ".concat(g):"";return n?"".concat(e,"<html").concat(h,">").concat(d).concat(p,"</html>"):p},o.prototype.__postAdd=function(){var t,e=(t=this.em)===null||t===void 0?void 0:t.UndoManager;return!this.__hasUm&&e?.add(this),a.prototype.__postAdd.call(this)},o.prototype.__postRemove=function(){var t,e=(t=this.em)===null||t===void 0?void 0:t.UndoManager;return e?.remove(this),a.prototype.__postRemove.call(this)},o.isComponent=function(){return!1},o}(fn);const Jp=Xp;var lc=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),lu=function(a){function o(){var t=a!==null&&a.apply(this,arguments)||this;return t.compView=wn,t}return lc(o,a),o.prototype.initialize=function(t){this.opts=t||{},this.config=t.config||{},this.em=this.config.em;var e=this.collection;this.listenTo(e,"add",this.addTo),this.listenTo(e,"reset",this.resetChildren),this.listenTo(e,"remove",this.removeChildren)},o.prototype.removeChildren=function(t,e,n){var r=this;n===void 0&&(n={}),t.views.forEach(function(l){if(l){var p=l.childrenView,d=l.scriptContainer;p&&p.stopListening(),(0,St.YZ)(d),l.remove.apply(l)}}),t.components().forEach(function(l){return r.removeChildren(l,e,n)})},o.prototype.addTo=function(t){this.addToCollection(t,null,this.collection.indexOf(t))},o.prototype.addToCollection=function(t,e,n){for(var r=this,l=r.config,p=r.opts,d=r.em,g=l.frameView,h=g?.model&&t.getView(g.model),m=p.componentTypes||d?.Components.getTypes(),w=t.get("type")||"default",k=this.compView,z=0;z<m.length;z++)if(m[z].id==w){k=m[z].view;break}var B,nt=h||new k({model:t,config:l,componentTypes:m});try{B=nt.render().el}catch(Wt){B=document.createTextNode(""),d.logError(Wt)}if(e)e.appendChild(B);else{var X=this.parentEl,At=X.childNodes;if((0,C.isUndefined)(n))X.appendChild(B);else{var It=At.length==n;It&&n--,It||!At.length?X.appendChild(B):X.insertBefore(B,At[n])}}return t.opt.temporary||d==null||d.trigger(jt.I.mount,t),B},o.prototype.resetChildren=function(t,e){var n=this;e===void 0&&(e={});var r=e.previousModels;e.skipDomReset||(this.parentEl.innerHTML=""),r?.forEach(function(l){return n.removeChildren(l,n.collection)}),t.each(function(l){return n.addToCollection(l)})},o.prototype.render=function(t){var e=this,n=this.el,r=document.createDocumentFragment();return this.parentEl=t||this.el,this.collection.each(function(l){return e.addToCollection(l,r)}),n.innerHTML="",n.appendChild(r),this},o}(E.Ss);const dl=lu;var Zp=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),vr=function(){return vr=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},vr.apply(this,arguments)},cc=function(a){function o(){var t=a!==null&&a.apply(this,arguments)||this;return t.rendered=!1,t}return Zp(o,a),o.prototype.className=function(){return this.getClasses()},o.prototype.tagName=function(){return this.model.get("tagName")},o.prototype.preinitialize=function(t){t===void 0&&(t={}),this.opts=t},o.prototype.initialize=function(t){t===void 0&&(t={});var e=this.model,n=t.config||{},r=n.em,l=e.opt||{},p=this.$el,d=this.el;this.opts=t,this.modelOpt=l,this.config=n,this.em=r,this.pfx=n.stylePrefix||"",this.ppfx=n.pStylePrefix||"",this.attr=e.get("attributes"),this.classe=this.attr.class||[],this.listenTo(e,"change:style",this.updateStyle),this.listenTo(e,"change:attributes",this.renderAttributes),this.listenTo(e,"change:highlightable",this.updateHighlight),this.listenTo(e,"change:status change:locked",this.updateStatus),this.listenTo(e,"change:script rerender",this.reset),this.listenTo(e,"change:content",this.updateContent),this.listenTo(e,"change",this.handleChange),this.listenTo(e,"active",this.onActive),this.listenTo(e,"disable",this.onDisable),p.data("model",e),(0,q.setViewEl)(d,this),e.view=this,this.frameView&&e.views.push(this),this.initClasses(),this.initComponents({avoidRender:!0}),this.events=vr(vr({},this.constructor.getEvents()),{dragstart:"handleDragStart"}),this.delegateEvents(),!l.temporary&&this.init(this._clbObj())},Object.defineProperty(o.prototype,"__cmpStyleOpts",{get:function(){return{state:"",mediaText:""}},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"frameView",{get:function(){return this.opts.config.frameView},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"createDoc",{get:function(){var t,e,n=((t=this.frameView)===null||t===void 0?void 0:t.getDoc())||document;return!((e=this.opts.config)===null||e===void 0)&&e.useFrameDoc?n:document},enumerable:!1,configurable:!0}),o.prototype.__isDraggable=function(){var t=this.model,e=this.config,n=t.attributes.draggable;return e.draggableComponents&&n},o.prototype._clbObj=function(){var t=this,e=t.em,n=t.model,r=t.el;return{editor:e?.getEditor(),model:n,el:r}},o.prototype.init=function(t){},o.prototype.removed=function(t){},o.prototype.onRender=function(t){},o.prototype.onActive=function(t){},o.prototype.onDisable=function(t){},o.prototype.remove=function(){var t;a.prototype.remove.call(this);var e=this.model,n=this.$el,r=e.views,l=this.frameView||{};return e.components().forEach(function(p){var d=p.getView(l.model);d?.remove()}),(t=this.childrenView)===null||t===void 0||t.remove(),r.splice(r.indexOf(this),1),this.removed(this._clbObj()),n.data({model:"",collection:"",view:""}),this},o.prototype.handleDragStart=function(t){if(!this.__isDraggable())return!1;t.stopPropagation(),t.preventDefault();var e=this.em.getSelectedAll(),n=e.includes(this.model)?e:[this.model];this.em.Commands.run("tlb-move",{target:n,event:t})},o.prototype.initClasses=function(){var t=this.model,e=t.classes,n="change:classes";e instanceof Jo&&(this.stopListening(t,n,this.initClasses),this.listenTo(t,n,this.initClasses),this.listenTo(e,"add remove change reset",this.updateClasses),e.length&&this.importClasses())},o.prototype.initComponents=function(t){t===void 0&&(t={});var e=this,n=e.model,r=e.$el,l=e.childrenView,p=n.get("components"),d=[n,"change:components",this.initComponents];p instanceof Qr&&(r.data("collection",p),l&&l.remove(),this.stopListening.apply(this,d),!t.avoidRender&&this.renderChildren(),this.listenTo.apply(this,d))},o.prototype.handleChange=function(){var t=this.model,e=(0,C.keys)(t.changed);if(e.length!==1||e[0]!=="status")for(var n in t.emitUpdate(),t.changed)t.emitUpdate(n)},o.prototype.importClasses=function(){var t=this.em,e=this.model,n=t.Selectors;n&&e.classes.forEach(function(r){return n.add(r.getName())})},o.prototype.updateStatus=function(t){t===void 0&&(t={});var e=this,n=e.em,r=e.el,l=e.ppfx,p=e.model,d=n?.Canvas,g=d?.config.extHl,h=p.get("status"),m="".concat(l,"selected"),w="".concat(m,"-parent"),k="".concat(l,"freezed"),z="".concat(l,"hovered"),B="".concat(l,"no-pointer"),nt="".concat(l,"pointer-init"),X=[m,w,k,z,B,nt],At=g&&!t.noExtHl?"":m;this.$el.removeClass(X.join(" "));var It=[r.getAttribute("class")||""],Wt=!d?.hasCustomSpot(ce.F.Select),oe=!d?.hasCustomSpot(ce.F.Target);switch(h){case"selected":Wt&&It.push(At);break;case"selected-parent":oe&&It.push(w);break;case"freezed":It.push(k);break;case"freezed-selected":It.push(k),Wt&&It.push(At);break;case"hovered":!t.avoidHover&&It.push(z)}(0,C.isBoolean)(p.locked)&&It.push(p.locked?B:nt);var ve=It.filter(Boolean).join(" ");ve&&r.setAttribute("class",ve)},o.prototype.updateHighlight=function(){var t=this.model,e=t.get("textable"),n=t.get("highlightable")&&(e||!t.isChildOf("text"));this.setAttribute("data-gjs-highlightable",!!n||"")},o.prototype.updateStyle=function(t,e,n){n===void 0&&(n={});var r=this.model,l=this.em;if(Br(l)&&!n.inline){var p=this.__cmpStyleOpts,d=r.getStyle(vr({inline:!0},p));!(0,C.isEmpty)(d)&&r.setStyle(d,p)}else this.setAttribute("style",r.styleToString(n))},o.prototype.updateStyles=function(){this.updateStyle()},o.prototype.updateClasses=function(){var t=this.model.classes.pluck("name").join(" ");this.setAttribute("class",t),this.updateStatus(),this.onAttrUpdate()},o.prototype.setAttribute=function(t,e){var n=this.$el;e?n.attr(t,e):n.removeAttr(t)},o.prototype.getClasses=function(){return this.model.getClasses().join(" ")},o.prototype.updateAttributes=function(){var t=this,e=t.model,n=t.$el,r=(t.el,e.attributes),l=r.textable,p=r.type,d=vr(vr({id:e.getId(),"data-gjs-type":p||"default"},this.__isDraggable()&&{draggable:!0}),l&&{contenteditable:"false"});this.__clearAttributes(),this.updateStyle(),this.updateHighlight();var g=vr(vr({},d),e.getAttributes());(0,C.keys)(g).forEach(function(h){return g[h]===!1&&delete g[h]}),n.attr(g)},o.prototype.__clearAttributes=function(){var t=this.el,e=this.$el,n=[];(0,C.each)(t.attributes,function(r){return n.push(r.nodeName)}),n.forEach(function(r){return e.removeAttr(r)})},o.prototype.updateContent=function(){var t=this.model.content,e=this.model.components().length;this.getChildrenContainer().innerHTML=e?"":t},o.prototype.prevDef=function(t){t.preventDefault()},o.prototype.updateScript=function(){var t=this.model,e=this.em;t.get("script")&&e?.Canvas.getCanvasView().updateScript(this)},o.prototype.getChildrenContainer=function(){var t=this.el;return typeof this.getChildrenSelector=="function"?t=this.el.querySelector(this.getChildrenSelector()):this.getTemplate,t},o.prototype.getOffsetRect=function(){var t={top:0,left:0,bottom:0,right:0},e=this.el,n=0,r=0,l=function(p){var d=p.offsetParent;d?(n+=d.offsetTop,r+=d.offsetLeft,l(d)):(t.top=e.offsetTop+n,t.left=e.offsetLeft+r,t.bottom=t.top+e.offsetHeight,t.right=t.left+e.offsetWidth)};return l(e),t},o.prototype.isInViewport=function(){var t=this,e=t.el,n=t.em,r=t.frameView,l=n.Canvas.getCanvasView().getElBoxRect(e,{local:!0}),p=r.el,d=p.clientHeight,g=p.clientWidth,h=l.y,m=l.x,w=h+l.height,k=m+l.width;return(h>=0&&h<d||w>0&&w<d)&&(k>=0&&k<g||m>0&&m<=g)},o.prototype.scrollIntoView=function(t){var e;if(t===void 0&&(t={}),!this.isInViewport()||t.force){var n=this.el;if(t.behavior!=="smooth"){var r=this.getOffsetRect();(e=n.ownerDocument.defaultView)===null||e===void 0||e.scrollTo(0,r.top)}else n.scrollIntoView(vr({behavior:"smooth",block:"nearest"},t))}},o.prototype.reset=function(){var t=this,e=t.el,n=t.model;t.scriptContainer&&n.emitWithEditor(jt.I.scriptUnmount,{component:n,view:t,el:e}),this.el="",this._ensureElement(),this._setData(),(0,St.bG)(e,this.el),this.render()},o.prototype._setData=function(){var t=this.model,e=this.el,n=t.components();this.$el.data({model:t,collection:n,view:this}),(0,q.setViewEl)(e,this)},o.prototype._createElement=function(t){return this.createDoc.createElement(t)},o.prototype.renderChildren=function(){this.updateContent();var t=this.getChildrenContainer(),e=this.childrenView||new dl({collection:this.model.get("components"),config:this.config,componentTypes:this.opts.componentTypes});e.render(t),this.childrenView=e;for(var n=Array.prototype.slice.call(e.el.childNodes),r=0,l=n.length;r<l;r++)t.appendChild(n.shift())},o.prototype.renderAttributes=function(){this.updateAttributes(),this.updateClasses()},o.prototype.onAttrUpdate=function(){},o.prototype.render=function(){return this.renderAttributes(),this.modelOpt.temporary||(this.renderChildren(),this.updateScript(),(0,q.setViewEl)(this.el,this),this.postRender()),this},o.prototype.postRender=function(){if(!this.modelOpt.temporary){var t=this.model,e=this.el;this.onRender(this._clbObj()),t.emitWithEditor(jt.I.render,{component:t,view:this,el:e}),this.rendered=!0}},o.getEvents=function(){return(0,C.result)(this.prototype,"events")},o}(E.Ss);const wn=cc;var cu=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const fl=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return cu(o,a),o.prototype._setAttributes=function(){},o.prototype.renderAttributes=function(){},o.prototype.updateStatus=function(){},o.prototype.updateClasses=function(){},o.prototype.setAttribute=function(){},o.prototype.updateAttributes=function(){},o.prototype.initClasses=function(){},o.prototype.initComponents=function(){},o.prototype.delegateEvents=function(){return this},o.prototype._createElement=function(){return document.createTextNode("")},o.prototype.render=function(){var t=this.model,e=this.el;return t.opt.temporary||(e.textContent=t.content),this},o}(wn);var uu=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const gs=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return uu(o,a),o.prototype._createElement=function(){return document.createComment(this.model.content)},o}(fl);var Qp=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const hl=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return Qp(o,a),o.prototype.tagName=function(){return"div"},o.prototype.initialize=function(t){a.prototype.initialize.call(this,t),this.listenTo(this.model,"change:attributes:src",this.updateSrc)},o.prototype.updateSrc=function(){var t=(0,St.I6)(this.el,"iframe")[0];t&&(0,St.X6)(t,{src:this.__getSrc()})},o.prototype.render=function(){a.prototype.render.call(this);var t=(0,St.a_)("iframe",{class:"".concat(this.ppfx,"no-pointer"),style:"width: 100%; height: 100%; border: none",src:this.__getSrc()});return this.el.appendChild(t),this},o.prototype.__getSrc=function(){return this.model.getAttributes().src||""},o}(wn);var nr=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),pu=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return nr(o,a),o.prototype.tagName=function(){return"img"},o.prototype.events=function(){return{dblclick:"onActive",click:"initResize",error:"onError",load:"onLoad",dragstart:"noDrag"}},o.prototype.initialize=function(t){a.prototype.initialize.call(this,t),this.listenTo(this.model,"change:src",this.updateSrc),this.classEmpty="".concat(this.ppfx,"plh-image"),this.fetchFile()},o.prototype.fetchFile=function(){if(!this.modelOpt.temporary){var t=this.model,e=this.em,n=t.get("file");if(n&&e){var r=e.Assets.FileUploader();r?.uploadFile({dataTransfer:{files:[n]}},function(l){var p=l&&l.data&&l.data[0],d=p&&((0,C.isString)(p)?p:p.src);d&&t.set({src:d})}),t.set("file","")}}},o.prototype.updateSrc=function(){var t=this.model;t.addAttributes({src:t.getSrcResult()}),this.updateClasses()},o.prototype.updateClasses=function(){a.prototype.updateClasses.call(this);var t=this,e=t.el,n=t.classEmpty,r=t.model,l=r.getSrcResult()&&!r.isDefaultSrc()?"remove":"add";e.classList[l](n)},o.prototype.onActive=function(t){t?.stopPropagation();var e=this.em,n=this.model,r=e?.Assets;r&&n.get("editable")&&r.open({select:function(l,p){n.set({src:l.getSrc()}),p&&r.close()},target:n,types:["image"],accept:"image/*"})},o.prototype.onError=function(){var t=this.model,e=this.el,n=t.getSrcResult({fallback:!0});n&&(e.srcset&&(e.srcset=""),e.src=n)},o.prototype.onLoad=function(){this.em.Canvas.refresh({all:!0})},o.prototype.noDrag=function(t){return t.preventDefault(),!1},o.prototype.render=function(){if(this.renderAttributes(),this.modelOpt.temporary)return this;this.updateSrc();var t=this.$el,e=this.model,n=t.attr("class")||"";return!e.get("src")&&t.attr("class","".concat(n," ").concat(this.classEmpty).trim()),this.postRender(),this},o}(wn);const uc=pu;var du=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),io=function(){return io=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},io.apply(this,arguments)},on=function(a,o,t,e){return new(t||(t=Promise))(function(n,r){function l(g){try{d(e.next(g))}catch(h){r(h)}}function p(g){try{d(e.throw(g))}catch(h){r(h)}}function d(g){var h;g.done?n(g.value):(h=g.value,h instanceof t?h:new t(function(m){m(h)})).then(l,p)}d((e=e.apply(a,o||[])).next())})},Bo=function(a,o){var t,e,n,r,l={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function p(d){return function(g){return function(h){if(t)throw new TypeError("Generator is already executing.");for(;r&&(r=0,h[0]&&(l=0)),l;)try{if(t=1,e&&(n=2&h[0]?e.return:h[0]?e.throw||((n=e.return)&&n.call(e),0):e.next)&&!(n=n.call(e,h[1])).done)return n;switch(e=0,n&&(h=[2&h[0],n.value]),h[0]){case 0:case 1:n=h;break;case 4:return l.label++,{value:h[1],done:!1};case 5:l.label++,e=h[1],h=[0];continue;case 7:h=l.ops.pop(),l.trys.pop();continue;default:if(n=l.trys,!((n=n.length>0&&n[n.length-1])||h[0]!==6&&h[0]!==2)){l=0;continue}if(h[0]===3&&(!n||h[1]>n[0]&&h[1]<n[3])){l.label=h[1];break}if(h[0]===6&&l.label<n[1]){l.label=n[1],n=h;break}if(n&&l.label<n[2]){l.label=n[2],l.ops.push(h);break}n[2]&&l.ops.pop(),l.trys.pop();continue}h=o.call(a,l)}catch(m){h=[6,m],e=0}finally{t=n=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([d,g])}}},Ci=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return du(o,a),o.prototype.events=function(){return{dblclick:"onActive",input:"onInput"}},o.prototype.initialize=function(t){a.prototype.initialize.call(this,t),(0,C.bindAll)(this,"disableEditing","onDisable");var e=this.model,n=this.em;this.listenTo(e,"focus",this.onActive),this.listenTo(e,"change:content",this.updateContentText),this.listenTo(e,"sync:content",this.syncContent),this.rte=n?.RichTextEditor},o.prototype.updateContentText=function(t,e,n){n===void 0&&(n={}),!n.fromDisable&&this.disableEditing()},o.prototype.canActivate=function(){var t,e=this,n=e.model,r=e.rteEnabled,l=e.em,p=l?.getEditing()===n,d=!0,g=!1;if((r||!n.get("editable")||p||(g=n.isChildOf("text")))&&(d=!1,g&&!n.get("textable"))){for(var h=n.parent();h&&!h.isInstanceOf("text");)h=h.parent();h&&h.get("editable")?t=h:d=!0}return{result:d,delegate:t}},o.prototype.onActive=function(t){return on(this,void 0,void 0,function(){var e,n,r,l,p,d,g,h,m,w,k,z;return Bo(this,function(B){switch(B.label){case 0:return n=(e=this).rte,r=e.em,l=this.canActivate(),p=l.result,d=l.delegate,p?((z=t?.stopPropagation)===null||z===void 0||z.call(t),g=this,[4,this.getContent()]):(d&&((k=t?.stopPropagation)===null||k===void 0||k.call(t),r.setSelected(d),d.trigger("active",t)),[2]);case 1:if(g.lastContent=B.sent(),!n)return[3,5];B.label=2;case 2:return B.trys.push([2,4,,5]),h=this,m=this,[4,n.enable(h,this.activeRte,{event:t,view:h})];case 3:return m.activeRte=B.sent(),[3,5];case 4:return w=B.sent(),r.logError(w),[3,5];case 5:return this.toggleEvents(!0),[2]}})})},o.prototype.onDisable=function(t){this.disableEditing(t)},o.prototype.disableEditing=function(){return on(this,arguments,void 0,function(t){var e,n,r,l,p,d,g,h,m;return t===void 0&&(t={}),Bo(this,function(w){switch(w.label){case 0:return n=(e=this).model,r=e.rte,l=e.activeRte,p=e.em,d=n&&n.get("editable"),r?(g={},[4,this.getContent()]):[3,7];case 1:h=w.sent(),w.label=2;case 2:return w.trys.push([2,4,,5]),[4,r.disable(this,l,t)];case 3:return g=w.sent(),[3,5];case 4:return m=w.sent(),p.logError(m),[3,5];case 5:return!d||h===this.lastContent&&!g.forceSync?[3,7]:[4,this.syncContent(io(io({},t),{content:h}))];case 6:w.sent(),this.lastContent="",w.label=7;case 7:return this.toggleEvents(),[2]}})})},o.prototype.getContent=function(){return on(this,void 0,void 0,function(){var t,e,n,r;return Bo(this,function(l){switch(l.label){case 0:return e=(t=this).rte,n=t.activeRte,r="",e?[4,e.getContent(this,n)]:[3,2];case 1:r=l.sent(),l.label=2;case 2:return[2,r]}})})},o.prototype.syncContent=function(){return on(this,arguments,void 0,function(t){var e,n,r,l,p,d,g,h;return t===void 0&&(t={}),Bo(this,function(m){switch(m.label){case 0:return n=(e=this).model,r=e.rte,e.rteEnabled||t.force?(h=t.content)===null||h===void 0?[3,1]:(p=h,[3,3]):[2];case 1:return[4,this.getContent()];case 2:p=m.sent(),m.label=3;case 3:return l=p,d=n.components(),g=io({fromDisable:1},t),n.set("content","",g),r?.customRte&&!r.customRte.parseContent?(d.length&&d.reset(void 0,io(io({},t),{keepIds:Xo(d)})),n.set("content",l,g)):d.resetFromString(l,t),[2]}})})},o.prototype.insertComponent=function(t,e){var n;e===void 0&&(e={});var r=this.model,l=this.el.ownerDocument.getSelection();if(l?.rangeCount){var p=l.getRangeAt(0),d=p.startContainer,g=p.startOffset,h=(0,q.getComponentModel)(d),m=[];if(h&&(!((n=h.is)===null||n===void 0)&&n.call(h,"textnode"))){var w=h.collection;w.forEach(function(B){if(B===h){var nt="textnode",X=e.useDomContent?d.textContent||"":B.content;m.push({type:nt,content:X.slice(0,g)}),m.push(t),m.push({type:nt,content:X.slice(g)})}else m.push(B)});var k=m.filter(Boolean),z=k.indexOf(t);return w.reset(k,e),w.at(z)}}return r.append(t,e)},o.prototype.onInput=function(){var t=this.model;[jt.I.update,jt.I.input].forEach(function(e){return t.emitWithEditor(e,t)})},o.prototype.disablePropagation=function(t){t.stopPropagation()},o.prototype.toggleEvents=function(t){var e=this,n=e.em,r=e.model,l=e.$el,p={on:St.on,off:St.AU},d=t?"on":"off";n.setEditing(!!t&&this),this.rteEnabled=!!t;var g=[this.el.ownerDocument,document];if(p.off(g,"mousedown",this.onDisable),p[d](g,"mousedown",this.onDisable),n[d]("toolbar:run:before",this.onDisable),r&&(r[d]("removed",this.onDisable),r.trigger("rte:".concat(t?"enable":"disable"))),l?.off("mousedown",this.disablePropagation),l&&l[d]("mousedown",this.disablePropagation),this.config.draggableComponents)for(var h=this.el;h;)h.draggable=!t,(h=h.parentNode)&&h.tagName=="BODY"&&(h=0)},o}(wn);const ri=Ci;var fu=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const gl=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return fu(o,a),o.prototype.render=function(){return a.prototype.render.call(this),this.el.addEventListener("click",this.prevDef,!0),this},o}(ri);var hu=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const td=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return hu(o,a),o}(gl);var pc=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const vs=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return pc(o,a),o.prototype.tagName=function(){return"div"},o.prototype.events=function(){return{}},o.prototype.initialize=function(t){a.prototype.initialize.call(this,t),this.classEmpty=this.ppfx+"plh-map"},o.prototype.updateSrc=function(){this.getIframe().src=this.model.get("src")},o.prototype.getIframe=function(){if(!this.iframe){var t=document.createElement("iframe");t.src=this.model.get("src"),t.frameBorder="0",t.style.height="100%",t.style.width="100%",t.className=this.ppfx+"no-pointer",this.iframe=t}return this.iframe},o.prototype.render=function(){return a.prototype.render.call(this),this.updateClasses(),this.el.appendChild(this.getIframe()),this},o}(uc);var gu=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const dc=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return gu(o,a),o.prototype.tagName=function(){return"script"},o.prototype.events=function(){return{}},o}(wn);var Si=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),vu=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return Si(o,a),o.prototype._createElement=function(t){return document.createElementNS("http://www.w3.org/2000/svg",t)},o}(wn);const fc=vu;var ed=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const vl=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return ed(o,a),o}(wn);var hc=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const mu=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return hc(o,a),o}(wn);var nd=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const yu=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return nd(o,a),o}(wn);var od=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const rd=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return od(o,a),o}(wn);var ml=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const bu=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return ml(o,a),o}(wn);var id=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const ad=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return id(o,a),o.prototype.events=function(){return{}},o}(wn);var _u=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ta=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return _u(o,a),o.prototype.tagName=function(){return"div"},o.prototype.events=function(){return{}},o.prototype.initialize=function(){wn.prototype.initialize.apply(this,arguments);var t=this.model,e=["loop","autoplay","controls","color","rel","modestbranding","poster","muted"].map(function(n){return"change:".concat(n)}).join(" ");this.listenTo(t,"change:provider",this.updateProvider),this.listenTo(t,"change:src",this.updateSrc),this.listenTo(t,e,this.updateVideo)},o.prototype.updateProvider=function(){var t=this.model.get("provider");this.el.innerHTML="",this.el.appendChild(this.renderByProvider(t))},o.prototype.updateSrc=function(){var t=this.model,e=this.videoEl;if(e){var n=t.get("provider"),r=t.get("src");switch(n){case"yt":r=t.getYoutubeSrc();break;case"ytnc":r=t.getYoutubeNoCookieSrc();break;case"vi":r=t.getVimeoSrc()}e.src=r}},o.prototype.updateVideo=function(){var t=this.model,e=this.videoEl;switch(t.get("provider")){case"yt":case"ytnc":case"vi":t.trigger("change:videoId");break;default:if(e){var n=e;n.loop=t.get("loop"),n.autoplay=t.get("autoplay"),n.controls=t.get("controls"),n.poster=t.get("poster"),n.muted=t.get("muted")}}},o.prototype.renderByProvider=function(t){var e;switch(t){case"yt":e=this.renderYoutube();break;case"ytnc":e=this.renderYoutubeNoCookie();break;case"vi":e=this.renderVimeo();break;default:e=this.renderSource()}return this.videoEl=e,e},o.prototype.renderSource=function(){var t=document.createElement("video");return t.src=this.model.get("src"),this.initVideoEl(t),t},o.prototype.renderYoutube=function(){var t=document.createElement("iframe");return t.src=this.model.getYoutubeSrc(),t.frameBorder="0",t.setAttribute("allowfullscreen","true"),this.initVideoEl(t),t},o.prototype.renderYoutubeNoCookie=function(){var t=document.createElement("iframe");return t.src=this.model.getYoutubeNoCookieSrc(),t.frameBorder="0",t.setAttribute("allowfullscreen","true"),this.initVideoEl(t),t},o.prototype.renderVimeo=function(){var t=document.createElement("iframe");return t.src=this.model.getVimeoSrc(),t.frameBorder="0",t.setAttribute("allowfullscreen","true"),this.initVideoEl(t),t},o.prototype.initVideoEl=function(t){t.className=this.ppfx+"no-pointer",t.style.height="100%",t.style.width="100%"},o.prototype.render=function(){wn.prototype.render.apply(this),this.updateClasses();var t=this.model.get("provider");return this.el.appendChild(this.renderByProvider(t)),this.updateVideo(),this},o}(uc);const gc=Ta;var yl=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const wu=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return yl(o,a),o.prototype.tagName=function(){return"div"},o}(wn);var vc=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ms=function(){return ms=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},ms.apply(this,arguments)},sd=function(a){function o(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=a.apply(this,t)||this;n.refreshDbn=(0,C.debounce)(function(){return n.refresh()},0);var r=n.events;return n.on(r.update,n.onUpdate),n.on(r.updateInside,n.onUpdateDeep),n}return vc(o,a),o.prototype.removeChildren=function(t,e,n){var r;n===void 0&&(n={}),a.prototype.removeChildren.call(this,t,e,n),(r=lo(t))===null||r===void 0||r.forEach(function(l){return Yo(l,{skipRefs:!0})}),this.__trgEvent(this.events.symbolMainRemove,{component:t})},o.prototype.onAdd=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a.prototype.onAdd.apply(this,t);var n=t[0];this.__trgEvent(this.events.symbolMainAdd,{component:n})},o.prototype.onUpdate=function(t){this.__trgEvent(this.events.symbolMainUpdate,t)},o.prototype.onUpdateDeep=function(t){this.__trgEvent(this.events.symbolMainUpdateDeep,t)},o.prototype.refresh=function(){var t=this.em,e=this.events;t.trigger(e.symbol)},o.prototype.__trgEvent=function(t,e,n){n===void 0&&(n=!1);var r=this.em,l=this.events,p=n?l.symbolInstance:l.symbolMain;r.trigger(t,e),r.trigger(p,ms(ms({},e),{event:t})),this.refreshDbn()},o}(Qr);const xu=sd;var bo=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ii=function(){return ii=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},ii.apply(this,arguments)},mc=function(a){function o(t,e){var n=a.call(this,t,e)||this;return n.dataResolver=n.initializeDataResolver(t,e),n.listenToPropsChange(),n}return bo(o,a),o.prototype.initializeDataResolver=function(t,e){var n,r=(n=t.dataResolver)!==null&&n!==void 0?n:{type:t.type};return this.createResolverInstance(r,ii(ii({},e),{collectionsStateMap:this.collectionsStateMap}))},o.prototype.getDataResolver=function(){return this.get("dataResolver")},o.prototype.setDataResolver=function(t){return this.set("dataResolver",t)},o.prototype.onCollectionsStateMapUpdate=function(t){this.dataResolver.updateCollectionsStateMap(t),a.prototype.onCollectionsStateMapUpdate.call(this,t)},o.prototype.listenToPropsChange=function(){var t=this;this.listenTo(this.dataResolver,"change",function(){t.__changesUp({m:t})}.bind(this)),this.on("change:dataResolver",function(){t.dataResolver.set(t.get("dataResolver"))})},o.prototype.removePropsListeners=function(){this.stopListening(this.dataResolver),this.off("change:dataResolver"),this.off("change:".concat(this.collectionsStateMap))},o.prototype.destroy=function(t){return this.removePropsListeners(),a.prototype.destroy.call(this,t)},o.prototype.toJSON=function(t){var e=a.prototype.toJSON.call(this,t),n=this.dataResolver.toJSON();return delete n.type,ii(ii({},e),{dataResolver:n})},o}(fn),Cu=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ys=function(){return ys=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},ys.apply(this,arguments)};const Pa=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return Cu(o,a),Object.defineProperty(o.prototype,"defaults",{get:function(){return ys(ys({},a.prototype.defaults),{type:Ke,dataResolver:{},droppable:!1})},enumerable:!1,configurable:!0}),o.prototype.getPath=function(){return this.dataResolver.get("path")},o.prototype.getCollectionId=function(){return this.dataResolver.get("collectionId")},o.prototype.getVariableType=function(){return this.dataResolver.get("variableType")},o.prototype.getDefaultValue=function(){return this.dataResolver.get("defaultValue")},o.prototype.getDataValue=function(){return this.dataResolver.getDataValue()},o.prototype.resolvesFromCollection=function(){return this.dataResolver.resolvesFromCollection()},o.prototype.getInnerHTML=function(){return this.getDataValue()},o.prototype.setPath=function(t){this.dataResolver.set("path",t)},o.prototype.setDefaultValue=function(t){this.dataResolver.set("defaultValue",t)},o.prototype.resetDataSourcePath=function(t){this.set("dataResolver",{path:t,collectionId:void 0,variableType:void 0})},o.prototype.createResolverInstance=function(t,e){return new Mn(t,e)},o.isComponent=function(t){return(0,q.toLowerCase)(t.tagName)===Ke},o}(mc);var bl=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Su=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return bl(o,a),o.prototype.initialize=function(t){var e=this;t===void 0&&(t={}),a.prototype.initialize.call(this,t),this.dataResolverListener=new Xr({em:this.em,resolver:this.model.dataResolver,onUpdate:function(){return e.postRender()}})},o.prototype.remove=function(){return this.dataResolverListener.destroy(),a.prototype.remove.call(this)},o.prototype.postRender=function(){var t=this.model;t.getDataResolver().asPlainText?this.el.textContent=t.getDataValue():this.el.innerHTML=t.getDataValue(),a.prototype.postRender.call(this)},o}(wn);var Ou=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Tu=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return Ou(o,a),o.prototype.initialize=function(t){t===void 0&&(t={}),a.prototype.initialize.call(this,t),this.postRender=this.postRender.bind(this),this.listenTo(this.model.components(),"reset",this.postRender),this.dataResolverListener=new Xr({em:this.em,resolver:this.model.dataResolver,onUpdate:this.postRender})},o.prototype.renderDataResolver=function(){var t=this.model.getIfTrueContent(),e=this.model.getIfFalseContent(),n=t?.getEl(),r=e?.getEl(),l=this.model.isTrue();n&&(n.style.display=l?"":"none"),r&&(r.style.display=l?"none":"")},o.prototype.postRender=function(){this.renderDataResolver(),a.prototype.postRender.call(this)},o.prototype.remove=function(){return this.stopListening(this.model.components(),"reset",this.postRender),this.dataResolverListener.destroy(),a.prototype.remove.call(this)},o}(wn);var Ea=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),bs=function(){return bs=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},bs.apply(this,arguments)},_l=function(a){function o(t,e){var n;e===void 0&&(e={});var r=a.call(this,t,e)||this;return r.mutable=(n=t.mutable)===null||n===void 0||n,r.on("change",r.handleChange),r}return Ea(o,a),Object.defineProperty(o.prototype,"cl",{get:function(){return this.collection},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"dataSource",{get:function(){return this.cl.dataSource},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"em",{get:function(){return this.dataSource.em},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"index",{get:function(){return this.cl.indexOf(this)},enumerable:!1,configurable:!0}),o.prototype.handleChange=function(t,e){var n=this,r=this.changedAttributes();(0,C.keys)(r).forEach(function(l){return n.triggerChange(l,e)})},o.prototype.getPath=function(t,e){e===void 0&&(e={});var n=this,r=n.dataSource,l=n.id,p=n.index,d=r.id,g=t?".".concat(t):"";return"".concat(d,".").concat(e.useIndex?p:l).concat(g)},o.prototype.getPaths=function(t){return[this.getPath(t),this.getPath(t,{useIndex:!0})]},o.prototype.triggerChange=function(t,e){e===void 0&&(e={});var n=this.dataSource,r=this.em,l=this.getPaths(t),p={dataSource:n,dataRecord:this,path:l[0],options:e};r.trigger(se.path,p),r.trigger("".concat(se.pathSource,":").concat(n.id),p),l.forEach(function(d){return r.trigger("".concat(se.path,":").concat(d),bs(bs({},p),{path:d}))})},o.prototype.set=function(t,e,n){var r,l,p=this;if(!this.isNew()&&this.attributes.mutable===!1)throw new Error("Cannot modify immutable record");var d=(l=(r=this.dataSource)===null||r===void 0?void 0:r.transformers)===null||l===void 0?void 0:l.onRecordSetValue,g=function(z,B,nt){nt===void 0&&(nt={});var X=nt?.avoidTransformers||!d?B:d({id:p.id,key:z,value:B});a.prototype.set.call(p,z,X,nt),a.prototype.set.call(p,{__p:!!nt.partial||void 0},nt)};if(typeof t=="object"&&t!==null)for(var h=t,m=0,w=Object.entries(h);m<w.length;m++){var k=w[m];g(k[0],k[1],e)}else g(t,e,n);return this},o}(E.Kx);const Pu=_l;var _s=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Eu=function(a){function o(t,e){var n=a.call(this,t,e)||this;return n.dataSource=e.dataSource,n}return _s(o,a),o}(E.pM);const Xi=Eu;Eu.prototype.model=Pu;var ku=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ws=function(){return ws=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},ws.apply(this,arguments)},Au=function(a,o,t){if(t||arguments.length===2)for(var e,n=0,r=o.length;n<r;n++)!e&&n in o||(e||(e=Array.prototype.slice.call(o,0,n)),e[n]=o[n]);return a.concat(e||Array.prototype.slice.call(o))};const ka=function(a){function o(t,e){var n=a.call(this,ws(ws({},t),{records:[]}),e)||this,r=t.records,l=t.transformers;return n.transformers=l||{},r instanceof Xi||n.set({records:new Xi(r,{dataSource:n})}),n.listenTo(n.records,"add",n.onAdd),n.listenTo(n.records,E.e2,n.handleChanges),n}return ku(o,a),o.prototype.defaults=function(){return{records:[],transformers:{}}},Object.defineProperty(o.prototype,"records",{get:function(){return this.attributes.records},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"em",{get:function(){return this.collection.em},enumerable:!1,configurable:!0}),o.prototype.onAdd=function(t){t.triggerChange()},o.prototype.addRecord=function(t,e){return this.records.add(t,e)},o.prototype.getRecord=function(t){return this.records.get(t)},o.prototype.getRecords=function(){var t=this;return Au([],this.records.models,!0).map(function(e){return t.getRecord(e.id)})},o.prototype.removeRecord=function(t,e){var n=this.getRecord(t);if(n?.mutable===!1&&!e?.dangerously)throw new Error("Cannot remove immutable record");return this.records.remove(t,e)},o.prototype.setRecords=function(t){var e=this;this.records.reset([],{silent:!0}),t.forEach(function(n){e.records.add(n)})},o.prototype.handleChanges=function(t,e,n){this.em.changesUp(n||e)},o}(E.Kx);var xs=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ao=function(){return ao=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},ao.apply(this,arguments)},Ji={avoidStore:!0,partial:!0},ju=function(a){function o(t,e){var n=this;if(e.forCloning)return a.call(this,t,e)||this;var r=ao(ao({},t),{droppable:!1}),l=n=a.call(this,r,e)||this;return n.rebuildChildrenFromCollection=n.rebuildChildrenFromCollection.bind(n),n.listenToPropsChange(),n.rebuildChildrenFromCollection(),l}return xs(o,a),Object.defineProperty(o.prototype,"defaults",{get:function(){return ao(ao({},a.prototype.defaults),{droppable:!1,dataResolver:{},type:U,components:[{type:rt}]})},enumerable:!1,configurable:!0}),o.prototype.getDataResolver=function(){return this.get("dataResolver")},o.prototype.getItemsCount=function(){var t,e,n=function(d){return(0,C.isArray)(d)?d.length:Object.keys(d).length}(this.getDataSourceItems()),r=Math.max(0,(t=this.getConfigStartIndex())!==null&&t!==void 0?t:0),l=(e=this.getConfigEndIndex())!==null&&e!==void 0?e:Number.MAX_VALUE,p=Math.min(n-1,l)-r+1;return Math.max(0,p)},o.prototype.getConfigStartIndex=function(){return this.dataResolver.startIndex},o.prototype.getConfigEndIndex=function(){return this.dataResolver.endIndex},o.prototype.getDataSource=function(){var t;return(t=this.dataResolver)===null||t===void 0?void 0:t.dataSource},o.prototype.getCollectionId=function(){var t;return(t=this.dataResolver)===null||t===void 0?void 0:t.collectionId},o.prototype.getCollectionItemComponents=function(){return this.firstChild.components()},o.prototype.setDataResolver=function(t){return this.set("dataResolver",t)},o.prototype.setCollectionId=function(t){this.updateCollectionConfig({collectionId:t})},o.prototype.setStartIndex=function(t){t<0?this.em.logError("Start index should be greater than or equal to 0"):this.updateCollectionConfig({startIndex:t})},o.prototype.setEndIndex=function(t){this.updateCollectionConfig({endIndex:t})},o.prototype.setDataSource=function(t){this.set(dt,ao(ao({},this.dataResolver),{dataSource:t}))},o.prototype.setCollectionItemComponents=function(t){this.firstChild.components(t)},Object.defineProperty(o.prototype,"firstChild",{get:function(){return this.components().at(0)},enumerable:!1,configurable:!0}),o.prototype.updateCollectionConfig=function(t){this.set(dt,ao(ao({},this.dataResolver),t))},o.prototype.getDataSourceItems=function(){var t=function(n,r){switch(!0){case((0,q.isObject)(n)&&n instanceof ka):return Zi(n.get("id"),r);case ke(n):var l=n.path;return l?l.split(".").length===1?Zi(l,r):r.DataSources.getValue(l,[]):[];default:return[]}}(this.dataResolver.dataSource,this.em);if((0,C.isArray)(t))return t;var e=ao({},t);return delete e.__p,e},Object.defineProperty(o.prototype,"dataResolver",{get:function(){return this.get(dt)||{}},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"collectionDataSource",{get:function(){return this.dataResolver.dataSource},enumerable:!1,configurable:!0}),o.prototype.listenToDataSource=function(){var t,e=this.em,n=(t=this.collectionDataSource)===null||t===void 0?void 0:t.path;n&&(this.dataSourceWatcher=new Xr({em:e,resolver:new Mn({type:Ke,path:n},{em:e,collectionsStateMap:this.collectionsStateMap}),onUpdate:this.rebuildChildrenFromCollection}))},o.prototype.rebuildChildrenFromCollection=function(){this.components().reset(this.getCollectionItems(),Hr)},o.prototype.getCollectionItems=function(){var t,e=this.ensureFirstChild(),n=e.getStyle().display,r=!n||n==="none"?"":n;e.addStyle({display:"none"},Ji);var l=[e],p=function(At,It){for(var Wt=[{property:At?.collectionId,propertyPath:"dataResolver.collectionId"},{property:At?.dataSource,propertyPath:"dataResolver.dataSource"}],oe=0,ve=Wt;oe<ve.length;oe++)if(!Oi(At,ve[oe].propertyPath,It))return[];var we=At?.startIndex;return we!==void 0&&(we<0||!Number.isInteger(we))&&It.logError("Invalid startIndex: ".concat(we,". It must be a non-negative integer.")),!0}(this.dataResolver,this.em);if(!p)return l;var d=this.collectionId,g=this.getDataSourceItems(),h=this.resolveCollectionConfig(g),m=h.startIndex,w=h.endIndex;if(this.hasDuplicateCollectionId())return this.em.logError('The collection ID "'.concat(d,'" already exists in the parent collection state. Overriding it is not allowed.')),l;for(var k=m;k<=w;k++){var z=k===m,B=(0,C.isArray)(g)?k:Object.keys(g)[k],nt=this.getCollectionsStateMapForItem(g,B);if(z)(t=lo(e))===null||t===void 0||t.forEach(function(At){return Yo(At)}),yc(e,nt),e.addStyle({display:r},Ji);else{var X=e.clone({symbol:!0,symbolInv:!0});X.set({locked:!0,layerable:!1},Ji),yc(X,nt),l.push(X)}}return l},o.prototype.getCollectionsStateMapForItem=function(t,e){var n,r=this.resolveCollectionConfig(t),l=r.startIndex,p=r.endIndex,d=r.totalItems,g=this.collectionId,h=t[e],m=this.collectionsStateMap,w=typeof e=="string"?Object.keys(t).indexOf(e):e,k={collectionId:g,currentIndex:w,currentItem:h,currentKey:e,startIndex:l,endIndex:p,totalItems:d,remainingItems:d-(1+(w-l))};return ao(ao({},m),((n={})[g]=k,n))},o.prototype.hasDuplicateCollectionId=function(){var t=this.collectionId;return!!this.collectionsStateMap[t]},o.prototype.resolveCollectionConfig=function(t){var e,n,r=Array.isArray(t),l=r?t.length:Object.keys(t).length,p=(e=this.getConfigStartIndex())!==null&&e!==void 0?e:0,d=(n=this.getConfigEndIndex())!==null&&n!==void 0?n:Number.MAX_VALUE,g=Math.min(l-1,d),h=0;return l>0&&(h=Math.max(0,g-p+1)),{startIndex:p,endIndex:g,totalItems:h,isArray:r}},o.prototype.ensureFirstChild=function(){var t=this.em.Components.getType(rt).model;return this.firstChild||new t({type:rt},this.opt)},o.prototype.listenToPropsChange=function(){var t=this;this.on("change:".concat(dt),function(){t.rebuildChildrenFromCollection(),t.listenToDataSource()}),this.listenToDataSource()},o.prototype.removePropsListeners=function(){var t;this.off("change:".concat(dt)),(t=this.dataSourceWatcher)===null||t===void 0||t.destroy()},o.prototype.onCollectionsStateMapUpdate=function(t){var e=this;this.collectionsStateMap=t,this.dataResolverWatchers.onCollectionsStateMapUpdate();var n=this.getDataSourceItems(),r=this.resolveCollectionConfig(n).startIndex;this.components().forEach(function(l,p){var d=e.getCollectionsStateMapForItem(n,r+p);l.onCollectionsStateMapUpdate(d)})},o.prototype.stopSyncComponentCollectionState=function(){this.stopListening(this.components(),"add remove reset",this.syncOnComponentChange),this.onCollectionsStateMapUpdate({})},o.prototype.syncOnComponentChange=function(t,e,n){var r=this.collectionsStateMap;this.collectionsStateMap={},a.prototype.syncOnComponentChange.call(this,t,e,n),this.collectionsStateMap=r,this.onCollectionsStateMapUpdate(r)},Object.defineProperty(o.prototype,"collectionId",{get:function(){return this.getDataResolver().collectionId},enumerable:!1,configurable:!0}),o.isComponent=function(t){return(0,q.toLowerCase)(t.tagName)===U},o.prototype.toJSON=function(t){var e,n=a.prototype.toJSON.call(this,t);delete n.droppable,delete n[$n],(e=n.attributes)===null||e===void 0||delete e.id;var r=this.firstChild;return ao(ao({},n),{components:[r]})},o.prototype.destroy=function(t){return this.removePropsListeners(),a.prototype.destroy.call(this,t)},o}(fn);const ld=ju;function yc(a,o){a.setSymbolOverride(["locked","layerable"]),a.syncComponentsCollectionState(),a.onCollectionsStateMapUpdate(o)}function Oi(a,o,t){return!!a||(t.logError('The "'.concat(o,'" property is required in the collection definition.')),!1)}function Zi(a,o){var t=o.DataSources.getValue(a,[]);return Object.keys(t).map(function(e){return{type:Ke,path:a+"."+e}})}var Cs=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const cd=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return Cs(o,a),o}(wn);var Mu=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),wl=function(){return wl=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},wl.apply(this,arguments)},ud=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return Mu(o,a),Object.defineProperty(o.prototype,"defaults",{get:function(){return wl(wl({},a.prototype.defaults),{droppable:!1,type:Fo,dataResolver:{condition:{left:"",operator:dn.equalsIgnoreCase,right:""}},components:[{type:Do},{type:Bn}]})},enumerable:!1,configurable:!0}),o.prototype.isTrue=function(){return this.dataResolver.isTrue()},o.prototype.getCondition=function(){return this.dataResolver.getCondition()},o.prototype.getIfTrueContent=function(){return this.components().at(0)},o.prototype.getIfFalseContent=function(){return this.components().at(1)},o.prototype.getOutputContent=function(){return this.isTrue()?this.getIfTrueContent():this.getIfFalseContent()},o.prototype.setCondition=function(t){this.dataResolver.setCondition(t)},o.prototype.setIfTrueComponents=function(t){this.setComponentsAtIndex(0,t)},o.prototype.setIfFalseComponents=function(t){this.setComponentsAtIndex(1,t)},o.prototype.getInnerHTML=function(t){var e,n;return(n=(e=this.getOutputContent())===null||e===void 0?void 0:e.getInnerHTML(t))!==null&&n!==void 0?n:""},o.prototype.createResolverInstance=function(t,e){return new fi(t,e)},o.prototype.setComponentsAtIndex=function(t,e){var n=this.components().at(t);n?.components(e)},o.isComponent=function(t){return(0,q.toLowerCase)(t.tagName)===Fo},o}(mc);const pd=ud;var Vo=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ss=function(){return Ss=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},Ss.apply(this,arguments)},dd=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return Vo(o,a),Object.defineProperty(o.prototype,"defaults",{get:function(){return Ss(Ss({},a.prototype.defaults),{removable:!1,draggable:!1})},enumerable:!1,configurable:!0}),o.isComponent=function(t){return function(e){return!!e&&[rt,Do,Bn].includes(e)}((0,q.toLowerCase)(t.tagName))},o}(fn);const bc=dd;var Aa,Du=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),_o=function(){return _o=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},_o.apply(this,arguments)},Lu=function(a,o){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&o.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(e=Object.getOwnPropertySymbols(a);n<e.length;n++)o.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(a,e[n])&&(t[e[n]]=a[e[n]])}return t},fd=function(a,o,t){if(t||arguments.length===2)for(var e,n=0,r=o.length;n<r;n++)!e&&n in o||(e||(e=Array.prototype.slice.call(o,0,n)),e[n]=o[n]);return a.concat(e||Array.prototype.slice.call(o))};(function(a){a[a.InvalidSource=0]="InvalidSource",a[a.SourceReject=1]="SourceReject",a[a.TargetReject=2]="TargetReject"})(Aa||(Aa={}));var hd=function(a){function o(t){var e=a.call(this,t,"DomComponents",new Qr(void 0,{em:t}),jt.I,tu())||this;e.componentTypes=[{id:rt,model:bc,view:wn},{id:Do,model:bc,view:wn},{id:Bn,model:bc,view:wn},{id:U,model:ld,view:cd},{id:Fo,model:pd,view:Tu},{id:Ke,model:Pa,view:Su},{id:"cell",model:Gi,view:mu},{id:"row",model:Gp,view:bu},{id:"table",model:wa,view:ad},{id:"thead",model:qp,view:rd},{id:"tbody",model:ll,view:vl},{id:"tfoot",model:Ca,view:yu},{id:"map",model:ol,view:vs},{id:"link",model:ru,view:gl},{id:"label",model:No,view:td},{id:"video",model:Yp,view:gc},{id:"image",model:wi,view:uc},{id:"script",model:rc,view:dc},{id:"svg-in",model:Wp,view:fc},{id:"svg",model:ac,view:fc},{id:"iframe",model:ec,view:hl},{id:"comment",model:Ql,view:gs},{id:"textnode",model:Zl,view:fl},{id:tr,model:_i,view:wn},{id:"wrapper",model:Jp,view:wu},{id:"text",model:nl,view:ri},{id:"default",model:fn,view:wn}],e.componentsById={},e.Component=fn,e.Components=Qr,e.ComponentView=wn,e.ComponentsView=dl,e.storageKey="components",e.keySymbols="symbols",e.events=jt.I;var n=e.config;e.symbols=new xu([],{em:t,config:n,domc:e}),t&&(e.config.components=t.config.components||e.config.components);var r=e.config.pStylePrefix;if(r&&(e.config.stylePrefix=r+e.config.stylePrefix),t){t.get("Parser").compTypes=e.componentTypes,t.on("change:componentHovered",e.componentHovered,e);var l=t.get("selected");t.listenTo(l,"add",function(p,d,g){return e.selectAdd(l.getComponent(p),g)}),t.listenTo(l,"remove",function(p,d,g){return e.selectRemove(l.getComponent(p),g)})}return e}return Du(o,a),o.prototype.postLoad=function(){var t=this.em,e=this.symbols;t.UndoManager.add(e)},o.prototype.load=function(t){var e=this,n=this.loadProjectData(t,{onResult:function(r){var l=e.getWrapper();if(l||(e.em.Pages.add({},{select:!0}),l=e.getWrapper()),(0,C.isArray)(r))r.length&&l.components(r);else{var p=r.components,d=p===void 0?[]:p,g=Lu(r,["components"]);l.set(g),l.components(d)}}});return this.symbols.reset(t[this.keySymbols]||[]),n},o.prototype.store=function(){var t;return(t={})[this.keySymbols]=this.symbols,t},o.prototype.getComponent=function(){var t=this.em.Pages.getSelected(),e=t?.getMainFrame();return e?.getComponent()},o.prototype.getWrapper=function(){return this.getComponent()},o.prototype.getComponents=function(){var t=this.getWrapper();return t?.components()},o.prototype.addComponent=function(t,e){return e===void 0&&(e={}),this.getComponents().add(t,e)},o.prototype.render=function(){var t;return(t=this.componentView)===null||t===void 0?void 0:t.render().el},o.prototype.clear=function(t){t===void 0&&(t={});var e=this.getComponents();return e?.filter(Boolean).forEach(function(n){return n.remove(t)}),this},o.prototype.setComponents=function(t,e){e===void 0&&(e={}),this.clear(e).addComponent(t,e)},o.prototype.addType=function(t,e){var n=this.em,r=e.model,l=r===void 0?{}:r,p=e.view,d=p===void 0?{}:p,g=e.isComponent,h=e.extend,m=e.extendView,w=e.extendFn,k=w===void 0?[]:w,z=e.extendFnView,B=z===void 0?[]:z,nt=e.block,X=this.getType(t),At=this.getType(h),It=this.getType(m),Wt=At||X||this.getType("default"),oe=Wt.model,ve=It?It.view:Wt.view,we=function(xo,Ir,ji){return xo.reduce(function(Mi,li){var ci=Ir[li],Nr=ji.prototype[li];return ci&&Nr&&(Mi[li]=function(){for(var ui=[],Vr=0;Vr<arguments.length;Vr++)ui[Vr]=arguments[Vr];Nr.bind(this).apply(void 0,ui),ci.bind(this).apply(void 0,ui)}),Mi},{})};if(typeof l=="object"){var Ve={defaults:l.defaults};delete l.defaults;var Ze=new Set(oe.typeExtends);Ze.add(oe.getDefaults().type),e.model=oe.extend(_o(_o({},l),we(k,l,oe)),{typeExtends:Ze,isComponent:!X||At||g?g||function(){return 0}:oe.isComponent}),Object.defineProperty(e.model.prototype,"defaults",{get:function(){return _o(_o({},(0,C.result)(oe.prototype,"defaults")||{}),(0,C.result)(Ve,"defaults")||{})}})}if(typeof d=="object"&&(e.view=ve.extend(_o(_o({},d),we(B,d,ve)))),X?(X.model=e.model,X.view=e.view):(e.id=t,this.componentTypes.unshift(e)),nt){var Xe={id:t,label:t,content:{type:t}},Un=nt===!0?Xe:_o(_o({},Xe),nt);n.Blocks.add(Un.id||t,Un)}var Xn="component:type:".concat(X?"update":"add");return n?.trigger(Xn,X||e),this},o.prototype.getType=function(t){for(var e=this.componentTypes,n=0;n<e.length;n++)if(e[n].id==t)return e[n]},o.prototype.removeType=function(t){var e=this.componentTypes,n=this.getType(t);if(n){var r=e.indexOf(n);return e.splice(r,1),n}},o.prototype.getTypes=function(){return this.componentTypes},o.prototype.selectAdd=function(t,e){var n=this;e===void 0&&(e={}),t&&(t.set({status:"selected"}),["component:selected","component:toggled"].forEach(function(r){return n.em.trigger(r,t,e)}))},o.prototype.selectRemove=function(t,e){var n=this;e===void 0&&(e={}),t&&(this.em,t.set({status:"",state:""}),["component:deselected","component:toggled"].forEach(function(r){return n.em.trigger(r,t,e)}))},o.prototype.componentHovered=function(){var t=this.em,e=t.get("componentHovered"),n=t.previous("componentHovered"),r="hovered";n&&n.get("status")==r&&n.set({status:"",state:""}),e&&(0,C.isEmpty)(e.get("status"))&&e.set("status",r)},o.prototype.getShallowWrapper=function(){var t=this.shallow,e=this.em;if(!t&&e){var n=e.shallow;if(!n)return;var r=n.Components;if(r.componentTypes=this.componentTypes,t=r.getWrapper()){var l=[gr,fa].join(" ");t.on(l,(0,C.debounce)(function(){return t?.components("")},100))}this.shallow=t}return t},o.prototype.isComponent=function(t){return(0,q.isComponent)(t)},o.prototype.addSymbol=function(t){if(!(0,C.isSymbol)(t)||Kn(t)){var e=t.clone({symbol:!0});return Hn(e)&&this.symbols.add(e),this.em.trigger("component:toggled"),e}},o.prototype.getSymbols=function(){return fd([],this.symbols.models,!0)},o.prototype.detachSymbol=function(t){Or(t)&&Yo(t)},o.prototype.getSymbolInfo=function(t,e){e===void 0&&(e={});var n=Hn(t),r=Sn(t),l=!!r,p=lo(n?t:r)||[],d=r||(n?t:void 0),g=he(t,{changed:e.withChanges}),h=n||l;return{isSymbol:h,isMain:n,isInstance:l,isRoot:h&&Kn(t),main:d,instances:p,relatives:g||[]}},o.prototype.canMove=function(t,e,n){var r={result:!1,reason:Aa.InvalidSource,target:t,source:null};if(!e||!t)return r;if(jn(t)&&e instanceof fn&&jn(e)){var l=Qn(t),p=Hn(l)?l:Sn(l),d=Qn(e);if(p===(Hn(d)?d:Sn(d))&&l!==d)return _o(_o({},r),{reason:Aa.TargetReject})}var g=(0,q.isComponent)(e)?e:null;if(!g){var h=this.getShallowWrapper();g=h?.append(e,{temporary:!0})[0]||null}if(r.source=g,!g)return r;var m=g.get("draggable");if((0,C.isFunction)(m))m=!!m(g,t,n);else{var w=t.getEl();m=(0,C.isArray)(m)?m.join(","):m,m=(0,C.isString)(m)?w?.matches(m):m}if(!m)return _o(_o({},r),{reason:Aa.SourceReject});var k=t.get("droppable");(0,C.isFunction)(k)?k=!!k(g,t,n):k===!1&&t.isInstanceOf("text")&&g.get("textable")?k=!0:(w=g.getEl(),k=(0,C.isArray)(k)?k.join(","):k,k=(0,C.isString)(k)?w?.matches(k):k);var z=[t].concat(t.parents()).indexOf(g)>-1;return _o(_o({},r),!k||z?{reason:Aa.TargetReject}:{result:!0})},o.prototype.allById=function(){return this.componentsById},o.prototype.getById=function(t){return this.componentsById[t]||null},o.prototype.destroy=function(){var t,e=this.allById();Object.keys(e).forEach(function(n){return e[n]&&e[n].remove()}),(t=this.componentView)===null||t===void 0||t.remove(),[this.em,this.componentsById,this.componentView].forEach(function(n){return{}})},o}(Tt);const gd=hd,Ti=function(){return{stylePrefix:"css-",rules:[]}};var Os=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),xl=Number.MAX_VALUE,Ts=function(a){function o(){var t=a.call(this)||this;return(0,C.bindAll)(t,"sortRules"),t.compCls=[],t.ids=[],t}return Os(o,a),o.prototype.buildFromModel=function(t,e){var n=this;e===void 0&&(e={});var r="",l=this.em,p=l&&l.getConfig().avoidInlineStyle,d=t.styleToString(),g=t.classes;return this.ids.push("#".concat(t.getId())),g.forEach(function(h){return n.compCls.push(h.getFullName())}),!p&&d&&(r="#".concat(t.getId(),"{").concat(d,"}")),t.components().forEach(function(h){return r+=n.buildFromModel(h,e)}),r},o.prototype.build=function(t,e){var n=this;e===void 0&&(e={});var r=e.json,l=e.em,p=e.cssc||l?.Css;this.em=l,this.compCls=[],this.ids=[],this.model=t;var d=[],g=t?this.buildFromModel(t,e):"",h=(0,C.isUndefined)(e.clearStyles)&&l?l.getConfig().clearStyles:e.clearStyles;if(p){var m=e.rules||p.getAll(),w={},k=[];e.onlyMatched&&t&&(0,q.hasWin)()&&(m=this.matchedRules(t,m)),m.forEach(function(z){var B=z.getAtRule();if(B){var nt=w[B];nt?nt.push(z):w[B]=[z]}else{var X=n.buildFromRule(z,k,e);r?d.push(X):g+=X}}),this.sortMediaObject(w).forEach(function(z){var B="",nt=z.key;z.value.forEach(function(X){var At=n.buildFromRule(X,k,e);X.get("singleAtRule")?g+="".concat(nt,"{").concat(At,"}"):B+=At,r&&d.push(At)}),B&&(g+="".concat(nt,"{").concat(B,"}"))}),l&&h&&m.remove&&m.remove(k)}return r?d.filter(function(z){return z}):g},o.prototype.buildFromRule=function(t,e,n){var r,l=this;n===void 0&&(n={});var p,d="",g=this.model,h=t.selectorsToString({skipAdd:1}),m=t.get("selectorsAdd"),w=t.get("singleAtRule");if((r=t.get("selectors"))===null||r===void 0||r.forEach(function(z){var B=z.getFullName();(l.compCls.indexOf(B)>=0||l.ids.indexOf(B)>=0||n.keepUnusedStyles)&&(p=1)}),h&&p||m||w||!g){var k=t.getDeclaration();k&&(n.json?d=t:d+=k)}else e.push(t);return d},o.prototype.matchedRules=function(t,e){var n=this,r=t.getEl(),l=[];return e.forEach(function(p){try{p.selectorsToString().split(",").some(function(d){return r?.matches(n.__cleanSelector(d))})&&l.push(p)}catch{}}),t.components().forEach(function(p){l=l.concat(n.matchedRules(p,e))}),l=l.filter(function(p,d){return l.indexOf(p)===d})},o.prototype.getQueryLength=function(t){var e=/(-?\d*\.?\d+)\w{0,}/.exec(t);return e?parseFloat(e[1]):xl},o.prototype.sortMediaObject=function(t){var e=this;t===void 0&&(t={});var n=[];return(0,C.each)(t,function(r,l){return n.push({key:l,value:r})}),n.sort(function(r,l){var p=[r.key,l.key].every(function(h){return h.indexOf("min-width")!==-1}),d=p?r.key:l.key,g=p?l.key:r.key;return e.getQueryLength(d)-e.getQueryLength(g)})},o.prototype.sortRules=function(t,e){var n=function(d){return d.get("mediaText")||""},r=[n(t),n(e)].every(function(d){return d.indexOf("min-width")!==-1}),l=n(r?t:e),p=n(r?e:t);return this.getQueryLength(l)-this.getQueryLength(p)},o.prototype.__cleanSelector=function(t){return t.split(" ").map(function(e){return e.split(":")[0]}).join(" ")},o}(E.Kx);const ai=Ts;var vd=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Qi=function(){return Qi=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},Qi.apply(this,arguments)},ja=function(a,o,t){if(t||arguments.length===2)for(var e,n=0,r=o.length;n<r;n++)!e&&n in o||(e||(e=Array.prototype.slice.call(o,0,n)),e[n]=o[n]);return a.concat(e||Array.prototype.slice.call(o))},Cl=((0,q.hasWin)()?window:{}).CSS,Iu=function(a){function o(t,e){e===void 0&&(e={});var n=a.call(this,t,{em:e.em})||this;return n.views=[],n.config=t||{},n.opt=e,n.em=e.em,n.ensureSelectors(null,null,{}),n.on("change",n.__onChange),n.setStyle(n.get("style")),n}return vd(o,a),o.prototype.defaults=function(){return{selectors:[],selectorsAdd:"",style:{},mediaText:"",state:"",stylable:!0,atRuleType:"",singleAtRule:!1,important:!1,group:"",shallow:!1,_undo:!0}},o.prototype.__onChange=function(t,e){var n=this.em,r=this.changedAttributes();r&&!(0,q.isEmptyObj)(r)&&n?.changesUp(e)},o.prototype.clone=function(){var t=Qi({},this.opt),e=Qi({},this.attributes);return e.selectors=this.get("selectors").map(function(n){return n.clone()}),new this.constructor(e,t)},o.prototype.ensureSelectors=function(t,e,n){var r=this.em,l=r?.Selectors,p=[this,"change:selectors",this.ensureSelectors],d=this.getSelectors();if(this.stopListening.apply(this,p),d.models&&(d=ja([],d.models,!0)),d=(0,C.isString)(d)?[d]:d,Array.isArray(d)){var g=d.filter(function(h){return h}).map(function(h){return l?l.add(h):h});d=new Jo(g)}this.set("selectors",d,n),this.listenTo.apply(this,p)},o.prototype.getAtRule=function(){var t=this.get("atRuleType"),e=this.get("mediaText"),n=t?"@".concat(t):e?"@media":"";return n+(e&&n?" ".concat(e):"")},o.prototype.selectorsToString=function(t){t===void 0&&(t={});var e=[],n=this.get("state"),r=this.get("selectorsAdd"),l={escape:function(g){return Cl&&Cl.escape?Cl.escape(g):g}},p=this.getSelectors().getFullString(0,l),d=n&&!t.skipState?":".concat(n):"";return p&&e.push("".concat(p).concat(d)),r&&!t.skipAdd&&e.push(r),e.join(", ")},o.prototype.getDeclaration=function(t){t===void 0&&(t={});var e="",n=this.attributes.important,r=this.selectorsToString(t),l=this.styleToString(Qi({important:n},t)),p=this.get("singleAtRule");return(r||p)&&(l||t.allowEmpty)&&(e=p?l:"".concat(r,"{").concat(l,"}")),e},o.prototype.getDevice=function(){var t=this.em,e=this.attributes,n=e.atRuleType,r=e.mediaText,l=t?.Devices.getDevices()||[],p=l.filter(function(d){return d.getWidthMedia()===""})[0];return n==="media"&&r?l.filter(function(d){return d.getWidthMedia()===((g=/(-?\d*\.?\d+)\w{0,}/.exec(r))?g[0]:"");var g})[0]||null:p||null},o.prototype.getState=function(){var t=this.em,e=this.get("state");return(t?.Selectors.getStates()||[]).filter(function(n){return n.getName()===e})[0]||null},o.prototype.getComponent=function(){var t,e=this.getSelectors(),n=e.length==1&&e.at(0),r=n&&n.isId()&&n.get("name");return r&&((t=this.em)===null||t===void 0?void 0:t.Components.getById(r))||null},o.prototype.toCSS=function(t){t===void 0&&(t={});var e="",n=this.getAtRule(),r=this.getDeclaration(t);return(r||t.allowEmpty)&&(e=r),n&&e&&(e="".concat(n,"{").concat(e,"}")),e},o.prototype.toJSON=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=E.Kx.prototype.toJSON.apply(this,e);if(!((t=this.em)===null||t===void 0)&&t.getConfig().avoidDefaults){var l=this.defaults();(0,C.forEach)(l,function(p,d){r[d]===p&&delete r[d]}),delete r.style.__p,(0,C.isEmpty)(r.selectors)&&delete r.selectors,(0,C.isEmpty)(r.style)&&delete r.style}return Qi(Qi({},r),{style:this.dataResolverWatchers.getStylesDefsOrValues(r.style)})},o.prototype.compare=function(t,e,n,r){var l;r===void 0&&(r={});var p=e||"",d=n||"",g=r.selectorsAdd||"",h=r.atRuleType||"";d&&!h&&(h="media");var m=((0,C.isArray)(t)||t.models?t.models||t:[t]).map(function(B){return B.getFullName()}),w=(l=this.get("selectors"))===null||l===void 0?void 0:l.map(function(B){return B.getFullName()}),k=m.slice().sort(),z=w.slice().sort();return!(m.length!==w.length||!k.every(function(B,nt){return B===z[nt]}))&&this.get("state")===p&&this.get("mediaText")===d&&this.get("selectorsAdd")===g&&this.get("atRuleType")===h},o}(aa);const Sl=Iu;var Ol=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ta=function(a){function o(t,e){var n=a.call(this,t)||this;return n.editor=e?.em,setTimeout(function(){n.on("remove",n.onRemove),n.on("add",n.onAdd)}),n}return Ol(o,a),o.prototype.toJSON=function(t){return E.pM.prototype.toJSON.call(this,t).filter(function(e){return e.style&&!e.shallow})},o.prototype.onAdd=function(t,e,n){t.ensureSelectors(t,e,n)},o.prototype.onRemove=function(t){var e=this.editor;e.stopListening(t),e.UndoManager.remove(t)},o.prototype.add=function(t,e){return e===void 0&&(e={}),typeof t=="string"&&(t=this.editor.get("Parser").parseCss(t)),e.em=this.editor,E.pM.prototype.add.apply(this,[t,e])},o}(E.pM);const Tl=ta;ta.prototype.model=Sl;var _c=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),si=function(){return si=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},si.apply(this,arguments)},md=function(a,o,t){if(t||arguments.length===2)for(var e,n=0,r=o.length;n<r;n++)!e&&n in o||(e||(e=Array.prototype.slice.call(o,0,n)),e[n]=o[n]);return a.concat(e||Array.prototype.slice.call(o))},Ps=function(a){function o(t){var e=a.call(this,t,"CssComposer",null,He,Ti())||this;e.classes={CssRule:Sl,CssRules:Tl,CssRuleView:cn,CssRulesView:Vt},e.events=He,e.Selectors=Jo,e.storageKey="styles";var n=e.config,r=n.pStylePrefix;return r&&(n.stylePrefix=r+n.stylePrefix),n.rules=e.em.config.style||n.rules||"",e.rules=new Tl([],n),e}return _c(o,a),o.prototype.onLoad=function(){this.rules.add(this.config.rules,{silent:!0})},o.prototype.postLoad=function(){this.em.UndoManager.add(this.getAll())},o.prototype.store=function(){return this.getProjectData()},o.prototype.load=function(t){return this.loadProjectData(t,{all:this.rules})},o.prototype.add=function(t,e,n,r,l){r===void 0&&(r={}),l===void 0&&(l={});var p=e||"",d=n||"",g=si({},r),h=this.get(t,p,d,g);return h&&h.config&&!h.config.singleAtRule||(g.state=p,g.mediaText=d,g.selectors=[],d&&!g.atRuleType&&(g.atRuleType="media"),(h=new Sl(g,this.config)).get("selectors").add(t,l),this.rules.add(h,l)),h},o.prototype.get=function(t,e,n,r){var l=t;if((0,C.isString)(t)){var p=this.em.Selectors,d=t.split(",")[0].trim(),g=this.em.Parser.parserCss.checkNode({selectors:d})[0];l=p.get(g.selectors)}return this.rules.find(function(h){return h.compare(l,e,n,r)})||null},o.prototype.getAll=function(){return this.rules},o.prototype.addCollection=function(t,e,n){e===void 0&&(e={}),n===void 0&&(n={});var r=this.em,l=[];(0,C.isString)(t)&&(t=r.Parser.parseCss(t));for(var p=t instanceof Array?t:[t],d=0,g=p.length;d<g;d++){var h=p[d]||{};if(h.selectors){var m=r?.Selectors;m||console.warn("Selector Manager not found");for(var w=h.selectors,k=w instanceof Array?w:[w],z=[],B=0,nt=k.length;B<nt;B++){var X=m.add(k[B]);z.push(X)}var At=this.get(z,h.state,h.mediaText,h),It=this.add(z,h.state,h.mediaText,h,e),Wt=!At||!e.avoidUpdateStyle,oe=h.style||{};if((0,q.isObject)(n)&&It.set(n,e),Wt){var ve=e.extend?si(si({},It.getStyle("",{skipResolve:!0})),oe):oe;It.setStyle(ve,e)}l.push(It)}}return l},o.prototype.addRules=function(t){return this.addCollection(t)},o.prototype.setRule=function(t,e,n){e===void 0&&(e={}),n===void 0&&(n={});var r=n.atRuleType,l=n.atRuleParams,p=this.em.Parser.parserCss.checkNode({selectors:t,style:e})[0],d=p.state,g=p.selectorsAdd,h=this.em.Selectors.add(p.selectors),m=this.add(h,d,l,{selectorsAdd:g,atRule:r});return n.addStyles?m.addStyle(e,n):m.setStyle(e,n),m},o.prototype.getRule=function(t,e){e===void 0&&(e={});var n=this.em,r=n.Selectors,l=n.Parser.parserCss.checkNode({selectors:t})[0],p=r.get(l.selectors),d=l.state,g=l.selectorsAdd,h=e.atRuleType,m=e.atRuleParams;return p?this.get(p,d,m,{selectorsAdd:g,atRuleType:h}):void 0},o.prototype.getRules=function(t){var e=this.getAll();if(!t)return md([],e.models,!0);var n={sort:!0},r=(0,C.isString)(t)?t.split(",").map(function(l){return l.trim()}):t;return e.filter(function(l){return r.indexOf(l.getSelectors().getFullString(null,n))>=0})},o.prototype.setIdRule=function(t,e,n){e===void 0&&(e={}),n===void 0&&(n={});var r=n.addOpts,l=r===void 0?{}:r,p=n.mediaText,d=n.state||"",g=(0,C.isUndefined)(p)?this.em.getCurrentMedia():p,h=this.em.Selectors.add({name:t,type:no.TYPE_ID},l),m=this.add(h,d,g,{},l);return m.setStyle(e,si(si({},n),l)),m},o.prototype.getIdRule=function(t,e){e===void 0&&(e={});var n=e.mediaText,r=e.state||"",l=(0,C.isUndefined)(n)?this.em.getCurrentMedia():n,p=this.em.Selectors.get(t,no.TYPE_ID);return p&&this.get(p,r,l)},o.prototype.setClassRule=function(t,e,n){e===void 0&&(e={}),n===void 0&&(n={});var r=n.state||"",l=n.mediaText||this.em.getCurrentMedia(),p=this.em.Selectors.add({name:t,type:no.TYPE_CLASS}),d=this.add(p,r,l);return d.setStyle(e,n),d},o.prototype.getClassRule=function(t,e){e===void 0&&(e={});var n=e.state||"",r=e.mediaText||this.em.getCurrentMedia(),l=this.em.Selectors.get(t,no.TYPE_CLASS);return l&&this.get(l,n,r)},o.prototype.remove=function(t,e){var n=(0,C.isString)(t)?this.getRules(t):t,r=this.getAll().remove(n,e);return(0,C.isArray)(r)?r:[r]},o.prototype.clear=function(t){return t===void 0&&(t={}),this.getAll().reset([],t),this},o.prototype.getComponentRules=function(t,e){e===void 0&&(e={});var n=e.state,r=e.mediaText;e.current&&(n=this.em.get("state")||"",r=this.em.getCurrentMedia());var l=t.getId();return this.getAll().filter(function(p){return!(!(0,C.isUndefined)(n)&&p.get("state")!==n)&&!(!(0,C.isUndefined)(r)&&p.get("mediaText")!==r)&&p.getSelectorsString()==="#".concat(l)})},o.prototype.render=function(){var t;return(t=this.rulesView)===null||t===void 0||t.remove(),this.rulesView=new Vt({collection:this.rules,config:this.config}),this.rulesView.render().el},o.prototype.checkId=function(t,e){e===void 0&&(e={});var n=e.idMap,r=n===void 0?{}:n,l=[];return Object.keys(r).length&&(Array.isArray(t)?t:[t]).forEach(function(p){var d=p.selectors;if(d&&d.length==1){var g=d[0];if((0,C.isString)(g)){if(g[0]==="#"){var h=g.substring(1),m=r[h];h&&m&&(d[0]="#".concat(m),l.push(p))}}else g.name&&g.type===no.TYPE_ID&&(m=r[g.name])&&(g.name=m,l.push(p))}}),l},o.prototype.destroy=function(){var t;this.rules.reset(),this.rules.stopListening(),(t=this.rulesView)===null||t===void 0||t.remove()},o}(Tt);const Nu=Ps,yd=function(){return{appendTo:"",blocks:[],appendOnClick:!1,custom:!1}};var Vu=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Es=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return Vu(o,a),o.prototype.defaults=function(){return{label:"",content:"",media:"",category:"",activate:!1,select:void 0,resetId:!1,disable:!1,onClick:void 0,attributes:{},dragDef:{}}},Object.defineProperty(o.prototype,"category",{get:function(){var t=this.get("category");return t instanceof Er?t:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"parent",{get:function(){return this.collection},enumerable:!1,configurable:!0}),o.prototype.getId=function(){return this.id},o.prototype.getLabel=function(){return this.get("label")},o.prototype.getMedia=function(){return this.get("media")},o.prototype.getContent=function(){return this.get("content")},o.prototype.getDragDef=function(){return this.get("dragDef")},o.prototype.getCategoryLabel=function(){var t=this.get("category");return(0,C.isFunction)(t?.get)?t.get("label"):t?.label?t?.label:t},o}(E.Kx);var bd=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ru=function(a){function o(t,e){var n=a.call(this,t)||this;return n.em=e.em,n.on("add",n.handleAdd),n}return bd(o,a),o.prototype.getCategories=function(){return this.em.Blocks.getCategories()},o.prototype.handleAdd=function(t){this.initCategory(t)},o}(Ja);const Pi=Ru;var Ma;Ru.prototype.model=Es,function(a){a.add="block:add",a.remove="block:remove",a.removeBefore="block:remove:before",a.update="block:update",a.dragStart="block:drag:start",a.drag="block:drag",a.dragEnd="block:drag:stop",a.categoryUpdate="block:category:update",a.custom="block:custom",a.all="block"}(Ma||(Ma={}));var Fu=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Da=function(){return Da=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},Da.apply(this,arguments)},wc=function(a){function o(t,e){e===void 0&&(e={});var n=a.call(this,t)||this,r=n.model;return n.em=e.em,n.config=e,n.endDrag=n.endDrag.bind(n),n.ppfx=e.pStylePrefix||"",n.listenTo(r,"destroy remove",n.remove),n.listenTo(r,"change",n.render),n}return Fu(o,a),o.prototype.events=function(){return{click:"handleClick",mousedown:"startDrag",dragstart:"handleDragStart",drag:"handleDrag",dragend:"handleDragEnd"}},o.prototype.__getModule=function(){return this.em.Blocks},o.prototype.handleClick=function(t){var e,n,r=this,l=r.config,p=r.model,d=r.em,g=p.get("onClick")||l.appendOnClick;if(d.trigger("block:click",p,t),g){if((0,C.isFunction)(g))return g(p,d?.getEditor(),{event:t});var h=(e=l.getSorter)===null||e===void 0?void 0:e.call(l);if(h){var m,w,k=p.get("content"),z=(n=this.getTempDropModel(k).view)===null||n===void 0?void 0:n.el,B=z?[{element:z,dragSource:{content:k}}]:[],nt=d.getSelected(),X=0;if(nt)if(h.validTarget(nt.getEl(),B,X))m=nt;else{var At=nt.parent();At&&h.validTarget(At.getEl(),B,X)&&(m=At,w=At.components().indexOf(nt)+1)}if(!m){var It=d.getWrapper();h.validTarget(It.getEl(),B,X)&&(m=It)}var Wt=m&&m.append(k,{at:w})[0];Wt&&d.setSelected(Wt,{scroll:!0})}}},o.prototype.startDrag=function(t){var e,n=this,r=n.config,l=n.em,p=n.model,d=p.get("disable");if(t.button===0&&r.getSorter&&!this.el.draggable&&!d){l.refreshCanvas();var g=r.getSorter();g.__currentBlock=p;var h=this.model.get("content"),m=(e=this.getTempDropModel(h).view)===null||e===void 0?void 0:e.el,w=m?[{element:m,dragSource:{content:h}}]:[];g.startSort(w),(0,St.on)(document,"mouseup",this.endDrag)}},o.prototype.handleDragStart=function(t){this.__getModule().__startDrag(this.model,t)},o.prototype.handleDrag=function(t){this.__getModule().__drag(t)},o.prototype.handleDragEnd=function(){this.__getModule().__endDrag()},o.prototype.endDrag=function(){var t,e;(0,St.AU)(document,"mouseup",this.endDrag);var n=(e=(t=this.config).getSorter)===null||e===void 0?void 0:e.call(t);n&&n.endDrag()},o.prototype.getTempDropModel=function(t){var e,n=this.em.Components.getComponents(),r={avoidChildren:1,avoidStore:1,avoidUpdateStyle:1},l=n.add(t,Da(Da({},r),{temporary:!0})),p=n.remove(l,Da(Da({},r),{temporary:!0}));return(e=(p=p instanceof Array?p[0]:p).view)===null||e===void 0||e.$el.data("model",p),p},o.prototype.render=function(){var t,e=this,n=e.em,r=e.el,l=e.$el,p=e.ppfx,d=e.model,g=d.get("disable"),h=d.get("attributes")||{},m=h.class||"",w="".concat(p,"block"),k=n&&n.t("blockManager.labels.".concat(d.id))||d.get("label"),z=d.get("render"),B=d.get("media"),nt=g?"".concat(w,"--disable"):"".concat(p,"four-color-h");l.attr(h),r.className="".concat(m," ").concat(w," ").concat(p,"one-bg ").concat(nt).trim(),r.innerHTML=`
      `.concat(B?'<div class="'.concat(w,'__media">').concat(B,"</div>"):"",`
      <div class="`).concat(w,'-label">').concat(k,`</div>
    `),r.title=h.title||((t=r.textContent)===null||t===void 0?void 0:t.trim()),r.setAttribute("draggable","".concat(!(!(0,q.hasDnd)(n)||g)));var X=z&&z({el:r,model:d,className:w,prefix:p});return X&&(r.innerHTML=X),this},o}(E.Ss);const Hu=wc;var _d=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Uu=function(a,o){return Object.defineProperty?Object.defineProperty(a,"raw",{value:o}):a.raw=o,a},zu=function(a){function o(t,e,n){var r=a.call(this,t)||this;r.config=e;var l=e.pStylePrefix||"";return r.em=e.em,r.catName=n,r.pfx=l,r.caretR="fa fa-caret-right",r.caretD="fa fa-caret-down",r.iconClass="".concat(l,"caret-icon"),r.activeClass="".concat(l,"open"),r.className="".concat(l).concat(n,"-category"),r.listenTo(r.model,"change:open",r.updateVisibility),r.model.view=r,r}return _d(o,a),o.prototype.events=function(){return{"click [data-title]":"toggle"}},o.prototype.template=function(t){var e=t.pfx,n=t.label,r=t.catName;return it(Ia||(Ia=Uu([`
      <div class="`,`title" data-title>
        <i class="`,`caret-icon"></i>
        `,`
      </div>
      <div class="`,"",`s-c"></div>
    `],[`
      <div class="`,`title" data-title>
        <i class="`,`caret-icon"></i>
        `,`
      </div>
      <div class="`,"",`s-c"></div>
    `])),e,e,n,e,r)},o.prototype.attributes=function(){return this.model.get("attributes")||{}},o.prototype.updateVisibility=function(){this.model.get("open")?this.open():this.close()},o.prototype.open=function(){this.$el.addClass(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretD),this.getTypeEl().style.display=""},o.prototype.close=function(){this.$el.removeClass(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretR),this.getTypeEl().style.display="none"},o.prototype.toggle=function(){var t=this.model;t.set("open",!t.get("open"))},o.prototype.getIconEl=function(){return this.iconEl||(this.iconEl=this.el.querySelector(".".concat(this.iconClass))),this.iconEl},o.prototype.getTypeEl=function(){return this.typeEl||(this.typeEl=this.el.querySelector(".".concat(this.pfx).concat(this.catName,"s-c"))),this.typeEl},o.prototype.append=function(t){this.getTypeEl().appendChild(t)},o.prototype.render=function(){var t=this,e=t.em,n=t.el,r=t.$el,l=t.model,p=t.pfx,d=t.catName,g=e.t("".concat(d,"Manager.categories.").concat(l.id))||l.get("label");return n.innerHTML=this.template({pfx:p,label:g,catName:d}),r.addClass(this.className),r.css({order:l.get("order")}),this.updateVisibility(),this},o}(E.Ss);const La=zu;var Ia,wd=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Na=function(){return Na=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},Na.apply(this,arguments)},xd=function(a){function o(t,e){var n=a.call(this,t)||this;n.renderedCategories=new Map,(0,C.bindAll)(n,"getSorter","onDrag","onDrop","onMove"),n.config=e||{},n.categories=t.categories||"";var r=n.config.pStylePrefix||"";n.ppfx=r,n.noCatClass="".concat(r,"blocks-no-cat"),n.blockContClass="".concat(r,"blocks-c"),n.catsClass="".concat(r,"block-categories");var l=n.collection;return n.listenTo(l,"add",n.addTo),n.listenTo(l,"reset",n.render),n.em=n.config.em,n.em&&(n.config.getSorter=n.getSorter),n}return wd(o,a),o.prototype.__getModule=function(){return this.em.Blocks},o.prototype.updateConfig=function(t){t===void 0&&(t={}),this.config=Na(Na({},this.config),t)},o.prototype.getSorter=function(){var t=this.em;if(t){if(!this.sorter){var e=t.Utils,n=t.Canvas;this.sorter=new e.ComponentSorter({em:t,treeClass:es,containerContext:{container:n.getBody(),containerSel:"*",itemSel:"*",pfx:this.ppfx,placeholderElement:n.getPlacerEl(),document:n.getBody().ownerDocument},dragBehavior:{dragDirection:Ar.A.BothDirections,nested:!0},positionOptions:{windowMargin:1,canvasRelative:!0},eventHandlers:{legacyOnStartSort:this.onDrag,legacyOnEndMove:this.onDrop,legacyOnMoveClb:this.onMove}})}return this.sorter}},o.prototype.onDrag=function(t){this.em.stopDefault(),this.__getModule().__startDrag(this.sorter.__currentBlock,t)},o.prototype.onMove=function(t){this.__getModule().__drag(t)},o.prototype.onDrop=function(t){this.em.runDefault(),this.__getModule().__endDrag({component:t}),delete this.sorter.__currentBlock},o.prototype.addTo=function(t){this.add(t)},o.prototype.add=function(t,e){var n=this.config,r=this.renderedCategories,l=t.get("attributes"),p=new Hu({model:t,attributes:l},n).render().el,d=t.parent.initCategory(t);if(d&&this.categories&&!n.ignoreCategories){var g=d.getId(),h=this.getCategoriesEl(),m=r.get(g);return!m&&h&&(m=new La({model:d},n,"block").render(),r.set(g,m),h.appendChild(m.el)),void(m==null||m.append(p))}e?e.appendChild(p):this.append(p)},o.prototype.getCategoriesEl=function(){return this.catsEl||(this.catsEl=this.el.querySelector(".".concat(this.catsClass))),this.catsEl},o.prototype.getBlocksEl=function(){return this.blocksEl||(this.blocksEl=this.el.querySelector(".".concat(this.noCatClass," .").concat(this.blockContClass))),this.blocksEl},o.prototype.append=function(t){var e=this.getBlocksEl();e&&e.appendChild(t)},o.prototype.render=function(){var t=this,e=this.ppfx,n=document.createDocumentFragment();delete this.catsEl,delete this.blocksEl,this.renderedCategories=new Map,this.el.innerHTML=`
      <div class="`.concat(this.catsClass,`"></div>
      <div class="`).concat(this.noCatClass,`">
        <div class="`).concat(this.blockContClass,`"></div>
      </div>
    `),this.collection.each(function(l){return t.add(l,n)}),this.append(n);var r="".concat(this.blockContClass,"s ").concat(e,"one-bg ").concat(e,"two-color");return this.$el.addClass(r),this.rendered=!0,this},o}(E.Ss);const xc=xd;var Cd=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ei=function(){return Ei=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},Ei.apply(this,arguments)},Sd=function(a){function o(t){var e=a.call(this,t,"BlockManager",new Pi([],{em:t}),Ma,yd())||this;return e.events=Ma,e.Block=Es,e.Blocks=Pi,e.Category=Er,e.Categories=co,e.storageKey="",e.blocks=e.all,e.blocksVisible=new Pi(e.blocks.models,{em:t}),e.categories=new co([],{em:t,events:{update:Ma.categoryUpdate}}),e.__onAllEvent=(0,C.debounce)(function(){return e.__trgCustom()},0),e}return Cd(o,a),o.prototype.onInit=function(){var t=this,e=t.config,n=t.blocks,r=t.blocksVisible;n.on("add",function(l){return r.add(l)}),n.on("remove",function(l){return r.remove(l)}),n.on("reset",function(l){return r.reset(l.models)}),n.add(e.blocks||[])},o.prototype.__trgCustom=function(){this.em.trigger(this.events.custom,this.__customData())},o.prototype.__customData=function(){var t=this,e=this.__getBehaviour();return{bm:this,blocks:this.getAll().models,container:e.container,dragStart:function(n,r){return t.startDrag(n,r)},drag:function(n){return t.__drag(n)},dragStop:function(n){return t.endDrag(n)}}},o.prototype.__startDrag=function(t,e){var n=this,r=n.em,l=n.events,p=n.blocks,d=t.getContent?t.getContent():t;this._dragBlock=t,r.set({dragResult:null,dragSource:{content:d,dragDef:t.getDragDef()}}),[r,p].map(function(g){return g.trigger(l.dragStart,t,e)})},o.prototype.__drag=function(t){var e=this,n=e.em,r=e.events,l=e.blocks,p=this._dragBlock;[n,l].map(function(d){return d.trigger(r.drag,p,t)})},o.prototype.__endDrag=function(t){t===void 0&&(t={});var e=this,n=e.em,r=e.events,l=e.blocks,p=this._dragBlock,d=t.component||n.get("dragResult");if(delete this._dragBlock,d&&p){var g="activeOnRender",h=d.get&&d.get(g),m=p.get("activate")||h,w=p.get("select"),k=(0,C.isArray)(d)?d[0]:d;w||m&&w!==!1?n.setSelected(k,{activate:m}):m&&k.trigger("active"),m&&h&&k.unset(g),p.get("resetId")&&k.onAll(function(z){return z.resetId()})}n.set({dragResult:null,dragSource:void 0}),p&&[n,l].map(function(z){return z.trigger(r.dragEnd,d,p)})},o.prototype.__getFrameViews=function(){return this.em.Canvas.getFrames().map(function(t){return t.view}).filter(Boolean)},o.prototype.__behaviour=function(t){return t===void 0&&(t={}),this._bhv=Ei(Ei({},this._bhv||{}),t)},o.prototype.__getBehaviour=function(){return this._bhv||{}},o.prototype.startDrag=function(t,e){this.__startDrag(t,e),this.__getFrameViews().forEach(function(n){var r;return(r=n.droppable)===null||r===void 0?void 0:r.startCustom()})},o.prototype.endDrag=function(t){this.__getFrameViews().forEach(function(e){var n;return(n=e.droppable)===null||n===void 0?void 0:n.endCustom(t)}),this.__endDrag()},o.prototype.postRender=function(){var t=this,e=t.categories,n=t.config,r=t.em,l=this.blocksVisible;this.blocksView=new xc({collection:l,categories:e},Ei(Ei({},n),{em:r})),this.__appendTo(l.models),this.__trgCustom()},o.prototype.add=function(t,e,n){n===void 0&&(n={});var r=e||{};return r.id=t,this.blocks.add(r,n)},o.prototype.get=function(t){return this.blocks.get(t)},o.prototype.getAll=function(){return this.blocks},o.prototype.getAllVisible=function(){return this.blocksVisible},o.prototype.remove=function(t,e){return e===void 0&&(e={}),this.__remove(t,e)},o.prototype.getCategories=function(){return this.categories},o.prototype.getContainer=function(){var t;return(t=this.blocksView)===null||t===void 0?void 0:t.el},o.prototype.getDragBlock=function(){return this._dragBlock},o.prototype.getBlocksByCategory=function(t){return ti(t||this.getAll().models)},o.prototype.render=function(t,e){e===void 0&&(e={});var n=this,r=n.categories,l=n.config,p=n.em,d=t||this.getAll().models;if(e.external){var g=new Pi(d,{em:p});return new xc({collection:g,categories:r},Ei(Ei({em:p},l),e)).render().el}return this.blocksView&&(this.blocksView.updateConfig(e),this.blocksView.collection.reset(d),this.blocksView.rendered||(this.blocksView.render(),this.blocksView.rendered=!0)),this.getContainer()},o.prototype.destroy=function(){var t,e=[this.blocks,this.blocksVisible,this.categories];e.map(function(n){return n.stopListening()}),e.map(function(n){return n.reset()}),(t=this.blocksView)===null||t===void 0||t.remove()},o}(Tt);const Od=Sd,Bu=function(){return{stylePrefix:"clm-",appendTo:"",selectors:[],states:[{name:"hover"},{name:"active"},{name:"nth-of-type(2n)"}],iconAdd:'<svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg>',iconSync:'<svg viewBox="0 0 24 24"><path d="M12 18c-3.31 0-6-2.69-6-6 0-1 .25-1.97.7-2.8L5.24 7.74A7.93 7.93 0 0 0 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4m0-11V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1-.25 1.97-.7 2.8l1.46 1.46A7.93 7.93 0 0 0 20 12c0-4.42-3.58-8-8-8z"></path></svg>',iconTagOn:'<svg viewBox="0 0 24 24"><path d="M19 19H5V5h10V3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-8h-2m-11.09-.92L6.5 11.5 11 16 21 6l-1.41-1.42L11 13.17l-3.09-3.09z"></path></svg>',iconTagOff:'<svg viewBox="0 0 24 24"><path d="M19 3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5a2 2 0 0 0-2-2m0 2v14H5V5h14z"></path></svg>',iconTagRemove:'<svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',componentFirst:!1,custom:!1}};var Td=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Wu=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return Td(o,a),o.prototype.defaults=function(){return{name:"",label:""}},o.prototype.getName=function(){return this.get("name")},o.prototype.getLabel=function(){return this.get("label")||this.getName()},o}(E.Kx);const Pl=Wu;Wu.prototype.idAttribute="name";var Cc=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),$u=function(a,o){return Object.defineProperty?Object.defineProperty(a,"raw",{value:o}):a.raw=o,a},qu="contentEditable",Gu=function(a){function o(t){t===void 0&&(t={});var e=a.call(this,t)||this,n=t.config||{};return e.config=n,e.module=t.module,e.coll=t.coll||null,e.pfx=n.stylePrefix||"",e.ppfx=n.pStylePrefix||"",e.em=n.em,e.listenTo(e.model,"change:active",e.updateStatus),e}return Cc(o,a),o.prototype.template=function(){var t=this,e=t.pfx,n=t.model,r=t.config,l=n.get("label")||"";return it(Sc||(Sc=$u([`
      <span id="`,'checkbox" class="',`tag-status" data-tag-status></span>
      <span id="`,'tag-label" data-tag-name>',`</span>
      <span id="`,'close" class="','tag-close" data-tag-remove> $',` </span>
    `],[`
      <span id="`,'checkbox" class="',`tag-status" data-tag-status></span>
      <span id="`,'tag-label" data-tag-name>',`</span>
      <span id="`,'close" class="','tag-close" data-tag-remove> $',` </span>
    `])),e,e,e,l,e,e,r.iconTagRemove)},o.prototype.events=function(){return{"click [data-tag-remove]":"removeTag","click [data-tag-status]":"changeStatus","dblclick [data-tag-name]":"startEditTag","focusout [data-tag-name]":"endEditTag"}},o.prototype.getInputEl=function(){return this.inputEl||(this.inputEl=this.el.querySelector("[data-tag-name]")),this.inputEl},o.prototype.startEditTag=function(){var t=this.em,e=this.getInputEl();e[qu]="true",e.focus(),t?.setEditing(!0)},o.prototype.endEditTag=function(){var t=this.model,e=this.em,n=this.getInputEl(),r=n.textContent||"",l=e?.Selectors;n[qu]="false",e?.setEditing(!1),l&&l.rename(t,r)!==t&&(n.innerText=t.getLabel())},o.prototype.changeStatus=function(){var t=this.model;t.set("active",!t.getActive())},o.prototype.removeTag=function(){this.module.removeSelected(this.model)},o.prototype.updateStatus=function(){var t=this,e=t.model,n=t.$el,r=t.config,l=r.iconTagOn,p=r.iconTagOff,d=n.find("[data-tag-status]");e.get("active")?(d.html(l),n.removeClass("opac50")):(d.html(p),n.addClass("opac50"))},o.prototype.render=function(){var t=this,e=t.pfx,n=t.ppfx,r=t.$el,l=t.model,p="".concat(e,"tag"),d=["".concat(p," ").concat(n,"three-bg")];return l.get("protected")&&d.push("".concat(p,"-protected")),r.html(this.template()),r.attr("class",d.join(" ")),this.updateStatus(),this},o}(E.Ss);const Va=Gu;var Sc,El=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ks=function(a,o){return Object.defineProperty?Object.defineProperty(a,"raw",{value:o}):a.raw=o,a},Pd=function(a){function o(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.config=t.config||{},e.pfx=e.config.stylePrefix||"",e.ppfx=e.config.pStylePrefix||"",e.className=e.pfx+"tags",e.stateInputId=e.pfx+"states",e.stateInputC=e.pfx+"input-c",e.states=e.config.states||[];var n=e.config.em,r=e.collection;e.target=n;var l=n.Selectors;e.module=l,e.em=n,e.componentChanged=(0,C.debounce)(e.componentChanged.bind(e),0),e.checkSync=(0,C.debounce)(e.checkSync.bind(e),0);var p=jt.I.update,d="".concat(p,":classes"),g="component:toggled ".concat(d),h="".concat(d," ").concat(p,":attributes:id change:state");return e.listenTo(n,g,e.componentChanged),e.listenTo(n,"styleManager:update",e.componentChanged),e.listenTo(n,h,e.__handleStateChange),e.listenTo(n,"styleable:change change:device",e.checkSync),e.listenTo(r,"add",e.addNew),e.listenTo(r,"reset",e.renderClasses),e.listenTo(r,"remove",e.tagRemoved),e.listenTo(l.getAll(),l.events.state,(0,C.debounce)(function(){return e.renderStates()},0)),e.delegateEvents(),e}return El(o,a),o.prototype.template=function(t){var e=t.labelInfo,n=t.labelHead,r=t.iconSync,l=t.iconAdd,p=t.pfx,d=t.ppfx;return it(On||(On=ks([' <div id="','up" class="',`header">
        <div id="`,'label" class="','header-label">',`</div>
        <div id="`,'status-c" class="',`header-status">
          <span id="`,`input-c" data-states-c>
            <div class="`,"field ",`select">
              <span id="`,`input-holder">
                <select id="`,`states" data-states></select>
              </span>
              <div class="`,`sel-arrow">
                <div class="`,`d-s-arrow"></div>
              </div>
            </div>
          </span>
        </div>
      </div>
      <div id="`,'tags-field" class="',`field">
        <div id="`,`tags-c" data-selectors></div>
        <input id="`,`new" data-input />
        <span id="`,'add-tag" class="',"tags-btn ",'tags-btn__add" data-add> $',` </span>
        <span class="`,"tags-btn ",'tags-btn__sync" style="display: none" data-sync-style> $',` </span>
      </div>
      <div class="`,`sels-info">
        <div class="`,'label-sel">',`:</div>
        <div class="`,`sels" data-selected></div>
      </div>`],[' <div id="','up" class="',`header">
        <div id="`,'label" class="','header-label">',`</div>
        <div id="`,'status-c" class="',`header-status">
          <span id="`,`input-c" data-states-c>
            <div class="`,"field ",`select">
              <span id="`,`input-holder">
                <select id="`,`states" data-states></select>
              </span>
              <div class="`,`sel-arrow">
                <div class="`,`d-s-arrow"></div>
              </div>
            </div>
          </span>
        </div>
      </div>
      <div id="`,'tags-field" class="',`field">
        <div id="`,`tags-c" data-selectors></div>
        <input id="`,`new" data-input />
        <span id="`,'add-tag" class="',"tags-btn ",'tags-btn__add" data-add> $',` </span>
        <span class="`,"tags-btn ",'tags-btn__sync" style="display: none" data-sync-style> $',` </span>
      </div>
      <div class="`,`sels-info">
        <div class="`,'label-sel">',`:</div>
        <div class="`,`sels" data-selected></div>
      </div>`])),p,p,p,p,n,p,p,p,d,d,d,p,d,d,p,d,p,p,p,p,p,l,p,p,r,p,p,e,p)},o.prototype.events=function(){return{"change [data-states]":"stateChanged","click [data-add]":"startNewTag","focusout [data-input]":"endNewTag","keyup [data-input]":"onInputKeyUp","click [data-sync-style]":"syncStyle"}},o.prototype.syncStyle=function(){var t,e=this.em,n=this.getTarget(),r=e.Css,l=this.getCommonSelectors({opts:{noDisabled:1}}),p=e.get("state"),d=e.getCurrentMedia(),g=[],h=r.get(l,p,d)||r.add(l,p,d);this.getTargets().forEach(function(m){var w=r.getIdRule(m.getId(),{state:p,mediaText:d});t=w.getStyle(),w.setStyle({}),g.push(w)}),t&&h.addStyle(t),e.trigger("component:toggled"),e.trigger("component:sync-style",{component:n,selectors:l,mediaText:d,rule:h,ruleComponents:g,state:p})},o.prototype.tagRemoved=function(t){this.updateStateVis()},o.prototype.addNew=function(t){this.addToClasses(t)},o.prototype.startNewTag=function(){var t,e;(t=this.$addBtn)===null||t===void 0||t.css({display:"none"}),(e=this.$input)===null||e===void 0||e.show().focus()},o.prototype.endNewTag=function(){var t,e;(t=this.$addBtn)===null||t===void 0||t.css({display:""}),(e=this.$input)===null||e===void 0||e.hide().val("")},o.prototype.onInputKeyUp=function(t){var e;t.keyCode===13?(t.preventDefault(),this.addNewTag((e=this.$input)===null||e===void 0?void 0:e.val())):t.keyCode===27&&this.endNewTag()},o.prototype.checkStates=function(){var t=this.em.getState(),e=this.getStates();e&&e.val(t)},o.prototype.componentChanged=function(t){var e=(t===void 0?{}:t).targets;this.updateSelection(e)},o.prototype.updateSelection=function(t){var e=t||this.getTargets(),n=[];return(e=(0,C.isArray)(e)?e:[e])&&e.length&&(n=this.getCommonSelectors({targets:e}),this.checkSync({validSelectors:n})),this.collection.reset(n),this.updateStateVis(e),this.module.__trgCustom(),n},o.prototype.getCommonSelectors=function(t){var e=t===void 0?{}:t,n=e.targets,r=e.opts,l=r===void 0?{}:r,p=n||this.getTargets();return this.module.__getCommonSelectors(p,l)},o.prototype._commonSelectors=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this.module).__common.apply(t,e)},o.prototype.checkSync=function(){var t,e=this,n=e.$btnSyncEl,r=e.config,l=e.collection,p=this.getTarget();if(p&&r.componentFirst&&l.length){var d=p.getStyle();t=!(0,C.isEmpty)(d)}n&&n[t?"show":"hide"]()},o.prototype.getTarget=function(){return this.target.getSelected()},o.prototype.getTargets=function(){return this.target.getSelectedAll()},o.prototype.updateStateVis=function(t){var e=this.em,n=e&&e.getConfig().avoidInlineStyle,r=this.collection.length||n?"":"none";this.getStatesC().css("display",r),this.updateSelector(t)},o.prototype.__handleStateChange=function(){this.updateSelector(this.getTargets())},o.prototype.updateSelector=function(t){var e=this,n=this.el.querySelector("[data-selected]"),r=[],l=t||this.getTargets();(l=(0,C.isArray)(l)?l:[l]).forEach(function(p){return r.push(e.__getName(p))}),n&&(n.innerHTML=r.join(", ")),this.checkStates()},o.prototype.__getName=function(t){var e,n=this,r=n.pfx,l=n.config,p=n.em,d=l.selectedName,g=l.componentFirst;if((0,C.isString)(t))e=it(Ku||(Ku=ks(['<span class="','sel-gen">',"</span>"],['<span class="','sel-gen">',"</span>"])),r,t);else{var h=t?.getSelectors();if(!h)return"";var m=h.getStyleable(),w=p.get("state"),k=t.getId?it(kl||(kl=ks(['<span class="','sel-cmp">',`</span>
            <span class="`,'sel-id">#',"</span>"],['<span class="','sel-cmp">',`</span>
            <span class="`,'sel-id">#',"</span>"])),r,t.getName(),r,t.getId()):"";e=(e=this.collection.getFullString(m))?it(Ra||(Ra=ks(['<span class="','sel-rule">',"</span>"],['<span class="','sel-rule">',"</span>"])),r,e):t.get("selectorsAdd")||k,e=g&&k?k:e,e+=w?it(mr||(mr=ks(['<span class="','sel-state">:',"</span>"],['<span class="','sel-state">:',"</span>"])),r,w):"",e=d?d({result:e,state:w,target:t}):e}return e&&'<span class="'.concat(r,'sel">').concat(e,"</span>")},o.prototype.stateChanged=function(t){var e=this.em,n=t.target.value;e.set("state",n)},o.prototype.addNewTag=function(t){var e=t.trim();e&&(this.module.addSelected({label:e}),this.endNewTag())},o.prototype.addToClasses=function(t,e){var n=e,r=this.getClasses(),l=new Va({model:t,config:this.config,coll:this.collection,module:this.module}).render().el;return n?n.appendChild(l):r.append(l),l},o.prototype.renderClasses=function(){var t=this,e=document.createDocumentFragment(),n=this.getClasses();n.empty(),this.collection.each(function(r){return t.addToClasses(r,e)}),n.append(e)},o.prototype.getClasses=function(){return this.$el.find("[data-selectors]")},o.prototype.getStates=function(){if(!this.$states){var t=this.$el.find("[data-states]");this.$states=t[0]&&t}return this.$states},o.prototype.getStatesC=function(){return this.$statesC||(this.$statesC=this.$el.find("#"+this.stateInputC)),this.$statesC},o.prototype.renderStates=function(){var t=this.module,e=this.em,n=e.t("selectorManager.emptyState"),r=t.getStates().map(function(p){var d=e.t("selectorManager.states.".concat(p.id))||p.getLabel()||p.id;return'<option value="'.concat(p.id,'">').concat(d,"</option>")}).join(""),l=this.getStates();l&&l.html('<option value="">'.concat(n,"</option>").concat(r)),this.checkStates()},o.prototype.render=function(){var t=this,e=t.em,n=t.pfx,r=t.ppfx,l=t.config,p=t.$el,d=t.el,g=l.render,h={iconSync:l.iconSync,iconAdd:l.iconAdd,labelHead:e.t("selectorManager.label"),labelInfo:e.t("selectorManager.selected"),ppfx:r,pfx:n,el:d};p.html(this.template(h));var m=g&&g(h);return m&&m!==d&&p.empty().append(m),this.$input=p.find("[data-input]"),this.$addBtn=p.find("[data-add]"),this.$classes=p.find("#"+n+"tags-c"),this.$btnSyncEl=p.find("[data-sync-style]"),this.$input.hide(),this.renderStates(),this.renderClasses(),p.attr("class","".concat(this.className," ").concat(r,"one-bg ").concat(r,"two-color")),this},o}(E.Ss);const Ed=Pd;var On,Ku,kl,Ra,mr,Al=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ea=function(){return ea=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},ea.apply(this,arguments)},jl=function(a,o,t){if(t||arguments.length===2)for(var e,n=0,r=o.length;n<r;n++)!e&&n in o||(e||(e=Array.prototype.slice.call(o,0,n)),e[n]=o[n]);return a.concat(e||Array.prototype.slice.call(o))},Oc=function(a){return(0,C.isString)(a)&&a[0]=="#"},Tc=function(a){return(0,C.isString)(a)&&a[0]=="."},Pc="selector",Fa="".concat(Pc,":"),kd="".concat(Fa,"add"),Ec="".concat(Fa,"update"),kc="".concat(Fa,"remove"),hn="".concat(kc,":before"),Yu="".concat(Fa,"custom"),Xu="".concat(Fa,"state"),Ha={all:Pc,update:Ec,add:kd,remove:kc,removeBefore:hn,state:Xu,custom:Yu},Ad=function(a){function o(t){var e=a.call(this,t,"SelectorManager",new Jo([]),Ha,Bu(),{skipListen:!0})||this;e.Selector=no,e.Selectors=Jo,e.storageKey="",(0,C.bindAll)(e,"__updateSelectedByComponents");var n=e.config,r=n.pStylePrefix;r&&(n.stylePrefix=r+n.stylePrefix),e.all=new Jo(n.selectors),e.selected=new Jo([],{em:t,config:n}),e.states=new E.pM(n.states.map(function(d){return new Pl(d)}),{model:Pl}),e.model=new E.Kx({cFirst:n.componentFirst,_undo:!0}),e.__update=(0,C.debounce)(function(){return e.__trgCustom()},0),e.__initListen({collections:[e.states,e.selected],propagate:[{entity:e.states,event:e.events.state}]}),t.on("change:state",function(d,g){return t.trigger(Xu,g)}),e.model.on("change:cFirst",function(d,g){return t.trigger("selector:type",g)});var l="".concat(jt.I.update,":classes");t.on("component:toggled ".concat(l),e.__updateSelectedByComponents);var p="component:toggled ".concat(l," change:device styleManager:update selector:state selector:type style:target");return e.model.listenTo(t,p,function(){return e.__update()}),e}return Al(o,a),o.prototype.__trgCustom=function(t){this.em.trigger(this.events.custom,this.__customData(t))},o.prototype.getAll=function(t){return t===void 0&&(t={}),this.all?t.array?jl([],this.all.models,!0):this.all:[]},o.prototype.__customData=function(t){return t===void 0&&(t={}),this.__ctn=this.__ctn||t.container,{states:this.getStates(),selected:this.getSelected(),container:this.__ctn}},o.prototype.postRender=function(){this.__appendTo(),this.__trgCustom()},o.prototype.select=function(t,e){e===void 0&&(e={});var n=Array.isArray(t)?t:[t],r=this.em.Styles.select(n,e);this.selected.reset(this.__getCommonSelectors(r));var l=this.selectorTags,p=r.filter(function(d){return d}).map(function(d){return(0,q.isComponent)(d)||(0,q.isRule)(d)&&!d.get("selectorsAdd")?d:d.getSelectorsString()});return l&&l.componentChanged({targets:p}),this},o.prototype.addSelector=function(t,e,n){e===void 0&&(e={}),n===void 0&&(n={});var r=ea({},e);(0,C.isObject)(t)?r=t:r.name=t,Oc(r.name)?(r.name=r.name.substr(1),r.type=no.TYPE_ID):Tc(r.name)&&(r.name=r.name.substr(1)),r.label&&!r.name&&(r.name=this.escapeName(r.label));var l=r.name,p=this.getConfig(),d=this.all,g=this.em,h=l?this.get(l,r.type):d.where(r)[0];if(!h){var m=r instanceof no?r:new no(r,ea(ea({},n),{config:p,em:g}));return d.add(m,n)}return h},o.prototype.getSelector=function(t,e){return e===void 0&&(e=no.TYPE_CLASS),Oc(t)?(t=t.substr(1),e=no.TYPE_ID):Tc(t)&&(t=t.substr(1)),this.all.where({name:t,type:e})[0]},o.prototype.add=function(t,e){var n=this;e===void 0&&(e={});var r=(0,C.isString)(t)?{}:e;return(0,C.isArray)(t)?t.map(function(l){return n.addSelector(l,e,r)}):this.addSelector(t,e,r)},o.prototype.addClass=function(t){var e=this,n=[];return(0,C.isString)(t)&&(t=t.trim().split(" ")),t.forEach(function(r){return n.push(e.addSelector(r))}),n},o.prototype.get=function(t,e){var n=this;if((0,C.isArray)(t)){var r=[];return t.map(function(l){return n.getSelector(l)}).filter(Boolean).forEach(function(l){return r.indexOf(l)<0&&r.push(l)}),r}return this.getSelector(t,e)},o.prototype.remove=function(t,e){return this.__remove(t,e)},o.prototype.rename=function(t,e,n){var r=this.escapeName(e);return this.get(r)||t.set({name:r,label:e},n)},o.prototype.setState=function(t){return this.em.setState(t),this},o.prototype.getState=function(){return this.em.getState()},o.prototype.getStates=function(){return jl([],this.states.models,!0)},o.prototype.setStates=function(t,e){return this.states.reset(t.map(function(n){return new Pl(n)}),e)},o.prototype.getSelected=function(){return this.__getCommon()},o.prototype.getSelectedAll=function(){return jl([],this.selected.models,!0)},o.prototype.addSelected=function(t){var e=this.add(t);this.em.getSelectedAll().forEach(function(n){n.getSelectors().add(e)})},o.prototype.removeSelected=function(t){this.em.getSelectedAll().forEach(function(e){!t.get("protected")&&e&&e.getSelectors().remove(t)})},o.prototype.duplicateSelected=function(t,e){var n=this;e===void 0&&(e={});var r=this.em,l=this.getSelected();if(!(l.indexOf(t)<0)){var p=this.getState(),d=r.getCurrentMedia(),g=r.Css.get(l,p,d),h=g?.getStyle();r.getSelectedAll().forEach(function(m){var w=m.getSelectors();if(w.includes(t)){var k=e.suffix||" copy",z=t.getLabel(),B=n.addSelector("".concat(z).concat(k)),nt=w.indexOf(t);w.remove(t),w.add(B,{at:nt})}}),h&&r.Css.add(this.getSelected(),p,d).setStyle(h)}},o.prototype.getSelectedTargets=function(){return this.em.Styles.getSelectedAll()},o.prototype.setComponentFirst=function(t){this.getConfig().componentFirst=t,this.model.set({cFirst:t})},o.prototype.getComponentFirst=function(){return this.getConfig().componentFirst},o.prototype.escapeName=function(t){var e=this.getConfig().escapeName;return e?e(t):no.escapeName(t)},o.prototype.render=function(t){var e=this.selectorTags,n=this.getConfig(),r=e?.el;return this.selected.reset(t),this.selectorTags=new Ed({el:r,collection:this.selected,module:this,config:n}),this.selectorTags.render().el},o.prototype.destroy=function(){var t=this.selectorTags;this.model.stopListening(),this.__update.cancel(),this.__destroy(),t?.remove(),this.selectorTags=void 0},o.prototype.__getCommon=function(){return this.__getCommonSelectors(this.em.getSelectedAll())},o.prototype.__getCommonSelectors=function(t,e){e===void 0&&(e={});var n=t.map(function(r){return r.getSelectors&&r.getSelectors().getValid(e)}).filter(Boolean);return this.__common.apply(this,n)},o.prototype.__common=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.length?e.length===1?e[0]:e.length===2?e[0].filter(function(r){return e[1].indexOf(r)>=0}):e.slice(1).reduce(function(r,l){return t.__common(r,l)},e[0]):[]},o.prototype.__updateSelectedByComponents=function(){this.selected.reset(this.__getCommon())},o}(Tt);const Ml=Ad,jd=function(){return{textTags:["br","b","i","u","a","ul","ol"],textTypes:["text","textnode","comment"],parserCss:void 0,parserHtml:void 0,optionsHtml:{htmlType:"text/html",allowScripts:!1,allowUnsafeAttr:!1,allowUnsafeAttrValue:!1,keepEmptyTextNodes:!1,convertDataGjsAttributesHyphens:!1}}};var pn,Ju=5,Zu=6,Md=7,As=11,i=12,s=13,u=14,c=15,f=((pn={})[4]="media",pn[Ju]="font-face",pn[Zu]="page",pn[Md]="keyframes",pn[As]="counter-style",pn[i]="supports",pn[s]="document",pn[u]="font-feature-values",pn[c]="viewport",pn),v=(0,C.keys)(f),y=[Ju,Zu,As,c],b=v.filter(function(a){return y.indexOf(Number(a))<0}).map(function(a){return f[a]}).concat(["container","layer"]),P=y.map(function(a){return f[a]}),j=function(a){a===void 0&&(a="");for(var o=[],t=[],e=a.split(","),n=0,r=e.length;n<r;n++){var l=e[n].trim();if(/^(\.{1}[\w\-]+)+(:{1,2}[\w\-()]+)?$/gi.test(l)||/^(#{1}[\w\-]+){1}(:{1,2}[\w\-()]+)?$/gi.test(l)){var p=l.split(".").filter(Boolean);t.push(p)}else o.push(l)}return{result:t,add:o}},Q=function(a){for(var o=a.style,t={},e=0,n=o.length;e<n;e++){var r=o[e],l=o.getPropertyValue(r),p=o.getPropertyPriority(r);t[r]="".concat(l).concat(p?" !".concat(p):"")}return t},Z=function(a){return(a.conditionText||a.media&&a.media.mediaText||a.name||a.selectorText||"").trim()},mt=function(a,o,t){o===void 0&&(o={}),t===void 0&&(t={});var e={},n=a.length,r=a[n-1],l=r?r.split(/:(.+)/):[],p=l[1],d=t.atRule,g=t.selectorsAdd,h=t.mediaText;return P.indexOf(d)>=0&&(e.singleAtRule=!0),d&&(e.atRuleType=d),g&&(e.selectorsAdd=g),h&&(e.mediaText=h),p&&(a[n-1]=l[0],e.state=p,l.splice(l.length-1,1)),e.selectors=a,e.style=o,e},yt=function(a){var o=a.cssText,t=o===void 0?"":o;return b.find(function(e){return t.indexOf("@".concat(e))===0})},Dt=function(a){for(var o=[],t=a.cssRules||[],e=0,n=t.length;e<n;e++){var r=t[e],l=r.type,p=!1,d="",g="",h=r.selectorText||r.keyText||"",m=y.indexOf(l)>=0;if(m)p=!0,d=f[l],g=Z(r);else if(v.indexOf("".concat(l))>=0||!l&&yt(r)){var w=Dt(r),k=f[l]||yt(r);g=Z(r);for(var z=0,B=w.length;z<B;z++){var nt=w[z];g&&(nt.mediaText=g),nt.atRuleType=k}o=o.concat(w)}if(h||m){for(var X=Q(r),At=j(h),It=At.add,Wt=At.result,oe=void 0,ve=0,we=Wt.length;ve<we;ve++){var Ve=mt(Wt[ve],X,{atRule:f[l]});o.push(Ve),oe=Ve}if(It.length){var Ze=It.join(", ");oe?oe.selectorsAdd=Ze:(Ve={selectors:[],selectorsAdd:Ze,style:X},p&&(Ve.singleAtRule=p),d&&(Ve.atRuleType=d),g&&(Ve.mediaText=g),o.push(Ve))}}}return o};const $t=function(a,o){return o===void 0&&(o={}),{parse:function(t,e){var n=this;e===void 0&&(e={});var r,l=[],p=o.parserCss,d=a?.Editor,g=[],h=a?.Parser,m={input:t};h?.__emitEvent(Ie.cssBefore,m);var w=m.input;try{g=p?p(w,d):function(k){var z=document.createElement("style");z.innerHTML=k,document.head.appendChild(z);var B=z.sheet;return document.head.removeChild(z),B?Dt(B):[]}(w)}catch(k){if(r=k,e.throwOnError)throw k}return g.forEach(function(k){return l=l.concat(n.checkNode(k))}),h?.__emitEvent(Ie.css,{input:w,output:l,nodes:g,error:r}),l},checkNode:function(t){var e=t.selectors,n=t.style,r=[t];if((0,C.isString)(e)){var l=[],p=t,d=j(e),g=d.result,h=d.add.join(", "),m={atRule:p.atRule,mediaText:p.params};g.length?g.forEach(function(w){l.push(mt(w,n,m))}):l.push(mt([],n,m)),h&&(l[l.length-1].selectorsAdd=h),r=l}return r}}};var re=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ye=function(){return ye=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},ye.apply(this,arguments)},Ce=function(a){function o(t){var e=a.call(this,t,"Parser",jd())||this;e.events=Ie;var n=e.config;return e.parserCss=$t(t,n),e.parserHtml=en(t,n),e}return re(o,a),o.prototype.parseHtml=function(t,e){e===void 0&&(e={});var n=this.em,r=this.parserHtml;return r.compTypes=n.Components.getTypes()||[],r.parse(t,this.parserCss,e)},o.prototype.parseCss=function(t){return this.parserCss.parse(t)},o.prototype.__emitEvent=function(t,e){var n=this.em,r=this.events;n.trigger(t,e),n.trigger(r.all,ye({event:t},e))},o.prototype.destroy=function(){},o}(ct);const fe=Ce,Te=function(){return{id:"gjs-",type:"local",autosave:!0,autoload:!0,stepsBeforeSave:1,recovery:!1,onStore:function(a){return a},onLoad:function(a){return a},options:{local:{key:"gjsProject",checkLocal:!0},remote:{headers:{},urlStore:"",urlLoad:"",contentTypeJson:!0,fetchOptions:"",credentials:"include",onStore:function(a){return a},onLoad:function(a){return a}}}}};var Se=function(a,o,t,e){return new(t||(t=Promise))(function(n,r){function l(g){try{d(e.next(g))}catch(h){r(h)}}function p(g){try{d(e.throw(g))}catch(h){r(h)}}function d(g){var h;g.done?n(g.value):(h=g.value,h instanceof t?h:new t(function(m){m(h)})).then(l,p)}d((e=e.apply(a,o||[])).next())})},Pe=function(a,o){var t,e,n,r,l={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function p(d){return function(g){return function(h){if(t)throw new TypeError("Generator is already executing.");for(;r&&(r=0,h[0]&&(l=0)),l;)try{if(t=1,e&&(n=2&h[0]?e.return:h[0]?e.throw||((n=e.return)&&n.call(e),0):e.next)&&!(n=n.call(e,h[1])).done)return n;switch(e=0,n&&(h=[2&h[0],n.value]),h[0]){case 0:case 1:n=h;break;case 4:return l.label++,{value:h[1],done:!1};case 5:l.label++,e=h[1],h=[0];continue;case 7:h=l.ops.pop(),l.trys.pop();continue;default:if(n=l.trys,!((n=n.length>0&&n[n.length-1])||h[0]!==6&&h[0]!==2)){l=0;continue}if(h[0]===3&&(!n||h[1]>n[0]&&h[1]<n[3])){l.label=h[1];break}if(h[0]===6&&l.label<n[1]){l.label=n[1],n=h;break}if(n&&l.label<n[2]){l.label=n[2],l.ops.push(h);break}n[2]&&l.ops.pop(),l.trys.pop();continue}h=o.call(a,l)}catch(m){h=[6,m],e=0}finally{t=n=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([d,g])}}};const yn=function(){function a(){}return a.prototype.store=function(o){return Se(this,arguments,void 0,function(t,e){return e===void 0&&(e={}),Pe(this,function(n){return this.hasLocal(e,!0)&&localStorage.setItem(e.key,JSON.stringify(t)),[2,t]})})},a.prototype.load=function(){return Se(this,arguments,void 0,function(o){var t;return o===void 0&&(o={}),Pe(this,function(e){return t={},this.hasLocal(o,!0)&&(t=JSON.parse(localStorage.getItem(o.key)||"{}")),[2,t]})})},a.prototype.hasLocal=function(o,t){if(o===void 0&&(o={}),o.checkLocal&&(!(0,q.hasWin)()||!localStorage)){if(t)throw new Error("localStorage not available");return!1}return!0},a}();function rn(a){return rn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},rn(a)}const Wo=function(a){var o=this.constructor;return this.then(function(t){return o.resolve(a()).then(function(){return t})},function(t){return o.resolve(a()).then(function(){return o.reject(t)})})},Tn=function(a){return new this(function(o,t){if(!a||a.length===void 0)return t(new TypeError(rn(a)+" "+a+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var e=Array.prototype.slice.call(a);if(e.length===0)return o([]);var n=e.length;function r(p,d){if(d&&(rn(d)==="object"||typeof d=="function")){var g=d.then;if(typeof g=="function")return void g.call(d,function(h){r(p,h)},function(h){e[p]={status:"rejected",reason:h},--n==0&&o(e)})}e[p]={status:"fulfilled",value:d},--n==0&&o(e)}for(var l=0;l<e.length;l++)r(l,e[l])})};function or(a,o){this.name="AggregateError",this.errors=a,this.message=o||""}or.prototype=Error.prototype;const $o=function(a){var o=this;return new o(function(t,e){if(!a||a.length===void 0)return e(new TypeError("Promise.any accepts an array"));var n=Array.prototype.slice.call(a);if(n.length===0)return e();for(var r=[],l=0;l<n.length;l++)try{o.resolve(n[l]).then(t).catch(function(p){r.push(p),r.length===n.length&&e(new or(r,"All promises were rejected"))})}catch(p){e(p)}})};var Ln=setTimeout;function Eo(a){return!!(a&&a.length!==void 0)}function ko(){}function Ge(a){if(!(this instanceof Ge))throw new TypeError("Promises must be constructed via new");if(typeof a!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],fo(a,this)}function In(a,o){for(;a._state===3;)a=a._value;a._state!==0?(a._handled=!0,Ge._immediateFn(function(){var t=a._state===1?o.onFulfilled:o.onRejected;if(t!==null){var e;try{e=t(a._value)}catch(n){return void so(o.promise,n)}Nn(o.promise,e)}else(a._state===1?Nn:so)(o.promise,a._value)})):a._deferreds.push(o)}function Nn(a,o){try{if(o===a)throw new TypeError("A promise cannot be resolved with itself.");if(o&&(rn(o)==="object"||typeof o=="function")){var t=o.then;if(o instanceof Ge)return a._state=3,a._value=o,void Gr(a);if(typeof t=="function")return void fo((e=t,n=o,function(){e.apply(n,arguments)}),a)}a._state=1,a._value=o,Gr(a)}catch(r){so(a,r)}var e,n}function so(a,o){a._state=2,a._value=o,Gr(a)}function Gr(a){a._state===2&&a._deferreds.length===0&&Ge._immediateFn(function(){a._handled||Ge._unhandledRejectionFn(a._value)});for(var o=0,t=a._deferreds.length;o<t;o++)In(a,a._deferreds[o]);a._deferreds=null}function Mr(a,o,t){this.onFulfilled=typeof a=="function"?a:null,this.onRejected=typeof o=="function"?o:null,this.promise=t}function fo(a,o){var t=!1;try{a(function(e){t||(t=!0,Nn(o,e))},function(e){t||(t=!0,so(o,e))})}catch(e){if(t)return;t=!0,so(o,e)}}Ge.prototype.catch=function(a){return this.then(null,a)},Ge.prototype.then=function(a,o){var t=new this.constructor(ko);return In(this,new Mr(a,o,t)),t},Ge.prototype.finally=Wo,Ge.all=function(a){return new Ge(function(o,t){if(!Eo(a))return t(new TypeError("Promise.all accepts an array"));var e=Array.prototype.slice.call(a);if(e.length===0)return o([]);var n=e.length;function r(p,d){try{if(d&&(rn(d)==="object"||typeof d=="function")){var g=d.then;if(typeof g=="function")return void g.call(d,function(h){r(p,h)},t)}e[p]=d,--n==0&&o(e)}catch(h){t(h)}}for(var l=0;l<e.length;l++)r(l,e[l])})},Ge.any=$o,Ge.allSettled=Tn,Ge.resolve=function(a){return a&&rn(a)==="object"&&a.constructor===Ge?a:new Ge(function(o){o(a)})},Ge.reject=function(a){return new Ge(function(o,t){t(a)})},Ge.race=function(a){return new Ge(function(o,t){if(!Eo(a))return t(new TypeError("Promise.race accepts an array"));for(var e=0,n=a.length;e<n;e++)Ge.resolve(a[e]).then(o,t)})},Ge._immediateFn=typeof setImmediate=="function"&&function(a){setImmediate(a)}||function(a){Ln(a,0)},Ge._unhandledRejectionFn=function(a){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",a)};const Vn=Ge;(0,q.hasWin)()&&(window.Promise=window.Promise||Vn);const Dl=typeof fetch=="function"?fetch.bind():function(a,o){return new Vn(function(t,e){var n=new XMLHttpRequest;for(var r in n.open(o.method||"get",a),n.withCredentials=o.credentials=="include",o.headers||{})n.setRequestHeader(r,o.headers[r]);n.onload=function(l){return t({status:n.status,statusText:n.statusText,text:function(){return Vn.resolve(n.responseText)}})},n.onerror=e,n.upload&&o.onProgress&&(n.upload.onprogress=o.onProgress),o.body?n.send(o.body):n.send()})};var yr=function(){return yr=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},yr.apply(this,arguments)},ki=function(a,o,t,e){return new(t||(t=Promise))(function(n,r){function l(g){try{d(e.next(g))}catch(h){r(h)}}function p(g){try{d(e.throw(g))}catch(h){r(h)}}function d(g){var h;g.done?n(g.value):(h=g.value,h instanceof t?h:new t(function(m){m(h)})).then(l,p)}d((e=e.apply(a,o||[])).next())})},Ai=function(a,o){var t,e,n,r,l={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function p(d){return function(g){return function(h){if(t)throw new TypeError("Generator is already executing.");for(;r&&(r=0,h[0]&&(l=0)),l;)try{if(t=1,e&&(n=2&h[0]?e.return:h[0]?e.throw||((n=e.return)&&n.call(e),0):e.next)&&!(n=n.call(e,h[1])).done)return n;switch(e=0,n&&(h=[2&h[0],n.value]),h[0]){case 0:case 1:n=h;break;case 4:return l.label++,{value:h[1],done:!1};case 5:l.label++,e=h[1],h=[0];continue;case 7:h=l.ops.pop(),l.trys.pop();continue;default:if(n=l.trys,!((n=n.length>0&&n[n.length-1])||h[0]!==6&&h[0]!==2)){l=0;continue}if(h[0]===3&&(!n||h[1]>n[0]&&h[1]<n[3])){l.label=h[1];break}if(h[0]===6&&l.label<n[1]){l.label=n[1],n=h;break}if(n&&l.label<n[2]){l.label=n[2],l.ops.push(h);break}n[2]&&l.ops.pop(),l.trys.pop();continue}h=o.call(a,l)}catch(m){h=[6,m],e=0}finally{t=n=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([d,g])}}},Ao=function(){function a(){}return a.prototype.store=function(o){return ki(this,arguments,void 0,function(t,e){return e===void 0&&(e={}),Ai(this,function(n){switch(n.label){case 0:return[4,this.request(e.urlStore,this.__props(e,t),e)];case 1:return[2,n.sent()]}})})},a.prototype.load=function(){return ki(this,arguments,void 0,function(o){return o===void 0&&(o={}),Ai(this,function(t){switch(t.label){case 0:return[4,this.request(o.urlLoad,this.__props(o),o)];case 1:return[2,t.sent()]}})})},a.prototype.request=function(o,t,e){return t===void 0&&(t={}),e===void 0&&(e={}),Dl(o,t).then(function(n){var r=n.text();return(n.status/200|0)==1?r:r.then(Promise.reject)}).then(function(n){var r=n&&(0,C.isString)(n);return e.contentTypeJson&&r?JSON.parse(n):n})},a.prototype.__props=function(o,t){o===void 0&&(o={});var e,n=o.contentTypeJson,r=o.headers||{},l=o.fetchOptions||{},p="X-Requested-With",d="Content-Type";if((0,C.isUndefined)(r[p])&&(r[p]="XMLHttpRequest"),(0,C.isUndefined)(r[d])&&n&&(r[d]="application/json; charset=utf-8"),t)if(n)e=JSON.stringify(t);else for(var g in e=new FormData,t)e.append(g,t[g]);var h={method:e?"POST":"GET",credentials:o.credentials,headers:r,body:e};return yr(yr({},h),(0,C.isFunction)(l)?l(h):l)},a}();const Ua=Ao;var js;(function(a){a.start="storage:start",a.startStore="storage:start:store",a.startLoad="storage:start:load",a.load="storage:load",a.store="storage:store",a.after="storage:after",a.afterStore="storage:after:store",a.afterLoad="storage:after:load",a.end="storage:end",a.endStore="storage:end:store",a.endLoad="storage:end:load",a.error="storage:error",a.errorStore="storage:error:store",a.errorLoad="storage:error:load"})(js||(js={}));const rr=js;var Og=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ll=function(){return Ll=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},Ll.apply(this,arguments)},Dd=function(a,o,t,e){return new(t||(t=Promise))(function(n,r){function l(g){try{d(e.next(g))}catch(h){r(h)}}function p(g){try{d(e.throw(g))}catch(h){r(h)}}function d(g){var h;g.done?n(g.value):(h=g.value,h instanceof t?h:new t(function(m){m(h)})).then(l,p)}d((e=e.apply(a,o||[])).next())})},Ld=function(a,o){var t,e,n,r,l={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function p(d){return function(g){return function(h){if(t)throw new TypeError("Generator is already executing.");for(;r&&(r=0,h[0]&&(l=0)),l;)try{if(t=1,e&&(n=2&h[0]?e.return:h[0]?e.throw||((n=e.return)&&n.call(e),0):e.next)&&!(n=n.call(e,h[1])).done)return n;switch(e=0,n&&(h=[2&h[0],n.value]),h[0]){case 0:case 1:n=h;break;case 4:return l.label++,{value:h[1],done:!1};case 5:l.label++,e=h[1],h=[0];continue;case 7:h=l.ops.pop(),l.trys.pop();continue;default:if(n=l.trys,!((n=n.length>0&&n[n.length-1])||h[0]!==6&&h[0]!==2)){l=0;continue}if(h[0]===3&&(!n||h[1]>n[0]&&h[1]<n[3])){l.label=h[1];break}if(h[0]===6&&l.label<n[1]){l.label=n[1],n=h;break}if(n&&l.label<n[2]){l.label=n[2],l.ops.push(h);break}n[2]&&l.ops.pop(),l.trys.pop();continue}h=o.call(a,l)}catch(m){h=[6,m],e=0}finally{t=n=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([d,g])}}},Qu="local",If="remote",Tg=function(a){function o(t){var e=a.call(this,t,"StorageManager",Te())||this;e.storages={},e.events=rr;var n=e.config;return n._disable&&(n.type=void 0),e.storages={},e.add(Qu,new yn),e.add(If,new Ua),e.setCurrent(n.type),e}return Og(o,a),o.prototype.isAutosave=function(){return!!this.config.autosave},o.prototype.setAutosave=function(t){return this.config.autosave=!!t,this},o.prototype.getStepsBeforeSave=function(){return this.config.stepsBeforeSave},o.prototype.setStepsBeforeSave=function(t){return this.config.stepsBeforeSave=t,this},o.prototype.add=function(t,e){return this.storages[t]=e,this},o.prototype.get=function(t){return this.storages[t]},o.prototype.getStorages=function(){return this.storages},o.prototype.getCurrent=function(){return this.config.currentStorage},o.prototype.setCurrent=function(t){return this.getConfig().currentStorage=t,this},o.prototype.getCurrentStorage=function(){return this.get(this.getCurrent())},o.prototype.getStorageOptions=function(t){return this.getCurrentOptions(t)},o.prototype.store=function(t){return Dd(this,arguments,void 0,function(e,n){var r,l,p,d,g;return n===void 0&&(n={}),Ld(this,function(h){switch(h.label){case 0:r=this.getCurrentStorage(),l=Ll(Ll({},this.getCurrentOptions()),n),p=this.getRecoveryStorage(),d=this.getCurrentOptions(Qu),h.label=1;case 1:return h.trys.push([1,5,,9]),[4,this.__exec(r,l,e)];case 2:return h.sent(),p?[4,this.__exec(p,d,{})]:[3,4];case 3:h.sent(),h.label=4;case 4:return[3,9];case 5:return g=h.sent(),p?[4,this.__exec(p,d,e)]:[3,7];case 6:return h.sent(),[3,8];case 7:throw g;case 8:return[3,9];case 9:return[2,e]}})})},o.prototype.load=function(){return Dd(this,arguments,void 0,function(t){var e,n,r,l,p;return t===void 0&&(t={}),Ld(this,function(d){switch(d.label){case 0:return e=this.getCurrentStorage(),n=Ll(Ll({},this.getCurrentOptions()),t),(r=this.getRecoveryStorage())?[4,this.__exec(r,this.getCurrentOptions(Qu))]:[3,5];case 1:if(p=d.sent(),(0,C.isEmpty)(p))return[3,5];d.label=2;case 2:return d.trys.push([2,4,,5]),[4,this.__askRecovery()];case 3:return d.sent(),l=p,[3,5];case 4:return d.sent(),[3,5];case 5:return l?[3,7]:[4,this.__exec(e,n)];case 6:l=d.sent(),d.label=7;case 7:return[2,l||{}]}})})},o.prototype.__askRecovery=function(){var t=this.em,e=this.getRecovery();return new Promise(function(n,r){(0,C.isFunction)(e)?e(n,r,t?.getEditor()):confirm(t?.t("storageManager.recover"))?n(null):r()})},o.prototype.getRecovery=function(){return this.config.recovery},o.prototype.getRecoveryStorage=function(){return this.getRecovery()&&this.getCurrent()===If&&this.get(Qu)},o.prototype.__exec=function(t,e,n){return Dd(this,void 0,void 0,function(){var r,l,p,d,g,h,m,w,k,z,B,nt,X,At;return Ld(this,function(It){switch(It.label){case 0:if(r=n?"store":"load",l=this.getConfig(),p=l.onStore,d=l.onLoad,!t)return[2,n||{}];this.onStart(r,n),It.label=1;case 1:return It.trys.push([1,14,,15]),h=(At=this.em)===null||At===void 0?void 0:At.getEditor(),m=void 0,n?(k=p)?[4,p(n,h)]:[3,3]:[3,7];case 2:k=It.sent(),It.label=3;case 3:return w=k||n,(z=e.onStore)?[4,e.onStore(w,h)]:[3,5];case 4:z=It.sent(),It.label=5;case 5:return w=z||w,[4,t.store(w,e)];case 6:return m=It.sent(),g=n,[3,13];case 7:return[4,t.load(e)];case 8:return m=It.sent(),g=this.__clearKeys(m),(B=e.onLoad)?[4,e.onLoad(g,h)]:[3,10];case 9:B=It.sent(),It.label=10;case 10:return g=B||g,(nt=d)?[4,d(g,h)]:[3,12];case 11:nt=It.sent(),It.label=12;case 12:g=nt||g,It.label=13;case 13:return this.onAfter(r,g,m),this.onEnd(r,g,m),[3,15];case 14:throw X=It.sent(),this.onError(r,X),X;case 15:return[2,g]}})})},o.prototype.__clearKeys=function(t){t===void 0&&(t={});var e=this.getConfig(),n=new RegExp("^".concat(e.id)),r={};for(var l in t)r[l.replace(n,"")]=t[l];return r},o.prototype.getCurrentOptions=function(t){var e=this.getConfig(),n=t||this.getCurrent();return e.options[n]||{}},o.prototype.onStart=function(t,e){var n=this.em;if(n){var r=t==="load"?rr.startLoad:rr.startStore;n.trigger(rr.start,t,e),n.trigger(r,e)}},o.prototype.onAfter=function(t,e,n){var r=this.em;if(r){var l=t==="load"?rr.afterLoad:rr.afterStore;r.trigger(rr.after),r.trigger(l,e,n);var p=t==="load"?rr.load:rr.store;r.trigger(p,e,n)}},o.prototype.onEnd=function(t,e,n){var r=this.em;if(r){var l=t==="load"?rr.endLoad:rr.endStore;r.trigger(rr.end,t,e,n),r.trigger(l,e,n)}},o.prototype.onError=function(t,e){var n=this.em;if(n){var r=t==="load"?rr.errorLoad:rr.errorStore;n.trigger(rr.error,e,t),n.trigger(r,e),this.onEnd(t,e)}},o.prototype.canAutoload=function(){return!!this.getCurrentStorage()&&!!this.config.autoload},o.prototype.destroy=function(){this.storages={}},o}(ct);const Pg=Tg,Eg=function(){return{stylePrefix:"trt-",appendTo:"",optionsTarget:[{value:!1},{value:"_blank"}],custom:!1}};var kg=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ac=function(){return Ac=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},Ac.apply(this,arguments)},Nf=function(a){function o(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.events={},e.appendInput=!0;var n=t.config,r=n===void 0?{}:n,l=e,p=l.model,d=l.eventCapture,g=p.target,h=p.attributes.type;return e.config=r,e.em=r.em,e.pfx=r.stylePrefix||"",e.ppfx=r.pStylePrefix||"",e.target=g,e.className=e.pfx+"trait",e.clsField="".concat(e.ppfx,"field ").concat(e.ppfx,"field-").concat(h),[["change:value",e.onValueChange],["remove",e.removeView]].forEach(function(m){var w=m[0],k=m[1];p.off(w,k),e.listenTo(p,w,k)}),p.view=e,e.listenTo(p,"change:label",e.render),e.listenTo(p,"change:placeholder",e.rerender),e.events={},d.forEach(function(m){return e.events[m]="onChange"}),e.delegateEvents(),e.init(),e}return kg(o,a),o.prototype.attributes=function(){return this.model.get("attributes")||{}},o.prototype.templateLabel=function(t){var e=this.ppfx,n=this.getLabel();return'<div class="'.concat(e,'label" title="').concat(n,'">').concat(n,"</div>")},o.prototype.templateInput=function(t){var e=this.clsField;return'<div class="'.concat(e,'" data-input></div>')},o.prototype.getClbOpts=function(){return{component:this.target,trait:this.model,elInput:this.getInputElem()}},o.prototype.removeView=function(){this.remove(),this.removed()},o.prototype.init=function(){},o.prototype.removed=function(){},o.prototype.onRender=function(t){},o.prototype.onUpdate=function(t){},o.prototype.onEvent=function(t){},o.prototype.onChange=function(t){var e=this.getInputElem();e&&!(0,C.isUndefined)(e.value)&&this.model.set("value",e.value),this.onEvent(Ac(Ac({},this.getClbOpts()),{event:t}))},o.prototype.getValueForTarget=function(){return this.model.get("value")},o.prototype.setInputValue=function(t){var e=this.getInputElem();e&&(e.value=t)},o.prototype.onValueChange=function(t,e,n){n===void 0&&(n={});var r=this.model,l=this.getValueForTarget();n.fromTarget?(this.setInputValue(l),this.postUpdate()):r.setValue(l,n)},o.prototype.renderLabel=function(){var t=this.$el,e=this.target,n=this.getLabel(),r=this.templateLabel(e);this.createLabel&&(r=this.createLabel({label:n,component:e,trait:this})||""),t.find("[data-label]").append(r)},o.prototype.getLabel=function(){var t=this.em,e=this.model.attributes,n=e.label,r=e.name;return t.t("traitManager.traits.labels.".concat(r))||(0,q.capitalize)(n||r).replace(/-/g," ")},o.prototype.getComponent=function(){return this.target},o.prototype.getInputEl=function(){if(!this.$input){var t=this.em,e=this.model,n=e,r=e.attributes.name,l=n.get("placeholder")||n.get("default")||"",p=n.get("type")||"text",d=n.get("min"),g=n.get("max"),h=this.getModelValue(),m=(0,F.default)('<input type="'.concat(p,'">')),w=t.t("traitManager.traits.attributes.".concat(r))||{};m.attr(Ac({placeholder:l},w)),(0,C.isUndefined)(h)||(n.set({value:h},{silent:!0}),m.prop("value",h)),d&&m.prop("min",d),g&&m.prop("max",g),this.$input=m}return this.$input.get(0)},o.prototype.getInputElem=function(){var t=this.input,e=this.$input;return t||e&&e.get&&e.get(0)||this.getElInput()},o.prototype.getModelValue=function(){return this.model.getValue()},o.prototype.getElInput=function(){return this.elInput},o.prototype.renderField=function(){var t=this,e=t.$el,n=t.appendInput,r=t.model,l=e.find("[data-input]"),p=l[l.length-1],d=r.el;d||(d=this.createInput?this.createInput(this.getClbOpts()):this.getInputEl()),(0,C.isString)(d)?(p.innerHTML=d,this.elInput=p.firstChild):(n?p.appendChild(d):p.insertBefore(d,p.firstChild),this.elInput=d),r.el=this.elInput},o.prototype.hasLabel=function(){var t=this.model.attributes.label;return!this.noLabel&&t!==!1},o.prototype.rerender=function(){delete this.model.el,this.render()},o.prototype.postUpdate=function(){this.onUpdate(this.getClbOpts())},o.prototype.render=function(){var t=this,e=t.$el,n=t.pfx,r=t.ppfx,l=t.model.attributes,p=l.type,d=l.id,g=this.hasLabel&&this.hasLabel(),h="".concat(n,"trait");delete this.$input;var m='<div class="'.concat(h," ").concat(h,"--").concat(p,`">
      `).concat(g?'<div class="'.concat(r,'label-wrp" data-label></div>'):"",`
      <div class="`).concat(r,"field-wrp ").concat(r,"field-wrp--").concat(p,`" data-input>
        `).concat(this.templateInput?(0,C.isFunction)(this.templateInput)?this.templateInput(this.getClbOpts()):this.templateInput:"",`
      </div>
    </div>`);return e.empty().append(m),g&&this.renderLabel(),this.renderField(),this.el.className="".concat(h,"__wrp ").concat(h,"__wrp-").concat(d),this.postUpdate(),this.onRender(this.getClbOpts()),this},o}(E.Ss);const na=Nf;Nf.prototype.eventCapture=["change"];var Ag=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Vf=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return Ag(o,a),o.prototype.templateInput=function(){return""},o.prototype.onChange=function(){this.handleClick()},o.prototype.handleClick=function(){this.model.runCommand()},o.prototype.renderLabel=function(){this.model.get("label")&&na.prototype.renderLabel.apply(this)},o.prototype.getInputEl=function(){var t=this.model,e=this.ppfx,n=t.props(),r=n.labelButton,l=n.text,p=n.full,d=r||l,g="".concat(e,"btn");return'<button type="button" class="'.concat(g,"-prim").concat(p?" ".concat(g,"--full"):"",'">').concat(d,"</button>")},o}(na);const jg=Vf;Vf.prototype.eventCapture=["click button"];var Mg=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Dg=function(a){function o(){var t=a!==null&&a.apply(this,arguments)||this;return t.appendInput=!1,t}return Mg(o,a),o.prototype.templateInput=function(){var t=this.ppfx,e=this.clsField;return'<label class="'.concat(e,`" data-input>
    <i class="`).concat(t,`chk-icon"></i>
  </label>`)},o.prototype.onChange=function(){this.model.set("value",this.getInputElem().checked)},o.prototype.setInputValue=function(t){var e=this.getInputElem();e&&(e.checked=!!t)},o.prototype.getInputEl=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=!this.$input,r=na.prototype.getInputEl.apply(this,t);if(n){var l=void 0,p=void 0,d=this.model,g=this.target,h=d.attributes.valueFalse,m=d.getName();d.changeProp?p=l=g.get(m):l=!(!(p=g.get("attributes")[m])&&p!==""),(0,C.isUndefined)(h)||p!==h||(l=!1),r.checked=l}return r},o}(na);var Lg=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Rf=function(a){function o(t){t===void 0&&(t={});var e=a.call(this,t)||this,n=t.ppfx||"";return e.opts=t,e.ppfx=n,e.em=t.target||{},!t.onChange&&e.listenTo(e.model,"change:value",e.handleModelChange),e}return Lg(o,a),o.prototype.template=function(){return'<span class="'.concat(this.holderClass(),'"></span>')},o.prototype.inputClass=function(){return"".concat(this.ppfx,"field")},o.prototype.holderClass=function(){return"".concat(this.ppfx,"input-holder")},o.prototype.elementUpdated=function(){this.model.trigger("el:change")},o.prototype.setValue=function(t,e){var n=this.model,r=t||n.get("defaults"),l=this.getInputEl();l&&(l.value=r)},o.prototype.handleModelChange=function(t,e,n){this.setValue(e,n)},o.prototype.handleChange=function(t){t.stopPropagation();var e=this.getInputEl().value;this.__onInputChange(e),this.elementUpdated()},o.prototype.__onInputChange=function(t){this.model.set({value:t},{fromInput:1})},o.prototype.getInputEl=function(){if(!this.inputEl){var t=this.model,e=this.opts.type||"text",n=t.get("placeholder")||t.get("defaults")||t.get("default")||"";this.inputEl=(0,F.default)('<input type="'.concat(e,'" placeholder="').concat(n,'">'))}return this.inputEl.get(0)},o.prototype.render=function(){this.inputEl=null;var t=this.$el;return t.addClass(this.inputClass()),t.html(this.template()),t.find(".".concat(this.holderClass())).append(this.getInputEl()),this},o}(E.Ss);const tp=Rf;Rf.prototype.events={change:"handleChange"};var Ig=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),jc=function(){return jc=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},jc.apply(this,arguments)};F.default&&function(a,o){if((0,q.hasWin)()){var t={beforeShow:Xe,move:Xe,change:Xe,show:Xe,hide:Xe,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null},e=[],n=!!/msie/i.exec(window.navigator.userAgent),r=function(){function ut(Rt,Gt){return!!~(""+Rt).indexOf(Gt)}var Lt=document.createElement("div").style;return Lt.cssText="background-color:rgba(0,0,0,.5)",ut(Lt.backgroundColor,"rgba")||ut(Lt.backgroundColor,"hsla")}(),l=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),p=function(){var ut="";if(n)for(var Lt=1;Lt<=6;Lt++)ut+="<div class='sp-"+Lt+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",ut,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}(),d="spectrum.id";a.fn.spectrum=function(ut,Lt){if(typeof ut=="string"){var Rt=this,Gt=Array.prototype.slice.call(arguments,1);return this.each(function(){var xe=e[a(this).data(d)];if(xe){var Ae=xe[ut];if(!Ae)throw new Error("Spectrum: no such method: '"+ut+"'");ut=="get"?Rt=xe.get():ut=="container"?Rt=xe.container:ut=="option"?Rt=xe.option.apply(xe,Gt):ut=="destroy"?(xe.destroy(),a(this).removeData(d)):Ae.apply(xe,Gt)}}),Rt}return this.spectrum("destroy").each(function(){var xe=Ze(this,a.extend({},ut,a(this).data()));a(this).data(d,xe.id)})},a.fn.spectrum.load=!0,a.fn.spectrum.loadOpts={},a.fn.spectrum.draggable=xo,a.fn.spectrum.defaults=t,a.fn.spectrum.inputTypeColorSupport=function ut(){if(ut._cachedResult===void 0){var Lt=a("<input type='color'/>")[0];ut._cachedResult=Lt.type==="color"&&Lt.value!==""}return ut._cachedResult},a.spectrum={},a.spectrum.localization={},a.spectrum.palettes={},a.fn.spectrum.processNativeColorInputs=function(){var ut=a("input[type=color]");ut.length&&!Ir()&&ut.spectrum({preferredFormat:"hex6"})};var g=/^[\s,#]+/,h=/\s+$/,m=0,w=Math,k=w.round,z=w.min,B=w.max,nt=w.random,X=function(ut,Lt){if(Lt=Lt||{},(ut=ut||"")instanceof X)return ut;if(!(this instanceof X))return new X(ut,Lt);var Rt=function(Gt){var xe={r:0,g:0,b:0},Ae=1,ie=!1,Qe=!1;typeof Gt=="string"&&(Gt=function(an){an=an.replace(g,"").replace(h,"").toLowerCase();var Ee,sn=!1;if(oe[an])an=oe[an],sn=!0;else if(an=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(Ee=we.rgb.exec(an))?{r:Ee[1],g:Ee[2],b:Ee[3]}:(Ee=we.rgba.exec(an))?{r:Ee[1],g:Ee[2],b:Ee[3],a:Ee[4]}:(Ee=we.hsl.exec(an))?{h:Ee[1],s:Ee[2],l:Ee[3]}:(Ee=we.hsla.exec(an))?{h:Ee[1],s:Ee[2],l:Ee[3],a:Ee[4]}:(Ee=we.hsv.exec(an))?{h:Ee[1],s:Ee[2],v:Ee[3]}:(Ee=we.hsva.exec(an))?{h:Ee[1],s:Ee[2],v:Ee[3],a:Ee[4]}:(Ee=we.hex8.exec(an))?{a:Kb(Ee[1]),r:Di(Ee[2]),g:Di(Ee[3]),b:Di(Ee[4]),format:sn?"name":"hex8"}:(Ee=we.hex6.exec(an))?{r:Di(Ee[1]),g:Di(Ee[2]),b:Di(Ee[3]),format:sn?"name":"hex"}:(Ee=we.hex3.exec(an))?{r:Di(Ee[1]+""+Ee[1]),g:Di(Ee[2]+""+Ee[2]),b:Di(Ee[3]+""+Ee[3]),format:sn?"name":"hex"}:!1}(Gt)),typeof Gt=="object"&&(Gt.hasOwnProperty("r")&&Gt.hasOwnProperty("g")&&Gt.hasOwnProperty("b")?(bn=Gt.r,Ro=Gt.g,qo=Gt.b,xe={r:255*zn(bn,255),g:255*zn(Ro,255),b:255*zn(qo,255)},ie=!0,Qe=String(Gt.r).substr(-1)==="%"?"prgb":"rgb"):Gt.hasOwnProperty("h")&&Gt.hasOwnProperty("s")&&Gt.hasOwnProperty("v")?(Gt.s=zc(Gt.s),Gt.v=zc(Gt.v),xe=function(an,Ee,sn){an=6*zn(an,360),Ee=zn(Ee,100),sn=zn(sn,100);var _n=w.floor(an),wr=an-_n,Co=sn*(1-Ee),So=sn*(1-wr*Ee),Mo=sn*(1-(1-wr)*Ee),xr=_n%6,pi=[sn,So,Co,Co,Mo,sn][xr],Wa=[Mo,sn,sn,So,Co,Co][xr],Cr=[Co,Co,Mo,sn,sn,So][xr];return{r:255*pi,g:255*Wa,b:255*Cr}}(Gt.h,Gt.s,Gt.v),ie=!0,Qe="hsv"):Gt.hasOwnProperty("h")&&Gt.hasOwnProperty("s")&&Gt.hasOwnProperty("l")&&(Gt.s=zc(Gt.s),Gt.l=zc(Gt.l),xe=function(an,Ee,sn){var _n,wr,Co;function So(pi,Wa,Cr){return Cr<0&&(Cr+=1),Cr>1&&(Cr-=1),Cr<1/6?pi+6*(Wa-pi)*Cr:Cr<1/2?Wa:Cr<2/3?pi+(Wa-pi)*(2/3-Cr)*6:pi}if(an=zn(an,360),Ee=zn(Ee,100),sn=zn(sn,100),Ee===0)_n=wr=Co=sn;else{var Mo=sn<.5?sn*(1+Ee):sn+Ee-sn*Ee,xr=2*sn-Mo;_n=So(xr,Mo,an+1/3),wr=So(xr,Mo,an),Co=So(xr,Mo,an-1/3)}return{r:255*_n,g:255*wr,b:255*Co}}(Gt.h,Gt.s,Gt.l),ie=!0,Qe="hsl"),Gt.hasOwnProperty("a")&&(Ae=Gt.a));var bn,Ro,qo;return Ae=cg(Ae),{ok:ie,format:Gt.format||Qe,r:z(255,B(xe.r,0)),g:z(255,B(xe.g,0)),b:z(255,B(xe.b,0)),a:Ae}}(ut);this._originalInput=ut,this._r=Rt.r,this._g=Rt.g,this._b=Rt.b,this._a=Rt.a,this._roundA=k(100*this._a)/100,this._format=Lt.format||Rt.format,this._gradientType=Lt.gradientType,this._r<1&&(this._r=k(this._r)),this._g<1&&(this._g=k(this._g)),this._b<1&&(this._b=k(this._b)),this._ok=Rt.ok,this._tc_id=m++};X.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var ut=this.toRgb();return(299*ut.r+587*ut.g+114*ut.b)/1e3},setAlpha:function(ut){return this._a=cg(ut),this._roundA=k(100*this._a)/100,this},toHsv:function(){var ut=Mi(this._r,this._g,this._b);return{h:360*ut.h,s:ut.s,v:ut.v,a:this._a}},toHsvString:function(){var ut=Mi(this._r,this._g,this._b),Lt=k(360*ut.h),Rt=k(100*ut.s),Gt=k(100*ut.v);return this._a==1?"hsv("+Lt+", "+Rt+"%, "+Gt+"%)":"hsva("+Lt+", "+Rt+"%, "+Gt+"%, "+this._roundA+")"},toHsl:function(){var ut=ji(this._r,this._g,this._b);return{h:360*ut.h,s:ut.s,l:ut.l,a:this._a}},toHslString:function(){var ut=ji(this._r,this._g,this._b),Lt=k(360*ut.h),Rt=k(100*ut.s),Gt=k(100*ut.l);return this._a==1?"hsl("+Lt+", "+Rt+"%, "+Gt+"%)":"hsla("+Lt+", "+Rt+"%, "+Gt+"%, "+this._roundA+")"},toHex:function(ut){return li(this._r,this._g,this._b,ut)},toHexString:function(ut){return"#"+this.toHex(ut)},toHex8:function(){return ci(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:k(this._r),g:k(this._g),b:k(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+k(this._r)+", "+k(this._g)+", "+k(this._b)+")":"rgba("+k(this._r)+", "+k(this._g)+", "+k(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:k(100*zn(this._r,255))+"%",g:k(100*zn(this._g,255))+"%",b:k(100*zn(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+k(100*zn(this._r,255))+"%, "+k(100*zn(this._g,255))+"%, "+k(100*zn(this._b,255))+"%)":"rgba("+k(100*zn(this._r,255))+"%, "+k(100*zn(this._g,255))+"%, "+k(100*zn(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(ve[li(this._r,this._g,this._b,!0)]||!1)},toFilter:function(ut){var Lt="#"+ci(this._r,this._g,this._b,this._a),Rt=Lt,Gt=this._gradientType?"GradientType = 1, ":"";return ut&&(Rt=X(ut).toHex8String()),"progid:DXImageTransform.Microsoft.gradient("+Gt+"startColorstr="+Lt+",endColorstr="+Rt+")"},toString:function(ut){var Lt=!!ut;ut=ut||this._format;var Rt=!1,Gt=this._a<1&&this._a>=0;return Lt||!Gt||ut!=="hex"&&ut!=="hex6"&&ut!=="hex3"&&ut!=="name"?(ut==="rgb"&&(Rt=this.toRgbString()),ut==="prgb"&&(Rt=this.toPercentageRgbString()),ut!=="hex"&&ut!=="hex6"||(Rt=this.toHexString()),ut==="hex3"&&(Rt=this.toHexString(!0)),ut==="hex8"&&(Rt=this.toHex8String()),ut==="name"&&(Rt=this.toName()),ut==="hsl"&&(Rt=this.toHslString()),ut==="hsv"&&(Rt=this.toHsvString()),Rt||this.toHexString()):ut==="name"&&this._a===0?this.toName():this.toRgbString()},_applyModification:function(ut,Lt){var Rt=ut.apply(null,[this].concat([].slice.call(Lt)));return this._r=Rt._r,this._g=Rt._g,this._b=Rt._b,this.setAlpha(Rt._a),this},lighten:function(){return this._applyModification(xf,arguments)},brighten:function(){return this._applyModification(kp,arguments)},darken:function(){return this._applyModification(Ns,arguments)},desaturate:function(){return this._applyModification(Nr,arguments)},saturate:function(){return this._applyModification(ui,arguments)},greyscale:function(){return this._applyModification(Vr,arguments)},spin:function(){return this._applyModification(Cf,arguments)},_applyCombination:function(ut,Lt){return ut.apply(null,[this].concat([].slice.call(Lt)))},analogous:function(){return this._applyCombination(qb,arguments)},complement:function(){return this._applyCombination(zb,arguments)},monochromatic:function(){return this._applyCombination(Gb,arguments)},splitcomplement:function(){return this._applyCombination($b,arguments)},triad:function(){return this._applyCombination(Bb,arguments)},tetrad:function(){return this._applyCombination(Wb,arguments)}},X.fromRatio=function(ut,Lt){if(typeof ut=="object"){var Rt={};for(var Gt in ut)ut.hasOwnProperty(Gt)&&(Rt[Gt]=Gt==="a"?ut[Gt]:zc(ut[Gt]));ut=Rt}return X(ut,Lt)},X.equals=function(ut,Lt){return!(!ut||!Lt)&&X(ut).toRgbString()==X(Lt).toRgbString()},X.random=function(){return X.fromRatio({r:nt(),g:nt(),b:nt()})},X.mix=function(ut,Lt,Rt){Rt=Rt===0?0:Rt||50;var Gt,xe=X(ut).toRgb(),Ae=X(Lt).toRgb(),ie=Rt/100,Qe=2*ie-1,bn=Ae.a-xe.a,Ro=1-(Gt=((Gt=Qe*bn==-1?Qe:(Qe+bn)/(1+Qe*bn))+1)/2),qo={r:Ae.r*Gt+xe.r*Ro,g:Ae.g*Gt+xe.g*Ro,b:Ae.b*Gt+xe.b*Ro,a:Ae.a*ie+xe.a*(1-ie)};return X(qo)},X.readability=function(ut,Lt){var Rt=X(ut),Gt=X(Lt),xe=Rt.toRgb(),Ae=Gt.toRgb(),ie=Rt.getBrightness(),Qe=Gt.getBrightness(),bn=Math.max(xe.r,Ae.r)-Math.min(xe.r,Ae.r)+Math.max(xe.g,Ae.g)-Math.min(xe.g,Ae.g)+Math.max(xe.b,Ae.b)-Math.min(xe.b,Ae.b);return{brightness:Math.abs(ie-Qe),color:bn}},X.isReadable=function(ut,Lt){var Rt=X.readability(ut,Lt);return Rt.brightness>125&&Rt.color>500},X.mostReadable=function(ut,Lt){for(var Rt=null,Gt=0,xe=!1,Ae=0;Ae<Lt.length;Ae++){var ie=X.readability(ut,Lt[Ae]),Qe=ie.brightness>125&&ie.color>500,bn=3*(ie.brightness/125)+ie.color/500;(Qe&&!xe||Qe&&xe&&bn>Gt||!Qe&&!xe&&bn>Gt)&&(xe=Qe,Gt=bn,Rt=X(Lt[Ae]))}return Rt};var At,It,Wt,oe=X.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},ve=X.hexNames=function(ut){var Lt={};for(var Rt in ut)ut.hasOwnProperty(Rt)&&(Lt[ut[Rt]]=Rt);return Lt}(oe),we=(It="[\\s|\\(]+("+(At="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+At+")[,|\\s]+("+At+")\\s*\\)?",Wt="[\\s|\\(]+("+At+")[,|\\s]+("+At+")[,|\\s]+("+At+")[,|\\s]+("+At+")\\s*\\)?",{rgb:new RegExp("rgb"+It),rgba:new RegExp("rgba"+Wt),hsl:new RegExp("hsl"+It),hsla:new RegExp("hsla"+Wt),hsv:new RegExp("hsv"+It),hsva:new RegExp("hsva"+Wt),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});window.tinycolor=X,a(function(){a.fn.spectrum.load&&a.fn.spectrum.processNativeColorInputs()})}function Ve(ut,Lt,Rt,Gt){for(var xe=[],Ae=0;Ae<ut.length;Ae++){var ie=ut[Ae];if(ie){var Qe=X(ie),bn=Qe.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";bn+=X.equals(Lt,ie)?" sp-thumb-active":"";var Ro=Qe.toString(Gt.preferredFormat||"rgb"),qo=r?"background-color:"+Qe.toRgbString():"filter:"+Qe.toFilter();xe.push('<span title="'+Ro+'" data-color="'+Qe.toRgbString()+'" class="'+bn+'"><span class="sp-thumb-inner" style="'+qo+';"></span></span>')}else xe.push(a("<div />").append(a('<span data-color="" style="background-color:transparent;" class="sp-clear-display"></span>').attr("title",Gt.noColorSelectedText)).html())}return"<div class='sp-cf "+Rt+"'>"+xe.join("")+"</div>"}function Ze(ut,Lt){var Rt,Gt,xe,Ae,ie=function(Re,Fe){var De=a.extend({},t,Re);return De.callbacks={move:Xn(De.move,Fe),change:Xn(De.change,Fe),show:Xn(De.show,Fe),hide:Xn(De.hide,Fe),beforeShow:Xn(De.beforeShow,Fe)},De}(Lt,ut),Qe=ie.flat,bn=ie.showSelectionPalette,Ro=ie.localStorageKey,qo=ie.theme,an=ie.callbacks,Ee=(Rt=Us,Gt=10,function(){var Re=this,Fe=arguments,De=function(){Ae=null,Rt.apply(Re,Fe)};xe&&clearTimeout(Ae),!xe&&Ae||(Ae=setTimeout(De,Gt))}),sn=!1,_n=!1,wr=!0,Co=0,So=0,Mo=0,xr=0,pi=0,Wa=0,Cr=0,Bc=0,Wc=0,$c=0,Li=1,jp=[],qc=[],Mp={},Ii=ie.selectionPalette.slice(0),Yb=ie.maxSelectionSize,ug="sp-dragging",$a=null,Gc=ut.ownerDocument,ho=(Gc.body,a(ut)),Sf=!1,tn=a(p,Gc).addClass(qo),Xb=tn.find(".sp-picker-container"),Dp=tn.find(".sp-color"),Lp=tn.find(".sp-dragger"),Of=tn.find(".sp-hue"),Ip=tn.find(".sp-slider"),Kc=tn.find(".sp-alpha-inner"),pg=tn.find(".sp-alpha"),Np=tn.find(".sp-alpha-handle"),Ni=tn.find(".sp-input"),dg=tn.find(".sp-palette"),fg=tn.find(".sp-initial"),hg=tn.find(".sp-cancel"),Tf=tn.find(".sp-clear"),gg=tn.find(".sp-choose"),Pf=tn.find(".sp-palette-toggle"),Vp=ho.is("input"),Jb=Vp&&ho.attr("type")==="color"&&Ir(),Ef=Vp&&!Qe,$l=Ef?a(l).addClass(qo).addClass(ie.className).addClass(ie.replacerClassName):a([]),Yc=Ef?$l:ho,ql=$l.find(".sp-preview-inner"),Xc=ie.color||Vp&&ho.val(),Gl=!1,Kl=ie.preferredFormat,Zb=!ie.showButtons||ie.clickoutFiresChange,qa=!Xc,Rs=ie.allowEmpty&&!Jb;function kf(){if(ie.showPaletteOnly&&(ie.showPalette=!0),Pf.text(ie.showPaletteOnly?ie.togglePaletteMoreText:ie.togglePaletteLessText),ie.palette){jp=ie.palette.slice(0),qc=a.isArray(jp[0])?jp:[jp],Mp={};for(var Re=0;Re<qc.length;Re++)for(var Fe=0;Fe<qc[Re].length;Fe++){var De=X(qc[Re][Fe]).toRgbString();Mp[De]=!0}}tn.toggleClass("sp-flat",Qe),tn.toggleClass("sp-input-disabled",!ie.showInput),tn.toggleClass("sp-alpha-enabled",ie.showAlpha),tn.toggleClass("sp-clear-enabled",Rs),tn.toggleClass("sp-buttons-disabled",!ie.showButtons),tn.toggleClass("sp-palette-buttons-disabled",!ie.togglePaletteOnly),tn.toggleClass("sp-palette-disabled",!ie.showPalette),tn.toggleClass("sp-palette-only",ie.showPaletteOnly),tn.toggleClass("sp-initial-disabled",!ie.showInitial),tn.addClass(ie.className).addClass(ie.containerClassName),Us()}function vg(){if(Ro&&window.localStorage){try{var Re=window.localStorage[Ro].split(",#");Re.length>1&&(delete window.localStorage[Ro],a.each(Re,function(Fe,De){Af(De)}))}catch{}try{Ii=window.localStorage[Ro].split(";")}catch{}}}function Af(Re){if(bn){var Fe=X(Re).toRgbString();if(!Mp[Fe]&&a.inArray(Fe,Ii)===-1)for(Ii.push(Fe);Ii.length>Yb;)Ii.shift();if(Ro&&window.localStorage)try{window.localStorage[Ro]=Ii.join(";")}catch{}}}function mg(){var Re=cr(),Fe=a.map(qc,function(De,ze){return Ve(De,Re,"sp-palette-row sp-palette-row-"+ze,ie)});vg(),Ii&&Fe.push(Ve(function(){var De=[];if(ie.showPalette)for(var ze=0;ze<Ii.length;ze++){var Go=X(Ii[ze]).toRgbString();Mp[Go]||De.push(Ii[ze])}return De.reverse().slice(0,ie.maxSelectionSize)}(),Re,"sp-palette-row sp-palette-row-selection",ie)),dg.html(Fe.join(""))}function yg(){if(ie.showInitial){var Re=Gl,Fe=cr();fg.html(Ve([Re,Fe],Fe,"sp-palette-row-initial",ie))}}function jf(){(So<=0||Co<=0||xr<=0)&&Us(),_n=!0,tn.addClass(ug),$a=null,ho.trigger("dragstart.spectrum",[cr()])}function Mf(){_n=!1,tn.removeClass(ug),ho.trigger("dragstop.spectrum",[cr()])}function Df(){var Re=Ni.val();if(Re!==null&&Re!==""||!Rs){var Fe=X(Re);Fe.isValid()?(Fs(Fe),Hs(!0)):Ni.addClass("sp-validation-error")}else Fs(null),Hs(!0)}function bg(){sn?Ga():Lf()}function Lf(){var Re=a.Event("beforeShow.spectrum");if(sn)Us();else if(ho.trigger("beforeShow.spectrum",[cr()]),an.beforeShow(cr())!==!1&&!Re.isDefaultPrevented()){(function(){for(var De=0;De<e.length;De++)e[De]&&e[De].hide()})(),sn=!0;var Fe=a(Gc);Fe.bind("keydown.spectrum",_g),Fe.bind("click.spectrum",wg),a(window).bind("resize.spectrum",Ee),$l.addClass("sp-active"),tn.removeClass("sp-hidden"),Us(),Xl(),Gl=cr(),yg(),an.show(Gl),ho.trigger("show.spectrum",[Gl])}}function _g(Re){Re.keyCode===27&&Ga()}function wg(Re){Re.button!=2&&(_n||(Zb?Hs(!0):xg(),Ga()))}function Ga(){sn&&!Qe&&(sn=!1,a(Gc).unbind("keydown.spectrum",_g),a(Gc).unbind("click.spectrum",wg),a(window).unbind("resize.spectrum",Ee),$l.removeClass("sp-active"),tn.addClass("sp-hidden"),an.hide(cr()),ho.trigger("hide.spectrum",[cr()]))}function xg(){Fs(Gl,!0)}function Fs(Re,Fe){var De,ze;X.equals(Re,cr())?Xl():(!Re&&Rs?qa=!0:(qa=!1,wr=!Re,ze=(De=X(Re)).toHsv(),Bc=ze.h%360/360,Wc=ze.s,$c=ze.v,Li=ze.a),Xl(),De&&De.isValid()&&!Fe&&(Kl=ie.preferredFormat||De.getFormat()))}function cr(Re){return Re=Re||{},Rs&&qa?null:X.fromRatio({h:Bc,s:Wc,v:$c,a:Math.round(100*Li)/100},{format:Re.format||Kl})}function Yl(){Xl(),an.move(cr()),ho.trigger("move.spectrum",[cr()])}function Xl(){Ni.removeClass("sp-validation-error"),Cg();var Re=X.fromRatio({h:Bc,s:1,v:1});Dp.css("background-color",Re.toHexString());var Fe=Kl;Li<1&&(Li!==0||Fe!=="name")&&(Fe!=="hex"&&Fe!=="hex3"&&Fe!=="hex6"&&Fe!=="name"||(Fe="rgb"));var De=cr({format:Fe}),ze="";if(ql.removeClass("sp-clear-display"),ql.css("background-color","transparent"),!De&&Rs)ql.addClass("sp-clear-display");else{var Go=De.toHexString(),di=De.toRgbString();if(r||De.alpha===1?ql.css("background-color",di):(ql.css("background-color","transparent"),ql.css("filter",De.toFilter())),ie.showAlpha){var Ka=De.toRgb();Ka.a=0;var Ya=X(Ka).toRgbString(),Sr="linear-gradient(left, "+Ya+", "+Go+")";n?Kc.css("filter",X(Ya).toFilter({gradientType:1},Go)):(Kc.css("background","-webkit-"+Sr),Kc.css("background","-moz-"+Sr),Kc.css("background","-ms-"+Sr),Kc.css("background","linear-gradient(to right, "+Ya+", "+Go+")"))}ze=De.toString(Fe)}ie.showInput&&Ni.val(ze),ie.showPalette&&mg(),yg()}function Cg(){var Re=Wc,Fe=$c;if(Rs&&qa)Np.hide(),Ip.hide(),Lp.hide();else{Np.show(),Ip.show(),Lp.show();var De=Re*Co,ze=So-Fe*So;De=Math.max(-Mo,Math.min(Co-Mo,De-Mo)),ze=Math.max(-Mo,Math.min(So-Mo,ze-Mo)),Lp.css({top:ze+"px",left:De+"px"});var Go=Li*pi;Np.css({left:Go-Wa/2+"px"});var di=Bc*xr;Ip.css({top:di-Cr+"px"})}}function Hs(Re){var Fe=cr(),De="",ze=!!wr||!X.equals(Fe,Gl);Fe&&(De=Fe.toString(Kl),!sn&&Af(Fe)),Vp&&ho.val(De),Re&&ze&&(an.change(Fe),ho.trigger("change",[Fe]))}function Us(){sn&&(Co=Dp.width(),So=Dp.height(),Mo=Lp.height(),Of.width(),xr=Of.height(),Cr=Ip.height(),pi=pg.width(),Wa=Np.width(),Qe||(tn.css("position","absolute"),ie.offset?tn.offset(ie.offset):tn.offset(function(Re,Fe){for(var De=Fe[0],ze=Re[0],Go=ze.parentElement,di=De.getBoundingClientRect(),Ka=ze.offsetWidth,Ya=ze.offsetHeight,Sr={top:0,left:0,width:De.offsetWidth,height:De.offsetHeight};De&&(Sr.top+=De.offsetTop-De.scrollTop,Sr.left+=De.offsetLeft-De.scrollLeft,De!==Go&&Go.contains(De.offsetParent));)De=De.offsetParent;return di.right+Ka>window.innerWidth-window.scrollX&&di.right-Ka>0&&(Sr.left-=Ka-Sr.width),di.bottom+Ya<window.innerHeight-window.scrollY?Sr.top+=Sr.height:Sr.top-=Ya,Sr}(tn,Yc))),Cg(),ie.showPalette&&mg(),ho.trigger("reflow.spectrum"))}function Sg(){Ga(),Sf=!0,ho.attr("disabled",!0),Yc.addClass("sp-disabled")}(function(){if(n&&tn.find("*:not(input)").attr("unselectable","on"),kf(),Ef&&ho.after($l).hide(),Rs||Tf.hide(),Qe)ho.after(tn).hide();else{var Re=ie.appendTo==="parent"?ho.parent():a(ie.appendTo);Re.length!==1&&(Re=a("body")),Re.append(tn)}function Fe(ze){return ze.data&&ze.data.ignore?(Fs(a(ze.target).closest(".sp-thumb-el").data("color")),Yl()):(Fs(a(ze.target).closest(".sp-thumb-el").data("color")),Yl(),ie.hideAfterPaletteSelect&&(Hs(!0),Ga())),!1}vg(),Yc.bind("click.spectrum touchstart.spectrum",function(ze){Sf||bg(),ze.stopPropagation(),a(ze.target).is("input")||ze.preventDefault()}),(ho.is(":disabled")||ie.disabled===!0)&&Sg(),tn.click(Un),Ni.change(Df),Ni.bind("paste",function(){setTimeout(Df,1)}),Ni.keydown(function(ze){ze.keyCode==13&&Df()}),hg.text(ie.cancelText),hg.bind("click.spectrum",function(ze){ze.stopPropagation(),ze.preventDefault(),xg(),Ga()}),Tf.attr("title",ie.clearText),Tf.bind("click.spectrum",function(ze){ze.stopPropagation(),ze.preventDefault(),qa=!0,Yl(),Qe&&Hs(!0)}),gg.text(ie.chooseText),gg.bind("click.spectrum",function(ze){ze.stopPropagation(),ze.preventDefault(),n&&Ni.is(":focus")&&Ni.trigger("change"),Ni.hasClass("sp-validation-error")||(Hs(!0),Ga())}),Pf.text(ie.showPaletteOnly?ie.togglePaletteMoreText:ie.togglePaletteLessText),Pf.bind("click.spectrum",function(ze){ze.stopPropagation(),ze.preventDefault(),ie.showPaletteOnly=!ie.showPaletteOnly,ie.showPaletteOnly||Qe||tn.css("left","-="+(Xb.outerWidth(!0)+5)),kf()}),xo(pg,function(ze,Go,di){Li=ze/pi,qa=!1,di.shiftKey&&(Li=Math.round(10*Li)/10),Yl()},jf,Mf),xo(Of,function(ze,Go){Bc=parseFloat(Go/xr),qa=!1,ie.showAlpha||(Li=1),Yl()},jf,Mf),xo(Dp,function(ze,Go,di){if(di.shiftKey){if(!$a){var Ka=Wc*Co,Ya=So-$c*So,Sr=Math.abs(ze-Ka)>Math.abs(Go-Ya);$a=Sr?"x":"y"}}else $a=null;var Qb=!$a||$a==="y";(!$a||$a==="x")&&(Wc=parseFloat(ze/Co)),Qb&&($c=parseFloat((So-Go)/So)),qa=!1,ie.showAlpha||(Li=1),Yl()},jf,Mf),Xc?(Fs(Xc),Xl(),Kl=ie.preferredFormat||X(Xc).getFormat(),Af(Xc)):Xl(),Qe&&Lf();var De=n?"mousedown.spectrum":"click.spectrum touchstart.spectrum";dg.delegate(".sp-thumb-el",De,Fe),fg.delegate(".sp-thumb-el:nth-child(1)",De,{ignore:!0},Fe)})();var Rp={show:Lf,hide:Ga,toggle:bg,reflow:Us,option:function(Re,Fe){return Re===o?a.extend({},ie):Fe===o?ie[Re]:(ie[Re]=Fe,Re==="preferredFormat"&&(Kl=ie.preferredFormat),void kf())},enable:function(){Sf=!1,ho.attr("disabled",!1),Yc.removeClass("sp-disabled")},disable:Sg,offset:function(Re){ie.offset=Re,Us()},set:function(Re){Fs(Re),Hs()},get:cr,destroy:function(){ho.show(),Yc.unbind("click.spectrum touchstart.spectrum"),tn.remove(),$l.remove(),e[Rp.id]=null},container:tn};return Rp.id=e.push(Rp)-1,Rp}function Xe(){}function Un(ut){ut.stopPropagation()}function Xn(ut,Lt){var Rt=Array.prototype.slice,Gt=Rt.call(arguments,2);return function(){return ut.apply(Lt,Gt.concat(Rt.call(arguments)))}}function xo(ut,Lt,Rt,Gt){Lt=Lt||function(){},Rt=Rt||function(){},Gt=Gt||function(){};var xe=document,Ae=!1,ie={},Qe=0,bn=0,Ro="ontouchstart"in window,qo={};function an(_n){_n.stopPropagation&&_n.stopPropagation(),_n.preventDefault&&_n.preventDefault(),_n.returnValue=!1}function Ee(_n){if(Ae){if(n&&xe.documentMode<9&&!_n.button)return sn();var wr=_n&&_n.touches&&_n.touches[0],Co=wr&&wr.pageX||_n.pageX,So=wr&&wr.pageY||_n.pageY,Mo=Math.max(0,Math.min(Co-ie.left,bn)),xr=Math.max(0,Math.min(So-ie.top,Qe));Ro&&an(_n),Lt.apply(ut,[Mo,xr,_n])}}function sn(){Ae&&(a(xe).unbind(qo),a(xe.body).removeClass("sp-dragging"),setTimeout(function(){Gt.apply(ut,arguments)},0)),Ae=!1}qo.selectstart=an,qo.dragstart=an,qo["touchmove mousemove"]=Ee,qo["touchend mouseup"]=sn,a(ut).bind("touchstart mousedown",function(_n){(_n.which?_n.which==3:_n.button==2)||Ae||Rt.apply(ut,arguments)!==!1&&(Ae=!0,Qe=a(ut).height(),bn=a(ut).width(),ie=a(ut).offset(),a(xe).bind(qo),a(xe.body).addClass("sp-dragging"),Ee(_n),an(_n))})}function Ir(){return a.fn.spectrum.inputTypeColorSupport()}function ji(ut,Lt,Rt){ut=zn(ut,255),Lt=zn(Lt,255),Rt=zn(Rt,255);var Gt,xe,Ae=B(ut,Lt,Rt),ie=z(ut,Lt,Rt),Qe=(Ae+ie)/2;if(Ae==ie)Gt=xe=0;else{var bn=Ae-ie;switch(xe=Qe>.5?bn/(2-Ae-ie):bn/(Ae+ie),Ae){case ut:Gt=(Lt-Rt)/bn+(Lt<Rt?6:0);break;case Lt:Gt=(Rt-ut)/bn+2;break;case Rt:Gt=(ut-Lt)/bn+4}Gt/=6}return{h:Gt,s:xe,l:Qe}}function Mi(ut,Lt,Rt){ut=zn(ut,255),Lt=zn(Lt,255),Rt=zn(Rt,255);var Gt,xe,Ae=B(ut,Lt,Rt),ie=z(ut,Lt,Rt),Qe=Ae,bn=Ae-ie;if(xe=Ae===0?0:bn/Ae,Ae==ie)Gt=0;else{switch(Ae){case ut:Gt=(Lt-Rt)/bn+(Lt<Rt?6:0);break;case Lt:Gt=(Rt-ut)/bn+2;break;case Rt:Gt=(ut-Lt)/bn+4}Gt/=6}return{h:Gt,s:xe,v:Qe}}function li(ut,Lt,Rt,Gt){var xe=[Vs(k(ut).toString(16)),Vs(k(Lt).toString(16)),Vs(k(Rt).toString(16))];return Gt&&xe[0].charAt(0)==xe[0].charAt(1)&&xe[1].charAt(0)==xe[1].charAt(1)&&xe[2].charAt(0)==xe[2].charAt(1)?xe[0].charAt(0)+xe[1].charAt(0)+xe[2].charAt(0):xe.join("")}function ci(ut,Lt,Rt,Gt){var xe;return[Vs((xe=Gt,Math.round(255*parseFloat(xe)).toString(16))),Vs(k(ut).toString(16)),Vs(k(Lt).toString(16)),Vs(k(Rt).toString(16))].join("")}function Nr(ut,Lt){Lt=Lt===0?0:Lt||10;var Rt=X(ut).toHsl();return Rt.s-=Lt/100,Rt.s=Ap(Rt.s),X(Rt)}function ui(ut,Lt){Lt=Lt===0?0:Lt||10;var Rt=X(ut).toHsl();return Rt.s+=Lt/100,Rt.s=Ap(Rt.s),X(Rt)}function Vr(ut){return X(ut).desaturate(100)}function xf(ut,Lt){Lt=Lt===0?0:Lt||10;var Rt=X(ut).toHsl();return Rt.l+=Lt/100,Rt.l=Ap(Rt.l),X(Rt)}function kp(ut,Lt){Lt=Lt===0?0:Lt||10;var Rt=X(ut).toRgb();return Rt.r=B(0,z(255,Rt.r-k(255*(-Lt/100)))),Rt.g=B(0,z(255,Rt.g-k(255*(-Lt/100)))),Rt.b=B(0,z(255,Rt.b-k(255*(-Lt/100)))),X(Rt)}function Ns(ut,Lt){Lt=Lt===0?0:Lt||10;var Rt=X(ut).toHsl();return Rt.l-=Lt/100,Rt.l=Ap(Rt.l),X(Rt)}function Cf(ut,Lt){var Rt=X(ut).toHsl(),Gt=(k(Rt.h)+Lt)%360;return Rt.h=Gt<0?360+Gt:Gt,X(Rt)}function zb(ut){var Lt=X(ut).toHsl();return Lt.h=(Lt.h+180)%360,X(Lt)}function Bb(ut){var Lt=X(ut).toHsl(),Rt=Lt.h;return[X(ut),X({h:(Rt+120)%360,s:Lt.s,l:Lt.l}),X({h:(Rt+240)%360,s:Lt.s,l:Lt.l})]}function Wb(ut){var Lt=X(ut).toHsl(),Rt=Lt.h;return[X(ut),X({h:(Rt+90)%360,s:Lt.s,l:Lt.l}),X({h:(Rt+180)%360,s:Lt.s,l:Lt.l}),X({h:(Rt+270)%360,s:Lt.s,l:Lt.l})]}function $b(ut){var Lt=X(ut).toHsl(),Rt=Lt.h;return[X(ut),X({h:(Rt+72)%360,s:Lt.s,l:Lt.l}),X({h:(Rt+216)%360,s:Lt.s,l:Lt.l})]}function qb(ut,Lt,Rt){Lt=Lt||6,Rt=Rt||30;var Gt=X(ut).toHsl(),xe=360/Rt,Ae=[X(ut)];for(Gt.h=(Gt.h-(xe*Lt>>1)+720)%360;--Lt;)Gt.h=(Gt.h+xe)%360,Ae.push(X(Gt));return Ae}function Gb(ut,Lt){Lt=Lt||6;for(var Rt=X(ut).toHsv(),Gt=Rt.h,xe=Rt.s,Ae=Rt.v,ie=[],Qe=1/Lt;Lt--;)ie.push(X({h:Gt,s:xe,v:Ae})),Ae=(Ae+Qe)%1;return ie}function cg(ut){return ut=parseFloat(ut),(isNaN(ut)||ut<0||ut>1)&&(ut=1),ut}function zn(ut,Lt){(function(Gt){return typeof Gt=="string"&&Gt.indexOf(".")!=-1&&parseFloat(Gt)===1})(ut)&&(ut="100%");var Rt=function(Gt){return typeof Gt=="string"&&Gt.indexOf("%")!=-1}(ut);return ut=z(Lt,B(0,parseFloat(ut))),Rt&&(ut=parseInt(ut*Lt,10)/100),w.abs(ut-Lt)<1e-6?1:ut%Lt/parseFloat(Lt)}function Ap(ut){return z(1,B(0,ut))}function Di(ut){return parseInt(ut,16)}function Vs(ut){return ut.length==1?"0"+ut:""+ut}function zc(ut){return ut<=1&&(ut=100*ut+"%"),ut}function Kb(ut){return Di(ut)/255}}(F.default);var ep=function(a){var o=a.getFormat()==="name"&&a.toName(),t=a.getAlpha()==1?a.toHexString():a.toRgbString();return o||t.replace(/ /g,"")},Ng=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return Ig(o,a),o.prototype.template=function(){var t=this.ppfx;return`
      <div class="`.concat(this.holderClass(),`"></div>
      <div class="`).concat(t,`field-colorp">
        <div class="`).concat(t,`field-colorp-c" data-colorp-c>
          <div class="`).concat(t,`checker-bg"></div>
        </div>
      </div>
    `)},o.prototype.inputClass=function(){var t=this.ppfx;return"".concat(t,"field ").concat(t,"field-color")},o.prototype.holderClass=function(){return"".concat(this.ppfx,"input-holder")},o.prototype.remove=function(){return a.prototype.remove.call(this),this.colorEl.spectrum("destroy"),this},o.prototype.handleChange=function(t){t.stopPropagation();var e=t.target.value;(0,C.isUndefined)(e)||this.__onInputChange(e)},o.prototype.__onInputChange=function(t){var e=this.model,n=this.opts.onChange,r=t,l=this.getColorEl();if(l){l.spectrum("set",r);var p=l.spectrum("get"),d=r&&ep(p);d&&(r=d)}n?n(r):e.set({value:r},{fromInput:1})},o.prototype.setValue=function(t,e){e===void 0&&(e={});var n=this.model,r=(0,C.isUndefined)(e.def)?n.get("defaults"):e.def,l=(0,C.isUndefined)(t)?(0,C.isUndefined)(r)?"":r:t,p=this.getInputEl(),d=this.getColorEl(),g=l!="none"?l:"";p.value=l,d.get(0).style.backgroundColor=g,(e.fromTarget||e.fromInput&&!e.avoidStore)&&(d.spectrum("set",g),this.noneColor=l=="none",this.movedColor=g)},o.prototype.getColorEl=function(){var t=this;if(!this.colorEl){var e=this,n=e.em,r=e.model,l=e.opts,p=this.ppfx,d=l.onChange,g=(0,F.default)('<div class="'.concat(this.ppfx,'field-color-picker"></div>')),h=g.get(0).style,m=n&&n.getConfig&&n.getConfig().colorPicker||{};this.movedColor="";var w,k=!1;this.$el.find("[data-colorp-c]").append(g);var z=function(B,nt){nt===void 0&&(nt=!0),d?d(B,!nt):(nt&&r.setValueFromInput(0,!1),r.setValueFromInput(B,nt))};g.spectrum(jc(jc(jc({color:r.getValue()||!1,containerClassName:"".concat(p,"one-bg ").concat(p,"two-color ").concat(p,"editor-sp"),maxSelectionSize:8,showPalette:!0,showAlpha:!0,chooseText:"Ok",cancelText:"\u2A2F",palette:[]},m),r.get("colorPicker")||{}),{move:function(B){var nt=ep(B);t.movedColor=nt,h.backgroundColor=nt,z(nt,!1)},change:function(B){k=!0;var nt=ep(B);h.backgroundColor=nt,z(nt),t.noneColor=!1},show:function(B){k=!1,t.movedColor="",w=d?r.getValue({noDefault:!0}):ep(B)},hide:function(){k||!w&&!d||(t.noneColor&&(w=""),h.backgroundColor=w,g.spectrum("set",w),z(w,!1))}})),n&&n.on&&this.listenTo(n,"component:selected",function(){t.movedColor&&z(t.movedColor),k=!0,t.movedColor="",g.spectrum("hide")}),this.colorEl=g}return this.colorEl},o.prototype.render=function(){return tp.prototype.render.call(this),this.getColorEl(),this},o}(tp);const Ff=Ng;var Vg=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Rg=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return Vg(o,a),o.prototype.templateInput=function(){return""},o.prototype.getInputEl=function(){if(!this.input){var t=this.model,e=this.getModelValue(),n=new Ff({model:t,target:this.config.em,contClass:this.ppfx+"field-color",ppfx:this.ppfx}).render();n.setValue(e,{fromTarget:1}),this.input=n.el}return this.input},o}(na);var Fg=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Hf=function(a){function o(t){t===void 0&&(t={});var e=a.call(this,t)||this;return(0,C.bindAll)(e,"moveIncrement","upIncrement"),e.doc=document,e.listenTo(e.model,"change:unit",e.handleModelChange),e}return Fg(o,a),o.prototype.template=function(){var t=this.ppfx;return`
      <span class="`.concat(t,`input-holder"></span>
      <span class="`).concat(t,`field-units"></span>
      <div class="`).concat(t,`field-arrows" data-arrows>
        <div class="`).concat(t,`field-arrow-u" data-arrow-up></div>
        <div class="`).concat(t,`field-arrow-d" data-arrow-down></div>
      </div>
    `)},o.prototype.inputClass=function(){var t=this.ppfx;return this.opts.contClass||"".concat(t,"field ").concat(t,"field-integer")},o.prototype.setValue=function(t,e){var n=e||{},r=this.validateInputValue(t,{deepCheck:1}),l={value:r.value,unit:""};(r.unit||r.force)&&(l.unit=r.unit),this.model.set(l,n),n.silent&&this.handleModelChange()},o.prototype.handleChange=function(t){t.stopPropagation(),this.setValue(this.getInputEl().value),this.elementUpdated()},o.prototype.handleUnitChange=function(t){t.stopPropagation();var e=this.getUnitEl().value;this.model.set("unit",e),this.elementUpdated()},o.prototype.handleKeyDown=function(t){t.key==="ArrowUp"&&(t.preventDefault(),this.upArrowClick()),t.key==="ArrowDown"&&(t.preventDefault(),this.downArrowClick())},o.prototype.elementUpdated=function(){this.model.trigger("el:change")},o.prototype.handleModelChange=function(){var t=this.model;this.getInputEl().value=t.get("value");var e=this.getUnitEl();e&&(e.value=t.get("unit")||"")},o.prototype.getUnitEl=function(){if(!this.unitEl){var t=this.model,e=t.get("units")||[];if(e.length){var n=['<option value="" disabled hidden>-</option>'];e.forEach(function(l){var p=l==t.get("unit")?"selected":"";n.push("<option ".concat(p,">").concat(l,"</option>"))});var r=document.createElement("div");r.innerHTML='<select class="'.concat(this.ppfx,'input-unit">').concat(n.join(""),"</select>"),this.unitEl=r.firstChild}}return this.unitEl},o.prototype.upArrowClick=function(){var t=this.model.get("step"),e=parseFloat(this.getInputEl().value);this.setValue(this.normalizeValue(e+t)),this.elementUpdated()},o.prototype.downArrowClick=function(){var t=this.model.get("step"),e=parseFloat(this.getInputEl().value);this.setValue(this.normalizeValue(e-t)),this.elementUpdated()},o.prototype.downIncrement=function(t){t.preventDefault(),this.moved=!1;var e=this.model.get("value")||0;e=this.normalizeValue(e),this.current={y:t.pageY,val:e},(0,St.on)(this.doc,"mousemove",this.moveIncrement),(0,St.on)(this.doc,"mouseup",this.upIncrement)},o.prototype.moveIncrement=function(t){this.moved=!0;var e=this.model,n=e.get("step"),r=this.current,l=this.normalizeValue(r.val+(r.y-t.pageY)*n),p=this.validateInputValue(l),d=p.value,g=p.unit;return this.prValue=d,e.set({value:d,unit:g},{avoidStore:1}),!1},o.prototype.upIncrement=function(){var t=this.model,e=t.get("step");if((0,St.AU)(this.doc,"mouseup",this.upIncrement),(0,St.AU)(this.doc,"mousemove",this.moveIncrement),this.prValue&&this.moved){var n=this.prValue-e;t.set("value",n,{avoidStore:1}).set("value",n+e),this.elementUpdated()}},o.prototype.normalizeValue=function(t,e){e===void 0&&(e=0);var n=this.model.get("step"),r=0;if(isNaN(t))return e;if(t=parseFloat(t),Math.floor(t)!==t){var l=n.toString().split(".")[1];r=l?l.length:0}return r?parseFloat(t.toFixed(r)):t},o.prototype.validateInputValue=function(t,e){e===void 0&&(e={});var n=0,r=e||{},l=this.model,p="",d=(0,C.isUndefined)(t)?p:t,g=e.units||l.get("units")||[],h=l.get("unit")||g.length&&g[0]||"",m=(0,C.isUndefined)(e.max)?l.get("max"):e.max,w=(0,C.isUndefined)(e.min)?l.get("min"):e.min,k=!!l.get("limitlessMax"),z=!!l.get("limitlessMin");if(r.deepCheck){var B=l.get("fixedValues")||[];if(d===""&&(h=""),d){var nt=new RegExp("^"+B.join("|"),"g");if(B.length&&nt.test(d))d=d.match(nt)[0],h="",n=1;else{var X=d+"";d+="",d=parseFloat(d.replace(",",".")),d=isNaN(d)?p:d;var At=X.replace(d,"");(0,C.indexOf)(g,At)>=0&&(h=At)}}}return isNaN(d)||d===""||(k||(0,C.isUndefined)(m)||m===""||(d=d>m?m:d),z||(0,C.isUndefined)(w)||w===""||(d=d<w?w:d)),{force:n,value:d,unit:h}},o.prototype.render=function(){tp.prototype.render.call(this),this.unitEl=null;var t=this.getUnitEl();return t&&this.$el.find(".".concat(this.ppfx,"field-units")).get(0).appendChild(t),this},o}(tp);const Uf=Hf;Hf.prototype.events={"change input":"handleChange","change select":"handleUnitChange","click [data-arrow-up]":"upArrowClick","click [data-arrow-down]":"downArrowClick","mousedown [data-arrows]":"downIncrement",keydown:"handleKeyDown"};var Hg=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ug=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return Hg(o,a),o.prototype.getValueForTarget=function(){var t=this.model,e=t.attributes,n=e.value,r=e.unit;return(0,C.isUndefined)(n)||n===""?t.get("default"):n+r},o.prototype.getInputEl=function(){if(!this.input){var t=this.ppfx,e=this.model,n=this.getModelValue(),r=new Uf({contClass:"".concat(t,"field-int"),type:"number",model:e,ppfx:t});r.render(),this.$input=r.inputEl,this.$unit=r.unitEl,e.set("value",n,{fromTarget:!0}),this.$input.val(n),this.input=r.el}return this.input},o}(na);const zg=Ug;var Bg=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Wg=function(a){function o(t){t===void 0&&(t={});var e=a.call(this,t)||this;return e.listenTo(e.model,"change:options",e.rerender),e}return Bg(o,a),o.prototype.templateInput=function(){var t=this.ppfx,e=this.clsField;return'<div class="'.concat(e,`">
      <div data-input></div>
      <div class="`).concat(t,`sel-arrow">
        <div class="`).concat(t,`d-s-arrow"></div>
      </div>
    </div>`)},o.prototype.getInputEl=function(){if(!this.$input){var t=this.model,e=this.em,n=t.get("name"),r=t.get("options")||[],l=[],p="<select>";r.forEach(function(h){var m,w,k,z="";(0,C.isString)(h)?(m=h,w=h):(m=h.name||h.label||h.value,w="".concat((0,C.isUndefined)(h.value)?h.id:h.value).replace(/"/g,"&quot;"),z+=(k=h.style?h.style.replace(/"/g,"&quot;"):"")?' style="'.concat(k,'"'):"");var B=e.t("traitManager.traits.options.".concat(n,".").concat(w))||m;p+='<option value="'.concat(w,'"').concat(z,">").concat(B,"</option>"),l.push(w)}),p+="</select>",this.$input=(0,F.default)(p);var d=t.getTargetValue(),g=l.indexOf(d)>=0?d:t.get("default");!(0,C.isUndefined)(g)&&this.$input.val(g)}return this.$input.get(0)},o}(na);var $g=_e(8242),qg=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),zf="data-categories",Bf="data-no-categories",Wf=function(a){function o(t,e){var n=a.call(this,t)||this;n.reuseView=!0,n.renderedCategories=new Map,n.itemsView=e;var r=t.config||{};n.config=r;var l=t.editor;n.em=l;var p=r.pStylePrefix||"";return n.ppfx=p,n.pfx=p+r.stylePrefix||"",n.className="".concat(n.pfx,"traits"),n.traitContClass="".concat(p,"traits-c"),n.classNoCat="".concat(p,"traits-empty-c"),n.catsClass="".concat(p,"trait-categories"),n.collection=new yi([],{em:l}),n.listenTo(l,"component:toggled",n.updatedCollection),n.updatedCollection(),n}return qg(o,a),o.prototype.updatedCollection=function(){var t=this.ppfx,e=this.em,n=e.getSelected();this.el.className="".concat(this.traitContClass,"s ").concat(t,"one-bg ").concat(t,"two-color"),this.collection=n?.traits||new yi([],{em:e}),this.render()},o.prototype.add=function(t,e){var n=this.config,r=this.renderedCategories,l=this.itemView,p=t.get(this.itemType);this.itemsView&&this.itemsView[p]&&(l=this.itemsView[p]);var d=new l({config:n,model:t,attributes:t.get("attributes")}).render().el,g=t.parent.initCategory(t);if(g){var h=g.getId(),m=this.getCategoriesEl(),w=r.get(h);return!w&&m&&(w=new La({model:g},n,"trait").render(),r.set(h,w),m.appendChild(w.el)),void(w==null||w.append(d))}e?e.appendChild(d):this.append(d)},o.prototype.getCategoriesEl=function(){return this.catsEl||(this.catsEl=this.el.querySelector("[".concat(zf,"]"))),this.catsEl},o.prototype.getTraitsEl=function(){return this.traitsEl||(this.traitsEl=this.el.querySelector("[".concat(Bf,"]"))),this.traitsEl},o.prototype.append=function(t){var e=this.getTraitsEl();e?.appendChild(t)},o.prototype.render=function(){var t=this,e=this,n=e.el,r=e.ppfx,l=e.catsClass,p=e.traitContClass,d=e.classNoCat,g=document.createDocumentFragment();delete this.catsEl,delete this.traitsEl,this.renderedCategories=new Map,n.innerHTML=`
      <div class="`.concat(l,'" ').concat(zf,`></div>
      <div class="`).concat(d," ").concat(p,'" ').concat(Bf,`></div>
    `),this.collection.forEach(function(m){return t.add(m,g)}),this.append(g);var h="".concat(p,"s ").concat(r,"one-bg ").concat(r,"two-color");return this.$el.addClass(h),this.rendered=!0,this},o}($g.A);const $f=Wf;Wf.prototype.itemView=na;var Gg=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Kg=function(a,o,t){if(t||arguments.length===2)for(var e,n=0,r=o.length;n<r;n++)!e&&n in o||(e||(e=Array.prototype.slice.call(o,0,n)),e[n]=o[n]);return a.concat(e||Array.prototype.slice.call(o))},Yg=function(a){function o(t){var e=a.call(this,t,"TraitManager",Eg())||this;e.TraitsView=$f,e.events=Uo,e.state=new E.Kx({traits:[]}),e.types={text:na,number:zg,select:Wg,checkbox:Dg,color:Rg,button:jg};var n=e,r=n.state,l=n.config,p=n.events,d=l.pStylePrefix;d&&(l.stylePrefix="".concat(d).concat(l.stylePrefix)),(0,C.bindAll)(e,"__onSelect");var g=(0,C.debounce)(function(){return e.__upSel()},0),h=(0,C.debounce)(function(){return e.__onUp()},0);return r.listenTo(t,"component:toggled",g),r.listenTo(t,p.value,h),r.on("change:traits",e.__onSelect),e.debounced=[g,h],e}return Gg(o,a),o.prototype.select=function(t){var e=t?.getTraits()||[];this.state.set({component:t,traits:e}),this.__trgCustom()},o.prototype.getCategories=function(){var t,e=this.getComponent(),n=((t=e?.traits.categories)===null||t===void 0?void 0:t.models)||[];return Kg([],n,!0)},o.prototype.getTraits=function(){return this.getCurrent()},o.prototype.getTraitsByCategory=function(t){return ti(t||this.getTraits())},o.prototype.getComponent=function(){return this.state.attributes.component},o.prototype.addType=function(t,e){var n=this.getType("text");this.types[t]=n.extend(e)},o.prototype.getType=function(t){return this.getTypes()[t]},o.prototype.getTypes=function(){return this.types},o.prototype.getTraitsViewer=function(){return this.view},o.prototype.getCurrent=function(){return this.state.get("traits")||[]},o.prototype.render=function(){var t=this.view,e=this.em;return t=new $f({el:t?.el,collection:[],editor:e,config:this.getConfig()},this.getTypes()),this.view=t,t.el},o.prototype.postRender=function(){this.__appendTo()},o.prototype.__onSelect=function(){var t=this,e=t.em,n=t.events,r=t.state.attributes,l=r.component,p=r.traits;e.trigger(n.select,{component:l,traits:p})},o.prototype.__trgCustom=function(t){t===void 0&&(t={});var e=this,n=e.em,r=e.events,l=e.__ctn;this.__ctn=l||t.container,n.trigger(r.custom,this.__customData())},o.prototype.__customData=function(){return{container:this.__ctn}},o.prototype.__upSel=function(){this.select(this.em.getSelected())},o.prototype.__onUp=function(){this.select(this.getComponent())},o}(ct);const Xg=Yg,Jg=function(){return{stylePrefix:"",appendTo:"",sortable:!0,hidable:!0,hideTextnode:!0,root:"",showWrapper:!0,showHover:!0,scrollCanvas:{behavior:"smooth",block:"nearest"},scrollLayers:{behavior:"auto",block:"nearest"},highlightHover:!0,custom:!1,onInit:function(){},onRender:function(){},extend:{}}};var Zg=_e(6756),Qg=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),tv=function(a){function o(){var t=a!==null&&a.apply(this,arguments)||this;return t._dropAreaConfig={ratio:.4,minUndroppableDimension:3,maxUndroppableDimension:20},t}return Qg(o,a),Object.defineProperty(o.prototype,"view",{get:function(){return this.model.viewLayer},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"element",{get:function(){var t;return(t=this.model.viewLayer)===null||t===void 0?void 0:t.el},enumerable:!1,configurable:!0}),o}(Zg.h);const ev=tv;var nv=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ov=function(a){function o(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.items=[],e.opt=t;var n=t.config||{};e.config=n,e.module=t.module,e.parentView=t.parentView;var r=n.stylePrefix||"",l=(n.pStylePrefix,e.collection);e.listenTo(l,"add",e.addTo),e.listenTo(l,"reset resetNavigator",e.render),e.listenTo(l,"remove",e.removeChildren),e.className="".concat(r,"layers");var p=n.em;if(n.sortable&&!e.opt.sorter){var d=p.Utils,g=n.sortContainer||e.el,h=e.createPlaceholder(r);e.opt.sorter=new d.ComponentSorter({em:p,treeClass:ev,containerContext:{container:g,containerSel:".".concat(e.className),itemSel:".".concat(r,"layer"),pfx:n.pStylePrefix,document,placeholderElement:h},dragBehavior:{dragDirection:Ar.A.Vertical,nested:!0}})}return e.$el.data("collection",l),t.parent&&e.$el.data("model",t.parent),e}return nv(o,a),o.prototype.createPlaceholder=function(t){var e=document.createElement("div"),n=document.createElement("div");return this.el.parentNode,e.className=t+"placeholder",e.style.display="none",e.style.pointerEvents="none",n.className=t+"placeholder-int",e.appendChild(n),e},o.prototype.removeChildren=function(t){var e=t.viewLayer;e&&(e.remove(),delete t.viewLayer)},o.prototype.addTo=function(t){this.addToCollection(t,null,this.collection.indexOf(t))},o.prototype.addToCollection=function(t,e,n){var r=this,l=r.parentView,p=r.opt,d=r.config,g=r.el,h=p.ItemView,m=p.opened,w=p.module,k=p.level,z=p.sorter,B=t.viewLayer||new h({ItemView:h,level:k,model:t,parentView:l,config:d,sorter:z,opened:m,module:w}),nt=B.render().el;if(e)e.appendChild(nt);else{var X=g,At=X.childNodes;if((0,C.isUndefined)(n))X.appendChild(nt);else{var It=At.length==n;It&&n--,It||!At.length?X.appendChild(nt):X.insertBefore(nt,At[n])}}return this.items.push(B),nt},o.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return E.Ss.prototype.remove.apply(this,t),this.items.map(function(n){return n.remove()}),this},o.prototype.render=function(){var t=this,e=this.el,n=this.module,r=document.createDocumentFragment();return e.innerHTML="",this.collection.map(function(l){return n.__getLayerFromComponent(l)}).forEach(function(l){return t.addToCollection(l,r)}),e.appendChild(r),e.className=this.className,this},o}(E.Ss);const rv=ov;var Id=_e(9946);const iv=function(){return{stylePrefix:"com-",defaults:{},strict:!0,defaultOptions:{}}};var av=_e(1738),sv=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),np=function(){return np=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},np.apply(this,arguments)},qf=function(a,o,t){if(t||arguments.length===2)for(var e,n=0,r=o.length;n<r;n++)!e&&n in o||(e||(e=Array.prototype.slice.call(o,0,n)),e[n]=o[n]);return a.concat(e||Array.prototype.slice.call(o))},Gf=[["preview","Preview","preview"],["resize","Resize","resize"],["fullscreen","Fullscreen","fullscreen"],["copy","CopyComponent"],["paste","PasteComponent"],["canvas-move","CanvasMove"],["canvas-clear","CanvasClear"],["open-code","ExportTemplate","export-template"],["open-layers","OpenLayers","open-layers"],["open-styles","OpenStyleManager","open-sm"],["open-traits","OpenTraitManager","open-tm"],["open-blocks","OpenBlocks","open-blocks"],["open-assets","OpenAssets","open-assets"],["component-select","SelectComponent","select-comp"],["component-outline","SwitchVisibility","sw-visibility"],["component-offset","ShowOffset","show-offset"],["component-move","MoveComponent","move-comp"],["component-next","ComponentNext"],["component-prev","ComponentPrev"],["component-enter","ComponentEnter"],["component-exit","ComponentExit","select-parent"],["component-delete","ComponentDelete"],["component-style-clear","ComponentStyleClear"],["component-drag","ComponentDrag"]],Kf={preserveSelected:1},Yf=function(a){return function(o){return a.trigger("".concat(Hi,":start"),o)}},Xf=function(a){return function(o){return a.trigger(Hi,o)}},Jf=function(a,o,t){return t===void 0&&(t={}),function(e,n,r){setTimeout(function(){o.forEach(function(l){return l.set("status",l.get("selectable")?"selected":"")}),a.setSelected(o),o[0].emitUpdate()}),a.trigger("".concat(Hi,":end"),r),setTimeout(function(){return a.runDefault(Kf)}),(t.altMode||r.cancelled)&&a.set("_cmpDrag",1)}},lv=function(a){function o(t){var e=a.call(this,t,"Commands",iv())||this;e.CommandAbstract=Id.default,e.defaultCommands={},e.commands={},e.active={},e.events=av.A;var n=e.config,r=n.pStylePrefix,l=e.defaultCommands;for(var p in r&&(n.stylePrefix=r+n.stylePrefix),Object.keys(n.defaults).forEach(function(d){var g=n.defaults[d];g.id&&e.add(g.id,g)}),l["tlb-delete"]={run:function(d){return d.runCommand("core:component-delete")}},l["tlb-clone"]={run:function(d){d.runCommand("core:copy"),d.runCommand("core:paste",{action:"clone-component"})}},l["tlb-move"]={run:function(d,g,h){var m,w;h===void 0&&(h={});var k=d.getModel(),z=h.event,B=h.target,nt=(Array.isArray(B)?B:B?[B]:qf([],d.getSelectedAll(),!0)).map(function(Xe){var Un,Xn;return((Xn=(Un=Xe.delegate)===null||Un===void 0?void 0:Un.move)===null||Xn===void 0?void 0:Xn.call(Un,Xe))||Xe}).filter(Boolean),X=nt[nt.length-1],At=z?.type==="dragstart";if(!X?.get("draggable"))return k.logWarning("The element is not draggable");var It=h.mode||X.get("dmode")||k.get("dmode"),Wt=function(){return k.stopDefault(Kf)},oe=(0,C.includes)(["absolute","translate"],It);nt.forEach(function(Xe){return Xe.trigger("disable",{fromMove:!0})}),At?setTimeout(Wt,0):Wt();var ve=Yf(k),we=Xf(k),Ve=Jf(k,nt,{altMode:oe});if(oe)d.runCommand("core:component-drag",{guidesInfo:1,mode:It,target:X,onStart:ve,onDrag:we,onEnd:Ve,event:z});else{At&&((m=z?.dataTransfer)===null||m===void 0||m.setDragImage((w=X.view)===null||w===void 0?void 0:w.el,0,0));var Ze=d.Commands.get("move-comp");Ze.onStart=ve,Ze.onDrag=we,Ze.onEndMoveFromModel=Ve,Ze.initSorterFromModels(nt)}nt.filter(function(Xe){return Xe.get("selectable")}).forEach(function(Xe){return Xe.set("status","freezed-selected")})}},l["core:undo"]=function(d){return d.UndoManager.undo()},l["core:redo"]=function(d){return d.UndoManager.redo()},Gf.forEach(function(d){var g=d[2],h=_e(585)("./".concat(d[1])).default,m="core:".concat(d[0]);l[m]=h,g&&(l[g]=h,["run","stop"].forEach(function(w){t.on("".concat(w,":").concat(g),function(){for(var k=[],z=0;z<arguments.length;z++)k[z]=arguments[z];return t.trigger.apply(t,qf(["".concat(w,":").concat(m)],k,!1))})}))}),n.model=t.Canvas,l)e.add(p,l[p]);return e}return sv(o,a),o.prototype.add=function(t,e){var n=(0,C.isFunction)(e)?{run:e}:e;return n.stop||(n.noStop=!0),delete n.initialize,n.id=t,this.commands[t]=Id.default.extend(n),this},o.prototype.get=function(t){var e=this.commands[t];return(0,C.isFunction)(e)?(e=new e(this.config),this.commands[t]=e):e||this.em.logWarning("'".concat(t,"' command not found")),e},o.prototype.extend=function(t,e){e===void 0&&(e={});var n=this.get(t);if(n){var r=np(np({},n.constructor.prototype),e);this.add(t,r);var l=Gf.filter(function(p){return"core:".concat(p[0])===t&&p[2]})[0];l&&this.add(l[2],r)}return this},o.prototype.has=function(t){return!!this.commands[t]},o.prototype.getAll=function(){return this.commands},o.prototype.run=function(t,e){return e===void 0&&(e={}),this.runCommand(this.get(t),e)},o.prototype.stop=function(t,e){return e===void 0&&(e={}),this.stopCommand(this.get(t),e)},o.prototype.isActive=function(t){return this.getActive().hasOwnProperty(t)},o.prototype.getActive=function(){return this.active},o.prototype.runCommand=function(t,e){var n,r,l;if(e===void 0&&(e={}),t?.run){var p=this.em,d=this.config,g=t.id,h=p.Editor;if(!this.isActive(g)||e.force||!d.strict){var m=(r=(n=d.defaultOptions)===null||n===void 0?void 0:n[g])===null||r===void 0?void 0:r.run;(0,C.isFunction)(m)&&(e=m(e)),l=h&&t.callRun(h,e)}}return l},o.prototype.stopCommand=function(t,e){var n,r,l;if(e===void 0&&(e={}),t?.run){var p=this.em,d=this.config,g=t.id,h=p.Editor;if(this.isActive(g)||e.force||!d.strict){var m=(r=(n=d.defaultOptions)===null||n===void 0?void 0:n[g])===null||r===void 0?void 0:r.stop;(0,C.isFunction)(m)&&(e=m(e)),l=t.callStop(h,e)}}return l},o.prototype.create=function(t){return t.stop||(t.noStop=!0),new(Id.default.extend(t))(this.config)},o.prototype.__onRun=function(t,e){var n=this.em,r=this.events;n.on("".concat(r.runCommand).concat(t),e)},o.prototype.__onStop=function(t,e){var n=this.em,r=this.events;n.on("".concat(r.stopCommand).concat(t),e)},o.prototype.destroy=function(){this.defaultCommands={},this.commands={},this.active={}},o}(ct);const cv=lv;var uv=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Nd=function(){return Nd=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},Nd.apply(this,arguments)},Zf="contentEditable",op="data-toggle-move",pv=function(a){function o(t){var e=a.call(this,t)||this;(0,C.bindAll)(e,"__render"),e.opt=t,e.module=t.module,e.config=t.config||{},e.sorter=t.sorter||"",e.parentView=t.parentView;var n=e,r=n.model,l=n.pfx,p=n.ppfx,d=r.get("type")||"default";return e.className="".concat(l,"layer ").concat(l,"layer__t-").concat(d," no-select ").concat(p,"two-color"),e.inputNameCls="".concat(p,"layer-name"),e.clsTitleC="".concat(l,"layer-title-c"),e.clsTitle="".concat(l,"layer-title"),e.clsCaret="".concat(l,"layer-caret"),e.clsCount="".concat(l,"layer-count"),e.clsMove="".concat(l,"layer-move"),e.clsChildren="".concat(l,"layer-children"),e.clsNoChild="".concat(l,"layer-no-chld"),e.clsEdit="".concat(e.inputNameCls,"--edit"),e.clsNoEdit="".concat(e.inputNameCls,"--no-edit"),e.initComponent(),e}return uv(o,a),o.prototype.events=function(){var t;return(t={})["mousedown [".concat(op,"]")]="startSort",t["touchstart [".concat(op,"]")]="startSort",t["click [data-toggle-visible]"]="toggleVisibility",t["click [data-toggle-open]"]="toggleOpening",t["click [data-toggle-select]"]="handleSelect",t["mouseover [data-toggle-select]"]="handleHover",t["mouseout [data-toggle-select]"]="handleHoverOut",t["dblclick [data-name]"]="handleEdit",t["keydown [data-name]"]="handleEditKey",t["focusout [data-name]"]="handleEditEnd",t},o.prototype.template=function(t){var e=this,n=e.pfx,r=e.ppfx,l=e.config,p=e.clsNoEdit,d=e.module,g=e.opt,h=e.em,m=l.hidable,w=d.getComponents(t).length,k=w?"":this.clsNoChild,z="".concat(this.clsTitle," ").concat(k),B="".concat(this.clsTitleC),nt="".concat(this.inputNameCls," ").concat(p," ").concat(r,"no-app"),X=g.level||0,At="".concat(10*X,"px"),It=t.getName(),Wt=t.getIcon(),oe="".concat(n,"layer"),ve=(h?.getConfig()).icons,we=ve.move,Ve=ve.eye,Ze=ve.eyeOff,Xe=ve.chevron;return`
      <div class="`.concat(n,"layer-item ").concat(r,`one-bg" data-toggle-select>
        <div class="`).concat(n,`layer-item-left">
          `).concat(m?'<i class="'.concat(n,`layer-vis" data-toggle-visible>
                <i class="`).concat(n,'layer-vis-on">').concat(Ve,`</i>
                <i class="`).concat(n,'layer-vis-off">').concat(Ze,`</i>
              </i>`):"",`
          <div class="`).concat(B,`">
            <div class="`).concat(z,'" style="padding-left: ').concat(At,`">
              <div class="`).concat(n,'layer-title-inn" title="').concat(It,`">
                <i class="`).concat(this.clsCaret,'" data-toggle-open>').concat(Xe,`</i>
                  `).concat(Wt?'<span class="'.concat(oe,'__icon">').concat(Wt,"</span>"):"",`
                <span class="`).concat(nt,'" data-name>').concat(It,`</span>
              </div>
            </div>
          </div>
        </div>
        <div class="`).concat(n,`layer-item-right">
          <div class="`).concat(this.clsCount,'" data-count>').concat(w||"",`</div>
          <div class="`).concat(this.clsMove,'" ').concat(op,">").concat(we||"",`</div>
        </div>
      </div>
      <div class="`).concat(this.clsChildren,`"></div>
    `)},Object.defineProperty(o.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"ppfx",{get:function(){return this.em.getConfig().stylePrefix},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"pfx",{get:function(){return this.config.stylePrefix},enumerable:!1,configurable:!0}),o.prototype.initComponent=function(){var t=this,e=this.model,n=this.config.onInit,r=e.components();this.listenTo(r,"remove add reset",this.checkChildren),[["change:status",this.updateStatus],["change:open",this.updateOpening],["change:layerable",this.updateLayerable],["change:style:display",this.updateVisibility],["change:draggable",this.updateMove],["rerender:layer",this.render],["change:name change:custom-name",this.updateName]].forEach(function(l){return t.listenTo(e,l[0],l[1])}),this.$el.data("model",e),this.$el.data("collection",r),e.viewLayer=this,n.bind(this)({component:e,render:this.__render,listenTo:this.listenTo})},o.prototype.updateName=function(){this.getInputName().innerText=this.model.getName()},o.prototype.getVisibilityEl=function(){return this.getItemContainer().find("[data-toggle-visible]")},o.prototype.updateVisibility=function(){var t=this,e=t.pfx,n=t.model,r=t.module,l="".concat(e,"layer-hidden"),p=r.isVisible(n)?"removeClass":"addClass";this.$el[p](l),this.getVisibilityEl()[p]("".concat(e,"layer-off"))},o.prototype.updateMove=function(){var t=this.model,e=this.config,n=this.getItemContainer().find("[".concat(op,"]"))[0];if(n){var r=t.get("draggable")&&e.sortable;n.style.display=r?"":"none"}},o.prototype.toggleVisibility=function(t){t?.stopImmediatePropagation();var e=this.module,n=this.model;e.setVisible(n,!e.isVisible(n))},o.prototype.handleEdit=function(t){t?.stopPropagation();var e=this,n=e.em,r=e.$el,l=e.clsNoEdit,p=e.clsEdit,d=this.getInputName();d[Zf]="true",d.focus(),document.execCommand("selectAll",!1),n.setEditing(!0),r.find(".".concat(this.inputNameCls)).removeClass(l).addClass(p)},o.prototype.handleEditKey=function(t){t.stopPropagation(),((0,St.v$)(t)||(0,St.Ci)(t))&&this.handleEditEnd(t)},o.prototype.handleEditEnd=function(t){t?.stopPropagation();var e=this,n=e.em,r=e.$el,l=e.clsNoEdit,p=e.clsEdit,d=e.model,g=this.getInputName(),h=g.textContent;g.scrollLeft=0,g[Zf]="false",d.setName(h),n.setEditing(!1),r.find(".".concat(this.inputNameCls)).addClass(l).removeClass(p),this.updateName()},o.prototype.getInputName=function(){return this.inputName||(this.inputName=this.el.querySelector(".".concat(this.inputNameCls))),this.inputName},o.prototype.updateOpening=function(){var t=this,e=t.$el,n=t.model,r=t.pfx,l="open",p="".concat(r,"layer-open"),d=this.getCaret();this.module.isOpen(n)?(e.addClass(l),d.addClass(p)):(e.removeClass(l),d.removeClass(p))},o.prototype.toggleOpening=function(t){var e=this.model,n=this.module;t?.stopImmediatePropagation(),e.get("components").length&&n.setOpen(e,!n.isOpen(e))},o.prototype.handleSelect=function(t){t?.stopPropagation();var e=this.module,n=this.model;e.setLayerData(n,{selected:!0},{event:t})},o.prototype.handleHover=function(t){t?.stopPropagation();var e=this.module,n=this.model;e.setLayerData(n,{hovered:!0})},o.prototype.handleHoverOut=function(t){t?.stopPropagation();var e=this.module,n=this.model;e.setLayerData(n,{hovered:!1})},o.prototype.startSort=function(t){var e,n,r;t.stopPropagation();var l=this,p=l.em,d=l.sorter,g=l.model;if((!t.button||t.button===0)&&d){var h=((n=(e=g.delegate)===null||e===void 0?void 0:e.move)===null||n===void 0?void 0:n.call(e,g))||g;d.eventHandlers=Nd({legacyOnStartSort:Yf(p),legacyOnMoveClb:Xf(p),legacyOnEndMove:Jf(p,[h])},d.eventHandlers);var m=((r=h.viewLayer)===null||r===void 0?void 0:r.el)||t.target;d.startSort([{element:m}])}},o.prototype.updateStatus=function(){wn.prototype.updateStatus.apply(this,[{avoidHover:!this.config.highlightHover,noExtHl:!0}])},o.prototype.getItemContainer=function(){return this.$el.children("[data-toggle-select]")},o.prototype.checkChildren=function(){var t=this,e=t.model,n=t.clsNoChild,r=t.module,l=r.getComponents(e).length,p=this.getItemContainer(),d=p.find(".".concat(this.clsTitle)),g=p.find("[data-count]");d[l?"removeClass":"addClass"](n),g.html("".concat(l||"")),!l&&r.setOpen(e,!1)},o.prototype.getCaret=function(){return this.caret&&this.caret.length||(this.caret=this.getItemContainer().find(".".concat(this.clsCaret))),this.caret},o.prototype.setRoot=function(t){var e,n=(0,C.isString)(t)?(e=this.em.getWrapper())===null||e===void 0?void 0:e.find(t)[0]:t;n&&(this.stopListening(),this.model=n,this.initComponent(),this._rendered&&this.render())},o.prototype.updateLayerable=function(){(this.parentView||this).render()},o.prototype.__clearItems=function(){var t;(t=this.items)===null||t===void 0||t.remove()},o.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return E.Ss.prototype.remove.apply(this,t),delete this.model.viewLayer,this.__clearItems(),this},o.prototype.render=function(){var t=this,e=t.model,n=t.config,r=t.pfx,l=t.ppfx,p=t.opt,d=t.sorter;this.__clearItems();var g=p.opened,h=p.module,m=p.ItemView,w=!h.__isLayerable(e),k=this.$el.empty(),z=p.level+1;delete this.inputName,this.items=new rv({ItemView:m,collection:e.get("components"),config:n,sorter:d,opened:g,parentView:this,parent:e,level:z,module:h});var B=this.items.render().$el;return n.showWrapper||z!==1?(k.html(this.template(e)),k.find(".".concat(this.clsChildren)).append(B)):k.append(B),!h.isVisible(e)&&(this.className+=" ".concat(r,"hide")),w&&(this.className+=" ".concat(l,"hidden")),k.attr("class",this.className),this.updateStatus(),this.updateOpening(),this.updateVisibility(),this.updateMove(),this.__render(),this._rendered=!0,this},o.prototype.__render=function(){var t=this,e=t.model,n=t.config,r={component:e,el:t.el};n.onRender.bind(this)(r),this.em.trigger("layer:render",r)},o}(E.Ss);const dv=pv;var fv=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Vd=function(){return Vd=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},Vd.apply(this,arguments)},Qf="layer",Rd="".concat(Qf,":"),th="".concat(Rd,"root"),eh="".concat(Rd,"component"),hv="".concat(Rd,"custom"),gv={all:Qf,root:th,component:eh,custom:hv},Fd={mediaText:""},vv=["open","status","locked","custom-name","components","classes"].map(function(a){return"".concat(jt.I.update,":").concat(a)}).join(" "),mv=function(a){function o(t){var e=a.call(this,t,"LayerManager",Jg())||this;return e.events=gv,(0,C.bindAll)(e,"componentChanged","__onRootChange","__onComponent"),e.model=new ft.A(e,{opened:{}}),e.config.stylePrefix=e.config.pStylePrefix,e}return fv(o,a),o.prototype.onLoad=function(){var t=this,e=this,n=e.em,r=e.config,l=e.model;l.listenTo(n,"component:selected",this.componentChanged),l.on("change:root",this.__onRootChange),l.listenTo(n,vv,this.__onComponent),this.componentChanged(),l.listenToOnce(n,"load",function(){t.setRoot(r.root),t.__appendTo()})},o.prototype.setRoot=function(t){var e=this.em.getWrapper(),n=(0,q.isComponent)(t)?t:e;t&&(0,C.isString)(t)&&(0,q.hasWin)()&&(n=e.find(t)[0]||e);var r=this.__getLayerFromComponent(n);return this.model.set("root",r),r},o.prototype.getRoot=function(){return this.model.get("root")},o.prototype.getComponents=function(t){var e=this;return t.components().map(function(n){return e.__getLayerFromComponent(n)}).filter(function(n){return e.__isLayerable(n)})},o.prototype.setOpen=function(t,e){t.set("open",e)},o.prototype.isOpen=function(t){return!!t.get("open")},o.prototype.setVisible=function(t,e){var n="__prev-display",r=t.getStyle(Fd),l=r.display;if(e){var p=t.get(n);delete r.display,p&&(r.display=p,t.unset(n))}else l&&t.set(n,l),r.display="none";t.setStyle(r,Fd),this.updateLayer(t),this.em.trigger("component:toggled")},o.prototype.isVisible=function(t){return(e=t.getStyle(Fd))===void 0&&(e={}),(e.display||"").trim().indexOf("none")!==0;var e},o.prototype.setLocked=function(t,e){t.set("locked",e)},o.prototype.isLocked=function(t){return!!t.get("locked")},o.prototype.setName=function(t,e){t.set("custom-name",e)},o.prototype.getName=function(t){return t.getName()},o.prototype.getLayerData=function(t){var e=t.get("status");return{name:t.getName(),open:this.isOpen(t),selected:e==="selected",hovered:e==="hovered",visible:this.isVisible(t),locked:this.isLocked(t),components:this.getComponents(t)}},o.prototype.setLayerData=function(t,e,n){var r;n===void 0&&(n={});var l=this.em,p=this.config,d=e.open,g=e.selected,h=e.hovered,m=e.visible,w=e.locked,k=e.name,z=Vd({fromLayers:!0},n);if((0,q.isDef)(d)&&this.setOpen(t,d),(0,q.isDef)(g))if(g){l.setSelected(t,z);var B=p.scrollCanvas;B&&((r=t.views)===null||r===void 0||r.forEach(function(nt){return nt.scrollIntoView(B)}))}else l.removeSelected(t,z);(0,q.isDef)(h)&&p.showHover&&(h?l.setHovered(t,z):l.setHovered(null,z)),(0,q.isDef)(m)&&m!==this.isVisible(t)&&this.setVisible(t,m),(0,q.isDef)(w)&&this.setLocked(t,w),(0,q.isDef)(k)&&this.setName(t,k)},o.prototype.componentChanged=function(t,e){var n;if(e===void 0&&(e={}),!e.fromLayers){var r=this.em,l=this.config.scrollLayers,p=this.model.get("opened"),d=r.getSelected(),g=d?.parent();for(var h in p)p[h].set("open",!1),delete p[h];for(;g;)g.set("open",!0),p[g.cid]=g,g=g.parent();if(d&&l){var m=(n=d.viewLayer)===null||n===void 0?void 0:n.el;m?.scrollIntoView(l)}}},o.prototype.getAll=function(){return this.view},o.prototype.render=function(){var t,e,n=this.config,r=this.model,l=dv.extend(n.extend);return this.view=new l({el:(t=this.view)===null||t===void 0?void 0:t.el,ItemView:l,level:0,config:n,opened:r.get("opened"),model:this.getRoot(),module:this}),(e=this.view)===null||e===void 0?void 0:e.render().el},o.prototype.destroy=function(){var t;(t=this.view)===null||t===void 0||t.remove()},o.prototype.__onRootChange=function(){var t,e=this.getRoot();(t=this.view)===null||t===void 0||t.setRoot(e),this.em.trigger(th,e),this.__trgCustom()},o.prototype.__getLayerFromComponent=function(t){var e,n;return((n=(e=t.delegate)===null||e===void 0?void 0:e.layer)===null||n===void 0?void 0:n.call(e,t))||t},o.prototype.__onComponent=function(t){this.updateLayer(t)},o.prototype.__isLayerable=function(t){var e=t.tagName;return(!this.config.hideTextnode||!t.isInstanceOf("textnode")&&e!=="br")&&t.get("layerable")},o.prototype.__trgCustom=function(t){var e=this,n=e.__ctn,r=e.em,l=e.events;this.__ctn=n||t?.container,r.trigger(l.custom,{container:this.__ctn,root:this.getRoot()})},o.prototype.updateLayer=function(t,e){this.em.trigger(eh,t,e)},o}(ct);const yv=mv,bv=function(){return{assets:[],noAssets:"",stylePrefix:"am-",upload:"",uploadName:"files",headers:{},params:{},credentials:"include",multiUpload:!0,multiUploadSuffix:"[]",autoAdd:!0,customFetch:void 0,uploadFile:void 0,embedAsBase64:!0,handleAdd:void 0,beforeUpload:void 0,showUrlInput:!0,custom:!1,dropzone:!1,openAssetsOnDrop:!0,dropzoneContent:""}};var _v=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),nh=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return _v(o,a),o.getDefaults=function(){return(0,C.result)(this.prototype,"defaults")},o.prototype.defaults=function(){return{type:"",src:""}},o.prototype.getType=function(){return this.get("type")},o.prototype.getSrc=function(){return this.get("src")||""},o.prototype.getFilename=function(){return this.getSrc().split("/").pop().split("?").shift()},o.prototype.getExtension=function(){return this.getFilename().split(".").pop()},o}(E.Kx);const Hd=nh;nh.prototype.idAttribute="src";var wv=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),rp=function(){return rp=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},rp.apply(this,arguments)};const xv=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return wv(o,a),o.prototype.defaults=function(){return rp(rp({},Hd.getDefaults()),{type:"image",unitDim:"px",height:0,width:0})},o}(Hd);var Cv=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Sv=function(a){function o(t){var e=a.call(this,t)||this;e.options=t,e.collection=t.collection;var n=t.config||{};e.config=n,e.pfx=n.stylePrefix||"",e.ppfx=n.pStylePrefix||"",e.em=n.em,e.className=e.pfx+"asset",e.listenTo(e.model,"destroy remove",e.remove),e.model.view=e;var r=e.init&&e.init.bind(e);return r&&r(t),e}return Cv(o,a),o.prototype.__getBhv=function(){var t=this.em,e=t?.Assets;return e?.__getBehaviour()||{}},o.prototype.template=function(t,e){var n=this.pfx;return`
      <div class="`.concat(n,`preview-cont">
        `).concat(this.getPreview(),`
      </div>
      <div class="`).concat(n,`meta">
        `).concat(this.getInfo(),`
      </div>
      <div class="`).concat(n,`close" data-toggle="asset-remove">
        &Cross;
      </div>
    `)},o.prototype.updateTarget=function(t){t&&t.set&&(t.set("attributes",(0,C.clone)(t.get("attributes"))),t.set("src",this.model.get("src")))},o.prototype.getPreview=function(){return""},o.prototype.getInfo=function(){return""},o.prototype.render=function(){var t=this.el;return t.innerHTML=this.template(this,this.model),t.className=this.className,this},o}(E.Ss);const Ov=Sv;var Tv=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),oh=function(a,o){return Object.defineProperty?Object.defineProperty(a,"raw",{value:o}):a.raw=o,a},rh=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return Tv(o,a),o.prototype.getPreview=function(){var t=this,e=t.pfx,n=t.ppfx,r=t.model.get("src");return it(ih||(ih=oh([`
      <div class="`,`preview" style="background-image: url('`,`');"></div>
      <div class="`,"preview-bg ",`checker-bg"></div>
    `],[`
      <div class="`,`preview" style="background-image: url('`,`');"></div>
      <div class="`,"preview-bg ",`checker-bg"></div>
    `])),e,r,e,n)},o.prototype.getInfo=function(){var t=this.pfx,e=this.model,n=e.get("name"),r=e.get("width"),l=e.get("height"),p=e.get("unitDim"),d=r&&l?"".concat(r,"x").concat(l).concat(p):"";return n=n||e.getFilename(),it(ah||(ah=oh([`
      <div class="`,'name">',`</div>
      <div class="`,'dimensions">',`</div>
    `],[`
      <div class="`,'name">',`</div>
      <div class="`,'dimensions">',`</div>
    `])),t,n,t,d)},o.prototype.init=function(t){var e=this.pfx;this.className+=" ".concat(e,"asset-image")},o.prototype.onClick=function(){var t=this.model,e=this.pfx,n=this.__getBhv().select,r=this.config.onClick,l=this.collection;l.trigger("deselectAll"),this.$el.addClass(e+"highlight"),(0,C.isFunction)(n)?n(t,!1):(0,C.isFunction)(r)?r(t):this.updateTarget(l.target)},o.prototype.onDblClick=function(){var t=this.em,e=this.model,n=this.__getBhv().select,r=this.config.onDblClick,l=this.collection,p=l.target,d=l.onSelect;(0,C.isFunction)(n)?n(e,!0):(0,C.isFunction)(r)?r(e):(this.updateTarget(p),t?.Modal.close()),(0,C.isFunction)(d)&&d(e)},o.prototype.onRemove=function(t){t.stopImmediatePropagation(),this.model.collection.remove(this.model)},o}(Ov);const Pv=rh;var ih,ah;rh.prototype.events={"click [data-toggle=asset-remove]":"onRemove",click:"onClick",dblclick:"onDblClick"};var ip=function(){return ip=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},ip.apply(this,arguments)},Ev={types:[],initialize:function(a,o){var t=this;o===void 0&&(o={});var e=o.em;this.em=e,this.opts=o,this.model=function(r,l){var p,d,g;if(r===void 0&&(r={}),l===void 0&&(l={}),r&&r.type){var h=t.getBaseType();p=(g=t.getType(r.type))?g.model:h.model,d=g?g.view:h.view}else{var m=t.recognizeType(r);p=(g=m.type).model,d=g.view,r=m.attributes}var w=new p(r,ip(ip({},l),{em:e}));return w.typeView=d,t.model.prototype=p.prototype,w};var n=this.init&&this.init.bind(this);n&&n()},recognizeType:function(a){for(var o=this.getTypes(),t=0;t<o.length;t++){var e=o[t],n=e.isType(a);if(n=typeof n=="boolean"&&n?{type:e.id}:n)return{type:e,attributes:n}}return{type:this.getBaseType(),attributes:a}},getBaseType:function(){var a=this.getTypes();return a[a.length-1]},getTypes:function(){return this.types},getType:function(a){for(var o=this.getTypes(),t=0;t<o.length;t++){var e=o[t];if(e.id===a)return e}},addType:function(a,o){var t=this.getType(a),e=this.getBaseType(),n=t?t.model:e.model,r=t?t.view:e.view,l=o.model,p=o.view,d=o.isType;l=l instanceof E.Kx||(0,C.isFunction)(l)?l:n.extend(l||{}),p=p instanceof E.Ss||(0,C.isFunction)(p)?p:r.extend(p||{}),!this.extendViewApi||o.model||o.view||(p=p.extend(o)),t?(t.model=l,t.view=p,t.isType=d||t.isType):(o.id=a,o.model=l,o.view=p,o.isType=d||function(g){if(g&&g.type==a)return!0},this.getTypes().unshift(o))}};const sh=Ev;var kv=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),lh=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return kv(o,a),o}(E.pM.extend(sh));const Ud=lh;var zd;lh.prototype.types=[{id:"image",model:xv,view:Pv,isType:function(a){return typeof a=="string"?{type:"image",src:a}:a}}],function(a){a.add="asset:add",a.remove="asset:remove",a.removeBefore="asset:remove:before",a.update="asset:update",a.open="asset:open",a.close="asset:close",a.uploadStart="asset:upload:start",a.uploadEnd="asset:upload:end",a.uploadError="asset:upload:error",a.uploadResponse="asset:upload:response",a.custom="asset:custom",a.all="asset"}(zd||(zd={}));const ch=zd;var Av=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),uh=function(a){function o(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.options=t,e.config=t.config,e.pfx=e.config.stylePrefix||"",e.ppfx=e.config.pStylePrefix||"",e.em=e.config.em;var n=e.collection;return e.listenTo(n,"reset",e.renderAssets),e.listenTo(n,"add",e.addToAsset),e.listenTo(n,"remove",e.removedAsset),e.listenTo(n,"deselectAll",e.deselectAll),e}return Av(o,a),o.prototype.template=function(t){var e=t.pfx,n=t.ppfx,r=t.em,l="";return this.config.showUrlInput&&(l=`
          <form class="`.concat(e,`add-asset">
            <div class="`).concat(n,"field ").concat(e,`add-field">
              <input placeholder="`).concat(r?.t("assetManager.inputPlh"),`"/>
            </div>
            <button class="`).concat(n,'btn-prim">').concat(r?.t("assetManager.addButton"),`</button>
            <div style="clear:both"></div>
          </form>
      `)),`
    <div class="`.concat(e,`assets-cont">
      <div class="`).concat(e,`assets-header">
        `).concat(l,`
      </div>
      <div class="`).concat(e,`assets" data-el="assets"></div>
      <div style="clear:both"></div>
    </div>
    `)},o.prototype.handleSubmit=function(t){t.preventDefault();var e=this.getAddInput(),n=e&&e.value.trim(),r=this.config.handleAdd;if(n){e.value="";var l=this.getAssetsEl();l&&(l.scrollTop=0),r?r.bind(this)(n):this.options.globalCollection.add(n,{at:0})}},o.prototype.getAssetsEl=function(){return this.el.querySelector(".".concat(this.pfx,"assets"))},o.prototype.getAddInput=function(){return this.inputUrl&&this.inputUrl.value||(this.inputUrl=this.el.querySelector(".".concat(this.pfx,"add-asset input"))),this.inputUrl},o.prototype.removedAsset=function(t){this.collection.length||this.toggleNoAssets()},o.prototype.addToAsset=function(t){this.collection.length==1&&this.toggleNoAssets(!0),this.addAsset(t)},o.prototype.addAsset=function(t,e){e===void 0&&(e=null);var n=e,r=this.collection,l=this.config,p=new t.typeView({model:t,collection:r,config:l}).render().el;if(n)n.appendChild(p);else{var d=this.getAssetsEl();d&&d.insertBefore(p,d.firstChild)}return p},o.prototype.toggleNoAssets=function(t){t===void 0&&(t=!1);var e=this.$el.find(".".concat(this.pfx,"assets"));if(t)e.empty();else{var n=this.config.noAssets;n&&e.append(n)}},o.prototype.deselectAll=function(){var t=this.pfx;this.$el.find(".".concat(t,"highlight")).removeClass("".concat(t,"highlight"))},o.prototype.renderAssets=function(){var t=this,e=document.createDocumentFragment(),n=this.$el.find(".".concat(this.pfx,"assets"));n.empty(),this.toggleNoAssets(!!this.collection.length),this.collection.each(function(r){return t.addAsset(r,e)}),n.append(e)},o.prototype.render=function(){var t=this.options.fu.render().el;return this.$el.empty(),this.$el.append(t).append(this.template(this)),this.el.className="".concat(this.ppfx,"asset-manager"),this.renderAssets(),this},o}(E.Ss);const jv=uh;uh.prototype.events={submit:"handleSubmit"};var Mv=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Dv=function(a,o){return Object.defineProperty?Object.defineProperty(a,"raw",{value:o}):a.raw=o,a},Lv=function(a){function o(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.options=t;var n=t.config||{};e.module=t.module,e.config=n,e.em=e.config.em,e.pfx=n.stylePrefix||"",e.ppfx=n.pStylePrefix||"",e.target=e.options.globalCollection||{},e.uploadId=e.pfx+"uploadFile",e.disabled=n.disableUpload!==void 0?n.disableUpload:!n.upload&&!n.embedAsBase64,e.multiUpload=n.multiUpload===void 0||n.multiUpload;var r=n.uploadFile;return r?e.uploadFile=r.bind(e):!n.upload&&n.embedAsBase64&&(e.uploadFile=o.embedAsBase64),e.delegateEvents(),e}return Mv(o,a),o.prototype.template=function(t){var e=t.pfx,n=t.title,r=t.uploadId,l=t.disabled,p=t.multiUpload;return it(ph||(ph=Dv([`
      <form>
        <div id="`,'title">',`</div>
        <input
          data-input
          type="file"
          id="`,`"
          name="file"
          accept="*/*"
          `,`
          `,`
        />
        <div style="clear:both;"></div>
      </form>
    `],[`
      <form>
        <div id="`,'title">',`</div>
        <input
          data-input
          type="file"
          id="`,`"
          name="file"
          accept="*/*"
          `,`
          `,`
        />
        <div style="clear:both;"></div>
      </form>
    `])),e,n,r,l?"disabled":"",p?"multiple":"")},o.prototype.events=function(){return{"change [data-input]":"uploadFile"}},o.prototype.onUploadStart=function(){var t=this.module;t?.__propEv(t.events.uploadStart)},o.prototype.onUploadEnd=function(t){var e=this.$el,n=this.module;n?.__propEv(n.events.uploadEnd,t);var r=e.find("input");r&&r.val("")},o.prototype.onUploadError=function(t){var e=this.module;console.error(t),this.onUploadEnd(t),e?.__propEv(e.events.uploadError,t)},o.prototype.onUploadResponse=function(t,e){var n,r=this,l=r.module,p=r.config,d=r.target;try{n=typeof t=="string"?JSON.parse(t):t}catch{n=t}l?.__propEv(l.events.uploadResponse,n),p.autoAdd&&d&&d.add(n.data,{at:0}),this.onUploadEnd(t),e?.(n)},o.prototype.uploadFile=function(t,e){var n=this,r=t.dataTransfer?t.dataTransfer.files:t.target.files,l=this.config,p=l.beforeUpload;if((p&&p(r))!==!1){var d=new FormData,g=l.params,h=l.customFetch,m=l.fetchOptions;for(var w in g)d.append(w,g[w]);if(this.multiUpload)for(var k=0;k<r.length;k++)d.append("".concat(l.uploadName).concat(l.multiUploadSuffix),r[k]);else r.length&&d.append(l.uploadName,r[0]);var z=l.upload,B=l.headers,nt="X-Requested-With";if(B[nt]===void 0&&(B[nt]="XMLHttpRequest"),z){this.onUploadStart();var X={method:"post",credentials:l.credentials||"include",headers:B,body:d},At=m?.(X)||X;return(h?h(z,At):Dl(z,At).then(function(It){return(It.status/200|0)==1?It.text():It.text().then(function(Wt){return Promise.reject(Wt)})})).then(function(It){return n.onUploadResponse(It,e)}).catch(function(It){return n.onUploadError(It)})}}},o.prototype.initDrop=function(){var t=this;if(!this.uploadForm){this.uploadForm=this.$el.find("form").get(0);var e=this.uploadForm;"draggable"in e&&(this.uploadForm.ondragover=function(){return e.className=t.pfx+"hover",!1},this.uploadForm.ondragleave=function(){return e.className="",!1},this.uploadForm.ondrop=function(n){e.className="",n.preventDefault(),t.uploadFile(n)})}},o.prototype.initDropzone=function(t){var e=this,n=0,r=this.config,l=t.model,p=t.el,d=l.Editor,g=l.Canvas.getBody(),h=this.ppfx,m="".concat(h,"dropzone-active"),w="".concat(h,"dropzone"),k=function(){p.className=p.className.replace(m,"").trim(),n=0},z=function(){return n||(p.className+=" ".concat(m),n=1),!1},B=function(){return k(),!1},nt=function(X){if(k(),X.preventDefault(),X.stopPropagation(),e.uploadFile(X),r.openAssetsOnDrop&&d){var At=d.getSelected();d.runCommand("open-assets",{target:At,onSelect:function(){d.Modal.close(),d.AssetManager.setTarget(null)}})}return!1};t.$el.append('<div class="'.concat(w,'">').concat(r.dropzoneContent,"</div>")),k(),"draggable"in p&&[p,g].forEach(function(X){X.ondragover=z,X.ondragleave=B,X.ondrop=nt})},o.prototype.render=function(){var t=this,e=t.$el,n=t.pfx,r=t.em;return e.html(this.template({title:r&&r.t("assetManager.uploadTitle"),uploadId:this.uploadId,disabled:this.disabled,multiUpload:this.multiUpload,pfx:n})),this.initDrop(),e.attr("class",n+"file-uploader"),this},o.embedAsBase64=function(t,e){var n=this,r=t.dataTransfer?t.dataTransfer.files:t.target.files,l={data:[]};if(FileReader){for(var p=[],d=/^(.+)\/(.+)$/,g=function(w){var k=new Promise(function(z,B){var nt=new FileReader;nt.addEventListener("load",function(X){var At,It=w.name,Wt=d.exec(w.type);if((At=Wt?Wt[1]:w.type)==="image"){var oe={src:nt.result,name:It,type:At,height:0,width:0},ve=new Image;ve.addEventListener("error",function(we){B(we)}),ve.addEventListener("load",function(){oe.height=ve.height,oe.width=ve.width,z(oe)}),ve.src=oe.src}else z(At?{src:nt.result,name:It,type:At}:nt.result)}),nt.addEventListener("error",function(X){B(X)}),nt.addEventListener("abort",function(X){B("Aborted")}),nt.readAsDataURL(w)});p.push(k)},h=0,m=r;h<m.length;h++)g(m[h]);return Promise.all(p).then(function(w){l.data=w,n.onUploadResponse(l,e)},function(w){n.onUploadError(w)})}this.onUploadError(new Error("Unsupported platform, FileReader is not defined"))},o}(E.Ss);const Iv=Lv;var ph,Nv=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Il=function(){return Il=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},Il.apply(this,arguments)},dh=function(a,o,t){if(t||arguments.length===2)for(var e,n=0,r=o.length;n<r;n++)!e&&n in o||(e||(e=Array.prototype.slice.call(o,0,n)),e[n]=o[n]);return a.concat(e||Array.prototype.slice.call(o))},Mc="open-assets",Vv=function(a){function o(t){var e=a.call(this,t,"AssetManager",new Ud([],t),ch,bv())||this;e.storageKey="assets",e.Asset=Hd,e.Assets=Ud,e.events=ch;var n=e,r=n.all,l=n.config;e.assetsVis=new Ud([]);var p=l.pStylePrefix;return p&&(l.stylePrefix="".concat(p).concat(l.stylePrefix)),r.on("add",function(d){return e.getAllVisible().add(d)}),r.on("remove",function(d){return e.getAllVisible().remove(d)}),e.__onAllEvent=(0,C.debounce)(function(){return e.__trgCustom()},0),e}return Nv(o,a),o.prototype.open=function(t){t===void 0&&(t={}),this.em.Commands.run(Mc,Il({types:["image"],select:function(){}},t))},o.prototype.close=function(){this.em.Commands.stop(Mc)},o.prototype.isOpen=function(){var t=this.em.Commands;return!!t?.isActive(Mc)},o.prototype.add=function(t,e){return e===void 0&&(e={}),e.at===void 0&&(e.at=0),this.all.add(t,e)},o.prototype.get=function(t){return this.all.where({src:t})[0]||null},o.prototype.getAll=function(){return this.all},o.prototype.getAllVisible=function(){return this.assetsVis},o.prototype.remove=function(t,e){return this.__remove(t,e)},o.prototype.store=function(){return this.getProjectData()},o.prototype.load=function(t){return this.loadProjectData(t)},o.prototype.getContainer=function(){var t;return this.__getBehaviour().container||((t=this.am)===null||t===void 0?void 0:t.el)},o.prototype.getAssetsEl=function(){var t;return(t=this.am)===null||t===void 0?void 0:t.el.querySelector("[data-el=assets]")},o.prototype.render=function(t){if(!this.getConfig().custom){var e=t||this.getAll().models;if(!this.am){var n=this.__viewParams();n.fu=this.FileUploader(),this.am=new jv(Il({},n)),this.am.render()}return this.assetsVis.reset(e),this.getContainer()}},o.prototype.__viewParams=function(){return{collection:this.assetsVis,globalCollection:this.all,config:this.config,module:this,fu:void 0}},o.prototype.addType=function(t,e){this.getAll().addType(t,e)},o.prototype.getType=function(t){return this.getAll().getType(t)},o.prototype.getTypes=function(){return this.getAll().getTypes()},o.prototype.AssetsView=function(){return this.am},o.prototype.FileUploader=function(){return this.fu||(this.fu=new Iv(this.__viewParams())),this.fu},o.prototype.onLoad=function(){var t=this;this.getAll().reset(this.config.assets);var e=this.em,n=this.events;e.Commands.__onRun(Mc,function(){return t.__propEv(n.open)}),e.Commands.__onStop(Mc,function(){return t.__propEv(n.close)})},o.prototype.postRender=function(t){var e;this.config.dropzone&&((e=this.fu)===null||e===void 0||e.initDropzone(t))},o.prototype.setTarget=function(t){this.assetsVis.target=t},o.prototype.onSelect=function(t){this.assetsVis.onSelect=t},o.prototype.onClick=function(t){this.config.onClick=t},o.prototype.onDblClick=function(t){this.config.onDblClick=t},o.prototype.__propEv=function(t){for(var e,n,r=[],l=1;l<arguments.length;l++)r[l-1]=arguments[l];(e=this.em).trigger.apply(e,dh([t],r,!1)),(n=this.getAll()).trigger.apply(n,dh([t],r,!1))},o.prototype.__trgCustom=function(){var t=this.__getBehaviour(),e=this.getConfig().custom;(t.container||e.open)&&this.em.trigger(this.events.custom,this.__customData())},o.prototype.__customData=function(){var t=this,e=this.__getBehaviour();return{am:this,open:this.isOpen(),assets:this.getAll().models,types:e.types||[],container:e.container,close:function(){return t.close()},remove:function(n,r){return t.remove(n,r)},select:function(n,r){var l=t.add(n);(0,C.isFunction)(e.select)&&e.select(l,r)},options:e.options||{}}},o.prototype.__behaviour=function(t){return t===void 0&&(t={}),this._bhv=Il(Il({},this._bhv||{}),t)},o.prototype.__getBehaviour=function(t){return t===void 0&&(t={}),this._bhv||{}},o.prototype.destroy=function(){var t,e;this.all.stopListening(),this.all.reset(),this.assetsVis.stopListening(),this.assetsVis.reset(),(t=this.fu)===null||t===void 0||t.remove(),(e=this.am)===null||e===void 0||e.remove(),this._bhv={}},o}(Tt);const Rv=Vv,Fv=function(){return{default:"",devices:[{id:"desktop",name:"Desktop",width:""},{id:"tablet",name:"Tablet",width:"770px",widthMedia:"992px"},{id:"mobileLandscape",name:"Mobile landscape",width:"568px",widthMedia:"768px"},{id:"mobilePortrait",name:"Mobile portrait",width:"320px",widthMedia:"480px"}]}};var Hv=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const fh=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return Hv(o,a),o.prototype.defaults=function(){return{name:"",width:null,height:"",widthMedia:null,priority:null}},o.prototype.initialize=function(){var t=this;this.get("widthMedia")===null&&this.set("widthMedia",this.get("width")),this.get("width")===null&&this.set("width",this.get("widthMedia")),!this.get("priority")&&this.set("priority",parseFloat(this.get("widthMedia"))||0),["width","height","widthMedia"].forEach(function(e){return t.checkUnit(e)})},o.prototype.checkUnit=function(t){var e=this.get(t)||"";(parseFloat(e)||0).toString()===e.toString()&&this.set(t,"".concat(e,"px"))},o.prototype.getName=function(){return this.get("name")||this.get("id")},o.prototype.getWidthMedia=function(){return this.get("widthMedia")||""},o}(E.Kx);var Uv=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),hh=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return Uv(o,a),o}(E.pM);const gh=hh;hh.prototype.model=fh;var zv=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Bv=function(a,o){return Object.defineProperty?Object.defineProperty(a,"raw",{value:o}):a.raw=o,a},Wv=function(a){function o(t){var e=a.call(this,t)||this;return e.config=t.config||{},e.em=e.config.em,e.ppfx=e.config.pStylePrefix||"",e.listenTo(e.em,"change:device",e.updateSelect),e}return zv(o,a),o.prototype.template=function(t){var e=t.ppfx,n=t.label;return it(vh||(vh=Bv([`
      <div class="`,'device-label">',`</div>
      <div class="`,"field ",`select">
        <span id="`,`input-holder">
          <select class="`,`devices"></select>
        </span>
        <div class="`,`sel-arrow">
          <div class="`,`d-s-arrow"></div>
        </div>
      </div>
      <button style="display:none" class="`,`add-trasp" data-add-trasp>+</button>
    `],[`
      <div class="`,'device-label">',`</div>
      <div class="`,"field ",`select">
        <span id="`,`input-holder">
          <select class="`,`devices"></select>
        </span>
        <div class="`,`sel-arrow">
          <div class="`,`d-s-arrow"></div>
        </div>
      </div>
      <button style="display:none" class="`,`add-trasp" data-add-trasp>+</button>
    `])),e,n,e,e,e,e,e,e,e)},o.prototype.events=function(){return{change:"updateDevice","click [data-add-trasp]":"startAdd"}},o.prototype.startAdd=function(){},o.prototype.updateDevice=function(){var t=this.em;if(t){var e=this.devicesEl;t.set("device",e?e.val():"")}},o.prototype.updateSelect=function(){var t=this.em,e=this.devicesEl;if(t&&t.getDeviceModel&&e){var n=t.getDeviceModel();e.val(n?n.get("id"):"")}},o.prototype.getOptions=function(){var t=this.collection,e=this.em,n="";return t.forEach(function(r){var l=r.attributes,p=l.name,d=l.id,g=e&&e.t&&e.t("deviceManager.devices.".concat(d))||p;n+='<option value="'.concat(d||p,'">').concat(g,"</option>")}),n},o.prototype.render=function(){var t=this,e=t.em,n=t.ppfx,r=t.$el,l=t.el,p=e&&e.t&&e.t("deviceManager.device");return r.html(this.template({ppfx:n,label:p})),this.devicesEl=r.find(".".concat(n,"devices")),this.devicesEl.append(this.getOptions()),this.devicesEl.val(e.get("device")),l.className="".concat(n,"devices-c"),this},o}(E.Ss);const $v=Wv;var vh,qv=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Dc=function(){return Dc=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},Dc.apply(this,arguments)},Gv=function(a){function o(t){var e,n=a.call(this,t,"DeviceManager",new gh,wt,Fv())||this;return n.Device=fh,n.Devices=gh,n.storageKey="",n.devices=n.all,(e=n.config.devices)===null||e===void 0||e.forEach(function(r){return n.add(r,{silent:!0})}),n.select(n.config.default||n.devices.at(0)),t.on("change:device",n._onSelect,n),n}return qv(o,a),o.prototype._onSelect=function(t,e,n){var r=this.em,l=this.events,p=t.previous("device"),d=this.get(e),g=l.select;r.trigger(g,d,this.get(p)),this.__catchAllEvent(g,d,n)},o.prototype.add=function(t,e){var n;e===void 0&&(e={});var r=e;if((0,C.isString)(t)){var l=e;n=Dc(Dc({},r=arguments[2]||{}),{id:t,name:r.name||t,width:l})}else n=t;return n.id||(n.id=n.name||this._createId()),this.devices.add(n,r)},o.prototype.get=function(t){return this.getAll().filter(function(e){return e.get("name")===t})[0]||this.devices.get(t)||null},o.prototype.remove=function(t,e){return e===void 0&&(e={}),this.__remove(t,e)},o.prototype.getDevices=function(){return this.devices.models},o.prototype.select=function(t,e){e===void 0&&(e={});var n=(0,C.isString)(t)?this.get(t):t;return n&&this.em.set("device",n.get("id"),e),this},o.prototype.getSelected=function(){return this.get(this.em.get("device"))},o.prototype.getAll=function(){return this.devices},o.prototype.render=function(){var t,e=this.em;return(t=this.view)===null||t===void 0||t.remove(),this.view=new $v({collection:this.devices,config:Dc({em:e},this.config)}),this.view.render().el},o.prototype.destroy=function(){this.__destroy()},o}(Tt);const Kv=Gv;var Yv=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Bd=function(a){function o(t,e){e===void 0&&(e={});var n=a.call(this,t,e)||this,r=e.em,l={};n.em=r,t.frames||(l.component=t.component,l.styles=t.styles,["component","styles"].map(function(g){return n.unset(g)}));var p=t.frames||[l],d=new Ht(r.Canvas,p);return d.page=n,n.set("frames",d),!n.getId()&&n.set("id",r?.Pages._createId()),r?.UndoManager.add(d),n}return Yv(o,a),o.prototype.defaults=function(){return{name:"",frames:[],_undo:!0}},o.prototype.onRemove=function(){this.getFrames().reset()},o.prototype.getFrames=function(){return this.get("frames")},o.prototype.getId=function(){return this.id},o.prototype.getName=function(){return this.get("name")},o.prototype.setName=function(t){return this.set({name:t})},o.prototype.getAllFrames=function(){return this.getFrames().models||[]},o.prototype.getMainFrame=function(){return this.getFrames().at(0)},o.prototype.getMainComponent=function(){var t=this.getMainFrame();return t?.getComponent()},o.prototype.toJSON=function(t){t===void 0&&(t={});var e=E.Kx.prototype.toJSON.call(this,t),n=(0,C.result)(this,"defaults");return(0,C.forEach)(e,function(r,l){l.indexOf("_")===0&&delete e[l]}),(0,C.forEach)(n,function(r,l){e[l]===r&&delete e[l]}),e},o}(E.Kx);var Xv=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ap=function(){return ap=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},ap.apply(this,arguments)},Jv=function(a){function o(t,e){var n=a.call(this,t)||this;return n.on("reset",n.onReset),n.on("remove",n.onRemove),n.model=function(r,l){return l===void 0&&(l={}),new Bd(r,ap(ap({},l),{em:e}))},n}return Xv(o,a),o.prototype.onReset=function(t,e){var n,r=this;(n=e?.previousModels)===null||n===void 0||n.map(function(l){return r.onRemove(l,r,e)})},o.prototype.onRemove=function(t,e,n){n===void 0&&(n={}),n.fromUndo||n.temporary||t==null||t.onRemove()},o}(E.pM);const Zv=Jv;var Qv=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Nl=function(){return Nl=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},Nl.apply(this,arguments)},tm=function(a,o){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&o.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(e=Object.getOwnPropertySymbols(a);n<e.length;n++)o.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(a,e[n])&&(t[e[n]]=a[e[n]])}return t},em=function(a,o,t){if(t||arguments.length===2)for(var e,n=0,r=o.length;n<r;n++)!e&&n in o||(e||(e=Array.prototype.slice.call(o,0,n)),e[n]=o[n]);return a.concat(e||Array.prototype.slice.call(o))},mh="change:selected",yh="main",nm=function(a){function o(t){var e=a.call(this,t,"PageManager",new Zv([],t),te)||this;e.events=te,e.storageKey="pages",(0,C.bindAll)(e,"_onPageChange");var n=new ft.A(e,{_undo:!0});return e.model=n,e.pages.on("reset",e.__onReset,e),e.pages.on("all",e.__onChange,e),n.on(mh,e._onPageChange),e}return Qv(o,a),Object.defineProperty(o.prototype,"pages",{get:function(){return this.all},enumerable:!1,configurable:!0}),o.prototype.getAll=function(){return em([],this.all.models,!0)},o.prototype.__onChange=function(t,e,n,r){var l=this.em,p=this.events,d=r||n;l.trigger(p.all,{event:t,page:e,options:d})},o.prototype.__onReset=function(){var t=this.pages.at(0);t&&this.select(t)},o.prototype.onLoad=function(){var t,e=this,n=e.pages,r=e.config,l=e.em,p={silent:!0},d=((t=r.pages)===null||t===void 0?void 0:t.map(function(h){return new Bd(h,{em:l,config:r})}))||[];n.add(d,p);var g=n.length?this._initPage():this.add({type:yh},p);g&&this.select(g,p)},o.prototype._onPageChange=function(t,e,n){var r=this.em,l=this.events,p=r.Layers,d=e.getMainComponent();p&&d&&p.setRoot(d),r.trigger(l.select,e,t.previous("selected")),this.__onChange(mh,e,n)},o.prototype.postLoad=function(){var t=this,e=t.em,n=t.model,r=t.pages,l=e.UndoManager;l.add(n),l.add(r),r.on("add remove reset change",function(p,d,g){return e.changesUp(g||d)})},o.prototype.add=function(t,e){var n=this;e===void 0&&(e={});var r=this.em,l=this.events;t.id=t.id||this._createId();var p=function(){var d=n.pages.add(new Bd(t,{em:n.em,config:n.config}),e);return e.select&&n.select(d),d};return!e.silent&&r.trigger(l.addBefore,t,p,e),e.abort?void 0:p()},o.prototype.remove=function(t,e){var n=this;e===void 0&&(e={});var r=this.em,l=this.events,p=(0,C.isString)(t)?this.get(t):t,d=function(){return p&&n.pages.remove(p,e),p};return!e.silent&&r.trigger(l.removeBefore,p,d,e),!e.abort&&d()},o.prototype.move=function(t,e){e===void 0&&(e={});var n=this.pages,r=(0,C.isString)(t)?this.get(t):t,l=e.at,p=l===void 0?0:l,d=tm(e,["at"]);if(r){var g=n.indexOf(r)===p;if(!(p<0||p>=n.length||g))return this.remove(r,Nl(Nl({},d),{temporary:!0})),n.add(r,Nl(Nl({},d),{at:p})),r}},o.prototype.get=function(t){return this.pages.filter(function(e){return e.get(e.idAttribute)===t})[0]},o.prototype.getMain=function(){var t=this.pages;return t.filter(function(e){return e.get("type")===yh})[0]||t.at(0)},o.prototype.getAllWrappers=function(){var t=this.getAll();return(0,C.unique)((0,C.flatten)(t.map(function(e){return e.getAllFrames().map(function(n){return n.getComponent()})})))},o.prototype.select=function(t,e){e===void 0&&(e={});var n=this,r=n.em,l=n.model,p=n.events,d=(0,C.isString)(t)?this.get(t):t;return d&&(r.trigger(p.selectBefore,d,e),l.set("selected",d,e)),this},o.prototype.getSelected=function(){return this.model.get("selected")},o.prototype.destroy=function(){var t=this;this.pages.off().reset(),this.model.stopListening(),this.model.clear({silent:!0}),["selected","model"].map(function(e){return t[e]=0})},o.prototype.store=function(){return this.getProjectData()},o.prototype.load=function(t){var e=this,n=this.loadProjectData(t,{all:this.pages,reset:!0,onResult:function(r,l){r.forEach(function(p){return e.add(p,l)}),e.__onReset()}});return this.pages.forEach(function(r){return r.getFrames().initRefs()}),n},o.prototype._initPage=function(){return this.get(this.config.selected)||this.getMain()},o.prototype._createId=function(){var t,e=this.getAll().length+16,n=this.getAllMap();do t=(0,q.createId)(e);while(n[t]);return t},o}(Tt);const om=nm;var Wd={placeholder:"eg. Text here"};const rm={assetManager:{addButton:"Add image",inputPlh:"http://path/to/the/image.jpg",modalTitle:"Select Image",uploadTitle:"Drop files here or click to upload"},blockManager:{labels:{},categories:{}},domComponents:{names:{"":"Box",wrapper:"Body",text:"Text",comment:"Comment",image:"Image",video:"Video",label:"Label",link:"Link",map:"Map",tfoot:"Table foot",tbody:"Table body",thead:"Table head",table:"Table",row:"Table row",cell:"Table cell"}},deviceManager:{device:"Device",devices:{desktop:"Desktop",tablet:"Tablet",mobileLandscape:"Mobile Landscape",mobilePortrait:"Mobile Portrait"}},panels:{buttons:{titles:{preview:"Preview",fullscreen:"Fullscreen","sw-visibility":"View components","export-template":"View code","open-sm":"Open Style Manager","open-tm":"Settings","open-layers":"Open Layer Manager","open-blocks":"Open Blocks"}}},selectorManager:{label:"Classes",selected:"Selected",emptyState:"- State -",states:{hover:"Hover",active:"Click","nth-of-type(2n)":"Even/Odd"}},styleManager:{empty:"Select an element before using Style Manager",layer:"Layer",fileButton:"Images",sectors:{general:"General",layout:"Layout",typography:"Typography",decorations:"Decorations",extra:"Extra",flex:"Flex",dimension:"Dimension"},properties:{"text-shadow-h":"X","text-shadow-v":"Y","text-shadow-blur":"Blur","text-shadow-color":"Color","box-shadow-h":"X","box-shadow-v":"Y","box-shadow-blur":"Blur","box-shadow-spread":"Spread","box-shadow-color":"Color","box-shadow-type":"Type","margin-top-sub":"Top","margin-right-sub":"Right","margin-bottom-sub":"Bottom","margin-left-sub":"Left","padding-top-sub":"Top","padding-right-sub":"Right","padding-bottom-sub":"Bottom","padding-left-sub":"Left","border-width-sub":"Width","border-style-sub":"Style","border-color-sub":"Color","border-top-left-radius-sub":"Top Left","border-top-right-radius-sub":"Top Right","border-bottom-right-radius-sub":"Bottom Right","border-bottom-left-radius-sub":"Bottom Left","transform-rotate-x":"Rotate X","transform-rotate-y":"Rotate Y","transform-rotate-z":"Rotate Z","transform-scale-x":"Scale X","transform-scale-y":"Scale Y","transform-scale-z":"Scale Z","transition-property-sub":"Property","transition-duration-sub":"Duration","transition-timing-function-sub":"Timing","background-image-sub":"Image","background-repeat-sub":"Repeat","background-position-sub":"Position","background-attachment-sub":"Attachment","background-size-sub":"Size"}},traitManager:{empty:"Select an element before using Trait Manager",label:"Component settings",categories:{},traits:{labels:{},attributes:{id:Wd,alt:Wd,title:Wd,href:{placeholder:"eg. https://google.com"}},options:{target:{false:"This window",_blank:"New window"}}}},storageManager:{recover:"Do you want to recover unsaved changes?"}},im=function(){return{locale:"en",localeFallback:"en",detectLocale:!0,debug:!1,messages:{en:rm},messagesAdd:void 0}};var $d;(function(a){a.add="i18n:add",a.update="i18n:update",a.locale="i18n:locale"})($d||($d={}));const am=$d;var sm=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),lm=function(a){function o(t){var e=a.call(this,t,"I18n",im())||this;e.events=am;var n=e.config.messagesAdd;return n&&e.addMessages(n),e.config.detectLocale&&(e.config.locale=e._localLang()),e}return sm(o,a),o.prototype.setLocale=function(t){var e=this,n=e.em,r=e.config,l=e.events;return n.trigger(l.locale,{value:t,valuePrev:r.locale}),r.locale=t,this},o.prototype.getLocale=function(){return this.config.locale},o.prototype.getMessages=function(t,e){e===void 0&&(e={});var n=this.config.messages;return t&&!n[t]&&this._debug("'".concat(t,"' i18n lang not found"),e),t?n[t]:n},o.prototype.setMessages=function(t){var e=this,n=e.em,r=e.config,l=e.events;return r.messages=t,n.trigger(l.update,t),this},o.prototype.addMessages=function(t){var e=this,n=e.em,r=e.events,l=e.config.messages;return n.trigger(r.add,t),this.setMessages((0,q.deepMerge)(l,t)),this},o.prototype.t=function(t,e){e===void 0&&(e={});var n=this.config,r=e.params||{},l=e.l||this.getLocale(),p=e.lFlb||n.localeFallback,d=this._getMsg(t,l,e);return d||(d=this._getMsg(t,p,e)),!d&&this._debug("'".concat(t,"' i18n key not found in '").concat(l,"' lang"),e),d=d&&(0,C.isString)(d)?this._addParams(d,r):d},o.prototype._localLang=function(){var t=(0,q.hasWin)()&&window.navigator||{},e=t.language||t.userLanguage;return e?e.split("-")[0]:"en"},o.prototype._addParams=function(t,e){var n=new RegExp("{([\\w\\d-]*)}","g");return t.replace(n,function(r,l){return e[l]||""}).trim()},o.prototype._getMsg=function(t,e,n){n===void 0&&(n={});var r=this.getMessages(e,n);if(r){var l=r[t];return!l&&t.indexOf(".")>0&&(l=t.split(".").reduce(function(p,d){if(!(0,C.isUndefined)(p))return p[d]},r)),l}},o.prototype._debug=function(t,e){e===void 0&&(e={});var n=this.em,r=this.config;(e.debug||r.debug)&&n&&n.logWarning(t)},o.prototype.destroy=function(){},o}(ct);const cm=lm;var Ms=function(){return Ms=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},Ms.apply(this,arguments)},um=function(){function a(o){o===void 0&&(o={}),this.moved=!1,this.defOpts={ratioDefault:!1,onUpdateContainer:function(){},step:1,minDim:10,maxDim:1/0,unitHeight:"px",unitWidth:"px",keyHeight:"height",keyWidth:"width",currentUnit:!0,silentFrames:!1,avoidContainerUpdate:!1,keepAutoHeight:!1,keepAutoWidth:!1,autoHeight:!1,autoWidth:!1,tl:!0,tc:!0,tr:!0,cl:!0,cr:!0,bl:!0,bc:!0,br:!0},this.opts=Ms({},this.defOpts),this.setOptions(o),(0,C.bindAll)(this,"handleKeyDown","handleMouseDown","move","stop")}return a.prototype.getConfig=function(){return this.opts},a.prototype.setOptions=function(o,t){o===void 0&&(o={}),this.opts=Ms(Ms({},t?this.defOpts:this.opts),o),this.setup()},a.prototype.setup=function(){var o=this.opts,t=o.prefix||"",e=o.appendTo||document.body,n=this.container;for(n||((n=document.createElement("div")).className="".concat(t,"resizer-c"),e.appendChild(n),this.container=n);n.firstChild;)n.removeChild(n.firstChild);var r={};for(var l in["tl","tc","tr","cl","cr","bl","bc","br"].forEach(function(d){return r[d]=o[d]?function(g,h){h===void 0&&(h={});var m=h.prefix||"",w=document.createElement("i");return w.className=m+"resizer-h "+m+"resizer-h-"+g,w.setAttribute("data-"+m+"handler",g),w}(d,o):null}),r){var p=r[l];p&&n.appendChild(p)}this.handlers=r,this.mousePosFetcher=o.mousePosFetcher,this.updateTarget=o.updateTarget,this.posFetcher=o.posFetcher,this.onStart=o.onStart,this.onMove=o.onMove,this.onEnd=o.onEnd,this.onUpdateContainer=o.onUpdateContainer},a.prototype.toggleFrames=function(o){if(this.opts.silentFrames){var t=document.querySelectorAll("iframe");(0,C.each)(t,function(e){return e.style.pointerEvents=o?"none":""})}},a.prototype.isHandler=function(o){var t=this.handlers;for(var e in t)if(t[e]===o)return!0;return!1},a.prototype.getFocusedEl=function(){return this.el},a.prototype.getParentEl=function(){var o;return(o=this.el)===null||o===void 0?void 0:o.parentElement},a.prototype.getDocumentEl=function(){return this.opts.docs||[this.el.ownerDocument,document]},a.prototype.getElementPos=function(o,t){t===void 0&&(t={});var e=this.posFetcher;return e?e(o,t):function(n,r){var l=r||window,p=n.getBoundingClientRect();return{left:p.left+l.pageXOffset,top:p.top+l.pageYOffset,width:p.width,height:p.height}}(o)},a.prototype.focus=function(o){o&&o===this.el||(this.el=o,this.updateContainer({forceShow:!0}),(0,St.on)(this.getDocumentEl(),"pointerdown",this.handleMouseDown))},a.prototype.blur=function(){this.container.style.display="none",this.el&&((0,St.AU)(this.getDocumentEl(),"pointerdown",this.handleMouseDown),delete this.el)},a.prototype.start=function(o){var t,e=this.el,n=this.opts,r=n===void 0?{}:n;if(this.moved=!1,o.button===0&&e){o.preventDefault(),o.stopPropagation(),(t=this.selectedHandler)===null||t===void 0||t.setPointerCapture(o.pointerId);var l=this.getParentEl(),p=r,d=this.mousePosFetcher,g="data-"+p.prefix+"handler",h=this.getElementPos(e,{avoidFrameZoom:!0,avoidFrameOffset:!0}),m=this.getElementPos(l),w=o.target;this.handlerAttr=w.getAttribute(g),this.clickedHandler=w,this.startDim={t:h.top,l:h.left,w:h.width,h:h.height},this.rectDim={t:h.top,l:h.left,w:h.width,h:h.height},this.startPos=d?d(o):{x:o.clientX,y:o.clientY},this.parentDim={t:m.top,l:m.left,w:m.width,h:m.height};var k=this.getDocumentEl();this.docs=k,(0,St.on)(k,"pointermove",this.move),(0,St.on)(k,"keydown",this.handleKeyDown),(0,St.on)(k,"pointerup",this.stop),(0,C.isFunction)(this.onStart)&&this.onStart(o,{docs:k,config:p,el:e,resizer:this}),this.toggleFrames(!0),!p.updateOnMove&&this.move(o)}},a.prototype.move=function(o){var t,e;this.moved=!0;var n=this.el,r=this.opts,l=this.docs||this.getDocumentEl(),p=((t=this.mousePosFetcher)===null||t===void 0?void 0:t.call(this,o))||{x:o.clientX,y:o.clientY};this.currentPos=p,this.delta={x:p.x-this.startPos.x,y:p.y-this.startPos.y},this.keys={shift:o.shiftKey,ctrl:o.ctrlKey,alt:o.altKey},this.rectDim=this.calc(this),this.updateRect(!1,o),(e=this.onMove)===null||e===void 0||e.call(this,o,{docs:l,config:r,el:n,resizer:this})},a.prototype.stop=function(o){var t,e,n=this.el,r=this.opts,l=this.docs||this.getDocumentEl();(0,St.AU)(l,"pointermove",this.move),(0,St.AU)(l,"keydown",this.handleKeyDown),(0,St.AU)(l,"pointerup",this.stop),!this.moved&&r.updateOnMove||this.updateRect(!0,o),o.pointerId&&((t=this.selectedHandler)===null||t===void 0||t.releasePointerCapture(o.pointerId)),this.toggleFrames(),(e=this.onEnd)===null||e===void 0||e.call(this,o,{docs:l,config:r,el:n,resizer:this}),this.moved=!1,delete this.docs},a.prototype.updateRect=function(o,t){var e=this.el,n=this.opts,r=this.rectDim,l=this.updateTarget,p=this.getSelectedHandler(),d=n.unitHeight,g=n.unitWidth,h=n.keyWidth,m=n.keyHeight;if((0,C.isFunction)(l))l(e,r,{store:o,selectedHandler:p,resizer:this,config:n,event:t});else{var w=e.style;w[h]=r.w+g,w[m]=r.h+d}this.updateContainer()},a.prototype.updateContainer=function(o){var t;o===void 0&&(o={});var e=this,n=e.opts,r=e.container,l=e.el,p=r.style;!n.avoidContainerUpdate&&l&&o.forceShow&&(p.display="block"),(t=this.onUpdateContainer)===null||t===void 0||t.call(this,{el:r,resizer:this,opts:Ms(Ms({},n),o)})},a.prototype.getSelectedHandler=function(){var o=this.handlers;if(this.selectedHandler){for(var t in o)if(o[t]===this.selectedHandler)return t}},a.prototype.handleKeyDown=function(o){o.keyCode===27&&(this.rectDim=this.startDim,this.stop(o))},a.prototype.handleMouseDown=function(o){var t=o.target;this.isHandler(t)?(this.selectedHandler=t,this.start(o)):t!==this.el&&(delete this.selectedHandler,this.blur())},a.prototype.calc=function(o){var t,e=this.opts||{},n=e.step,r=this.startDim,l=e.minDim,p=e.maxDim,d=o.delta.x,g=o.delta.y,h=this.parentDim.w,m=this.parentDim.h,w=e.unitWidth,k=e.unitHeight,z=e.skipUnitAdjustments,B=this.getParentRect(),nt=w==="%"&&!z,X=k==="%"&&!z,At=nt?r.w/100*h:r.w,It=X?r.h/100*m:r.h,Wt={t:r.t-B.top,l:r.l-B.left,w:At,h:It};if(o){var oe=o.handlerAttr;~oe.indexOf("r")&&(t=nt?(0,q.normalizeFloat)((At+d*n)/h*100,.01):(0,q.normalizeFloat)(At+d*n,n),t=Math.max(l,t),p&&(t=Math.min(p,t)),Wt.w=t),~oe.indexOf("b")&&(t=X?(0,q.normalizeFloat)((It+g*n)/m*100,.01):(0,q.normalizeFloat)(It+g*n,n),t=Math.max(l,t),p&&(t=Math.min(p,t)),Wt.h=t),~oe.indexOf("l")&&(t=nt?(0,q.normalizeFloat)((At-d*n)/h*100,.01):(0,q.normalizeFloat)(At-d*n,n),t=Math.max(l,t),p&&(t=Math.min(p,t)),Wt.w=t),~oe.indexOf("t")&&(t=X?(0,q.normalizeFloat)((It-g*n)/m*100,.01):(0,q.normalizeFloat)(It-g*n,n),t=Math.max(l,t),p&&(t=Math.min(p,t)),Wt.h=t);var ve=e.ratioDefault?!o.keys.shift:o.keys.shift;if(oe.indexOf("c")<0&&ve){var we=r.w/r.h;Wt.w/Wt.h>we?Wt.h=Math.round(Wt.w/we):Wt.w=Math.round(Wt.h*we)}for(var Ve in~oe.indexOf("l")&&(Wt.l+=r.w-Wt.w),~oe.indexOf("t")&&(Wt.t+=r.h-Wt.h),Wt){var Ze=Ve;Wt[Ze]=parseInt("".concat(Wt[Ze]),10)}return Wt}},a.prototype.getParentRect=function(){var o={left:0,top:0,width:0,height:0},t=this.el;if(!t)return o;var e=t.offsetParent;return e&&e.tagName!=="BODY"&&(o=this.getElementPos(e)),o},a}();const pm=um;var Dr=function(){return Dr=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},Dr.apply(this,arguments)};function bh(a){var o=a.getBoundingClientRect();return{top:o.top+document.body.scrollTop,left:o.left+document.body.scrollLeft}}function qd(a,o){return q.matches.call(a,o)}function Gd(a){return a?[a].concat(Gd(a.parent())):[]}var _h=function(){function a(o){this.timeout=null,this.threshold=o}return a.prototype.updateArgs=function(o){this.lastArgs=o},a.prototype.execute=function(o){var t=this;this.timeout||(this.timeout=setTimeout(function(){t.lastArgs&&o(t.lastArgs),t.timeout=null},this.threshold))},a.prototype.clearTimeout=function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),delete this.lastArgs},a}(),Kd=function(){return Kd=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},Kd.apply(this,arguments)},dm=function(){function a(o){this.top=o.top,this.left=o.left,this.height=o.height,this.width=o.width,this.offsets=o.offsets,this.dir=o.dir}return a.prototype.calculateDimensionDifference=function(o){return{topDifference:o.top-this.top,leftDifference:o.left-this.left}},a.prototype.adjustDimensions=function(o){return this.top+=o.topDifference,this.left+=o.leftDifference,this},a.prototype.determinePlacement=function(o,t){var e=this.left+this.width/2,n=this.top+this.height/2;return this.dir?t<n?"before":"after":o<e?"before":"after"},a.prototype.equals=function(o){return!!o&&this.top===o.top&&this.left===o.left&&this.height===o.height&&this.width===o.width&&this.dir===o.dir&&JSON.stringify(this.offsets)===JSON.stringify(o.offsets)},a.prototype.clone=function(){return new a({top:this.top,left:this.left,height:this.height,width:this.width,offsets:Kd({},this.offsets),dir:this.dir})},a.prototype.getDropArea=function(o){var t=this.clone(),e=this.adjustDropDimension(this.width,this.left,o),n=e.newSize,r=e.newPosition;t.width=n,t.left=r;var l=this.adjustDropDimension(this.height,this.top,o),p=l.newSize,d=l.newPosition;return t.height=p,t.top=d,t},a.prototype.adjustDropDimension=function(o,t,e){var n=e.ratio,r=e.minUndroppableDimension,l=e.maxUndroppableDimension,p=o*(1-n)/2;return p=Math.max(p,r),{newSize:o-2*(p=Math.min(p,l)),newPosition:t+p}},a.prototype.isWithinBounds=function(o,t){return o>=this.left&&o<=this.left+this.width&&t>=this.top&&t<=this.top+this.height},a}();const fm=dm;var hm=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),gm=function(a){function o(t){var e=a.call(this)||this;return e.sourceNodes=[],e.containerOffset={top:0,left:0},e.moveThreshold=20,e.treeClass=t.treeClass,e.em=t.em,e.containerContext=t.containerContext,e.positionOptions=t.positionOptions,e.dragDirection=t.dragDirection,e.eventHandlers=t.eventHandlers,(0,C.bindAll)(e,"endDrag","cancelDrag","recalculateTargetOnScroll","startSort","onDragStart","onMove"),e.restLastMoveData(),e.rateLimiter=new _h(e.moveThreshold),e}return hm(o,a),o.prototype.startSort=function(t){this.sourceNodes=t,this.bindDragEventHandlers()},o.prototype.bindDragEventHandlers=function(){(0,St.on)(this.containerContext.container,"dragstart",this.onDragStart),(0,St.on)(this.containerContext.container,"mousemove dragover",this.onMove),(0,St.on)(this.containerContext.document,"mouseup dragend touchend",this.endDrag)},o.prototype.recalculateTargetOnScroll=function(){var t=this.lastMoveData.mouseEvent;t&&this.onMove(t)},o.prototype.onMove=function(t){this.rateLimiter.updateArgs(t),this.rateLimiter.execute(this.handleMove.bind(this))},o.prototype.handleMove=function(t){var e,n,r,l,p,d,g;this.adjustForScroll();var h=this.lastMoveData.targetNode;(n=(e=this.eventHandlers).onMouseMove)===null||n===void 0||n.call(e,t),this.cacheContainerPosition();var m=this.getMousePositionRelativeToContainer(t.clientX,t.clientY),w=m.mouseXRelative,k=m.mouseYRelative,z=this.getMouseTargetElement(t),B=this.getFirstElementWithAModel(z),nt=B?(r=(0,F.default)(B))===null||r===void 0?void 0:r.data("model"):void 0,X=nt?this.getOrCreateHoveredNode(nt):void 0,At=X?this.getIndexInParent(X,X.nodeDimensions,w,k):0,It=X?this.getValidParent(X,0,w,k):void 0;if(!It?.equals(h)&&((p=(l=this.eventHandlers).onTargetChange)===null||p===void 0||p.call(l,h,It)),!It||!X)return this.triggerLegacyOnMoveCallback(t,0),this.triggerMoveEvent(w,k),void this.restLastMoveData();var Wt=this.getDropPosition(It,w,k),oe=Wt.index,ve=Wt.placement,we=Wt.placeholderDimensions;(!we.equals(this.lastMoveData.placeholderDimensions)||ve!==this.lastMoveData.placement)&&((g=(d=this.eventHandlers).onPlaceholderPositionChange)===null||g===void 0||g.call(d,we,ve)),this.lastMoveData={targetNode:It,hoveredNode:X,mouseEvent:t,index:oe,hoveredIndex:At,placement:ve,placeholderDimensions:we},this.triggerMoveEvent(w,k),this.triggerLegacyOnMoveCallback(t,oe)},o.prototype.adjustForScroll=function(){var t,e,n=this.lastMoveData.targetNode;if(n?.element){var r=this.getDim(n?.element);(p=(t=n.nodeDimensions)===null||t===void 0?void 0:t.calculateDimensionDifference(r))&&n.adjustDimensions(p)}var l=this.lastMoveData.hoveredNode;if(l?.element){var p;r=this.getDim(l?.element),(p=(e=l.nodeDimensions)===null||e===void 0?void 0:e.calculateDimensionDifference(r))&&l.adjustDimensions(p)}},o.prototype.restLastMoveData=function(){this.lastMoveData={targetNode:void 0,index:void 0,placement:void 0,mouseEvent:void 0}},o.prototype.triggerLegacyOnMoveCallback=function(t,e){var n,r,l,p,d=(n=this.sourceNodes[0])===null||n===void 0?void 0:n.model;(l=(r=this.eventHandlers).legacyOnMoveClb)===null||l===void 0||l.call(r,{event:t,target:d,parent:(p=this.lastMoveData.targetNode)===null||p===void 0?void 0:p.model,index:e})},o.prototype.triggerMoveEvent=function(t,e){var n,r=this.lastMoveData,l=r.targetNode,p=r.placement,d=r.index,g=d?d+(p==="after"?-1:0):0;this.em.trigger("sorter:drag",{target:l?.element||null,targetModel:(n=this.lastMoveData.targetNode)===null||n===void 0?void 0:n.model,sourceModel:this.sourceNodes[0].model,dims:l?.childrenDimensions||[],pos:{index:g,indexEl:g,placement:p},x:t,y:e})},o.prototype.getDropPosition=function(t,e,n){var r,l=t.nodeDimensions,p=t.childrenDimensions,d=t.getChildren(),g=d&&d.length>0;l=l||this.getDim(t.element),t.nodeDimensions=l,p=p||this.getChildrenDim(t),t.childrenDimensions=p;var h=l.clone(),m=0,w="inside";return g&&(m=(r=function(k,z,B){for(var nt,X={index:0,placement:"before"},At=0,It=0,Wt=0,oe=0,ve=0,we=0,Ve=0,Ze=k.length;Ve<Ze;Ve++){var Xe=(nt=k[Ve]).top,Un=nt.left,Xn=nt.height,xo=nt.width;if(we=Xe+Xn,oe=Un+xo/2,ve=Xe+Xn/2,!(It&&Un>It||Wt&&ve>=Wt||At&&Un+xo<At))if(X.index=Ve,nt.dir){if(B<ve){X.placement="before";break}X.placement="after"}else B<we&&(Wt=we),z<oe?(It=oe,X.placement="before"):(At=oe,X.placement="after")}return X}(p,e,n)).index,w=r.placement,h=p[m].clone(),m+=w=="after"?1:0),{index:m,placement:w,placeholderDimensions:h}},o.prototype.getOrCreateHoveredNode=function(t){var e=this.lastMoveData.hoveredNode,n=new this.treeClass(t),r=n.equals(e),l=r?e:n;return l.nodeDimensions=r?e.nodeDimensions:this.getDim(n.element),l},o.prototype.getMouseTargetElement=function(t){var e=this.containerContext.customTarget,n=this.containerContext.document.elementFromPoint(t.clientX,t.clientY);return e?e({event:t}):n},o.prototype.onDragStart=function(t){this.eventHandlers.onDragStart&&this.eventHandlers.onDragStart(t)},o.prototype.endDrag=function(){this.dropDragged()},o.prototype.cancelDrag=function(){var t,e,n=this.lastMoveData.targetNode;(e=(t=this.eventHandlers).onTargetChange)===null||e===void 0||e.call(t,n,void 0),this.finalizeMove()},o.prototype.finalizeMove=function(){var t,e,n,r;this.cleanupEventListeners(),this.triggerOnDragEndEvent(),(e=(t=this.eventHandlers).onEnd)===null||e===void 0||e.call(t),(r=(n=this.eventHandlers).legacyOnEnd)===null||r===void 0||r.call(n),this.restLastMoveData(),this.rateLimiter.clearTimeout()},o.prototype.dropDragged=function(){var t,e,n=this.lastMoveData,r=n.targetNode,l=n.index;(e=(t=this.eventHandlers).onDrop)===null||e===void 0||e.call(t,r,this.sourceNodes,l),this.finalizeMove()},o.prototype.triggerOnDragEndEvent=function(){var t=this.lastMoveData.targetNode,e=this.sourceNodes[0];this.em.trigger("sorter:drag:end",{targetCollection:t?t.getChildren():null,modelToDrop:e?.model,warns:[""],validResult:{result:!0,src:this.sourceNodes.map(function(n){return n.element}),srcModel:e?.model,trg:t?.element,trgModel:t?.model,draggable:!0,droppable:!0},dst:t?.element,srcEl:e?.element})},o.prototype.getFirstElementWithAModel=function(t){for(var e;t&&this.containerContext.container.contains(t);){if(e=t,(0,F.default)(e).data("model")!==void 0)return t;t=t.parentElement}return null},o.prototype.getValidParent=function(t,e,n,r){var l,p;if(t){var d=this.lastMoveData,g=d.targetNode,h=d.hoveredNode,m=d.hoveredIndex,w=d.mouseEvent,k=t.equals(h);t.nodeDimensions=k?h.nodeDimensions:this.getDim(t.element);var z=this.getIndexInParent(t,t.nodeDimensions,n,r)===m,B=t.isWithinDropBounds(n,r);if(k&&z&&B===t.isWithinDropBounds((l=w?.clientX)!==null&&l!==void 0?l:0,(p=w?.clientY)!==null&&p!==void 0?p:0)&&g)return g;if(!B)return this.handleParentTraversal(t,n,r);var nt=this.sourceNodes.some(function(X){return t.canMove(X,e)});return this.triggerDragValidation(nt,t),nt?t:this.handleParentTraversal(t,n,r)}},o.prototype.handleParentTraversal=function(t,e,n){var r=t.getParent();if(r){var l=this.getIndexInParent(t,t.nodeDimensions,e,n);if(l!==void 0)return this.getValidParent(r,l,e,n)}},o.prototype.getIndexInParent=function(t,e,n,r){var l=t.getParent();if(l){var p=l?.indexOfChild(t);return e.dir=this.getDirection(t.element,l.element),p+=e.determinePlacement(n,r)=="after"?1:0}},o.prototype.triggerDragValidation=function(t,e){var n=this.sourceNodes[0];return this.em.trigger("sorter:drag:validation",{valid:t,src:n?.element,srcModel:n?.model,trg:e.element,trgModel:e.model}),n},o.prototype.cleanupEventListeners=function(){var t=this.containerContext.container;(0,St.AU)(t,"dragstart",this.onDragStart),(0,St.AU)(t,"mousemove dragover",this.onMove),(0,St.AU)(this.containerContext.document,"mouseup dragend touchend",this.endDrag)},o.prototype.getDirection=function(t,e){var n;return n=this.dragDirection===Ar.A.Vertical||this.dragDirection!==Ar.A.Horizontal&&function(r,l){if((0,St.ir)(r))return!1;var p=r.style||{},d=(0,F.default)(r),g=(0,F.default)(l);if(p.overflow&&p.overflow!=="visible")return!1;var h=d.css("float");return(!h||h==="none")&&(g.css("display")!=="flex"||g.css("flex-direction")==="column")&&!!function(m){switch(m){case"static":case"relative":case"":return!0;default:return!1}}(p.position)&&(function(m){return["TR","TBODY","THEAD","TFOOT"].includes(m.tagName)}(r)||function(m){var w=m.css("display");return["block","list-item","table","flex","grid"].includes(w)}(d))}(t,e),n},o.prototype.getChildrenDim=function(t){var e=this,n=[],r=t.element;if(!r)return[];var l=t.getChildren();return l&&l.length!==0?((0,C.each)(l,function(p,d){var g=p.element;if(g&&((0,St.ir)(g)||qd(g,e.containerContext.itemSel))){var h=e.getDim(g);h.dir=e.getDirection(g,r),n.push(h)}}),n):[]},o.prototype.getMousePositionRelativeToContainer=function(t,e){var n=e-this.containerOffset.top+this.containerContext.container.scrollTop,r=t-this.containerOffset.left+this.containerContext.container.scrollLeft;if(this.positionOptions.canvasRelative){var l=this.em.Canvas.getMouseRelativeCanvas({clientX:t,clientY:e},{noScroll:1});r=l.x,n=l.y}return{mouseXRelative:r,mouseYRelative:n}},o.prototype.cacheContainerPosition=function(){var t=bh(this.containerContext.container),e=this.positionOptions.windowMargin?Math.abs(t.top):t.top,n=this.positionOptions.windowMargin?Math.abs(t.left):t.left;this.containerOffset={top:e,left:n}},o.prototype.getDim=function(t){var e,n,r,l,p=this.em,d=this.positionOptions.relative,g=this.positionOptions.windowMargin,h=p?.Canvas,m=h?h.getElementOffsets(t):{};if(this.positionOptions.canvasRelative&&this.em){var w=h.getElementPos(t,{noScroll:1});e=w.top,n=w.left,r=w.height,l=w.width}else{var k=bh(t);e=d?t.offsetTop:k.top-(g?-1:1)*this.containerOffset.top,n=d?t.offsetLeft:k.left-(g?-1:1)*this.containerOffset.left,r=t.offsetHeight,l=t.offsetWidth}return new fm({top:e,left:n,height:r,width:l,offsets:m})},o}(E.Ss),vm=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),mm=function(a){function o(t){var e=a.call(this)||this;return e.pfx=t.pfx||"",e.allowNesting=t.allowNesting||!1,e.container=t.container,e.setElement(t.el),e.offset={top:t.offset.top||0,left:t.offset.left||0},e.moveLimiter=new _h(100),e}return vm(o,a),o.prototype.show=function(){this.el.style.display="block"},o.prototype.hide=function(){this.moveLimiter.clearTimeout(),this.el.style.display="none"},o.prototype.move=function(t,e){var n=this,r={elementDimension:t,placement:e};this.moveLimiter.updateArgs(r),this.moveLimiter.execute(function(l){var p=l.elementDimension,d=l.placement;n._move(p,d)})},o.prototype._move=function(t,e){var n=0,r="px",l=0,p=0,d="",g="";this.setOrientationForDimension(t);var h=t.top,m=t.left,w=t.height,k=t.width,z=t.dir,B=t.offsets;if(e==="inside"){if(this.setOrientation("horizontal"),!this.allowNesting)return void this.hide();var nt=5,X=B?.paddingTop||nt,At=B?.paddingLeft||nt,It=B?.borderTopWidth||0,Wt=B?.borderLeftWidth||0,oe=Wt+(B?.borderRightWidth||0);l=h+X+It,p=m+At+Wt,d=Math.max(k-2*At-oe,1)+"px",g="auto"}else z?(d=k+r,g="auto",l=e==="before"?h-n:h+w-n,p=m):(d="auto",g=w-2*n+r,l=h+n,p=e==="before"?m-n:m+k-n,this.setOrientation("vertical"));this.updateStyles(l,p,d,g),this.adjustOffset()},o.prototype.setOrientationForDimension=function(t){this.el.classList.remove("vertical"),this.el.classList.add("horizontal"),t&&!t.dir&&this.setOrientation("vertical")},o.prototype.setOrientation=function(t){this.el.classList.remove("horizontal"),this.el.classList.remove("vertical"),this.el.classList.add(t)},o.prototype.updateStyles=function(t,e,n,r){this.el.style.top=t+"px",this.el.style.left=e+"px",n&&(this.el.style.width=n),r&&(this.el.style.height=r)},o.prototype.adjustOffset=function(){this.$el.css("top","+="+this.offset.top+"px"),this.$el.css("left","+="+this.offset.left+"px")},o}(E.Ss),Vl=function(){return Vl=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},Vl.apply(this,arguments)},ym=function(){function a(o){var t=function(e){var n={containerContext:{container:"",placeholderElement:"",containerSel:"*",itemSel:"*",pfx:"",document},positionOptions:{borderOffset:10,relative:!1,windowMargin:0,offsetTop:0,offsetLeft:0,scale:1,canvasRelative:!1},dragBehavior:{dragDirection:Ar.A.Vertical,nested:!1,selectOnEnd:!0},eventHandlers:{}};return Dr(Dr(Dr({},n),e),{containerContext:Dr(Dr({},n.containerContext),e.containerContext),positionOptions:Dr(Dr({},n.positionOptions),e.positionOptions),dragBehavior:Dr(Dr({},n.dragBehavior),e.dragBehavior),eventHandlers:Dr(Dr({},n.eventHandlers),e.eventHandlers)})}(o);(0,C.bindAll)(this,"startSort","cancelDrag","recalculateTargetOnScroll","rollback","updateOffset","handlePlaceholderMove","finalizeMove"),this.containerContext=t.containerContext,this.positionOptions=t.positionOptions,this.dragBehavior=t.dragBehavior,this.eventHandlers=Vl(Vl({},t.eventHandlers),{onPlaceholderPositionChange:this.handlePlaceholderMove,onEnd:this.finalizeMove}),this.em=o.em,this.treeClass=o.treeClass,this.updateOffset(),this.em.on(this.em.Canvas.events.refresh,this.updateOffset),this.placeholder=this.createPlaceholder(),this.dropLocationDeterminer=new gm({em:this.em,treeClass:this.treeClass,containerContext:this.containerContext,positionOptions:this.positionOptions,dragDirection:this.dragBehavior.dragDirection,eventHandlers:this.eventHandlers})}return a.prototype.startSort=function(o){var t,e,n,r,l,p,d,g=this.getSourceNodes(o),h=g.sourceNodes,m=g.sourcesWithModel;this.sourceNodes=h,this.dropLocationDeterminer.startSort(h),this.bindDragEventHandlers(),(e=(t=this.eventHandlers).onStartSort)===null||e===void 0||e.call(t,this.sourceNodes,this.containerContext.container);var w=(n=this.sourceNodes[0])===null||n===void 0?void 0:n.model;(l=(r=this.eventHandlers).legacyOnStartSort)===null||l===void 0||l.call(r,{sorter:this,target:w,parent:w&&((p=w.parent)===null||p===void 0?void 0:p.call(w)),index:w&&((d=w.index)===null||d===void 0?void 0:d.call(w))}),this.em.trigger("sorter:drag:start",o[0],m[0])},a.prototype.validTarget=function(o,t,e){if(!o)return!1;var n=(0,F.default)(o).data("model");if(!n)return!1;var r=new this.treeClass(n);return this.getSourceNodes(t).sourceNodes.some(function(l){return r.canMove(l,e)})},a.prototype.getSourceNodes=function(o){var t=this,e=o.filter(function(n){return!!n.dragSource||t.findValidSourceElement(n.element)}).map(function(n){var r,l;return{model:((r=n.dragSource)===null||r===void 0?void 0:r.model)||((l=(0,F.default)(n.element))===null||l===void 0?void 0:l.data("model")),content:n.dragSource}});return{sourceNodes:e.sort(function(n,r){return function(l,p){var d=Gd(l),g=Gd(p),h=g.filter(function(w){return d.includes(w)})[0];if(!h)return l.model.index()-p.model.index();var m=g[g.indexOf(h)-1];return d[d.indexOf(h)-1].index()-m.index()}(n.model,r.model)}).map(function(n){return new t.treeClass(n.model,n.content)}),sourcesWithModel:e}},a.prototype.recalculateTargetOnScroll=function(){this.dropLocationDeterminer.recalculateTargetOnScroll()},a.prototype.cancelDrag=function(){this.triggerNullOnEndMove(!0),this.dropLocationDeterminer.cancelDrag()},a.prototype.endDrag=function(){this.dropLocationDeterminer.endDrag()},a.prototype.handlePlaceholderMove=function(o,t){this.ensurePlaceholderElement(),this.updatePlaceholderPosition(o,t)},a.prototype.createPlaceholder=function(){return new mm({container:this.containerContext.container,allowNesting:this.dragBehavior.nested,pfx:this.containerContext.pfx,el:this.containerContext.placeholderElement,offset:{top:this.positionOptions.offsetTop,left:this.positionOptions.offsetLeft}})},a.prototype.ensurePlaceholderElement=function(){var o=this.placeholder.el,t=this.containerContext.container;o.ownerDocument.contains(o)||t.append(this.placeholder.el)},a.prototype.updateOffset=function(){var o,t=((o=this.em)===null||o===void 0?void 0:o.get("canvasOffset"))||{};this.positionOptions.offsetTop=t.top,this.positionOptions.offsetLeft=t.left},a.prototype.findValidSourceElement=function(o){return o&&!qd(o,"".concat(this.containerContext.itemSel,", ").concat(this.containerContext.containerSel))&&(o=function(t,e){if(t)for(var n=t.parentNode;n&&n.nodeType===1;){if(qd(n,e))return n;n=n.parentNode}}(o,this.containerContext.itemSel)),o},a.prototype.bindDragEventHandlers=function(){(0,St.on)(this.containerContext.document,"keydown",this.rollback)},a.prototype.updatePlaceholderPosition=function(o,t){this.placeholder.move(o,t)},a.prototype.cleanupEventListeners=function(){(0,St.AU)(this.containerContext.document,"keydown",this.rollback)},a.prototype.finalizeMove=function(){this.cleanupEventListeners(),this.placeholder.hide(),delete this.sourceNodes},a.prototype.rollback=function(o){(0,St.AU)(this.containerContext.document,"keydown",this.rollback),o.key==="Escape"&&this.cancelDrag()},a.prototype.triggerNullOnEndMove=function(o){var t,e,n,r,l,p=(t=this.sourceNodes)===null||t===void 0?void 0:t[0].model,d={target:p,parent:p&&((e=p.parent)===null||e===void 0?void 0:e.call(p)),index:p&&((n=p.index)===null||n===void 0?void 0:n.call(p))};(l=(r=this.eventHandlers).legacyOnEndMove)===null||l===void 0||l.call(r,null,this,Vl(Vl({},d),{cancelled:o}))},a}();const wh=ym;var bm=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Rl=function(){return Rl=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},Rl.apply(this,arguments)},Yd={id:"sorter-target",type:ce.F.Target},_m=function(a){function o(t){var e=t.em,n=t.treeClass,r=t.containerContext,l=t.dragBehavior,p=t.positionOptions,d=p===void 0?{}:p,g=t.eventHandlers,h=g===void 0?{}:g,m=a.call(this,{em:e,treeClass:n,containerContext:r,positionOptions:d,dragBehavior:l,eventHandlers:Rl(Rl({},h),{onStartSort:function(w,k){var z;(z=h.onStartSort)===null||z===void 0||z.call(h,w,k),m.onStartSort()},onDrop:function(w,k,z){var B;(B=h.onDrop)===null||B===void 0||B.call(h,w,k,z),m.onDrop(w,k,z)},onTargetChange:function(w,k){var z;(z=h.onTargetChange)===null||z===void 0||z.call(h,w,k),m.onTargetChange(w,k)},onMouseMove:function(w){var k;(k=h.onMouseMove)===null||k===void 0||k.call(h,w),m.onMouseMove(w)}})})||this;return m.targetIsText=!1,m.onMouseMove=function(w){var k;m.targetIsText&&(!((k=m.sourceNodes)===null||k===void 0)&&k.some(function(z){return z.isTextable()}))&&m.updateTextViewCursorPosition(w)},m.onDrop=function(w,k,z){var B=typeof z=="number"?z:-1;w&&k.length>0?m.handleNodeAddition(w,k,B).length===0&&m.triggerNullOnEndMove(!1):m.triggerNullOnEndMove(!0),w?.restNodeState(),m.placeholder.hide()},m.onTargetChange=function(w,k){var z;w?.restNodeState();var B=m.em.Canvas;if(!k)return m.placeholder.hide(),void B.removeSpots(Yd);k?.setSelectedParentState(),m.targetIsText=k.isTextNode(),m.targetIsText&&(!((z=m.sourceNodes)===null||z===void 0)&&z.some(function(nt){return nt.isTextable()}))?(k.setContentEditable(!0),m.placeholder.hide()):m.placeholder.show(),[ce.F.Select,ce.F.Hover,ce.F.Spacing].forEach(function(nt){return B.removeSpots({type:nt})}),B.addSpot(Rl(Rl({},Yd),{component:k.model}))},(0,C.bindAll)(m,"handleScrollEvent"),m}return bm(o,a),o.prototype.onStartSort=function(){this.em.clearSelection(),this.setAutoCanvasScroll(!0)},o.prototype.bindDragEventHandlers=function(){this.em.on("frame:scroll",this.handleScrollEvent),a.prototype.bindDragEventHandlers.call(this)},o.prototype.cleanupEventListeners=function(){this.em.off("frame:scroll",this.handleScrollEvent),a.prototype.cleanupEventListeners.call(this)},o.prototype.handleScrollEvent=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(t=e?.[0])===null||t===void 0?void 0:t.frame;this.em.Canvas.getCanvasView().frame===r&&this.recalculateTargetOnScroll()},o.prototype.handleNodeAddition=function(t,e,n){var r=this;return e.reduce(function(l,p){if(!t.canMove(p,n))return l;if(r.isPositionChanged(t,p,n)){var d=r.moveNode(t,p,n),g=d.index,h=d.addedNode;l.push(h),n=g}return n++,l},[])},o.prototype.isPositionChanged=function(t,e,n){var r=e.getParent(),l=r?r.indexOfChild(e):-1;r?.model.cid===t.model.cid&&l<n&&n--;var p=r?.model.cid===t.model.cid,d=l===n,g=this.targetIsText&&e.isTextable();return!(p&&d&&!g)},o.prototype.moveNode=function(t,e,n){var r=e.getParent();if(r){var l=r.indexOfChild(e);r.removeChildAt(l,{temporary:!0}),r.model.cid===t.model.cid&&l<n&&n--}var p=t.addChildAt(e,n,{action:"move-component"});return p&&this.triggerEndMoveEvent(p),{addedNode:p,index:n}},o.prototype.triggerEndMoveEvent=function(t){var e,n,r,l,p,d;(n=(e=this.eventHandlers).legacyOnEndMove)===null||n===void 0||n.call(e,t.model,this,{target:t.model,parent:t.model&&((l=(r=t.model).parent)===null||l===void 0?void 0:l.call(r)),index:t.model&&((d=(p=t.model).index)===null||d===void 0?void 0:d.call(p))})},o.prototype.finalizeMove=function(){var t,e;(t=this.em)===null||t===void 0||t.Canvas.removeSpots(Yd),(e=this.sourceNodes)===null||e===void 0||e.forEach(function(n){return n.restNodeState()}),this.setAutoCanvasScroll(!1),a.prototype.finalizeMove.call(this)},o.prototype.updateTextViewCursorPosition=function(t){var e=this.em;if(e){var n=e.Canvas,r=n.getDocument(),l=null,p=(0,St.G2)(t);if(r.caretPositionFromPoint){var d=r.caretPositionFromPoint(p.clientX,p.clientY);d&&(l=r.createRange()).setStart(d.offsetNode,d.offset)}else r.caretRangeFromPoint?l=r.caretRangeFromPoint(p.clientX,p.clientY):t.rangeParent&&(l=r.createRange()).setStart(t.rangeParent,t.rangeOffset);var g=n.getWindow().getSelection();n.getFrameEl().focus(),g?.removeAllRanges(),l&&g?.addRange(l)}},o.prototype.setAutoCanvasScroll=function(t){var e=this.em,n=e?.Canvas;n&&(t?n.startAutoscroll():n.stopAutoscroll())},o}(wh);const xh=_m;var wm=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),sp=function(){return sp=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},sp.apply(this,arguments)},xm=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return wm(o,a),o.prototype.defaults=function(){return{values:{}}},o.prototype.initialize=function(){var t=this.collection;this.prop=t?.prop},o.prototype.getId=function(){return this.cid},o.prototype.getIndex=function(){var t=this.collection;return t?t.indexOf(this):-1},o.prototype.getValues=function(t){t===void 0&&(t={});var e=this.get("values");return t.camelCase?Object.keys(e).reduce(function(n,r){return n[(0,q.camelCase)(r)]=e[r],n},{}):e},o.prototype.getLabel=function(){var t;return(t=this.prop)===null||t===void 0?void 0:t.getLayerLabel(this)},o.prototype.isSelected=function(){var t;return((t=this.prop)===null||t===void 0?void 0:t.getSelectedLayer())===this},o.prototype.select=function(){var t;return(t=this.prop)===null||t===void 0?void 0:t.selectLayer(this)},o.prototype.remove=function(){var t;return(t=this.prop)===null||t===void 0?void 0:t.removeLayer(this)},o.prototype.move=function(t){var e;return(e=this.prop)===null||e===void 0?void 0:e.moveLayer(this,t)},o.prototype.getStylePreview=function(t){var e;return t===void 0&&(t={}),(e=this.prop)===null||e===void 0?void 0:e.getStylePreview(this,t)},o.prototype.hasPreview=function(){var t;return!!(!((t=this.prop)===null||t===void 0)&&t.get("preview"))},o.prototype.upValues=function(t){return t===void 0&&(t={}),this.set("values",sp(sp({},this.getValues()),t))},o}(E.Kx);const Lc=xm;var Cm=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ch=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return Cm(o,a),o.prototype.initialize=function(t,e){e===void 0&&(e={}),this.prop=e.prop},o}(E.pM);const lp=Ch;Ch.prototype.model=Lc;var Sm=_e(3178),Om=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Tm=function(a){function o(t){return a.call(this,t)||this}return Om(o,a),o.prototype.getChildren=function(){return this.model instanceof lp?this.model.models.map(function(t){return new o(t)}):null},o.prototype.getParent=function(){var t=this.model instanceof Lc?this.model.collection:null;return t?new o(t):null},o.prototype.addChildAt=function(t,e){if(this.model instanceof Lc)throw Error("Cannot add a layer model to another layer model");return new o(this.model.add(t.model,{at:e}))},o.prototype.removeChildAt=function(t){if(this.model instanceof Lc)throw Error("Cannot remove a layer model from another layer model");var e=this.model.at(t);e&&this.model.remove(e)},o.prototype.indexOfChild=function(t){return t.model instanceof Lc&&this.model instanceof lp?this.model.indexOf(t.model):-1},o.prototype.canMove=function(t,e){return this.model instanceof lp&&!!t.model},Object.defineProperty(o.prototype,"view",{get:function(){return this.model.view},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"element",{get:function(){var t;return(t=this.view)===null||t===void 0?void 0:t.el},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"model",{get:function(){return this._model},enumerable:!1,configurable:!0}),o}(Sm.$),Pm=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Xd=function(){return Xd=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},Xd.apply(this,arguments)},Em=function(a){function o(t){var e=t.em,n=t.containerContext,r=t.dragBehavior,l=t.positionOptions,p=l===void 0?{}:l,d=t.eventHandlers,g=d===void 0?{}:d,h=a.call(this,{em:e,treeClass:Tm,containerContext:n,positionOptions:p,dragBehavior:r,eventHandlers:Xd({onStartSort:function(m,w){var k;(k=g.onStartSort)===null||k===void 0||k.call(g,m,w),h.onLayerStartSort(m)},onDrop:function(m,w,k){var z;(z=g.onDrop)===null||z===void 0||z.call(g,m,w,k),h.onLayerDrop(m,w,k)},onEnd:function(){h.placeholder.hide()}},g)})||this;return h.onLayerStartSort=function(m){h.em.clearSelection();var w=m[0];h.em.trigger("sorter:drag:start",w?.element,w?.model),h.placeholder.show()},h.onLayerDrop=function(m,w,k){if(m){k=typeof k=="number"?k:-1;for(var z=0;z<w.length;z++){var B=w[z];if(m.canMove(B,z)){var nt=B.getParent(),X=-1;nt&&(X=nt.indexOfChild(B),nt.removeChildAt(X)),k=X<k?k-1:k,m.addChildAt(B,k)}}h.placeholder.hide()}},h}return Pm(o,a),o}(wh);const km=Em;var Am=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Jd=function(){return Jd=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},Jd.apply(this,arguments)};const jm=function(a){function o(t){var e=a.call(this,t,"Utils")||this;return e.Sorter=xh,e.Resizer=pm,e.Dragger=Bt.A,e.ComponentSorter=xh,e.StyleManagerSorter=km,e.helpers=Jd({},q),e}return Am(o,a),o.prototype.destroy=function(){},o}(ct);var br,Lr={},ir={16:!1,18:!1,17:!1,91:!1},Sh="all",Ds={"\u21E7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,command:91},Oh={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},Zd=function(a){return Oh[a]||a.toUpperCase().charCodeAt(0)},Fl=[];for(br=1;br<20;br++)Oh["f"+br]=111+br;function Ic(a,o){for(var t=a.length;t--;)if(a[t]===o)return t;return-1}function Mm(a,o){if(a.length!=o.length)return!1;for(var t=0;t<a.length;t++)if(a[t]!==o[t])return!1;return!0}var Dm={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function Lm(a){for(br in ir)ir[br]=a[Dm[br]]}function Im(a){var o,t=a.keyCode,e=Ic(Fl,t);if(e>=0&&Fl.splice(e,1),t!=93&&t!=224||(t=91),t in ir)for(o in ir[t]=!1,Ds)Ds[o]==t&&(ar[o]=!1)}function Nm(){for(br in ir)ir[br]=!1;for(br in Ds)ar[br]=!1}function ar(a,o,t){var e,n;e=Th(a),t===void 0&&(t=o,o="all");for(var r=0;r<e.length;r++)n=[],(a=e[r].split("+")).length>1&&(n=Ph(a),a=[a[a.length-1]]),a=a[0],(a=Zd(a))in Lr||(Lr[a]=[]),Lr[a].push({shortcut:e[r],scope:o,method:t,key:e[r],mods:n})}for(br in Ds)ar[br]=!1;function Qd(){return Sh||"all"}function Th(a){var o;return(o=(a=a.replace(/\s/g,"")).split(","))[o.length-1]==""&&(o[o.length-2]+=","),o}function Ph(a){for(var o=a.slice(0,a.length-1),t=0;t<o.length;t++)o[t]=Ds[o[t]];return o}function tf(a,o,t){a.addEventListener?a.addEventListener(o,t,!1):a.attachEvent&&a.attachEvent("on"+o,function(){t(window.event)})}ar.setScope=function(a){Sh=a||"all"},ar.getScope=Qd,ar.deleteScope=function(a){var o,t,e;for(o in Lr)for(t=Lr[o],e=0;e<t.length;)t[e].scope===a?t.splice(e,1):e++},ar.filter=function(a){var o=(a.target||a.srcElement).tagName;return!(o=="INPUT"||o=="SELECT"||o=="TEXTAREA")},ar.isPressed=function(a){return typeof a=="string"&&(a=Zd(a)),Ic(Fl,a)!=-1},ar.getPressedKeyCodes=function(){return Fl.slice(0)},ar.unbind=function(a,o){var t,e,n,r,l,p=[];for(t=Th(a),r=0;r<t.length;r++){if((e=t[r].split("+")).length>1&&(p=Ph(e)),a=e[e.length-1],a=Zd(a),o===void 0&&(o=Qd()),!Lr[a])return;for(n=0;n<Lr[a].length;n++)(l=Lr[a][n]).scope===o&&Mm(l.mods,p)&&(Lr[a][n]={})}},ar.handlers=Lr,ar.init=function(a){tf(a.document,"keydown",function(o){(function(t){var e,n,r,l,p,d;if(e=t.keyCode,Ic(Fl,e)==-1&&Fl.push(e),e!=93&&e!=224||(e=91),e in ir)for(r in ir[e]=!0,Ds)Ds[r]==e&&(ar[r]=!0);else if(Lm(t),ar.filter.call(this,t)&&e in Lr){for(d=Qd(),l=0;l<Lr[e].length;l++)if((n=Lr[e][l]).scope==d||n.scope=="all"){for(r in p=n.mods.length>0,ir)(!ir[r]&&Ic(n.mods,+r)>-1||ir[r]&&Ic(n.mods,+r)==-1)&&(p=!1);(n.mods.length!=0||ir[16]||ir[18]||ir[17]||ir[91])&&!p||n.method(t,n)===!1&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0))}}})(o)}),tf(a.document,"keyup",Im),tf(a,"focus",Nm)};const Nc=ar,Vm=function(){return{defaults:{"core:undo":{keys:"\u2318+z, ctrl+z",handler:"core:undo",opts:{prevent:!0}},"core:redo":{keys:"\u2318+shift+z, ctrl+shift+z",handler:"core:redo",opts:{prevent:!0}},"core:copy":{keys:"\u2318+c, ctrl+c",handler:"core:copy"},"core:paste":{keys:"\u2318+v, ctrl+v",handler:"core:paste"},"core:component-next":{keys:"s",handler:"core:component-next"},"core:component-prev":{keys:"w",handler:"core:component-prev"},"core:component-enter":{keys:"d",handler:"core:component-enter"},"core:component-exit":{keys:"a",handler:"core:component-exit"},"core:component-delete":{keys:"backspace, delete",handler:"core:component-delete",opts:{prevent:!0}}}}};var Rm=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Eh=function(a,o,t){if(t||arguments.length===2)for(var e,n=0,r=o.length;n<r;n++)!e&&n in o||(e||(e=Array.prototype.slice.call(o,0,n)),e[n]=o[n]);return a.concat(e||Array.prototype.slice.call(o))};(0,q.hasWin)()&&Nc.init(window);var Fm=function(a){function o(t){var e=a.call(this,t,"Keymaps",Vm())||this;return e.keymaster=Nc,e.keymaps={},e}return Rm(o,a),o.prototype.onLoad=function(){if(!this.em.isHeadless){var t=this.config.defaults;for(var e in t){var n=t[e];this.add(e,n.keys,n.handler,n.opts||{})}}},o.prototype.add=function(t,e,n,r){r===void 0&&(r={});var l=this.em,p=l.Commands,d=l.getEditor(),g=l.Canvas,h={id:t,keys:e,handler:n};return this.keymaps[t]&&this.remove(t),this.keymaps[t]=h,Nc(e,function(m,w){var k,z={event:m,h:w},B=(0,C.isString)(n)?p.get(n):n;if(!l.isEditing()&&!d.Canvas.isInputFocused()||r.force){r.prevent&&((k=g.getCanvasView())===null||k===void 0||k.preventDefault(m)),(0,C.isFunction)(B)?B(d,0,z):p.runCommand(B,z);var nt=[t,w.shortcut,m];l.trigger.apply(l,Eh(["keymap:emit"],nt,!1)),l.trigger.apply(l,Eh(["keymap:emit:".concat(t)],nt,!1))}},void 0),l.trigger("keymap:add",h),h},o.prototype.get=function(t){return this.keymaps[t]},o.prototype.getAll=function(){return this.keymaps},o.prototype.remove=function(t){var e=this.em,n=this.get(t);if(n)return delete this.keymaps[t],n.keys.split(", ").forEach(function(r){Nc.unbind(r.trim())}),e?.trigger("keymap:remove",n),n},o.prototype.removeAll=function(){var t=this;return Object.keys(this.keymaps).forEach(function(e){return t.remove(e)}),Nc.handlers={},this},o.prototype.destroy=function(){this.removeAll(),this.keymaps={}},o}(ct);const Hm=Fm,Um=function(){return{stylePrefix:"mdl-",title:"",content:"",backdrop:!0,custom:!1,extend:{}}};var zm=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Bm=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return zm(o,a),o.prototype.defaults=function(){return{title:"",content:"",attributes:{},open:!1}},o.prototype.open=function(){this.set("open",!0)},o.prototype.close=function(){this.set("open",!1)},o}(ft.A);var Wm=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),cp=function(){return cp=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},cp.apply(this,arguments)},$m=function(a){function o(t){var e=a.call(this,t)||this,n=e.model;return e.listenTo(n,"change:open",e.updateOpen),e.listenTo(n,"change:title",e.updateTitle),e.listenTo(n,"change:content",e.updateContent),e}return Wm(o,a),o.prototype.template=function(t){var e=t.pfx,n=t.ppfx,r=t.content,l=t.title;return'<div class="'.concat(e,"dialog ").concat(n,"one-bg ").concat(n,`two-color">
      <div class="`).concat(e,`header">
        <div class="`).concat(e,'title">').concat(l,`</div>
        <div class="`).concat(e,`btn-close" data-close-modal>&Cross;</div>
      </div>
      <div class="`).concat(e,`content">
        <div id="`).concat(e,'c">').concat(r,`</div>
        <div style="clear:both"></div>
      </div>
    </div>
    <div class="`).concat(e,'collector" style="display: none"></div>')},o.prototype.events=function(){return{click:"onClick","click [data-close-modal]":"hide"}},o.prototype.onClick=function(t){this.config.backdrop&&t.target===this.el&&this.hide()},o.prototype.getCollector=function(){return this.$collector||(this.$collector=this.$el.find("."+this.pfx+"collector")),this.$collector},o.prototype.getContent=function(){var t=this.pfx;return this.$content||(this.$content=this.$el.find(".".concat(t,"content #").concat(t,"c"))),this.$content},o.prototype.getTitle=function(t){return t===void 0&&(t={}),this.$title||(this.$title=this.$el.find("."+this.pfx+"title")),t.$?this.$title:this.$title.get(0)},o.prototype.updateContent=function(){var t=this.getContent(),e=t.children(),n=this.getCollector(),r=this.model.get("content");e.length&&n.append(e),t.empty().append(r)},o.prototype.updateTitle=function(){var t=this.getTitle({$:!0});t&&t.empty().append(this.model.get("title"))},o.prototype.updateOpen=function(){this.el.style.display=this.model.get("open")?"":"none"},o.prototype.hide=function(){this.model.close()},o.prototype.show=function(){this.model.open()},o.prototype.updateAttr=function(t){var e=this,n=e.pfx,r=e.$el,l=e.el,p=[].slice.call(l.attributes).map(function(d){return d.name});r.removeAttr(p.join(" ")),r.attr(cp(cp({},t||{}),{class:"".concat(n,"container ").concat(t&&t.class||"").trim()}))},o.prototype.render=function(){var t=this.$el,e=this.model.toJSON();return e.pfx=this.pfx,e.ppfx=this.ppfx,t.html(this.template(e)),this.updateAttr(),this.updateOpen(),this},o}(de);const qm=$m;var Gm=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Km=function(a){function o(t){var e=a.call(this,t,"Modal",Um())||this;return e.model=new Bm(e),e.model.on("change:open",function(n,r){t.trigger("modal:".concat(r?"open":"close"))}),e.model.on("change",(0,C.debounce)(function(){var n=e._evData(),r=e.config.custom;(0,C.isFunction)(r)&&r(n),t.trigger("modal",n)},0)),e}return Gm(o,a),o.prototype._evData=function(){var t=this,e=this.getTitle(),n=this.getContent(),r=this.model.attributes;return{open:r.open,attributes:r.attributes,title:(0,C.isString)(e)?(0,St.GZ)(e):e,content:(0,C.isString)(n)?(0,St.GZ)(n):n.get?n.get(0):n,close:function(){t.close()}}},o.prototype.postRender=function(t){var e=t.model.config.el||t.el,n=this.render();n&&e?.appendChild(n)},o.prototype.open=function(t){t===void 0&&(t={});var e=t.attributes||{};return t.title&&this.setTitle(t.title),t.content&&this.setContent(t.content),this.model.set("attributes",e),this.model.open(),this.modal&&this.modal.updateAttr(e),this},o.prototype.close=function(){return this.model.close(),this},o.prototype.onceClose=function(t){return this.em.once("modal:close",t),this},o.prototype.onceOpen=function(t){return this.em.once("modal:open",t),this},o.prototype.isOpen=function(){return!!this.model.get("open")},o.prototype.setTitle=function(t){return this.model.set("title",t),this},o.prototype.getTitle=function(){return this.model.get("title")},o.prototype.setContent=function(t){return this.model.set("content"," "),this.model.set("content",t),this},o.prototype.getContent=function(){return this.model.get("content")},o.prototype.getContentEl=function(){var t;return(t=this.modal)===null||t===void 0?void 0:t.getContent().get(0)},o.prototype.getModel=function(){return this.model},o.prototype.render=function(){var t;if(!this.config.custom){var e=qm.extend(this.config.extend),n=this.modal&&this.modal.el;return this.modal=new e({el:n,model:this.model,config:this.config}),(t=this.modal)===null||t===void 0?void 0:t.render().el}},o.prototype.destroy=function(){var t;(t=this.modal)===null||t===void 0||t.remove()},o}(ct);const Ym=Km;var kh="sw-visibility",Ah="export-template",jh="open-sm",Mh="open-tm",Dh="open-layers",Lh="open-blocks",ef="fullscreen",nf="preview";const Xm=function(){return{stylePrefix:"pn-",defaults:[{id:"commands",buttons:[{}]},{id:"options",buttons:[{active:!0,id:kh,className:"fa fa-square-o",command:"core:component-outline",context:kh,attributes:{title:"View components"}},{id:nf,className:"fa fa-eye",command:nf,context:nf,attributes:{title:"Preview"}},{id:ef,className:"fa fa-arrows-alt",command:ef,context:ef,attributes:{title:"Fullscreen"}},{id:Ah,className:"fa fa-code",command:Ah,attributes:{title:"View code"}}]},{id:"views",buttons:[{id:jh,className:"fa fa-paint-brush",command:jh,active:!0,togglable:!1,attributes:{title:"Open Style Manager"}},{id:Mh,className:"fa fa-cog",command:Mh,togglable:!1,attributes:{title:"Settings"}},{id:Dh,className:"fa fa-bars",command:Dh,togglable:!1,attributes:{title:"Open Layer Manager"}},{id:Lh,className:"fa fa-th-large",command:Lh,togglable:!1,attributes:{title:"Open Blocks"}}]}]}};var Jm=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Ih=function(a){function o(t,e){var n=a.call(this,t,e)||this;return n.get("buttons").length&&n.set("buttons",new Vh(n.module,n.get("buttons"))),n}return Jm(o,a),o.prototype.defaults=function(){return{id:"",label:"",tagName:"span",className:"",command:"",context:"",buttons:[],attributes:{},options:{},active:!1,dragDrop:!1,togglable:!0,runDefaultCommand:!0,stopDefaultCommand:!1,disable:!1}},Object.defineProperty(o.prototype,"className",{get:function(){return this.get("className")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"command",{get:function(){return this.get("command")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"active",{get:function(){return this.get("active")},set:function(t){this.set("active",t)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"togglable",{get:function(){return this.get("togglable")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"runDefaultCommand",{get:function(){return this.get("runDefaultCommand")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"stopDefaultCommand",{get:function(){return this.get("stopDefaultCommand")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"disable",{get:function(){return this.get("disable")},enumerable:!1,configurable:!0}),o}(ft.A);var Zm=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Nh=function(a){function o(t,e){return a.call(this,t,e,Ih)||this}return Zm(o,a),o.prototype.deactivateAllExceptOne=function(t,e){this.forEach(function(n,r){n!==t&&(n.set("active",!1),e&&n.get("buttons").length&&n.get("buttons").deactivateAllExceptOne(t,e))})},o.prototype.deactivateAll=function(t,e){var n=t||"";this.forEach(function(r){r.get("context")==n&&r!==e&&r.set("active",!1,{fromCollection:!0})})},o.prototype.disableAllButtons=function(t){var e=t||"";this.forEach(function(n,r){n.get("context")==e&&n.set("disable",!0)})},o.prototype.disableAllButtonsExceptOne=function(t,e){this.forEach(function(n,r){n!==t&&(n.set("disable",!0),e&&n.get("buttons").length&&n.get("buttons").disableAllButtonsExceptOne(t,e))})},o}(W);const Vh=Nh;Nh.prototype.model=Ih;var Qm=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Rh=function(a){function o(t,e){var n=a.call(this,t,e)||this,r=n.get("buttons")||[];return n.buttons=new Vh(t,r),n}return Qm(o,a),o.prototype.defaults=function(){return{id:"",content:"",visible:!0,buttons:[],attributes:{}}},Object.defineProperty(o.prototype,"buttons",{get:function(){return this.get("buttons")},set:function(t){this.set("buttons",t)},enumerable:!1,configurable:!0}),o}(ft.A);var ty=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Fh=function(a){function o(t,e){return a.call(this,t,e,Rh)||this}return ty(o,a),o}(W);const ey=Fh;Fh.prototype.model=Rh;var ny=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Hl=function(){return Hl=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},Hl.apply(this,arguments)},oy=function(a){function o(t){var e=a.call(this,t)||this,n=e,r=n.model,l=n.em,p=n.pfx,d=n.ppfx,g=r.className,h=r.attributes,m=h.command,w=h.listen;if(e.id=p+r.get("id"),e.activeCls="".concat(p,"active ").concat(d,"four-color"),e.disableCls="".concat(d,"disabled"),e.btnsVisCls="".concat(p,"visible"),e.className=p+"btn"+(g?" "+g:""),e.listenTo(r,"change",e.render),e.listenTo(r,"change:active updateActive",e.updateActive),e.listenTo(r,"checkActive",e.checkActive),e.listenTo(r,"change:bntsVis",e.updateBtnsVis),e.listenTo(r,"change:attributes",e.updateAttributes),e.listenTo(r,"change:className",e.updateClassName),e.listenTo(r,"change:disable",e.updateDisable),l&&(0,C.isString)(m)&&w){var k={fromListen:!0};e.listenTo(l,"run:".concat(m),function(){return r.set("active",!0,k)}),e.listenTo(l,"stop:".concat(m),function(){return r.set("active",!1,k)})}return l&&l.get&&(e.commands=l.get("Commands")),e}return ny(o,a),o.prototype.tagName=function(){return this.model.get("tagName")},o.prototype.events=function(){return{click:"clicked"}},o.prototype.updateClassName=function(){var t=this.model,e=this.pfx,n=t.className,r=t.get("attributes").class,l="".concat(r||""," ").concat(e,"btn ").concat(n||"");this.$el.attr("class",l.trim())},o.prototype.updateAttributes=function(){var t=this,e=t.em,n=t.model,r=t.$el,l=n.get("attributes")||{},p=e&&e.t&&e.t("panels.buttons.titles.".concat(n.id));r.attr(l),p&&r.attr({title:p}),this.updateClassName()},o.prototype.updateBtnsVis=function(){this.$buttons&&(this.model.get("bntsVis")?this.$buttons.addClass(this.btnsVisCls):this.$buttons.removeClass(this.btnsVisCls))},o.prototype.updateActive=function(t,e,n){var r;n===void 0&&(n={});var l=this,p=l.model,d=l.commands,g=l.$el,h=l.activeCls,m=n.fromCollection,w=n.fromListen,k=p.get("context"),z=p.get("options"),B=p.command,nt={};B&&(d&&(0,C.isString)(B)?nt=d.get(B)||{}:(0,C.isFunction)(B)?nt=d.create({run:B}):B!==null&&(0,C.isObject)(B)&&(nt=d.create(B)),p.active?(!m&&((r=p.collection)===null||r===void 0||r.deactivateAll(k,p)),p.set("active",!0,{silent:!0}).trigger("checkActive"),!w&&d.runCommand(nt,Hl(Hl({},z),{sender:p})),nt.noStop&&p.set("active",!1)):(g.removeClass(h),!w&&d.stopCommand(nt,Hl(Hl({},z),{sender:p,force:1}))))},o.prototype.updateDisable=function(){var t=this.disableCls,e=this.model.disable;this.$el[e?"addClass":"removeClass"](t)},o.prototype.checkActive=function(){var t=this,e=t.model,n=t.$el,r=t.activeCls;e.active?n.addClass(r):n.removeClass(r)},o.prototype.clicked=function(){var t=this.model;t.get("bntsVis")||t.disable||!t.command||this.toggleActive()},o.prototype.toggleActive=function(){var t=this.model,e=this.em,n=t.active,r=t.togglable;n&&!r||(t.active=!n,n?t.runDefaultCommand&&e.runDefault():t.stopDefaultCommand&&e.stopDefault())},o.prototype.render=function(){var t=this.model,e=t.get("label"),n=this.$el;return!t.get("el")&&n.empty(),this.updateAttributes(),e&&n.append(e),this.checkActive(),this.updateDisable(),this},o}(de);const ry=oy;var iy=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const ay=function(a){function o(t){var e=a.call(this,{collection:t})||this;return e.listenTo(e.collection,"add",e.addTo),e.listenTo(e.collection,"reset remove",e.render),e.className=e.pfx+"buttons",e}return iy(o,a),o.prototype.addTo=function(t){this.addToCollection(t)},o.prototype.addToCollection=function(t,e){var n=e||null,r=t.get("el"),l=new ry({el:r,model:t}).render().el;return n?n.appendChild(l):this.$el.append(l),l},o.prototype.render=function(){var t=this,e=document.createDocumentFragment();return this.$el.empty(),this.collection.each(function(n){return t.addToCollection(n,e)}),this.$el.append(e),this.$el.attr("class",(0,C.result)(this,"className")),this},o}(de);var sy=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),of=function(){return of=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},of.apply(this,arguments)},ly=function(a){function o(t){var e=a.call(this,{model:t,el:t.get("el")})||this;return e.className=e.pfx+"panel",e.id=e.pfx+t.get("id"),e.listenTo(t,"change:appendContent",e.appendContent),e.listenTo(t,"change:content",e.updateContent),e.listenTo(t,"change:visible",e.toggleVisible),t.view=e,e}return sy(o,a),o.prototype.appendContent=function(){this.$el.append(this.model.get("appendContent"))},o.prototype.updateContent=function(){this.$el.html(this.model.get("content"))},o.prototype.toggleVisible=function(){this.model.get("visible")?this.$el.removeClass("".concat(this.ppfx,"hidden")):this.$el.addClass("".concat(this.ppfx,"hidden"))},o.prototype.attributes=function(){return this.model.get("attributes")},o.prototype.initResize=function(){var t=this.em,e=t?.Editor,n=this.model.get("resizable");if(e&&n){var r=n===!0?[!0,!0,!0,!0]:n,l=r.length,p=void 0,d=void 0,g=void 0,h=!1;if(l==2)p=(m=r)[0],g=m[0],d=m[1],h=m[1];else if(l==4){var m;p=(m=r)[0],d=m[1],g=m[2],h=m[3]}var w=new e.Utils.Resizer(of({tc:p,cr:d,bc:g,cl:h,tl:!1,tr:!1,bl:!1,br:!1,appendTo:this.el,silentFrames:!0,avoidContainerUpdate:!0,prefix:e.getConfig().stylePrefix,onEnd:function(){t.Canvas.refresh({all:!0})},posFetcher:function(k,z){var B=z.target,nt=k.style,X=w.getConfig(),At=X.keyWidth,It=X.keyHeight,Wt=k.getBoundingClientRect(),oe=B=="container",ve=nt[At],we=nt[It];return{left:0,top:0,width:ve&&!oe?parseFloat(ve):Wt.width,height:we&&!oe?parseFloat(we):Wt.height}}},n&&typeof n!="boolean"?n:{}));w.blur=function(){},w.focus(this.el)}},o.prototype.render=function(){var t=this.model.buttons,e=this.$el,n=this.ppfx,r="".concat(this.className," ").concat(this.id," ").concat(n,"one-bg ").concat(n,"two-color");if(e.addClass(r),this.toggleVisible(),t.length){var l=new ay(t);e.append(l.render().el)}return e.append(this.model.get("content")),this},o}(de);const cy=ly;var uy=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const py=function(a){function o(t){var e=a.call(this,{collection:t})||this;return e.listenTo(t,"add",e.addTo),e.listenTo(t,"reset",e.render),e.listenTo(t,"remove",e.onRemove),e.className=e.pfx+"panels",e}return uy(o,a),o.prototype.onRemove=function(t){var e=t.view;e&&e.remove()},o.prototype.addTo=function(t){this.addToCollection(t)},o.prototype.addToCollection=function(t,e){var n=e||null,r=t.get("el"),l=new cy(t),p=l.render().el,d=t.get("appendTo");if(!r)if(d){var g=document.querySelector(d);g?.appendChild(p)}else n?n.appendChild(p):this.$el.append(p);return l.initResize(),p},o.prototype.render=function(){var t=this,e=this.$el,n=document.createDocumentFragment();return e.empty(),this.collection.each(function(r){return t.addToCollection(r,n)}),e.append(n),e.attr("class",this.className),this},o}(de);var dy=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),fy=function(a){function o(t){var e=a.call(this,t,"Panels",Xm())||this;return e.panels=new ey(e,e.config.defaults),e}return dy(o,a),o.prototype.getPanels=function(){return this.panels},o.prototype.getPanelsEl=function(){var t;return(t=this.PanelsViewObj)===null||t===void 0?void 0:t.el},o.prototype.addPanel=function(t){return this.panels.add(t)},o.prototype.removePanel=function(t){return this.panels.remove(t)},o.prototype.getPanel=function(t){var e=this.panels.where({id:t});return e.length?e[0]:null},o.prototype.addButton=function(t,e){var n=this.getPanel(t);return n?n.buttons.add(e):null},o.prototype.removeButton=function(t,e){var n=this.getPanel(t);return n&&n.buttons.remove(e)},o.prototype.getButton=function(t,e){var n=this.getPanel(t);if(n){var r=n.buttons.where({id:e});return r.length?r[0]:null}return null},o.prototype.render=function(){var t;return(t=this.PanelsViewObj)===null||t===void 0||t.remove(),this.PanelsViewObj=new py(this.panels),this.PanelsViewObj.render().el},o.prototype.active=function(){this.getPanels().each(function(t){t.buttons.each(function(e){e.get("active")&&e.trigger("updateActive")})})},o.prototype.disableButtons=function(){this.getPanels().each(function(t){t.buttons.each(function(e){e.get("disable")&&e.trigger("change:disable")})})},o.prototype.destroy=function(){this.panels.reset(),this.panels.stopListening(),this.PanelsViewObj&&this.PanelsViewObj.remove()},o}(ct);const hy=fy,gy=function(){return{stylePrefix:"cm-",optsCodeViewer:{}}};var vy=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),my=function(a,o){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&o.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(e=Object.getOwnPropertySymbols(a);n<e.length;n++)o.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(a,e[n])&&(t[e[n]]=a[e[n]])}return t};const yy=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return vy(o,a),o.prototype.build=function(t,e){e===void 0&&(e={});var n=e.em,r=my(e,["em"]);if(e.cleanId&&n){var l=n.Css.getAll().toJSON().map(function(p){var d=p.selectors,g=d&&d.length===1&&d.models[0];return g&&g.isId()&&g.get("name")}).filter(Boolean);r.attributes||(r.attributes=function(p,d){var g=d.id;return g&&g[0]==="i"&&!p.get("script")&&!p.get("script-export")&&!p.get("attributes").id&&l.indexOf(g)<0&&delete d.id,d})}return t.toHTML(r)},o}(E.Kx);var by=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),_y=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return by(o,a),o.prototype.build=function(t){var e=this,n=t.toJSON();return this.beforeEach(n),(0,C.each)(n,function(r,l){var p=n[l];if(p instanceof E.Kx)n[l]=e.build(p);else if(p instanceof E.pM){var d=p;n[l]=[],d.length&&d.forEach(function(g,h){n[l][h]=e.build(g)})}}),n},o.prototype.beforeEach=function(t){delete t.status},o}(E.Kx);const wy=_y;var xy=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();function Cy(a){var o;return(((o=a.toString().match(/\{([\s\S]*)\}/m))===null||o===void 0?void 0:o[1])||"").replace(/^\s*\/\/.*$/gm,"").trim().length===0}var Sy=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return xy(o,a),o.prototype.mapModel=function(t){var e,n=this,r="",l=t.get("script-export")||t.get("script"),p=t.get("type"),d=t.get("components"),g=t.getId();if(l){var h=t.get("attributes");h=(0,C.extend)({},h,{id:g}),t.set("attributes",h,{silent:!0});var m=t.getScriptString(l),w=t.get("script-props");if(t.get("scriptUpdated")&&!w)this.mapJs[p+"-"+g]={ids:[g],code:m};else{var k=void 0,z=this.mapJs[p];if(w&&(k=t.__getScriptProps()),z)z.ids.push(g),k&&(z.props[g]=k);else{var B={ids:[g],code:m};k&&(B.props=((e={})[g]=k,e)),this.mapJs[p]=B}}}return d.forEach(function(nt){r+=n.mapModel(nt)}),r},o.prototype.build=function(t){this.mapJs={},this.mapModel(t);var e="";for(var n in this.mapJs){var r=this.mapJs[n];if(r.code)if(r.props){if(Cy(r.code))continue;e+=`
          var props = `.concat(JSON.stringify(r.props),`;
          var ids = Object.keys(props).map(function(id) { return '#'+id }).join(',');
          var els = document.querySelectorAll(ids);
          for (var i = 0, len = els.length; i < len; i++) {
            var el = els[i];
            (`).concat(r.code,`.bind(el))(props[el.id]);
          }`)}else{var l="#"+r.ids.join(", #");e+=`
          var items = document.querySelectorAll('`.concat(l,`');
          for (var i = 0, len = items.length; i < len; i++) {
            (function(){
`).concat(r.code,`
}.bind(items[i]))();
          }`)}}return e},o}(E.Kx);const Oy=Sy;var Vc,Ty=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),rf=function(){return rf=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},rf.apply(this,arguments)};(0,q.hasWin)()&&(Vc=_e(4408),_e(8253),_e(7389),_e(3640));var Hh=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return Ty(o,a),o.prototype.defaults=function(){return{input:"",label:"",codeName:"",theme:"hopscotch",readOnly:!0,lineNumbers:!0,autoFormat:!0}},o.prototype.init=function(t){return(0,C.bindAll)(this,"onChange"),this.editor=Vc.fromTextArea(t,rf({dragDrop:!1,lineWrapping:!0,mode:this.get("codeName")},this.attributes)),this.element=t,this.editor.on("change",this.onChange),this},o.prototype.onChange=function(){this.trigger("update",this)},o.prototype.getEditor=function(){return this.editor},o.prototype.getElement=function(){return this.element},o.prototype.setElement=function(t){return this.element=t,this},o.prototype.refresh=function(){return this.getEditor().refresh(),this},o.prototype.focus=function(){return this.getEditor().focus(),this},o.prototype.getContent=function(){var t=this.getEditor();return t&&t.getValue()},o.prototype.setContent=function(t,e){var n=this;e===void 0&&(e={});var r=this.editor;if(r){r.setValue(t);var l=this.get("autoFormat");r.autoFormatRange&&(l===!0||Array.isArray(l)&&l.includes(this.get("codeName")))&&(Vc.commands.selectAll(r),r.autoFormatRange(r.getCursor(!0),r.getCursor(!1)),Vc.commands.goDocStart(r)),!e.noRefresh&&setTimeout(function(){return n.refresh()})}},o}(E.Kx);const Py=Hh;Hh.prototype.CodeMirror=Vc;var Ey=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ky=function(a,o){return Object.defineProperty?Object.defineProperty(a,"raw",{value:o}):a.raw=o,a},Ay=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return Ey(o,a),o.prototype.template=function(t){var e=t.pfx,n=t.codeName,r=t.label;return it(Uh||(Uh=ky([`
      <div class="`,'editor" id="',"",`">
        <div id="`,'title">',`</div>
        <div id="`,`code"></div>
      </div>
    `],[`
      <div class="`,'editor" id="',"",`">
        <div id="`,'title">',`</div>
        <div id="`,`code"></div>
      </div>
    `])),e,e,n,e,r,e)},o.prototype.initialize=function(t){this.config=t.config||{},this.pfx=this.config.stylePrefix},o.prototype.render=function(){var t,e,n=this,r=n.model,l=n.pfx,p=n.$el,d=r.toJSON(),g=r.get("input")||((e=(t=r).getElement)===null||e===void 0?void 0:e.call(t));return d.pfx=l,p.html(this.template(d)),p.attr("class","".concat(l,"editor-c")),p.find("#".concat(l,"code")).append(g),this},o}(E.Ss);const jy=Ay;var Uh,My=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),up=function(){return up=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},up.apply(this,arguments)},Dy="CodeMirror",Ly=function(a){function o(t){var e=a.call(this,t,"CodeManager",gy())||this;e.EditorView=jy;var n=e.config,r=n.pStylePrefix;return r&&(n.stylePrefix=r+n.stylePrefix),e.generators={},e.viewers={},e.defGenerators={html:new yy,css:new ai,json:new wy,js:new Oy},e.defViewers={CodeMirror:new Py},e.loadDefaultGenerators().loadDefaultViewers(),e}return My(o,a),o.prototype.addGenerator=function(t,e){return this.generators[t]=e,this},o.prototype.getGenerator=function(t){return this.generators[t]},o.prototype.getGenerators=function(){return this.generators},o.prototype.addViewer=function(t,e){return this.viewers[t]=e,this},o.prototype.getViewer=function(t){return this.viewers[t]},o.prototype.getViewers=function(){return this.viewers},o.prototype.createViewer=function(t){t===void 0&&(t={});var e=(0,C.isUndefined)(t.type)?Dy:t.type,n=this.getViewer(e)&&this.getViewer(e).clone(),r=document.createElement("div"),l=document.createElement("textarea");return r.appendChild(l),n.set(up(up({},this.config.optsCodeViewer),t)),n.init(l),n.setElement(r),n},o.prototype.updateViewer=function(t,e){t.setContent(e)},o.prototype.getCode=function(t,e,n){n===void 0&&(n={}),n.em=this.em;var r=this.getGenerator(e);return r?r.build(t,n):""},o.prototype.loadDefaultGenerators=function(){for(var t in this.defGenerators)this.addGenerator(t,this.defGenerators[t]);return this},o.prototype.loadDefaultViewers=function(){for(var t in this.defViewers)this.addViewer(t,this.defViewers[t]);return this},o.prototype.destroy=function(){},o}(ct);const Iy=Ly;var Ny=_e(4729),Vy=_e.n(Ny);const Ry=function(){return{maximumStackLength:500,trackSelection:!0}};var sr;(function(a){a.update="update",a.undo="undo",a.redo="redo",a.load="load",a.projectLoad="project:load",a.projectLoaded="project:loaded",a.projectGet="project:get",a.log="log",a.telemetryInit="telemetry:init",a.destroy="destroy",a.destroyed="destroyed"})(sr||(sr={}));var Fy=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),oa=function(){return oa=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},oa.apply(this,arguments)},Hy=function(a,o,t){if(t||arguments.length===2)for(var e,n=0,r=o.length;n<r;n++)!e&&n in o||(e||(e=Array.prototype.slice.call(o,0,n)),e[n]=o[n]);return a.concat(e||Array.prototype.slice.call(o))},pp=function(a){return a.avoidStore||a.noUndo||a.partial},zh=function(a){return Object.keys(a.changedAttributes())},dp=new WeakMap,Uy=function(a){function o(t){var e=a.call(this,t,"UndoManager",Ry())||this;e.config._disable&&(e.config.maximumStackLength=0);var n=!0;return e.um=new(Vy())(oa({track:!0,register:[]},e.config)),e.um.changeUndoType("change",{condition:function(r){var l=r.get("_undo");if(l){var p=r.get("_undoexc");if((0,C.isArray)(p)&&zh(r).some(function(d){return p.indexOf(d)>=0}))return!1;if((0,C.isBoolean)(l)||(0,C.isArray)(l)&&zh(r).some(function(d){return l.indexOf(d)>=0}))return!0}return!1},on:function(r,l,p){var d=dp.get(r);d||(d=r.previousAttributes(),dp.set(r,d));var g=p||l||{};if(g.noUndo&&setTimeout(function(){dp.delete(r)}),!pp(g)){var h=r.toJSON({fromUndo:n}),m={object:r,before:d,after:h};if(dp.delete(r),!(0,C.isEmpty)(h))return m}}}),e.um.changeUndoType("add",{on:function(r,l,p){if(p===void 0&&(p={}),!pp(p)&&e.isRegistered(l))return{object:l,before:void 0,after:r,options:oa(oa({},p),{fromUndo:n})}}}),e.um.changeUndoType("remove",{on:function(r,l,p){if(p===void 0&&(p={}),!pp(p)&&e.isRegistered(l))return{object:l,before:r,after:void 0,options:oa(oa({},p),{fromUndo:n})}}}),e.um.changeUndoType("reset",{undo:function(r,l){r.reset(l,{fromUndo:n})},redo:function(r,l,p){r.reset(p,{fromUndo:n})},on:function(r,l){if(l===void 0&&(l={}),!pp(l)&&e.isRegistered(r))return{object:r,before:l.previousModels,after:Hy([],r.models,!0),options:oa(oa({},l),{fromUndo:n})}}}),e.um.on("undo redo",function(){t.getSelectedAll().map(function(r){return r.trigger("rerender:layer")})}),[sr.undo,sr.redo].forEach(function(r){return e.um.on(r,function(){return t.trigger(r)})}),e}return Fy(o,a),o.prototype.postLoad=function(){var t=this.config,e=this.em;t.trackSelection&&e&&this.add(e.get("selected"))},o.prototype.add=function(t){return this.um.register(t),this},o.prototype.remove=function(t){return this.um.unregister(t),this},o.prototype.removeAll=function(){return this.um.unregisterAll(),this},o.prototype.start=function(){return this.um.startTracking(),this},o.prototype.stop=function(){return this.um.stopTracking(),this},o.prototype.undo=function(t){t===void 0&&(t=!0);var e=this.em,n=this.um;return!e.isEditing()&&n.undo(t),this},o.prototype.undoAll=function(){return this.um.undoAll(),this},o.prototype.redo=function(t){t===void 0&&(t=!0);var e=this.em,n=this.um;return!e.isEditing()&&n.redo(t),this},o.prototype.redoAll=function(){return this.um.redoAll(),this},o.prototype.hasUndo=function(){return!!this.um.isAvailable("undo")},o.prototype.hasRedo=function(){return!!this.um.isAvailable("redo")},o.prototype.isRegistered=function(t){return!!this.getInstance().objectRegistry.isRegistered(t)},o.prototype.getStack=function(){return this.um.stack},o.prototype.getStackGroup=function(){var t=[],e=[];return this.getStack().forEach(function(n){var r=n.get("magicFusionIndex");e.indexOf(r)<0&&(e.push(r),t.push(n))}),t},o.prototype.skip=function(t){var e=!!this.um.isTracking();e&&this.stop(),t(),e&&this.start()},o.prototype.getGroupedStack=function(){var t={},e=this.getStack();return e.forEach(function(n,r){var l=n.get("magicFusionIndex"),p=function(d,g){var h=d.attributes,m=h.type,w=h.after,k=h.before,z=h.object,B=h.options;return{index:g,type:m,after:w,before:k,object:z,options:B===void 0?{}:B}}(n,r);t[l]?t[l].push(p):t[l]=[p]}),Object.keys(t).map(function(n){var r=t[n];return{index:r[r.length-1].index,actions:r,labels:(0,C.unique)(r.reduce(function(l,p){var d,g=(d=p.options)===null||d===void 0?void 0:d.action;return g&&l.push(g),l},[]))}})},o.prototype.goToGroup=function(t){var e=this;if(t){var n=this.getPointer(),r=t.index-n;(0,C.times)(Math.abs(r),function(){e[r<0?"undo":"redo"](!1)})}},o.prototype.getPointer=function(){return this.getStack().pointer},o.prototype.clear=function(){return this.um.clear(),this},o.prototype.getInstance=function(){return this.um},o.prototype.destroy=function(){this.clear().removeAll()},o}(ct);const zy=Uy,By=function(){return{stylePrefix:"rte-",adjustToolbar:!0,actions:["bold","italic","underline","strikethrough","link","wrap"],custom:!1}};var fp,Ul=function(){return Ul=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},Ul.apply(this,arguments)};(function(a){a[a.ACTIVE=1]="ACTIVE",a[a.INACTIVE=0]="INACTIVE",a[a.DISABLED=-1]="DISABLED"})(fp||(fp={}));var af="_rte",Bh=1,sf=0,Wh=-1,hp=function(a,o){o===void 0&&(o="A");var t=a.selection()||{},e=t.anchorNode,n=t.focusNode,r=e?.parentNode,l=n?.parentNode;return r?.nodeName==o||l?.nodeName==o},gp="data-selectme",Rc={bold:{name:"bold",icon:"<b>B</b>",attributes:{title:"Bold"},result:function(a){return a.exec("bold")}},italic:{name:"italic",icon:"<i>I</i>",attributes:{title:"Italic"},result:function(a){return a.exec("italic")}},underline:{name:"underline",icon:"<u>U</u>",attributes:{title:"Underline"},result:function(a){return a.exec("underline")}},strikethrough:{name:"strikethrough",icon:"<s>S</s>",attributes:{title:"Strike-through"},result:function(a){return a.exec("strikeThrough")}},link:{icon:`<svg viewBox="0 0 24 24">
          <path fill="currentColor" d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z" />
        </svg>`,name:"link",attributes:{style:"font-size:1.4rem;padding:0 4px 2px;",title:"Link"},state:function(a){return a&&a.selection()&&hp(a)?Bh:sf},result:function(a){hp(a)?a.exec("unlink"):a.insertHTML('<a href="" '.concat(gp,">").concat(a.selection(),"</a>"),{select:!0})}},wrap:{name:"wrap",icon:`<svg viewBox="0 0 24 24">
            <path fill="currentColor" d="M20.71,4.63L19.37,3.29C19,2.9 18.35,2.9 17.96,3.29L9,12.25L11.75,15L20.71,6.04C21.1,5.65 21.1,5 20.71,4.63M7,14A3,3 0 0,0 4,17C4,18.31 2.84,19 2,19C2.92,20.22 4.5,21 6,21A4,4 0 0,0 10,17A3,3 0 0,0 7,14Z" />
        </svg>`,attributes:{title:"Wrap for style"},state:function(a){return a?.selection()&&hp(a,"SPAN")?Wh:sf},result:function(a){!hp(a,"SPAN")&&a.insertHTML("<span ".concat(gp,">").concat(a.selection(),"</span>"),{select:!0})}}},Wy=function(){function a(o,t,e){e===void 0&&(e={});var n=this;if(this.em=o,this.settings=e,t[af])return t[af];t[af]=this,this.setEl(t),this.updateActiveActions=this.updateActiveActions.bind(this),this.__onKeydown=this.__onKeydown.bind(this),this.__onPaste=this.__onPaste.bind(this);var r=(e.actions||[]).map(function(h){var m=h;return(0,C.isString)(h)?m=Ul({},Rc[h]):Rc[h.name]&&(m=Ul(Ul({},Rc[h.name]),h)),m}),l=r.length?r:Object.keys(Rc).map(function(h){return Rc[h]});e.classes=Ul({actionbar:"actionbar",button:"action",active:"active",disabled:"disabled",inactive:"inactive"},e.classes);var p=e.classes,d=e.actionbar;if(this.actionbar=d,this.classes=p,this.actions=l,!d){if(!this.isCustom(e.module)){var g=e.actionbarContainer;(d=document.createElement("div")).className=p.actionbar,g?.appendChild(d),this.actionbar=d}l.forEach(function(h){return n.addAction(h)})}return e.styleWithCSS&&this.exec("styleWithCSS"),this}return a.prototype.isCustom=function(o){var t=o||this.em.RichTextEditor;return!(!t?.config.custom&&!t?.customRte)},a.prototype.destroy=function(){},a.prototype.setEl=function(o){this.el=o,this.doc=o.ownerDocument},a.prototype.updateActiveActions=function(){var o=this,t=this.getActions();t.forEach(function(e){var n=e.update,r=e.btn,l=o.classes,p=l.active,d=l.inactive,g=l.disabled,h=e.state,m=e.name,w=o.doc,k=fp.INACTIVE;if(r&&(r.className=r.className.replace(p,"").trim(),r.className=r.className.replace(d,"").trim(),r.className=r.className.replace(g,"").trim()),h){var z=h(o,w);if(k=z,r)switch(z){case Bh:r.className+=" ".concat(p);break;case sf:r.className+=" ".concat(d);break;case Wh:r.className+=" ".concat(g)}}else w.queryCommandSupported(m)&&w.queryCommandState(m)&&(r&&(r.className+=" ".concat(p)),k=fp.ACTIVE);e.currentState=k,n?.(o,e)}),t.length&&this.em.RichTextEditor.__dbdTrgCustom()},a.prototype.enable=function(o){return this.enabled?this:this.__toggleEffects(!0,o)},a.prototype.disable=function(){return this.__toggleEffects(!1)},a.prototype.__toggleEffects=function(o,t){o===void 0&&(o=!1),t===void 0&&(t={});var e=o?St.on:St.AU,n=this.el,r=this.doc,l=this.actionbarEl();if(l&&(l.style.display=o?"":"none"),n.contentEditable="".concat(!!o),e(n,"mouseup keyup",this.updateActiveActions),e(r,"keydown",this.__onKeydown),e(r,"paste",this.__onPaste),this.enabled=o,o){var p=t.event;if(this.syncActions(),this.updateActiveActions(),p){var d=null;if(r.caretRangeFromPoint){var g=(0,St.G2)(p);d=r.caretRangeFromPoint(g.clientX,g.clientY)}else p.rangeParent&&(d=r.createRange()).setStart(p.rangeParent,p.rangeOffset);var h=r.getSelection();h?.removeAllRanges(),d&&h?.addRange(d)}n.focus()}return this},a.prototype.__onKeydown=function(o){var t=this.em,e=t.RichTextEditor.getConfig().onKeydown;if(e)return e({ev:o,rte:this,editor:t.getEditor()});var n=this.doc;o.key!=="Enter"||["insertOrderedList","insertUnorderedList"].some(function(r){return n.queryCommandState(r)})||(n.execCommand("insertLineBreak"),o.preventDefault())},a.prototype.__onPaste=function(o){var t=this.em,e=t.RichTextEditor.getConfig().onPaste;if(e)return e({ev:o,rte:this,editor:t.getEditor()});var n=o.clipboardData,r=n.getData("text"),l=n.getData("text/html");if(r&&!l){o.preventDefault();var p=r.replace(/(?:\r\n|\r|\n)/g,"<br/>");this.doc.execCommand("insertHTML",!1,p)}},a.prototype.syncActions=function(){var o=this;this.getActions().forEach(function(t){if(o.actionbar&&(!t.state||t.state&&t.state(o,o.doc)>=0)){var e=t.event||"click",n=t.btn;n&&(n["on".concat(e)]=function(){t.result(o,t),o.updateActiveActions()})}})},a.prototype.addAction=function(o,t){t===void 0&&(t={});var e=t.sync,n=this.actionbarEl();if(n){var r=o.icon,l=o.attributes,p=l===void 0?{}:l,d=document.createElement("span");for(var g in d.className=this.classes.button,o.btn=d,p)d.setAttribute(g,p[g]);typeof r=="string"?d.innerHTML=r:d.appendChild(r),n.appendChild(d)}e&&(this.actions.push(o),this.syncActions())},a.prototype.getActions=function(){return this.actions},a.prototype.selection=function(){return this.doc.getSelection()},a.prototype.exec=function(o,t){this.doc.execCommand(o,!1,t)},a.prototype.actionbarEl=function(){return this.actionbar},a.prototype.insertHTML=function(o,t){var e=(t===void 0?{}:t).select,n=this,r=n.em,l=n.doc,p=n.el,d=l.getSelection();if(d&&d.rangeCount){var g=(0,q.getComponentModel)(p)||r.getSelected(),h=l.createElement("div"),m=d.getRangeAt(0);m.deleteContents(),(0,C.isString)(o)?h.innerHTML=o:o&&h.appendChild(o),Array.prototype.slice.call(h.childNodes).forEach(function(w){m.insertNode(w)}),d.removeAllRanges(),d.addRange(m),p.focus(),e&&g&&(g.once("rte:disable",function(){var w=g.find("[".concat(gp,"]"))[0];w&&(r.setSelected(w),w.removeAttributes(gp))}),g.trigger("disable"))}},a}();const $y=Wy;var qy=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),vp=function(){return vp=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},vp.apply(this,arguments)},lf=function(a,o,t,e){return new(t||(t=Promise))(function(n,r){function l(g){try{d(e.next(g))}catch(h){r(h)}}function p(g){try{d(e.throw(g))}catch(h){r(h)}}function d(g){var h;g.done?n(g.value):(h=g.value,h instanceof t?h:new t(function(m){m(h)})).then(l,p)}d((e=e.apply(a,o||[])).next())})},cf=function(a,o){var t,e,n,r,l={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function p(d){return function(g){return function(h){if(t)throw new TypeError("Generator is already executing.");for(;r&&(r=0,h[0]&&(l=0)),l;)try{if(t=1,e&&(n=2&h[0]?e.return:h[0]?e.throw||((n=e.return)&&n.call(e),0):e.next)&&!(n=n.call(e,h[1])).done)return n;switch(e=0,n&&(h=[2&h[0],n.value]),h[0]){case 0:case 1:n=h;break;case 4:return l.label++,{value:h[1],done:!1};case 5:l.label++,e=h[1],h=[0];continue;case 7:h=l.ops.pop(),l.trys.pop();continue;default:if(n=l.trys,!((n=n.length>0&&n[n.length-1])||h[0]!==6&&h[0]!==2)){l=0;continue}if(h[0]===3&&(!n||h[1]>n[0]&&h[1]<n[3])){l.label=h[1];break}if(h[0]===6&&l.label<n[1]){l.label=n[1],n=h;break}if(n&&l.label<n[2]){l.label=n[2],l.ops.push(h);break}n[2]&&l.ops.pop(),l.trys.pop();continue}h=o.call(a,l)}catch(m){h=[6,m],e=0}finally{t=n=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([d,g])}}},Gy=function(a,o,t){if(t||arguments.length===2)for(var e,n=0,r=o.length;n<r;n++)!e&&n in o||(e||(e=Array.prototype.slice.call(o,0,n)),e[n]=o[n]);return a.concat(e||Array.prototype.slice.call(o))},uf="".concat(ot.refresh," frame:scroll ").concat(jt.I.update),Ky={enable:"rte:enable",disable:"rte:disable",custom:"rte:custom"},Yy=function(a){function o(t){var e=a.call(this,t,"RichTextEditor",By())||this;e.events=Ky;var n=e.config,r=n.pStylePrefix;r&&(n.stylePrefix=r+n.stylePrefix),e.pfx=n.stylePrefix,e.actions=n.actions||[];var l=new E.Kx;return e.model=l,l.on("change:currentView",e.__trgCustom,e),e.__dbdTrgCustom=(0,C.debounce)(function(){return e.__trgCustom()},0),e}return qy(o,a),o.prototype.onLoad=function(){if((0,q.hasWin)()){var t=this.config,e=t.pStylePrefix,n=t.custom,r=(0,St.a_)("div",{class:(0,St.cx)("".concat(e,"rte-toolbar"),!n&&"".concat(e,"one-bg ").concat(e,"rte-toolbar-ui"))});this.toolbar=r,this.initRte((0,St.a_)("div")),(0,St.on)(r,"mousedown",function(l){return l.stopPropagation()})}},o.prototype.__trgCustom=function(){var t=this,e=t.model,n=t.em,r=t.events;n.trigger(r.custom,{enabled:!!e.get("currentView"),container:this.getToolbarEl(),actions:this.getAll()})},o.prototype.destroy=function(){var t,e,n;(t=this.globalRte)===null||t===void 0||t.destroy(),(n=(e=this.customRte)===null||e===void 0?void 0:e.destroy)===null||n===void 0||n.call(e),this.model.stopListening().clear({silent:!0}),this.__dbdTrgCustom.cancel(),(0,St.YZ)(this.toolbar)},o.prototype.postRender=function(t){var e=t.model.get("Canvas");this.toolbar.style.pointerEvents="all",this.hideToolbar(),e.getToolsEl().appendChild(this.toolbar)},o.prototype.initRte=function(t){var e=this.globalRte,n=this,r=n.em,l=n.pfx,p=n.actionbar,d=n.config,g=this.actions||Gy([],d.actions,!0),h={actionbar:"".concat(l,"actionbar"),button:"".concat(l,"action"),active:"".concat(l,"active"),inactive:"".concat(l,"inactive"),disabled:"".concat(l,"disabled")};return e?(e.em=r,e.setEl(t)):(e=new $y(r,t,{classes:h,actions:g,actionbar:p,actionbarContainer:this.toolbar,module:this}),this.globalRte=e),e.actionbar&&(this.actionbar=e.actionbar),e.actions&&(this.actions=e.actions),e},o.prototype.add=function(t,e){var n;e===void 0&&(e={}),e.name=t,(n=this.globalRte)===null||n===void 0||n.addAction(e,{sync:!0})},o.prototype.get=function(t){var e,n;return(e=this.globalRte)===null||e===void 0||e.getActions().forEach(function(r){r.name==t&&(n=r)}),n},o.prototype.getAll=function(){var t;return((t=this.globalRte)===null||t===void 0?void 0:t.getActions())||[]},o.prototype.remove=function(t){var e,n=this.getAll(),r=this.get(t);if(r){var l=r.btn,p=n.indexOf(r);(e=l?.parentNode)===null||e===void 0||e.removeChild(l),n.splice(p,1)}return r},o.prototype.run=function(t){var e=this.globalRte,n=(0,C.isString)(t)?this.get(t):t;e&&n&&(n.result(e,n),e.updateActiveActions())},o.prototype.getToolbarEl=function(){return this.toolbar},o.prototype.updatePosition=function(){var t=this.em,e=this.toolbar,n="px",r=t.Canvas,l=e.style,p=r.getTargetToElementFixed(this.lastEl,e,{event:"rteToolbarPosUpdate",left:0});["top","left","bottom","right"].forEach(function(d){var g=p[d];(0,q.isDef)(g)&&(l[d]=(0,C.isString)(g)?g:(g||0)+n)})},o.prototype.enable=function(t,e,n){return lf(this,void 0,void 0,function(){var r,l,p,d,g;return cf(this,function(h){switch(h.label){case 0:return this.lastEl=t.el,l=(r=this).customRte,p=r.em,d=t.getChildrenContainer(),this.toolbar.style.display="",[4,l?l.enable(d,e,n):this.initRte(d).enable(n)];case 1:return g=h.sent(),p&&(setTimeout(this.updatePosition.bind(this),0),p.off(uf,this.updatePosition,this),p.on(uf,this.updatePosition,this),p.trigger("rte:enable",t,g)),this.model.set({currentView:t}),[2,g]}})})},o.prototype.getContent=function(t,e){return lf(this,void 0,void 0,function(){var n,r;return cf(this,function(l){switch(l.label){case 0:return n=this.customRte,r=t.getChildrenContainer(),n&&e&&(0,C.isFunction)(n.getContent)?[4,n.getContent(r,e,{view:t})]:[3,2];case 1:return[2,l.sent()];case 2:return[2,r.innerHTML]}})})},o.prototype.hideToolbar=function(){var t=this.toolbar.style,e="-1000px";t.top=e,t.left=e,t.display="none"},o.prototype.disable=function(t,e){return lf(this,arguments,void 0,function(n,r,l){var p,d,g,h;return l===void 0&&(l={}),cf(this,function(m){switch(m.label){case 0:return p={},d=this.em,(g=this.customRte)?[4,g.disable(n.getChildrenContainer(),r,vp(vp({},l),{view:n}))]:[3,2];case 1:return(h=m.sent())&&(p=h),[3,3];case 2:r&&r.disable(),m.label=3;case 3:return this.hideToolbar(),d&&(d.off(uf,this.updatePosition,this),!l.fromMove&&d.trigger("rte:disable",n,r)),this.model.unset("currentView"),[2,p]}})})},o}(ct);const Xy=Yy,Jy=function(){return{sectors:[{name:"General",open:!1,properties:["display","float","position","top","right","left","bottom"]},{name:"Flex",open:!1,properties:["flex-direction","flex-wrap","justify-content","align-items","align-content","order","flex-basis","flex-grow","flex-shrink","align-self"]},{name:"Dimension",open:!1,properties:["width","height","max-width","min-height","margin","padding"]},{name:"Typography",open:!1,properties:["font-family","font-size","font-weight","letter-spacing","color","line-height","text-align","text-shadow"]},{name:"Decorations",open:!1,properties:["background-color","border-radius","border","box-shadow","background"]},{name:"Extra",open:!1,properties:["opacity","transition","transform"]}],appendTo:"",stylePrefix:"sm-",custom:!1,hideNotStylable:!0,highlightChanged:!0,highlightComputed:!0,showComputed:!0,clearProperties:!0,avoidComputed:["width","height"]}};var Zy=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),lr=function(){return lr=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},lr.apply(this,arguments)},Qy=function(a,o){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&o.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(e=Object.getOwnPropertySymbols(a);n<e.length;n++)o.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(a,e[n])&&(t[e[n]]=a[e[n]])}return t},$h=function(a,o,t){if(t||arguments.length===2)for(var e,n=0,r=o.length;n<r;n++)!e&&n in o||(e||(e=Array.prototype.slice.call(o,0,n)),e[n]=o[n]);return a.concat(e||Array.prototype.slice.call(o))},pf=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return Zy(o,a),o.getDefaults=function(){return(0,C.result)(this.prototype,"defaults")},o.prototype.defaults=function(){return{name:"",property:"",type:"",defaults:"",info:"",value:"",icon:"",functionName:"",status:"",visible:!0,fixedValues:["initial","inherit"],full:!1,important:!1,toRequire:!1,requires:void 0,requiresParent:null,parentTarget:null}},o.prototype.initialize=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),this.em=e.em;var n=this.getId()||"",r=this.get("name")||this.get("label")||"";!this.get("property")&&this.set("property",(r||n).replace(/ /g,"-"));var l=this.get("property");!this.get("id")&&this.set("id",l),!r&&this.set("name",(0,q.capitalize)(l).replace(/-/g," ")),this.on("change",this.__upTargets),o.callInit(this,t,e)},o.prototype.__getParentProp=function(){var t,e;return(e=(t=this.collection)===null||t===void 0?void 0:t.opts)===null||e===void 0?void 0:e.parentProp},o.prototype.__upTargets=function(t,e){var n,r=this;e===void 0&&(e={});var l=this.em.Styles,p=this.getName(),d=e.__clear,g=d?"":this.__getFullValue(e),h=this.__getParentProp(),m=this.changedAttributes(),w=(0,C.keys)(m).reduce(function(At,It){return At[It]=r.previous(It),At},{}),k=$h($h([],(0,C.keys)(this.__getClearProps()),!0),["__p"],!1),z=(0,C.keys)(m),B=!e.__up&&!h&&(d||k.some(function(At){return z.indexOf(At)>=0})),nt=this.get("onChange"),X={property:this,from:w,to:m,value:g,opts:e};l.__trgEv(l.events.propertyUpdate,X),nt&&nt(X),B&&this.__upTargetsStyle(((n={})[p]=g,n),e)},o.prototype.__upTargetsStyle=function(t,e){var n,r=(n=this.em)===null||n===void 0?void 0:n.get("StyleManager");r?.addStyleTargets(lr(lr({},t),{__p:!!e.avoidStore}),e)},o.prototype._up=function(t,e){e===void 0&&(e={}),e.noTarget&&(e.__up=!0);var n=e.partial,r=Qy(e,["partial"]);return t.__p=!(!r.avoidStore&&!n),this.set(t,lr(lr({},r),{avoidStore:t.__p}))},o.prototype.up=function(t,e){e===void 0&&(e={}),this.set(t,lr(lr({},e),{__up:!0}))},o.prototype.init=function(){},o.prototype.getId=function(){return this.get("id")},o.prototype.getType=function(){return this.get("type")},o.prototype.getName=function(){return this.get("property")},o.prototype.getLabel=function(t){var e;t===void 0&&(t={});var n=t.locale,r=n===void 0||n,l=this.getId(),p=this.get("name")||this.get("label");return r&&((e=this.em)===null||e===void 0?void 0:e.t("styleManager.properties.".concat(l)))||p},o.prototype.getValue=function(t){t===void 0&&(t={});var e=t.noDefault,n=this.get("value");return this.hasValue()||e?n:this.getDefaultValue()},o.prototype.hasValue=function(t){t===void 0&&(t={});var e=t.noParent&&this.getParentTarget(),n=this.get("value");return!(0,C.isUndefined)(n)&&n!==""&&!e},o.prototype.hasValueParent=function(){return this.hasValue()&&!this.hasValue({noParent:!0})},o.prototype.getStyle=function(t){var e;t===void 0&&(t={});var n=this.getName();return(e={})[t.camelCase?(0,q.camelCase)(n):n]=this.__getFullValue(t),e},o.prototype.getDefaultValue=function(){var t=this.get("default");return"".concat((0,C.isUndefined)(t)?this.get("defaults"):t)},o.prototype.upValue=function(t,e){e===void 0&&(e={});var n=t===null||t===""?this.__getClearProps():this.__parseValue(t,e);return this._up(n,e)},o.prototype.isVisible=function(){return!!this.get("visible")},o.prototype.clear=function(t){return t===void 0&&(t={}),this._up(this.__getClearProps(),lr(lr({},t),{__clear:!0})),this},o.prototype.canClear=function(){var t=this.getParent();return t?t.__canClearProp(this):this.hasValue({noParent:!0})},o.prototype.getParent=function(){return this.__getParentProp()},o.prototype.isFull=function(){return!!this.get("full")},o.prototype.__parseValue=function(t,e){return this.parseValue(t,e)},o.prototype.__getClearProps=function(){return{value:"",important:!1}},o.prototype.setValue=function(t,e,n){e===void 0&&(e=!0),n===void 0&&(n={});var r=this.parseValue(t),l=!e;!l&&this.set({value:void 0},{avoidStore:l,silent:!0}),this.set(r,lr({avoidStore:l},n))},o.prototype.setValueFromInput=function(t,e,n){n===void 0&&(n={}),this.setValue(t,e,lr(lr({},n),{fromInput:1}))},o.prototype.parseValue=function(t,e){e===void 0&&(e={});var n={value:t},r="!important",l=this.get("functionName")||"";if((0,C.isString)(t)&&t.indexOf(r)!==-1&&(n.value=t.replace(r,"").trim(),n.important=!0),!l&&!e.complete)return n;var p=[],d="".concat(n.value).trim(),g=d.indexOf("(")+1,h=l||d.substring(0,g-1);if(h&&(n.functionName=h),!l||d.indexOf("".concat(l,"("))===0){var m=d.lastIndexOf(")");p.push(g),m>=0&&p.push(m),n.value=String.prototype.substring.apply(d,p)}if(e.numeric){var w=parseFloat(n.value);n.unit=n.value.replace(w,""),n.value=w}return n},o.prototype.__getFullValue=function(t){var e=(t===void 0?{}:t).withDefault;return!this.hasValue()&&e?this.getDefaultValue():this.getFullValue()},o.prototype.getFullValue=function(t,e){e===void 0&&(e={});var n=this.get("functionName"),r=this.getDefaultValue(),l=(0,C.isUndefined)(t)?this.get("value"):t,p=this.hasValue();if(l&&r&&l===r)return r;if(n&&p){var d=n==="url"?"'".concat(l.replace(/'|"/g,""),"'"):l;l="".concat(n,"(").concat(d,")")}return p&&this.get("important")&&!e.skipImportant&&(l="".concat(l," !important")),l||""},o.prototype.__setParentTarget=function(t){this.up({parentTarget:t})},o.prototype.getParentTarget=function(){return this.get("parentTarget")||null},o.prototype.__parseFn=function(t){t===void 0&&(t="");var e=t.indexOf("(")+1,n=t.lastIndexOf(")");return{name:t.substring(0,e-1).trim(),value:String.prototype.substring.apply(t,[e,n>=0?n:void 0]).trim()}},o.prototype.__checkVisibility=function(t){var e=t.target,n=t.component,r=t.sector,l=t.sectors,p=n||e;if(!p)return!1;var d=this.getId(),g=this.getName(),h=this.attributes,m=h.requires,w=h.requiresParent,k=h.toRequire,z=h.isVisible,B=p.get("unstylable"),nt=p.get("stylable-require"),X=p.get("stylable");if((0,C.isFunction)(z))return!!z({property:this,sector:r,target:e,component:n});if((0,C.isArray)(X)&&(X=X.indexOf(g)>=0),(0,C.isArray)(B)&&(X=B.indexOf(g)<0),k&&(X=!e||nt&&(nt.indexOf(d)>=0||nt.indexOf(g)>=0)),l&&m){var At=(0,C.keys)(m);l.forEach(function(ve){ve.getProperties().forEach(function(we){if((0,C.includes)(At,we.id)){var Ve=m[we.id];X=X&&(0,C.includes)(Ve,we.get("value"))}})})}if(w){var It=n&&n.parent(),Wt=It&&It.getEl();if(Wt){var oe=(0,q.hasWin)()?window.getComputedStyle(Wt):{};(0,C.each)(w,function(ve,we){X=X&&oe[we]&&(0,C.includes)(ve,oe[we])})}else X=!1}return!!X},o}(E.Kx);const Rn=pf;pf.callParentInit=function(a,o,t,e){e===void 0&&(e={}),a.prototype.initialize.apply(o,[t,lr(lr({},e),{skipInit:1})])},pf.callInit=function(a,o,t){t===void 0&&(t={}),!t.skipInit&&a.init(o,t)};var t0=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),zl=function(){return zl=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},zl.apply(this,arguments)},qh=function(a,o,t){if(t||arguments.length===2)for(var e,n=0,r=o.length;n<r;n++)!e&&n in o||(e||(e=Array.prototype.slice.call(o,0,n)),e[n]=o[n]);return a.concat(e||Array.prototype.slice.call(o))},Gh=function(a){return a==="integer"||a==="number"},e0=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return t0(o,a),o.prototype.defaults=function(){return zl(zl({},Rn.getDefaults()),{detached:!1,properties:[],separator:" ",join:null,fromStyle:null,toStyle:null,full:!0})},o.prototype.initialize=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),Rn.callParentInit(Rn,this,t,e);var n=this.em,r=new gf(this.get("properties")||[],{em:n,parentProp:this});this.set("properties",r,{silent:!0}),this.listenTo(r,"change",this.__upProperties),Rn.callInit(this,t,e)},Object.defineProperty(o.prototype,"properties",{get:function(){return this.get("properties")||[]},enumerable:!1,configurable:!0}),o.prototype.getProperties=function(){return qh([],this.get("properties").models,!0)},o.prototype.getProperty=function(t){return this.properties.filter(function(e){return e.getId()===t||e.getName()===t})[0]},o.prototype.getPropertyAt=function(t){return this.get("properties").at(t)},o.prototype.isDetached=function(){return!!this.get("detached")},o.prototype.getValues=function(t){var e=(t===void 0?{}:t).byName;return this.getProperties().reduce(function(n,r){return n[e?r.getName():r.getId()]="".concat(r.__getFullValue()),n},{})},o.prototype.getSeparator=function(){return this.getSplitSeparator()},o.prototype.getJoin=function(){return this.__getJoin()},o.prototype.getStyleFromProps=function(t){var e;t===void 0&&(t={});var n=this.getName(),r=this.__getJoin(),l=this.get("toStyle"),p=this.getValues(),d={};if(l)d=l(p,{join:r,name:n,property:this});else if(p=this.getValues({byName:!0}),this.isDetached())d=p;else{var g=this.getProperties().map(function(h){return h.__getFullValue({withDefault:1})}).filter(Boolean).join(r);(e={})[n]=g,d=e}return this.isDetached()?d[n]="":(d[n]=d[n]||"",d=zl(zl({},d),this.getProperties().reduce(function(h,m){return h[m.getName()]="",h},{}))),t.camelCase?Object.keys(d).reduce(function(h,m){return h[(0,q.camelCase)(m)]=d[m],h},{}):d},o.prototype.getSplitSeparator=function(){return new RegExp("".concat(this.get("separator"),"(?![^\\(]*\\))"))},o.prototype.__upProperties=function(t,e){if(e===void 0&&(e={}),!e.__up&&!e.__clearIn){var n=this.__getParentProp();if(n)return n.__upProperties(this,e);this.__upTargetsStyleProps(e,t)}},o.prototype.__upTargetsStyleProps=function(t,e){var n;t===void 0&&(t={});var r=this.getStyleFromProps();if(this.isDetached()&&e){var l=e.getName();(n={})[l]=r[l],r=n}this.__upTargetsStyle(r,t)},o.prototype._up=function(t,e){return e===void 0&&(e={}),this.__setProperties(this.__getSplitValue(t.value),e),Rn.prototype._up.call(this,t,e),this},o.prototype.getStyle=function(t){return this.getStyleFromProps(t)},o.prototype.__getFullValue=function(t){if(t===void 0&&(t={}),this.isDetached()||t.__clear)return"";var e=this.getStyleFromProps()[this.getName()]||"";return Ri(e)},o.prototype.__getJoin=function(){var t=this.get("join");return(0,C.isString)(t)?t:this.get("separator")},o.prototype.__styleHasProps=function(t){t===void 0&&(t={});var e=this.getName(),n=this.getProperties().map(function(r){return r.getName()});return qh([e],n,!0).some(function(r){return!(0,C.isUndefined)(t[r])&&t[r]!==""})},o.prototype.__splitValue=function(t,e){return Ri(t).split(e).map(function(n){return n.trim()}).filter(Boolean)},o.prototype.__splitStyleName=function(t,e,n){var r=t[e];return this.__splitValue(r||"",n)},o.prototype.__getSplitValue=function(t,e){t===void 0&&(t="");var n=(e===void 0?{}:e).byName,r=this.getProperties(),l=r.length===4&&r.every(function(g){return Gh(g.getType())}),p=this.__splitValue(t,this.getSplitSeparator()),d={};return r.forEach(function(g,h){var m=p[h],w=(0,C.isUndefined)(m)?"":m;if(l){var k=p.length;w=p[h]||p[h%k+(k!=1&&k%2?1:0)]||w}var z=n?g.getName():g.getId();d[z]=w||""}),d},o.prototype.__getPropsFromStyle=function(t,e){if(t===void 0&&(t={}),e===void 0&&(e={}),!this.__styleHasProps(t))return null;var n=e.byName,r=this.getName(),l=this.getProperties(),p=this.getSplitSeparator(),d=this.get("fromStyle"),g=d?d(t,{property:this,name:r,separator:p}):{};if(!d){var h=t[r];g=this.__getSplitValue(h||"",{byName:n}),l.forEach(function(m){var w=t[m.getName()],k=n?m.getName():m.getId();(0,C.isUndefined)(w)||w===""||(g[k]=w)})}return g},o.prototype.__setProperties=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),this.getProperties().forEach(function(r){var l=t[r.getId()];r.__getFullValue()!==l&&r.upValue(l,e)});var n=(0,C.keys)(t).map(function(r){return t[r]}).join(" ");this.set("value",n,{silent:!0})},o.prototype.clear=function(){var t=this;return this.getProperties().map(function(e){return e.clear({__clearIn:!t.isDetached()})}),Rn.prototype.clear.call(this),this},o.prototype.hasValue=function(t){return this.getProperties().some(function(e){return e.hasValue(t)})},o.prototype.getFullValue=function(){return this.__getFullValue()},o.prototype.__canClearProp=function(t){return this.isDetached()&&t.hasValue({noParent:!0})},o}(Rn);const Bl=e0;var n0=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),_r=function(){return _r=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},_r.apply(this,arguments)},o0=function(a,o){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&o.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(e=Object.getOwnPropertySymbols(a);n<e.length;n++)o.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(a,e[n])&&(t[e[n]]=a[e[n]])}return t},r0=/,(?![^\(]*\))/,i0=/\s(?![^(]*\))/,a0=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return n0(o,a),o.prototype.defaults=function(){return _r(_r({},Bl.getDefaults()),{layers:[],emptyValue:"unset",layerSeparator:", ",layerJoin:"",prepend:0,preview:!1,layerLabel:null,selectedLayer:null})},o.prototype.initialize=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),Bl.callParentInit(Bl,this,t,e);var n=this.get("layers"),r=new lp(n,{prop:this});r.property=this,r.properties=this.get("properties"),this.set("layers",r,{silent:!0}),this.on("change:selectedLayer",this.__upSelected),this.listenTo(r,"add remove",this.__upLayers),Bl.callInit(this,t,e)},Object.defineProperty(o.prototype,"layers",{get:function(){return this.get("layers")},enumerable:!1,configurable:!0}),o.prototype.getLayers=function(){return this.layers.models},o.prototype.hasLayers=function(){return this.getLayers().length>0},o.prototype.getLayer=function(t){return t===void 0&&(t=0),this.layers.at(t)||void 0},o.prototype.getSelectedLayer=function(){var t=this.get("selectedLayer");return t&&t.getIndex()>=0?t:void 0},o.prototype.selectLayer=function(t){return this.set("selectedLayer",t,{__select:!0})},o.prototype.selectLayerAt=function(t){t===void 0&&(t=0);var e=this.getLayer(t);return e&&this.selectLayer(e)},o.prototype.moveLayer=function(t,e){e===void 0&&(e=0);var n=this.layers,r=t?t.getIndex():-1;r>=0&&(0,C.isNumber)(e)&&e>=0&&e<n.length&&r!==e&&(this.removeLayer(t),n.add(t,{at:e}))},o.prototype.addLayer=function(t,e){t===void 0&&(t={}),e===void 0&&(e={});var n={};return this.getProperties().forEach(function(r){var l=r.getId(),p=t[l];n[l]=(0,C.isUndefined)(p)?r.getDefaultValue():p}),this.layers.push({values:n},e)},o.prototype.removeLayer=function(t){return this.layers.remove(t)},o.prototype.removeLayerAt=function(t){t===void 0&&(t=0);var e=this.getLayer(t);return e?this.removeLayer(e):null},o.prototype.getLayerLabel=function(t){var e="";if(t){var n=this.get("layerLabel"),r=t.getValues(),l=t.getIndex();if(n)e=n(t,{index:l,values:r,property:this});else{var p=[];this.getProperties().map(function(d){p.push(r[d.getId()])}),e=p.filter(Boolean).join(" ")}}return e},o.prototype.getStyleFromLayer=function(t,e){var n;e===void 0&&(e={});var r,l=this.__getJoin(),p=this.__getJoinLayers(),d=this.get("toStyle"),g=this.getName(),h=t.getValues();if(d)r=d(h,{join:l,joinLayers:p,name:g,layer:t,property:this});else{var m=this.getProperties().map(function(w){var k=w.getName(),z=h[w.getId()],B=(0,C.isUndefined)(z)?w.getDefaultValue():z;if(e.number&&Gh(w.getType())){var nt=w.parseValue(z,e.number);B="".concat(nt.value).concat(nt.unit)}return{name:k,value:B}});r=this.isDetached()?m.reduce(function(w,k){return w[k.name]=k.value,w},{}):((n={})[this.getName()]=m.map(function(w){return w.value}).join(l),n)}return e.camelCase?Object.keys(r).reduce(function(w,k){return w[(0,q.camelCase)(k)]=r[k],w},{}):r},o.prototype.getStylePreview=function(t,e){e===void 0&&(e={});var n={};return this.get("preview")&&(n=this.getStyleFromLayer(t,e)),n},o.prototype.getLayerSeparator=function(){var t=this.get("layerSeparator");return(0,C.isString)(t)?new RegExp("".concat(t,"(?![^\\(]*\\))")):t},o.prototype.hasEmptyValue=function(){return!this.hasLayers()&&!!this.attributes.isEmptyValue},o.prototype.__upProperties=function(t,e){var n;e===void 0&&(e={});var r=this.getSelectedLayer();r&&(r.upValues(((n={})[t.getId()]=t.__getFullValue(),n)),e.__up||this.__upTargetsStyleProps(e))},o.prototype.__upLayers=function(t,e,n){this.__upTargetsStyleProps(n||e)},o.prototype.__upTargets=function(t,e){if(e===void 0&&(e={}),!e.__select)return Rn.prototype.__upTargets.call(this,t,e)},o.prototype.__upTargetsStyleProps=function(t){t===void 0&&(t={}),this.__upTargetsStyle(this.getStyleFromLayers(t),t)},o.prototype.__upTargetsStyle=function(t,e){return Rn.prototype.__upTargetsStyle.call(this,t,e)},o.prototype.__upSelected=function(t,e){var n=(t===void 0?{}:t).noEvent;e===void 0&&(e={});var r=this.em.Styles,l=this.getSelectedLayer(),p=l?.getValues();p&&this.getProperties().forEach(function(d){var g,h=(g=p[d.getId()])!==null&&g!==void 0?g:"";d.__getFullValue()!==h&&d.upValue(h,_r(_r({},e),{__up:!0}))}),!n&&r.__trgEv(r.events.layerSelect,{property:this})},o.prototype._up=function(t,e){e===void 0&&(e={});var n=t.__layers,r=n===void 0?[]:n,l=o0(t,["__layers"]);return!this.isDetached()&&this.__setLayers(r),this.__upSelected({noEvent:!0},e),Rn.prototype._up.call(this,l,e),this},o.prototype.__setLayers=function(t,e){t===void 0&&(t=[]),e===void 0&&(e={});var n=this.layers,r=t.map(function(l){return{values:l}});n.length===r.length?r.map(function(l,p){var d;return(d=n.at(p))===null||d===void 0?void 0:d.upValues(l.values)}):n.reset(r),this.set({isEmptyValue:!!e.isEmptyValue}),this.__upSelected({noEvent:!0})},o.prototype.__parseValue=function(t){var e=this,n=this.parseValue(t);return n.__layers=t.split(r0).map(function(r){return r.trim()}).map(function(r){return e.__parseLayer(r)}).filter(Boolean),n},o.prototype.__parseLayer=function(t){var e=this.get("parseLayer"),n=t.split(i0),r=this.getProperties();return e?e({value:t,values:n}):r.reduce(function(l,p,d){var g=n[d];return l[p.getId()]=(0,C.isUndefined)(g)?p.getDefaultValue():g,l},{})},o.prototype.__getLayersFromStyle=function(t){var e=this;if(t===void 0&&(t={}),!this.__styleHasProps(t))return null;if(this.isEmptyValueStyle(t))return[];var n=this.getName(),r=this.getProperties(),l=this.getLayerSeparator(),p=this.attributes.fromStyle,d=p?p(t,{property:this,name:n,separatorLayers:l}):[];if(!p){var g=this.__splitStyleName(t,n,l).map(function(h){return h.split(e.getSplitSeparator())}).map(function(h){var m={};return r.forEach(function(w,k){var z=h[k];m[w.getId()]=(0,C.isUndefined)(z)?w.getDefaultValue():z}),m});r.forEach(function(h){var m=h.getId();e.__splitStyleName(t,h.getName(),l).map(function(w){var k;return(k={})[m]=w||h.getDefaultValue(),k}).forEach(function(w,k){g[k]=g[k]?_r(_r({},g[k]),w):w})}),d=g}return(0,C.isArray)(d)?d:[d]},o.prototype.getStyle=function(t){return t===void 0&&(t={}),this.getStyleFromLayers(t)},o.prototype.getStyleFromLayers=function(t){var e=this;t===void 0&&(t={});var n={},r=this.getName(),l=this.getLayers(),p=this.getProperties();if(l.map(function(g){return e.getStyleFromLayer(g,t)}).forEach(function(g){(0,C.keys)(g).map(function(h){n[h]||(n[h]=[]),n[h].push(g[h])})}),(0,C.keys)(n).map(function(g){n[g]=n[g].join(e.__getJoinLayers())}),this.isDetached())n[r]="",!l.length&&p.map(function(g){n[g.getName()]=""});else{var d=p.reduce(function(g,h){return g[h.getName()]="",g},{});n[r]=n[r]||"",n=_r(_r({},n),d)}return _r(_r({},n),t.__clear?{}:this.getEmptyValueStyle())},o.prototype.isEmptyValueStyle=function(t){t===void 0&&(t={});var e=this.getEmptyValueStyle({force:!0}),n=(0,C.keys)(e);return!!n.length&&n.every(function(r){return e[r]===t[r]})},o.prototype.getEmptyValueStyle=function(t){t===void 0&&(t={});var e=this.attributes.emptyValue;if(!e||this.hasLayers()&&!t.force)return{};var n=this.getName(),r=this.getProperties(),l=(0,C.isString)(e)?e:e({property:this});if((0,C.isString)(l)){var p={};return this.isDetached()?r.map(function(d){p[d.getName()]=l}):p[n]=l,p}return l},o.prototype.__getJoinLayers=function(){var t=this.get("layerJoin"),e=this.get("layerSeparator");return t||((0,C.isString)(e)?e:t)},o.prototype.__getFullValue=function(){if(this.get("detached"))return"";var t=this.getStyleFromLayers();return Ri(t[this.getName()])},o.prototype.hasValue=function(t){t===void 0&&(t={});var e=t.noParent&&this.getParentTarget();return(this.hasLayers()||this.hasEmptyValue())&&!e},o.prototype.clear=function(t){return t===void 0&&(t={}),this.layers.reset(),this.__upTargetsStyleProps(_r(_r({},t),{__clear:!0})),Rn.prototype.clear.call(this),this},o.prototype.__canClearProp=function(){return!1},o.prototype.__getLayers=function(){return this.layers},o}(Bl);const s0=a0;var l0=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),mp=function(){return mp=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},mp.apply(this,arguments)},c0=function(a,o){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&o.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(e=Object.getOwnPropertySymbols(a);n<e.length;n++)o.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(a,e[n])&&(t[e[n]]=a[e[n]])}return t},u0=function(a,o,t){if(t||arguments.length===2)for(var e,n=0,r=o.length;n<r;n++)!e&&n in o||(e||(e=Array.prototype.slice.call(o,0,n)),e[n]=o[n]);return a.concat(e||Array.prototype.slice.call(o))},df="data-clear-style",p0=function(a){function o(t){t===void 0&&(t={});var e=a.call(this,t)||this;(0,C.bindAll)(e,"__change","__updateStyle");var n=t.config||{},r=n.em;e.config=n,e.em=r,e.pfx=n.stylePrefix||"",e.ppfx=n.pStylePrefix||"",e.__destroyFn=e.destroy?e.destroy.bind(e):function(){};var l=e.model;l.view=e,e.onValueChange=(0,C.debounce)(e.onValueChange.bind(e),10),e.updateStatus=(0,C.debounce)(e.updateStatus.bind(e),0),e.listenTo(l,"destroy remove",e.remove),e.listenTo(l,"change:visible",e.updateVisibility),e.listenTo(l,"change:name change:className change:full",e.render),e.listenTo(l,"change:value",e.onValueChange),e.listenTo(l,"change:parentTarget",e.updateStatus),e.listenTo(r,"change:device",e.onValueChange);var p=e.init&&e.init.bind(e);return p&&p(),e}return l0(o,a),o.prototype.events=function(){var t;return(t={change:"inputValueChanged"})["click [".concat(df,"]")]="clear",t},o.prototype.template=function(t){var e=this.pfx,n=this.ppfx;return`
      <div class="`.concat(e,`label" data-sm-label></div>
      <div class="`).concat(n,`fields" data-sm-fields></div>
    `)},o.prototype.templateLabel=function(t){var e=this.pfx,n=this.em,r=t.parent,l=t.attributes,p=l.icon,d=p===void 0?"":p,g=l.info,h=g===void 0?"":g,m=n?.getConfig().icons,w=m?.close||"";return`
      <span class="`.concat(e,"icon ").concat(d,'" title="').concat(h,`">
        `).concat(t.getLabel(),`
      </span>
      `).concat(r?"":'<div class="'.concat(e,'clear" style="display: none" ').concat(df,">").concat(w,"</div>"),`
    `)},o.prototype.templateInput=function(t){return`
      <div class="`.concat(this.ppfx,`field">
        <input placeholder="`).concat(t.getDefaultValue(),`"/>
      </div>
    `)},o.prototype.remove=function(){var t=this;return E.Ss.prototype.remove.apply(this,arguments),["em","input","$input","view"].forEach(function(e){return t[e]=null}),this.__destroyFn(this._getClbOpts()),this},o.prototype.updateStatus=function(){var t,e=this,n=e.model,r=e.pfx,l=e.ppfx,p=e.config,d="".concat(l,"four-color"),g="".concat(l,"color-warn"),h=this.$el.children(".".concat(r,"label")),m=this.getClearEl(),w=m?m.style:{};h.removeClass("".concat(d," ").concat(g)),w.display="none",n.hasValue({noParent:!0})&&p.highlightChanged?(h.addClass(d),p.clearProperties&&(w.display="")):n.hasValue()&&p.highlightComputed&&h.addClass(g),(t=this.parent)===null||t===void 0||t.updateStatus()},o.prototype.clear=function(t){t&&t.stopPropagation(),this.model.clear()},o.prototype.getClearEl=function(){return this.clearEl||(this.clearEl=this.el.querySelector("[".concat(df,"]"))),this.clearEl},o.prototype.inputValueChanged=function(t){t&&t.stopPropagation(),this.emit||this.model.upValue(t.target.value)},o.prototype.onValueChange=function(t,e,n){n===void 0&&(n={}),this.setValue(this.model.getFullValue(void 0,{skipImportant:!0})),this.updateStatus()},o.prototype.setValue=function(t){var e=this.model,n=(0,C.isUndefined)(t)||t===""?e.getDefaultValue():t;if(this.update)return this.__update(n);this.__setValueInput(n)},o.prototype.__setValueInput=function(t){var e=this.getInputEl();e&&(e.value=t)},o.prototype.getInputEl=function(){return this.input||(this.input=this.el.querySelector("input")),this.input},o.prototype.updateVisibility=function(){this.el.style.display=this.model.isVisible()?"":"none"},o.prototype.clearCached=function(){delete this.clearEl,delete this.input,delete this.$input},o.prototype.__unset=function(){var t=this.unset&&this.unset.bind(this);t&&t(this._getClbOpts())},o.prototype.__update=function(t){var e=this.update&&this.update.bind(this);e&&e(mp(mp({},this._getClbOpts()),{value:t}))},o.prototype.__change=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.emit&&this.emit.bind(this);n&&n.apply(void 0,u0([this._getClbOpts()],t,!1))},o.prototype.__updateStyle=function(t,e){e===void 0&&(e={});var n=e.complete,r=e.partial,l=(c0(e,["complete","partial"]),this.model),p=n!==!1&&r!==!0;(0,q.isObject)(t)?l.__upTargetsStyle(t,{avoidStore:!p}):l.upValue(t,{partial:!p})},o.prototype._getClbOpts=function(){var t=this,e=t.model;return{el:t.el,createdEl:t.createdEl,property:e,props:e.attributes,change:this.__change,updateStyle:this.__updateStyle}},o.prototype.render=function(){this.clearCached();var t=this,e=t.pfx,n=t.model,r=t.el,l=t.$el,p=n.getName(),d=n.getType(),g=n.get("className")||"",h="".concat(e,"property"),m=d==="number"?"".concat(e).concat(d," ").concat(e,"integer"):"".concat(e).concat(d);this.createdEl&&this.__destroyFn(this._getClbOpts()),l.empty().append(this.template(n)),l.find("[data-sm-label]").append(this.templateLabel(n));var w=this.create&&this.create.bind(this);this.createdEl=w&&w(this._getClbOpts()),l.find("[data-sm-fields]").append(this.createdEl||this.templateInput(n)),r.className="".concat(h," ").concat(m," ").concat(h,"__").concat(p," ").concat(g).trim(),r.className+=n.isFull()?" ".concat(h,"--full"):"";var k=this.onRender&&this.onRender.bind(this);return k&&k(),this.setValue(n.getValue()),this},o.prototype.onRender=function(){},o}(E.Ss);const ra=p0;var d0=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),f0=function(a){function o(t){var e=a.call(this,t)||this;e.config=t.config||{},e.pfx=e.config.stylePrefix||"",e.properties=[],e.parent=t.parent;var n=e.collection;return e.listenTo(n,"add",e.addTo),e.listenTo(n,"reset",e.render),e}return d0(o,a),o.prototype.addTo=function(t,e,n){this.add(t,null,n)},o.prototype.add=function(t,e,n){n===void 0&&(n={});var r=this.parent,l=this.config,p=e||this.el,d=new t.typeView({model:t,config:l});r&&(d.parent=r),d.render();var g=d.el;this.properties.push(d),(0,St.Sc)(p,g,n.at)},o.prototype.remove=function(){return E.Ss.prototype.remove.apply(this,arguments),this.clearItems(),this},o.prototype.clearItems=function(){this.properties.forEach(function(t){return t.remove()}),this.properties=[]},o.prototype.render=function(){var t=this,e=this.$el,n=this.pfx;this.clearItems();var r=document.createDocumentFragment();return this.collection.forEach(function(l){return t.add(l,r)}),e.empty(),e.append(r),e.attr("class","".concat(n,"properties")),this},o}(E.Ss);const ff=f0;var h0=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),yp=function(){return yp=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},yp.apply(this,arguments)},g0=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return h0(o,a),o.prototype.templateInput=function(){var t=this.pfx;return`
      <div class="`.concat(t,"field ").concat(t,`composite">
        <span id="`).concat(t,`input-holder"></span>
      </div>
    `)},o.prototype.remove=function(){var t;return(t=this.props)===null||t===void 0||t.remove(),ra.prototype.remove.apply(this,arguments),this},o.prototype.onValueChange=function(){},o.prototype.onRender=function(){var t=this.pfx,e=this.model,n=e.get("properties");if(n.length&&!this.props){var r=e.isDetached(),l=new ff({config:yp(yp({},this.config),{highlightComputed:r,highlightChanged:r}),collection:n,parent:this});l.render(),this.$el.find("#".concat(t,"input-holder")).append(l.el),this.props=l}},o.prototype.clearCached=function(){ra.prototype.clearCached.apply(this,arguments),delete this.props},o}(ra);const Fc=g0;var v0=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),m0=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return v0(o,a),o.prototype.events=function(){return{click:"select","click [data-close-layer]":"removeItem","mousedown [data-move-layer]":"initSorter","touchstart [data-move-layer]":"initSorter"}},o.prototype.template=function(){var t=this,e=t.pfx,n=t.ppfx,r=t.em,l=r?.getConfig().icons,p=l?.close||"",d=l?.move||"";return`
      <div class="`.concat(e,`label-wrp">
        <div id="`).concat(e,'move" class="').concat(n,`no-touch-actions" data-move-layer>
          `).concat(d,`
        </div>
        <div id="`).concat(e,`label" data-label></div>
        <div id="`).concat(e,'preview-box" class="').concat(e,`layer-preview" style="display: none" data-preview-box>
          <div id="`).concat(e,'preview" class="').concat(e,`layer-preview-cnt" data-preview></div>
        </div>
        <div id="`).concat(e,'close-layer" class="').concat(e,`btn-close" data-close-layer>
          `).concat(p,`
        </div>
      </div>
      <div id="`).concat(e,`inputs" data-properties></div>
    `)},o.prototype.initialize=function(t){t===void 0&&(t={});var e=this.model,n=t.config||{};this.em=n.em,this.config=n,this.sorter=t.sorter,this.pfx=n.stylePrefix||"",this.ppfx=n.pStylePrefix||"",this.propertyView=t.propertyView;var r=this.propertyView.model;this.listenTo(e,"destroy remove",this.remove),this.listenTo(e,"change:values",this.updateLabel),this.listenTo(r,"change:selectedLayer",this.updateVisibility),e.view=this,e.set({droppable:0,draggable:1}),this.$el.data("model",e)},o.prototype.initSorter=function(){var t;(t=this.sorter)===null||t===void 0||t.startSort([{element:this.el}])},o.prototype.removeItem=function(t){t&&t.stopPropagation(),this.model.remove()},o.prototype.select=function(){this.model.select()},o.prototype.getPropertiesWrapper=function(){return this.propsWrapEl||(this.propsWrapEl=this.el.querySelector("[data-properties]")),this.propsWrapEl},o.prototype.getPreviewEl=function(){return this.previewEl||(this.previewEl=this.el.querySelector("[data-preview]")),this.previewEl},o.prototype.getLabelEl=function(){return this.labelEl||(this.labelEl=this.el.querySelector("[data-label]")),this.labelEl},o.prototype.updateLabel=function(){var t=this.model,e=t.getLabel();if(this.getLabelEl().innerHTML=e,t.hasPreview()){var n=this.getPreviewEl(),r=t.getStylePreview({number:{min:-3,max:3}}),l=(0,C.keys)(r).map(function(p){return"".concat(p,":").concat(r[p])}).join(";");n.setAttribute("style",l)}},o.prototype.updateVisibility=function(){var t,e=this,n=e.pfx,r=e.model,l=e.propertyView,p=this.getPropertiesWrapper(),d=r.isSelected();p.style.display=d?"":"none",this.$el[d?"addClass":"removeClass"]("".concat(n,"active")),d&&p.appendChild((t=l.props)===null||t===void 0?void 0:t.el)},o.prototype.render=function(){var t=this,e=t.el,n=t.pfx,r=t.model;return e.innerHTML=this.template(),e.className="".concat(n,"layer"),r.hasPreview()&&(e.querySelector("[data-preview-box]").style.display=""),this.updateLabel(),this.updateVisibility(),this},o}(E.Ss);const y0=m0;var b0=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),_0=function(a){function o(t){var e=a.call(this,t)||this,n=e.collection,r=t.config||{},l=r.em,p=r.stylePrefix||"",d=r.pStylePrefix||"";e.config=r,e.pfx=p,e.ppfx=d,e.propertyView=t.propertyView,e.className="".concat(p,"layers ").concat(d,"field"),e.listenTo(n,"add",e.addTo),e.listenTo(n,"reset",e.reset),e.items=[];var g=e.createPlaceholder(r.pStylePrefix);e.$el.append(g);var h=l?.Utils;return e.sorter=h?new h.StyleManagerSorter({em:l,containerContext:{container:e.el,containerSel:".".concat(p,"layers"),itemSel:".".concat(p,"layer"),pfx:r.pStylePrefix,document,placeholderElement:g},dragBehavior:{dragDirection:Ar.A.Vertical,nested:!1}}):void 0,n.view=e,e.$el.data("model",n),e.$el.data("collection",n),e}return b0(o,a),o.prototype.addTo=function(t){var e=this.collection.indexOf(t);this.addToCollection(t,null,e)},o.prototype.addToCollection=function(t,e,n){var r=e||null,l=this,p=l.propertyView,d=l.config,g=l.sorter,h=l.$el,m=new y0({model:t,config:d,sorter:g,propertyView:p}),w=m.render().el;if(this.items.push(m),r)r.appendChild(w);else if(n!==void 0){var k="before";h.children().length===n&&(n--,k="after"),n<0?h.append(w):h.children().eq(n)[k](w)}else h.append(w);return w},o.prototype.reset=function(t,e){this.clearItems(),this.render()},o.prototype.remove=function(){return this.clearItems(),E.Ss.prototype.remove.apply(this,arguments),this},o.prototype.clearItems=function(){this.items.forEach(function(t){return t.remove()}),this.items=[]},o.prototype.render=function(){var t=this,e=this.$el,n=document.createDocumentFragment();return e.empty(),this.collection.forEach(function(r){return t.addToCollection(r,n)}),e.append(n),e.attr("class",this.className),this},o.prototype.createPlaceholder=function(t){var e=document.createElement("div"),n=document.createElement("div");return this.el.parentNode,e.className=t+"placeholder",e.style.display="none",e.style.pointerEvents="none",n.className=t+"placeholder-int",e.appendChild(n),e},o}(E.Ss);const w0=_0;var x0=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Wl=function(){return Wl=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},Wl.apply(this,arguments)},C0=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return x0(o,a),o.prototype.events=function(){return Wl(Wl({},Fc.prototype.events()),{"click [data-add-layer]":"addLayer",change:""})},o.prototype.templateInput=function(){var t=this.pfx,e=this.em,n=e?.getConfig().icons,r=n?.plus||"+";return`
      <div class="`.concat(t,"field ").concat(t,`stack">
        <button type="button" id="`).concat(t,`add" data-add-layer>
          `).concat(r,`
        </button>
        <div data-layers-wrapper></div>
      </div>
    `)},o.prototype.init=function(){var t=this.model;this.listenTo(t.layers,"change reset",this.updateStatus),this.listenTo(t,"change:isEmptyValue",this.updateStatus)},o.prototype.addLayer=function(){this.model.addLayer({},{at:0})},o.prototype.setValue=function(){},o.prototype.remove=function(){var t;return(t=this.layersView)===null||t===void 0||t.remove(),Fc.prototype.remove.apply(this,arguments),this},o.prototype.clearCached=function(){Fc.prototype.clearCached.apply(this,arguments),delete this.layersView},o.prototype.onRender=function(){var t=this,e=t.model,n=t.el,r=t.config,l=e.get("properties");if(l.length&&!this.props){var p=new ff({config:Wl(Wl({},r),{highlightComputed:!1,highlightChanged:!1}),collection:l,parent:this});p.render();var d=new w0({collection:e.layers,config:r,propertyView:this});d.render(),n.querySelector("[data-layers-wrapper]").appendChild(d.el),this.props=p,this.layersView=d}},o}(Fc);const S0=C0;var O0=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),bp=function(){return bp=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},bp.apply(this,arguments)},T0=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return O0(o,a),o.prototype.events=function(){return bp(bp({},ra.prototype.events()),{"click [data-clear-asset]":"clear","click [data-open-assets]":"openAssetManager"})},o.prototype.templateInput=function(){var t,e=this.pfx,n=this.em,r=(t=this.em)===null||t===void 0?void 0:t.getConfig().icons,l=r?.close;return`
      <div class="`.concat(e,"field ").concat(e,`file">
        <div id='`).concat(e,`input-holder'>
          <div class="`).concat(e,`btn-c">
            <button class="`).concat(e,'btn" id="').concat(e,`images" type="button" data-open-assets>
              `).concat(n.t("styleManager.fileButton"),`
            </button>
          </div>
          <div style="clear:both;"></div>
        </div>
        <div id="`).concat(e,'preview-box" class="').concat(e,`preview-file" data-preview-box>
          <div id="`).concat(e,'preview-file" class="').concat(e,`preview-file-cnt" data-preview></div>
          <div id="`).concat(e,'close" class="').concat(e,'preview-file-close" data-clear-asset>').concat(l,`</div>
        </div>
      </div>
    `)},o.prototype.__setValueInput=function(t){var e=this.model,n=this.el,r=e.getDefaultValue(),l=n.querySelector("[data-preview-box]"),p=n.querySelector("[data-preview]");l.style.display=t&&t!==r?"":"none",p.style.backgroundImage=t||e.getDefaultValue()},o.prototype.openAssetManager=function(){var t,e=this,n=(t=this.em)===null||t===void 0?void 0:t.Assets;n?.open({select:function(r,l){var p=(0,C.isString)(r)?r:r.get("src");e.model.upValue(p,{partial:!l}),l&&n.close()},types:["image"],accept:"image/*"})},o}(ra);const P0=T0;var E0=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),k0=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return E0(o,a),o.prototype.templateInput=function(t){return""},o.prototype.init=function(){var t=this.model;this.listenTo(t,"change:unit",this.onValueChange),this.listenTo(t,"change:units",this.render)},o.prototype.setValue=function(t){},o.prototype.onRender=function(){var t=this,e=t.ppfx,n=t.model,r=t.el;if(!this.inputInst){var l=n.input;l.ppfx=e,l.render(),r.querySelector(".".concat(e,"fields")).appendChild(l.el),this.input=l.inputEl.get(0),this.inputInst=l}},o.prototype.clearCached=function(){ra.prototype.clearCached.apply(this,arguments),this.inputInst=null},o}(ra);const ia=k0;var A0=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),j0=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return A0(o,a),o.prototype.setValue=function(t){var e;(e=this.inputInst)===null||e===void 0||e.setValue(t,{fromTarget:1,def:this.model.getDefaultValue()})},o.prototype.remove=function(){var t=this;ia.prototype.remove.apply(this,arguments);var e=this.inputInst;return e&&e.remove&&e.remove(),["inputInst","$color"].forEach(function(n){return t[n]=null}),this},o.prototype.__handleChange=function(t,e){this.model.upValue(t,{partial:e})},o.prototype.onRender=function(){var t;if(!this.inputInst){this.__handleChange=this.__handleChange.bind(this);var e=this,n=e.ppfx,r=e.model,l=e.em,p=e.el,d=new Ff({target:l,model:r,ppfx:n,onChange:this.__handleChange}).render();p.querySelector(".".concat(n,"fields")).appendChild(d.el),this.input=(t=d.inputEl)===null||t===void 0?void 0:t.get(0),this.inputInst=d}},o}(ia);const M0=j0;var D0=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),_p=function(){return _p=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},_p.apply(this,arguments)},Kh=function(a,o,t){if(t||arguments.length===2)for(var e,n=0,r=o.length;n<r;n++)!e&&n in o||(e||(e=Array.prototype.slice.call(o,0,n)),e[n]=o[n]);return a.concat(e||Array.prototype.slice.call(o))},L0=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return D0(o,a),o.prototype.defaults=function(){return _p(_p({},Rn.getDefaults()),{options:[],full:0})},o.prototype.getOptions=function(){var t=this.attributes,e=t.options,n=t.list;return(e&&e.length?e:n)||[]},o.prototype.getOption=function(t){var e=this,n=(0,q.isDef)(t)?t:this.getValue();return this.getOptions().filter(function(r){return e.getOptionId(r)===n})[0]||null},o.prototype.setOptions=function(t){return t===void 0&&(t=[]),this.set("options",t),this},o.prototype.addOption=function(t){if(t){var e=this.getOptions();this.setOptions(Kh(Kh([],e,!0),[t],!1))}return this},o.prototype.getOptionId=function(t){return(0,q.isDef)(t.id)?t.id:t.value},o.prototype.getOptionLabel=function(t,e){var n;e===void 0&&(e={});var r=e.locale,l=r===void 0||r,p=((0,C.isString)(t)?this.getOption(t):t)||{},d=this.getOptionId(p),g=p.label||p.name||d,h=e.property||this.getId();return l&&((n=this.em)===null||n===void 0?void 0:n.t("styleManager.options.".concat(h,".").concat(d)))||g},o.prototype.initialize=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Rn.prototype.initialize.apply(this,t),this.listenTo(this,"change:options",this.__onOptionChange)},o.prototype.__onOptionChange=function(){this.set("list",this.get("options"))},o}(Rn);const hf=L0;var I0=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Yh=function(a){function o(t){var e=a.call(this,t)||this;return e.listenTo(e.model,"change:options",e.updateOptions),e}return I0(o,a),o.prototype.templateInput=function(){var t=this.pfx,e=this.ppfx;return`
      <div class="`.concat(e,"field ").concat(e,`select">
        <span id="`).concat(t,`input-holder"></span>
        <div class="`).concat(e,`sel-arrow">
          <div class="`).concat(e,`d-s-arrow"></div>
        </div>
      </div>
    `)},o.prototype.updateOptions=function(){delete this.input,this.onRender()},o.prototype.onRender=function(){var t=this.pfx,e=this.model,n=e.getOptions();if(!this.input){var r=[];n.forEach(function(p){var d=e.getOptionId(p),g=e.getOptionLabel(d),h=p.style?p.style.replace(/"/g,"&quot;"):"",m=h?'style="'.concat(h,'"'):"",w=d.replace(/"/g,"&quot;");r.push('<option value="'.concat(w,'" ').concat(m,">").concat(g,"</option>"))});var l=this.el.querySelector("#".concat(t,"input-holder"));l.innerHTML="<select>".concat(r.join(""),"</select>"),this.input=l.firstChild}},o.prototype.__setValueInput=function(t){var e=this.model,n=this.getInputEl(),r=e.getOptions()[0],l=r?e.getOptionId(r):"";n&&(n.value=t||l)},o}(ra);var N0=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),wp=function(){return wp=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},wp.apply(this,arguments)};const V0=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return N0(o,a),o.prototype.defaults=function(){return wp(wp({},hf.getDefaults()),{full:1})},o}(hf);var R0=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),F0=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return R0(o,a),o.prototype.templateInput=function(){var t=this.ppfx;return'<div class="'.concat(t,"field ").concat(t,'field-radio"></div>')},o.prototype.onRender=function(){var t=this.pfx,e=this.ppfx,n=this.model,r="".concat(e,"radio-item-label"),l=n.getName(),p=n.getOptions(),d="".concat(t,"radio ").concat(t,"radio-").concat(l),g=n.cid;if(!this.input){var h=[];p.forEach(function(w){var k=w.className?"".concat(w.className," ").concat(t,"icon ").concat(r):"",z=n.getOptionId(w),B="".concat(l,"-").concat(z,"-").concat(g),nt=k?"":n.getOptionLabel(z),X=w.title?'title="'.concat(w.title,'"'):"",At=n.getValue()===z?"checked":"";h.push(`
          <div class="`.concat(e,`radio-item">
            <input type="radio" class="`).concat(d,'" id="').concat(B,'" name="').concat(l,"-").concat(g,'" value="').concat(z,'" ').concat(At,`/>
            <label class="`).concat(k||r,'" ').concat(X,' for="').concat(B,'">').concat(nt,`</label>
          </div>
        `))});var m=this.el.querySelector(".".concat(e,"field"));m.innerHTML='<div class="'.concat(e,'radio-items">').concat(h.join(""),"</div>"),this.input=m.firstChild}},o.prototype.__setValueInput=function(t){var e,n=this.model,r=t||n.getDefaultValue(),l=(e=this.getInputEl())===null||e===void 0?void 0:e.querySelector('[value="'.concat(r,'"]'));l&&(l.checked=!0)},o}(Yh);const H0=F0;var U0=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ls=function(){return Ls=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},Ls.apply(this,arguments)},z0=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return U0(o,a),o.prototype.defaults=function(){return Ls(Ls({},Rn.getDefaults()),{units:[],unit:"",min:"",max:"",step:1})},o.prototype.getUnits=function(){return this.get("units")||[]},o.prototype.getUnit=function(){return this.get("unit")},o.prototype.getMin=function(){return this.get("min")},o.prototype.getMax=function(){return this.get("max")},o.prototype.getStep=function(){return this.get("step")},o.prototype.upUnit=function(t,e){return e===void 0&&(e={}),this._up({unit:t},e)},o.prototype.initialize=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),Rn.callParentInit(Rn,this,t,e);var n=this.get("unit"),r=this.getUnits();this.input=(0,q.hasWin)()?new Uf({model:this}):void 0,r.length&&!n&&this.set("unit",r[0],{silent:!0}),Rn.callInit(this,t,e)},o.prototype.__getClearProps=function(){return Ls(Ls({},Rn.prototype.__getClearProps()),{unit:""})},o.prototype.parseValue=function(t,e){e===void 0&&(e={});var n=Rn.prototype.parseValue.apply(this,arguments),r=this.input.validateInputValue(n.value,Ls({deepCheck:1},e)),l=r.value,p=r.unit;return n.value=l,n.unit=p,n},o.prototype.getFullValue=function(){var t=this.get("value"),e=this.get("unit"),n=(0,C.isUndefined)(t)?"":"".concat(t),r=!(0,C.isUndefined)(e)&&n?e:"",l="".concat(n).concat(r);return Rn.prototype.getFullValue.apply(this,[l])},o}(Rn);const xp=z0;var B0=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Cp=function(){return Cp=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},Cp.apply(this,arguments)};const W0=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return B0(o,a),o.prototype.defaults=function(){return Cp(Cp({},xp.getDefaults()),{showInput:1})},o}(xp);var $0=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Sp=function(){return Sp=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},Sp.apply(this,arguments)};const q0=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return $0(o,a),o.prototype.events=function(){return Sp(Sp({},ia.prototype.events()),{"change [type=range]":"inputValueChanged","input [type=range]":"inputValueChangedSoft",change:""})},o.prototype.templateInput=function(t){var e=this.ppfx;return`
      <div class="`.concat(e,"field ").concat(e,`field-range">
        <input type="range" min="`).concat(t.get("min"),'" max="').concat(t.get("max"),'" step="').concat(t.get("step"),`"/>
      </div>
    `)},o.prototype.getSliderEl=function(){return this.slider||(this.slider=this.el.querySelector("input[type=range]")),this.slider},o.prototype.inputValueChanged=function(t){t.stopPropagation(),this.model.upValue(this.getSliderEl().value)},o.prototype.inputValueChangedSoft=function(t){t.stopPropagation(),this.model.upValue(this.getSliderEl().value,{partial:!0})},o.prototype.setValue=function(t){var e=this.model,n=e.parseValue(t);this.getSliderEl().value=t===""?e.getDefaultValue():parseFloat(n.value),ia.prototype.setValue.apply(this,arguments)},o.prototype.onRender=function(){ia.prototype.onRender.apply(this,arguments),this.model.get("showInput")||(this.inputInst.el.style.display="none")},o.prototype.clearCached=function(){ia.prototype.clearCached.apply(this,arguments),delete this.slider},o}(ia),gf=E.pM.extend(sh).extend({extendViewApi:1,init:function(){var a=this.opts,o=this.em,t=a.module||o?.get("StyleManager");t&&(t.__listenAdd(this,t.events.propertyAdd),t.__listenRemove(this,t.events.propertyRemove))},types:[{id:"stack",model:s0,view:S0,isType:function(a){if(a&&a.type=="stack")return a}},{id:"composite",model:Bl,view:Fc,isType:function(a){if(a&&a.type=="composite")return a}},{id:"file",model:Rn,view:P0,isType:function(a){if(a&&a.type=="file")return a}},{id:"color",model:Rn,view:M0,isType:function(a){if(a&&a.type=="color")return a}},{id:"select",model:hf,view:Yh,isType:function(a){if(a&&a.type=="select")return a}},{id:"radio",model:V0,view:H0,isType:function(a){if(a&&a.type=="radio")return a}},{id:"slider",model:W0,view:q0,isType:function(a){if(a&&a.type=="slider")return a}},{id:"integer",model:xp,view:ia,isType:function(a){if(a&&a.type=="integer")return a}},{id:"number",model:xp,view:ia,isType:function(a){if(a&&a.type=="number")return a}},{id:"base",model:Rn,view:ra,isType:function(a){return a.type="base",a}}]});var G0=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Op=function(){return Op=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},Op.apply(this,arguments)},K0=function(a,o){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&o.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(e=Object.getOwnPropertySymbols(a);n<e.length;n++)o.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(a,e[n])&&(t[e[n]]=a[e[n]])}return t},Y0=function(a,o,t){if(t||arguments.length===2)for(var e,n=0,r=o.length;n<r;n++)!e&&n in o||(e||(e=Array.prototype.slice.call(o,0,n)),e[n]=o[n]);return a.concat(e||Array.prototype.slice.call(o))},X0=function(a){function o(t,e){e===void 0&&(e={});var n=a.call(this,t)||this,r=e.em;n.em=r;var l=t||{},p=n.buildProperties(l.buildProps),d=n.get("name")||"",g=[];!n.get("id")&&n.set("id",d.replace(/ /g,"_").toLowerCase()),g=(g=p?n.extendProperties(p):n.get("properties").map(function(m){return(0,C.isString)(m)?n.buildProperties(m)[0]:m}).filter(Boolean)).map(function(m){return n.checkExtend(m)});var h=new gf(g,{em:r});return h.sector=n,n.set("properties",h),n}return G0(o,a),o.prototype.defaults=function(){return{id:"",name:"",open:!0,visible:!0,extendBuilded:!0,properties:[]}},Object.defineProperty(o.prototype,"properties",{get:function(){return this.get("properties")},enumerable:!1,configurable:!0}),o.prototype.getId=function(){return this.get("id")},o.prototype.getName=function(){var t,e=this.getId();return((t=this.em)===null||t===void 0?void 0:t.t("styleManager.sectors.".concat(e)))||this.get("name")},o.prototype.setName=function(t){return this.set("name",t)},o.prototype.isOpen=function(){return!!this.get("open")},o.prototype.setOpen=function(t){return this.set("open",t)},o.prototype.isVisible=function(){return!!this.get("visible")},o.prototype.getProperties=function(t){t===void 0&&(t={});var e=this.properties;return(e.models?Y0([],e.models,!0):e).filter(function(n){var r=!0;return t.withValue&&(r=n.hasValue({noParent:!0})),t.withParentValue&&(r=!n.hasValue({noParent:!0})&&n.hasValue()),r})},o.prototype.getProperty=function(t){return this.getProperties().filter(function(e){return e.get("id")===t})[0]||void 0},o.prototype.addProperty=function(t,e){return this.properties.add(this.checkExtend(t),e)},o.prototype.extendProperties=function(t,e,n){n===void 0&&(n=!1);for(var r=t.length,l=e||this.get("properties"),p=this.get("extendBuilded"),d=[],g=0,h=l.length;g<h;g++){for(var m=l[g],w=0,k=0;k<r;k++){var z=t[k];if(!(m.property!=z.property&&m.id!=z.property)){var B=m.properties;B&&B.length&&(m.properties=this.extendProperties(z.properties||[],B,1)),t[k]=p?(0,C.extend)(z,m):m,d[k]=t[k],w=1}}w||(t.push(m),d.push(m))}return n?d.filter(function(nt){return nt}):t},o.prototype.checkExtend=function(t){var e=((0,C.isString)(t)?{extend:t}:t)||{},n=e.extend,r=K0(e,["extend"]);return n?Op(Op({},this.buildProperties([n])[0]||{}),r):t},o.prototype.buildProperties=function(t){var e,n=t||[];if(!n.length)return[];var r=(e=this.em)===null||e===void 0?void 0:e.Styles.builtIn;return r?.build(n)},o}(E.Kx);const Xh=X0;var J0=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Tp=function(){return Tp=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},Tp.apply(this,arguments)};const Z0=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return J0(o,a),o.prototype.initialize=function(t,e){e===void 0&&(e={});var n=e.module,r=e.em;this.em=r,this.module=n,this.listenTo(this,"reset",this.onReset)},o.prototype.model=function(t,e){e===void 0&&(e={});var n=e.collection.em;return new Xh(t,Tp(Tp({},e),{em:n}))},o.prototype.onReset=function(t,e){e===void 0&&(e={}),(e.previousModels||[]).forEach(function(n){return n.get("properties").reset()})},o}(E.pM);var za=function(){return za=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},za.apply(this,arguments)},Q0=function(a,o){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&o.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(e=Object.getOwnPropertySymbols(a);n<e.length;n++)o.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(a,e[n])&&(t[e[n]]=a[e[n]])}return t},Is=function(a,o,t){if(t||arguments.length===2)for(var e,n=0,r=o.length;n<r;n++)!e&&n in o||(e||(e=Array.prototype.slice.call(o,0,n)),e[n]=o[n]);return a.concat(e||Array.prototype.slice.call(o))},wo=function(a){return a.map(function(o){return{id:o}})},tb=function(){function a(){this.props={},this.typeNumber="number",this.typeColor="color",this.typeRadio="radio",this.typeSelect="select",this.typeFile="file",this.typeSlider="slider",this.typeComposite="composite",this.typeStack="stack",this.unitsSize=["px","%","em","rem","vh","vw"],this.unitsSizeNoPerc=["px","em","rem","vh","vw"],this.unitsTime=["s","ms"],this.unitsAngle=["deg","rad","grad"],this.fixedValues=["initial","inherit","auto"];var o=", sans-serif",t=["flex-start","flex-end","center"],e=Is(Is([],t,!0),["baseline","stretch"],!1);this.optsBgSize=wo(["auto","cover","contain"]),this.optsBgAttach=wo(["scroll","fixed","local"]),this.optsBgRepeat=wo(["repeat","repeat-x","repeat-y","no-repeat"]),this.optsWrap=wo(["nowrap","wrap","wrap-reverse"]),this.optsOverflow=wo(["visible","hidden","scroll","auto"]),this.optsDir=wo(["row","row-reverse","column","column-reverse"]),this.opstDisplay=wo(["block","inline","inline-block","flex","none"]),this.optsTransitFn=wo(["linear","ease","ease-in","ease-out","ease-in-out"]),this.optsCursor=wo(["auto","pointer","copy","crosshair","grab","grabbing","help","move","text"]),this.optsFloat=wo(["none","left","right"]),this.optsPos=wo(["static","relative","absolute","fixed"]),this.optsTextAlign=wo(["left","center","right","justify"]),this.optsFlexAlign=wo(e),this.optsJustCont=wo(Is(Is([],t,!0),["space-between","space-around","space-evenly"],!1)),this.optsAlignCont=wo(Is(Is([],t,!0),["space-between","space-around","stretch"],!1)),this.optsAlignSelf=wo(Is(["auto"],e,!0)),this.optsTransitProp=wo(["all","width","height","background-color","transform","box-shadow","opacity"]),this.optsBorderStyle=wo(["none","solid","dotted","dashed","double","groove","ridge","inset","outset"]),this.optsBgPos=wo(["left top","left center","left bottom","right top","right center","right bottom","center top","center center","center bottom"]),this.optsWeight=[{id:"100",label:"Thin"},{id:"200",label:"Extra-Light"},{id:"300",label:"Light"},{id:"400",label:"Normal"},{id:"500",label:"Medium"},{id:"600",label:"Semi-Bold"},{id:"700",label:"Bold"},{id:"800",label:"Extra-Bold"},{id:"900",label:"Ultra-Bold"}],this.optsShadowType=[{id:"",label:"Outside"},{id:"inset",label:"Inside"}],this.optsFonts=["Arial, Helvetica"+o,"Arial Black, Gadget"+o,"Brush Script MT"+o,"Comic Sans MS, cursive"+o,"Courier New, Courier, monospace","Georgia, serif","Helvetica"+o,"Impact, Charcoal"+o,"Lucida Sans Unicode, Lucida Grande"+o,"Tahoma, Geneva"+o,"Times New Roman, Times, serif","Trebuchet MS, Helvetica"+o,"Verdana, Geneva"+o].map(function(n){return{id:n,label:n.split(",")[0]}}),this.fixedFontSizes=["medium","xx-small","x-small","small","large","x-large","xx-large","smaller","larger","length","initial","inherit"],this.fixedLetSpace=["normal","initial","inherit"],this.requireFlex={display:["flex"]},this.init()}return a.prototype.__sub=function(o){var t=this;return function(){return o.map(function(e){if((0,C.isString)(e))return t.get(e);var n=e.extend,r=Q0(e,["extend"]);return za(za({},t.get(n)),r)})}},a.prototype.init=function(){var o=this,t=this,e=t.fixedValues,n=t.requireFlex,r=t.typeNumber;this.props={};var l=[["text-shadow-h",{type:r,default:"0",units:this.unitsSizeNoPerc}],["top",{default:"auto",units:this.unitsSize,fixedValues:e},"text-shadow-h"],["right",{},"top"],["bottom",{},"top"],["left",{},"top"],["margin-top",{default:"0"},"top"],["margin-right",{},"margin-top"],["margin-bottom",{},"margin-top"],["margin-left",{},"margin-top"],["padding-top",{min:0},"margin-top"],["padding-right",{},"padding-top"],["padding-bottom",{},"padding-top"],["padding-left",{},"padding-top"],["width",{min:0},"top"],["min-width",{},"width"],["max-width",{},"width"],["height",{},"width"],["min-height",{},"width"],["max-height",{},"width"],["flex-basis",{requiresParent:n},"width"],["font-size",{default:"medium",fixedValues:this.fixedFontSizes},"width"],["letter-spacing",{default:"normal",fixedValues:this.fixedLetSpace},"top"],["line-height",{},"letter-spacing"],["text-shadow-v",{},"text-shadow-h"],["text-shadow-blur",{min:0},"text-shadow-h"],["border-radius-c",{property:"border-radius",fixedValues:void 0},"padding-top"],["border-top-left-radius",{},"border-radius-c"],["border-top-right-radius",{},"border-radius-c"],["border-bottom-left-radius",{},"border-radius-c"],["border-bottom-right-radius",{},"border-radius-c"],["border-width",{units:this.unitsSizeNoPerc},"border-radius-c"],["box-shadow-h",{},"text-shadow-h"],["box-shadow-v",{},"text-shadow-h"],["box-shadow-blur",{default:"5px"},"text-shadow-blur"],["box-shadow-spread",{},"text-shadow-h"],["transition-duration",{default:"2s",units:this.unitsTime},"border-radius-c"],["perspective",{},"border-radius-c"],["order",{type:r,default:"0",requiresParent:n}],["flex-grow",{},"order"],["flex-shrink",{default:"1"},"order"],["float",{type:this.typeRadio,default:"none",options:this.optsFloat}],["position",{default:"static",options:this.optsPos},"float"],["text-align",{default:"left",options:this.optsTextAlign},"float"],["color",{type:this.typeColor,default:"black",full:!0}],["text-shadow-color",{},"color"],["border-color",{},"color"],["box-shadow-color",{},"color"],["background-color",{default:"none"},"color"],["background-image",{type:this.typeFile,functionName:"url",default:"none",full:!0}],["opacity",{type:this.typeSlider,default:"1",min:0,max:1,step:.01,full:!0}],["display",{type:this.typeSelect,default:"block",options:this.opstDisplay}],["flex-direction",{default:"row",options:this.optsDir,requires:n},"display"],["flex-wrap",{default:"nowrap",options:this.optsWrap},"flex-direction"],["justify-content",{default:"flex-start",options:this.optsJustCont},"flex-wrap"],["align-items",{default:"stretch",options:this.optsFlexAlign},"flex-wrap"],["align-content",{options:this.optsAlignCont},"align-items"],["align-self",{default:"auto",options:this.optsAlignSelf,requiresParent:n},"display"],["font-family",{default:"Arial, Helvetica, sans-serif",options:this.optsFonts},"display"],["font-weight",{default:"400",options:this.optsWeight},"display"],["border-style",{default:"solid",options:this.optsBorderStyle},"display"],["box-shadow-type",{default:"",options:this.optsShadowType},"display"],["background-repeat",{default:"repeat",options:this.optsBgRepeat},"display"],["background-position",{default:"left top",options:this.optsBgPos},"display"],["background-attachment",{default:"scroll",options:this.optsBgAttach},"display"],["background-size",{default:"auto",options:this.optsBgSize},"display"],["transition-property",{default:"width",options:this.optsTransitProp},"display"],["transition-timing-function",{default:"ease",options:this.optsTransitFn},"display"],["cursor",{default:"auto",options:this.optsCursor},"display"],["overflow",{default:"visible",options:this.optsOverflow},"display"],["overflow-x",{},"overflow"],["overflow-y",{},"overflow"],["margin",{type:this.typeComposite,properties:this.__sub([{extend:"margin-top",id:"margin-top-sub"},{extend:"margin-right",id:"margin-right-sub"},{extend:"margin-bottom",id:"margin-bottom-sub"},{extend:"margin-left",id:"margin-left-sub"}])}],["padding",{properties:this.__sub([{extend:"padding-top",id:"padding-top-sub"},{extend:"padding-right",id:"padding-right-sub"},{extend:"padding-bottom",id:"padding-bottom-sub"},{extend:"padding-left",id:"padding-left-sub"}])},"margin"],["border",{properties:this.__sub([{extend:"border-width",id:"border-width-sub"},{extend:"border-style",id:"border-style-sub"},{extend:"border-color",id:"border-color-sub"}])},"margin"],["border-radius",{properties:this.__sub([{extend:"border-top-left-radius",id:"border-top-left-radius-sub"},{extend:"border-top-right-radius",id:"border-top-right-radius-sub"},{extend:"border-bottom-left-radius",id:"border-bottom-left-radius-sub"},{extend:"border-bottom-right-radius",id:"border-bottom-right-radius-sub"}])},"margin"],["transition",{type:this.typeStack,properties:this.__sub([{extend:"transition-property",id:"transition-property-sub"},{extend:"transition-duration",id:"transition-duration-sub"},{extend:"transition-timing-function",id:"transition-timing-function-sub"}])}],["box-shadow",{preview:!0,layerLabel:function(p,d){var g=d.values,h=g["box-shadow-h"],m=g["box-shadow-v"],w=g["box-shadow-blur"],k=g["box-shadow-spread"];return"".concat(h," ").concat(m," ").concat(w," ").concat(k)},properties:this.__sub(["box-shadow-h","box-shadow-v","box-shadow-blur","box-shadow-spread","box-shadow-color","box-shadow-type"])},"transition"],["text-shadow",{default:"none",layerLabel:function(p,d){var g=d.values,h=g["text-shadow-h"],m=g["text-shadow-v"],w=g["text-shadow-blur"];return"".concat(h," ").concat(m," ").concat(w)},properties:this.__sub(["text-shadow-h","text-shadow-v","text-shadow-blur","text-shadow-color"])},"box-shadow"],["background",{detached:!0,layerLabel:function(p,d){var g=d.values;return[g["background-repeat-sub"]||"",g["background-position-sub"]||"",g["background-attachment-sub"]||"",g["background-size-sub"]||""].join(" ")},properties:this.__sub([{extend:"background-image",id:"background-image-sub"},{extend:"background-repeat",id:"background-repeat-sub"},{extend:"background-position",id:"background-position-sub"},{extend:"background-attachment",id:"background-attachment-sub"},{extend:"background-size",id:"background-size-sub"}])},"box-shadow"],["transform",{type:"stack",layerSeparator:" ",fromStyle:function(p,d){var g=d.property,h=p[d.name]||"",m=g.getLayerSeparator();return h?h.split(m).map(function(w){var k=g.__parseFn(w);return{"transform-type":k.name,"transform-value":k.value}}):[]},toStyle:function(p,d){var g;return(g={})[d.name]="".concat(p["transform-type"],"(").concat(p["transform-value"],")"),g},properties:[{property:"transform-type",name:"Type",type:this.typeSelect,default:"rotateZ",full:!0,options:[{id:"scaleX",propValue:{units:[""],step:.01}},{id:"scaleY",propValue:{units:[""],step:.01}},{id:"scaleZ",propValue:{units:[""],step:.01}},{id:"rotateX",propValue:{units:this.unitsAngle,step:1}},{id:"rotateY",propValue:{units:this.unitsAngle,step:1}},{id:"rotateZ",propValue:{units:this.unitsAngle,step:1}},{id:"translateX",propValue:{units:this.unitsSize,step:1}},{id:"translateY",propValue:{units:this.unitsSize,step:1}}],onChange:function(p){var d=p.property;if(p.to.value){var g=d.getOption(),h=za({},g.propValue||{}),m=d.getParent().getProperty("transform-value"),w=m.getUnit();(!w||h?.units.indexOf(w)<0)&&(h.unit=h?.units[0]||""),m.up(h)}}},{property:"transform-value",type:this.typeNumber,default:"0",full:!0}]}]];return l.forEach(function(p){var d=p[0],g=p[1],h=p[2];o.add(d,g||{},{from:h})}),this},a.prototype.add=function(o,t,e){t===void 0&&(t={}),e===void 0&&(e={});var n=e.from||"",r=this.props[n||o]||{},l=za(za(za({},r),{property:o}),t);return l.properties&&(0,C.isFunction)(l.properties)&&(l.properties=l.properties()),this.props[o]=l,l},a.prototype.get=function(o){return this.props[o]},a.prototype.build=function(o){var t=this,e=[];return((0,C.isString)(o)?[o]:o).forEach(function(n){e.push(t.get(n)||{property:n})}),e},a}();const eb=tb;var nb=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ob=function(a,o){return Object.defineProperty?Object.defineProperty(a,"raw",{value:o}):a.raw=o,a},rb=function(a){function o(t){var e=a.call(this,t)||this,n=t.config||{},r=e.model,l=n.em;return e.config=n,e.em=l,e.pfx=n.stylePrefix||"",e.listenTo(r,"destroy remove",e.remove),e.listenTo(r,"change:open",e.updateOpen),e.listenTo(r,"change:visible",e.updateVisibility),e}return nb(o,a),o.prototype.template=function(t){var e,n=t.pfx,r=t.label,l=(e=this.em)===null||e===void 0?void 0:e.getConfig().icons,p=l?.caret||"",d="".concat(n,"sector-");return it(Jh||(Jh=ob([`
      <div class="`,`title" data-sector-title>
        <div class="`,'caret">$',`</div>
        <div class="`,'label">',`</div>
      </div>
    `],[`
      <div class="`,`title" data-sector-title>
        <div class="`,'caret">$',`</div>
        <div class="`,'label">',`</div>
      </div>
    `])),d,d,p,d,r)},o.prototype.events=function(){return{"click [data-sector-title]":"toggle"}},o.prototype.updateOpen=function(){var t=this,e=t.$el,n=t.model,r=t.pfx,l=n.isOpen();e[l?"addClass":"removeClass"]("".concat(r,"open")),this.getPropertiesEl().style.display=l?"":"none"},o.prototype.updateVisibility=function(){this.el.style.display=this.model.isVisible()?"":"none"},o.prototype.getPropertiesEl=function(){var t=this.$el,e=this.pfx;return t.find(".".concat(e,"properties")).get(0)},o.prototype.toggle=function(){var t=this.model;t.setOpen(!t.get("open"))},o.prototype.renderProperties=function(){var t=this.model,e=this.config,n=t.get("properties");if(n){var r=new ff({collection:n,config:e});this.$el.append(r.render().el)}},o.prototype.render=function(){var t=this,e=t.pfx,n=t.model,r=t.$el,l=n.getId(),p=n.getName();return r.html(this.template({pfx:e,label:p})),this.renderProperties(),r.attr("class","".concat(e,"sector ").concat(e,"sector__").concat(l," no-select")),this.updateOpen(),this},o}(E.Ss);const ib=rb;var Jh,ab=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),sb=function(a){function o(t){t===void 0&&(t={});var e=a.call(this,t)||this,n=t.module,r=t.config,l=e.collection;return e.pfx=r?.stylePrefix||"",e.ppfx=r?.pStylePrefix||"",e.config=r,e.module=n,e.listenTo(l,"add",e.addTo),e.listenTo(l,"reset",e.render),e}return ab(o,a),o.prototype.remove=function(){var t=this;return E.Ss.prototype.remove.apply(this,arguments),["config","module","em"].forEach(function(e){return t[e]={}}),this},o.prototype.addTo=function(t,e,n){n===void 0&&(n={}),this.addToCollection(t,null,n)},o.prototype.addToCollection=function(t,e,n){n===void 0&&(n={});var r=this.config,l=this.el,p=e||l,d=new ib({model:t,config:r}).render().el;return(0,St.Sc)(p,d,n.at),d},o.prototype.render=function(){var t=this,e=this,n=e.$el,r=e.pfx,l=e.ppfx;n.empty();var p=document.createDocumentFragment();return this.collection.each(function(d){return t.addToCollection(d,p)}),n.append(p),n.addClass("".concat(r,"sectors ").concat(l,"one-bg ").concat(l,"two-color")),this},o}(E.Ss);const lb=sb;var cb=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ba=function(){return Ba=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},Ba.apply(this,arguments)},Zh=function(a,o,t){if(t||arguments.length===2)for(var e,n=0,r=o.length;n<r;n++)!e&&n in o||(e||(e=Array.prototype.slice.call(o,0,n)),e[n]=o[n]);return a.concat(e||Array.prototype.slice.call(o))},Qh="style",Hc="".concat(Qh,":"),vf="".concat(Hc,"sector"),ub="".concat(vf,":add"),pb="".concat(vf,":remove"),db="".concat(vf,":update"),mf="".concat(Hc,"property"),fb="".concat(mf,":add"),hb="".concat(mf,":remove"),gb="".concat(mf,":update"),tg="".concat(Hc,"layer:select"),yf="".concat(Hc,"target"),vb="".concat(Hc,"custom"),eg=function(a){return a||a===0},mb={all:Qh,sectorAdd:ub,sectorRemove:pb,sectorUpdate:db,propertyAdd:fb,propertyRemove:hb,propertyUpdate:gb,layerSelect:tg,target:yf,custom:vb},yb=function(a){function o(t){var e=a.call(this,t,"StyleManager",new Z0([],{em:t}),mb,Jy())||this;e.Sector=Xh,e.storageKey="",(0,C.bindAll)(e,"__clearStateTarget");var n=e.config,r=n.pStylePrefix;r&&(n.stylePrefix=r+n.stylePrefix),e.builtIn=new eb,e.properties=new gf([],{em:t,module:e}),e.sectors=e.all;var l=new E.Kx({targets:[]});e.model=l;var p=jt.I.update,d="component:toggled ".concat(p,":classes change:state change:device frame:resized selector:type");e.upAll=(0,C.debounce)(function(){return e.__upSel()},0),l.listenTo(t,d,e.upAll),l.listenTo(t,"component:toggled",e.__clearStateTarget);var g=(0,C.debounce)(function(){e.__upProps(),e.__trgCustom()},0);l.listenTo(t,"styleable:change undo redo",g);var h=(0,C.debounce)(function(){return e.__trgCustom()},0);return l.listenTo(t,"".concat(tg," ").concat(yf),h),l.on("change:lastTarget",function(){return t.trigger(yf,e.getSelected())}),e}return cb(o,a),o.prototype.__upSel=function(){this.select(this.em.getSelectedAll())},o.prototype.__trgCustom=function(t){t===void 0&&(t={}),this.__ctn=this.__ctn||t.container,this.em.trigger(this.events.custom,{container:this.__ctn})},o.prototype.__trgEv=function(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];(e=this.em).trigger.apply(e,Zh([t],n,!1))},o.prototype.__clearStateTarget=function(){var t=this,e=this.em,n=this.__getStateTarget();n&&e?.skip(function(){e.Css.remove(n),t.model.set({stateTarget:null})})},o.prototype.onLoad=function(){this.sectors.add(this.config.sectors,{silent:!0})},o.prototype.postRender=function(){this.__appendTo()},o.prototype.addSector=function(t,e,n){n===void 0&&(n={});var r=this.getSector(t);return r||(e.id=t,r=this.sectors.add(e,n)),r},o.prototype.getSector=function(t,e){e===void 0&&(e={});var n=this.sectors.where({id:t})[0];return!n&&e.warn&&this._logNoSector(t),n||null},o.prototype.getSectors=function(t){t===void 0&&(t={});var e=this.sectors,n=e&&e.models?t.array?Zh([],e.models,!0):e:[];return t.visible?n.filter(function(r){return r.isVisible()}):n},o.prototype.removeSector=function(t){return this.getSectors().remove(this.getSector(t,{warn:!0}))},o.prototype.addProperty=function(t,e,n){n===void 0&&(n={});var r,l=this.getSector(t,{warn:!0});return l&&(r=l.addProperty(e,n)),r},o.prototype.getProperty=function(t,e){var n,r=this.getSector(t,{warn:!0});return r&&(n=r.properties.filter(function(l){return l.get("property")===e||l.get("id")===e})[0]),n},o.prototype.getProperties=function(t){var e,n=this.getSector(t,{warn:!0});return n&&(e=n.properties),e},o.prototype.removeProperty=function(t,e){var n=this.getProperties(t);return n?n.remove(this.getProperty(t,e)):null},o.prototype.select=function(t,e){var n=this;e===void 0&&(e={});var r=this.em,l=(0,C.isArray)(t)?t:[t],p=e.stylable,d=r.Css,g=[];l.filter(Boolean).forEach(function(B){var nt=B;if((0,C.isString)(B)){var X=d.getRule(B)||d.setRule(B);!(0,C.isUndefined)(p)&&X.set({stylable:p}),nt=X}g.push(nt)});var h=e.component||g.filter(function(B){return(0,q.isComponent)(B)}).reverse()[0];g=g.map(function(B){return n.getModelToStyle(B)});var m=r.getState(),w=g.slice().reverse()[0],k=this.getParentRules(w,{state:m,component:h}),z=this.__getStateTarget();return r.skip(function(){var B;if(m&&(!((B=w?.getState)===null||B===void 0)&&B.call(w))){var nt=w.getStyle();z?z.setStyle(nt):z=d.getAll().add({selectors:"gjs-selected",style:nt,shallow:!0,important:!0})}else z&&(d.remove(z),z=void 0)}),this.model.set({targets:g,lastTarget:w,lastTargetParents:k,stateTarget:z,component:h}),this.__upProps(e),g},o.prototype.getSelected=function(){return this.model.get("lastTarget")},o.prototype.getSelectedAll=function(){return this.model.get("targets")},o.prototype.getSelectedParents=function(){return this.model.get("lastTargetParents")||[]},o.prototype.__getStateTarget=function(){return this.model.get("stateTarget")},o.prototype.addStyleTargets=function(t,e){this.getSelectedAll().map(function(l){return l.addStyle(t,e)});var n=this.getSelected();n&&this.__emitCmpStyleUpdate(t);var r=this.__getStateTarget();n&&r?.setStyle(n.getStyle(),e)},o.prototype.getBuiltIn=function(t){return this.builtIn.get(t)},o.prototype.getBuiltInAll=function(){return this.builtIn.props},o.prototype.addBuiltIn=function(t,e){return this.builtIn.add(t,e)},o.prototype.getModelToStyle=function(t,e){e===void 0&&(e={});var n=this.em,r=e.skipAdd;if(n&&t?.toHTML){var l=n.getConfig(),p=n.UndoManager,d=n.Css,g=n.Selectors,h=g?g.getConfig():{},m=l.devicePreviewMode?"":n.get("state"),w=t.get("classes").getStyleable(),k=w.length,z=!h.componentFirst||e.useClasses,B={noCount:1},nt={state:m,addOpts:B};p.skip(function(){var X;if(k&&z){var At=n.getCurrentMedia();(X=d.get(w,m,At))||r||(X=d.add(w,m,At,{},B))}else if(l.avoidInlineStyle){var It=t.getId();!(X=d.getIdRule(It,nt))&&!r&&(X=d.setIdRule(It,{},nt)),t.is("wrapper")&&X.set("wrapper",1,B)}X&&(t=X)})}return t},o.prototype.getParentRules=function(t,e){var n=e===void 0?{}:e,r=n.state,l=n.component,p=this.em,d=[];if(p&&t){var g=l,h=p.Css,m=p.CodeManager.getGenerator("css"),w=t.toHTML?t:t.getComponent(),k={array:!0},z=[],B=[],nt=[],X=[],At=function(oe){return oe.length?h.getRules().filter(function(ve){var we=ve.getSelectors().map(function(Ve){return Ve.getFullName()});return we.length!==0&&we.every(function(Ve){return oe.indexOf(Ve)>=0})}):[]},It=function(oe){return oe?h.getRules().filter(function(ve){return ve.selectorsToString()===oe}):[]};w?(z=h.getRules("#".concat(w.getId())),B=It(w.get("tagName")),X=(g?At(g.getSelectors().getFullName(k)):[]).concat(B).concat(z)):(z=g?h.getRules("#".concat(g.getId())):[],B=It(g?.get("tagName")||""),nt=At((g?.getSelectors().getFullName(k)||[]).filter(function(oe){return t.getSelectors().getFullName(k).findIndex(function(ve){return ve===oe})===-1}).concat(t.getSelectors().getFullName(k))),X=B.concat(z).concat(nt));var Wt=X.filter(function(oe){return(0,C.isUndefined)(r)?1:oe.get("state")===r}).sort(m.sortRules).reverse();d=Wt.slice(Wt.indexOf(t)+1)}return d},o.prototype.addType=function(t,e){this.properties.addType(t,e)},o.prototype.getType=function(t){return this.properties.getType(t)},o.prototype.getTypes=function(){return this.properties.getTypes()},o.prototype.createType=function(t,e){var n=e===void 0?{}:e,r=n.model,l=r===void 0?{}:r,p=n.view,d=p===void 0?{}:p,g=this.config,h=this.getType(t);if(h)return new h.view(Ba({model:new h.model(l),config:g},d))},o.prototype.render=function(){var t=this,e=t.config,n=t.em,r=t.SectView,l=r&&r.el;return this.SectView=new lb({el:l,em:n,config:e,module:this,collection:this.sectors}),this.SectView.render().el},o.prototype._logNoSector=function(t){var e=this.em;e&&e.logWarning("'".concat(t,"' sector not found"))},o.prototype.__emitCmpStyleUpdate=function(t,e){e===void 0&&(e={});var n=this.em;if(!t.__p){var r=this.getSelectedAll(),l=e.components||n.getSelectedAll(),p=Array.isArray(l)?l:[l],d=Ba({},t);delete d.__p,p.forEach(function(g){return!r.includes(g)&&g.__onStyleChange(d)})}},o.prototype.__upProps=function(t){var e=this;t===void 0&&(t={});var n=this.getSelected();if(n){var r=this.sectors,l=this.model.get("component"),p=this.getSelectedParents(),d=n.getStyle(),g=p.map(function(h){return{target:h,style:h.getStyle()}});r.map(function(h){h.getProperties().map(function(m){e.__upProp(m,d,g,t)})}),r.forEach(function(h){var m=h.getProperties();m.forEach(function(k){var z=k.__checkVisibility({target:n,sector:h,component:l,sectors:r.models});k.set("visible",z)});var w=m.some(function(k){return k.isVisible()});h.set("visible",w)})}},o.prototype.__upProp=function(t,e,n,r){var l=this,p=t.getName(),d=e[p],g=eg(d),h=t.getType()==="stack",m=t.getType()==="composite",w=Ba(Ba({},r),{__up:!0}),k=!m&&!h,z=t,B=t,nt=h?z.__getLayersFromStyle(e):[],X=m?B.__getPropsFromStyle(e):{},At=g?d:null,It=null;if(h&&nt===null||m&&X===null){var Wt=h?"__getLayersFromStyle":"__getPropsFromStyle";if(ve=n.filter(function(Xe){return z[Wt](Xe.style)!==null})[0]){At=ve.style[p],It=ve.target;var oe=z[Wt](ve.style);h?nt=oe:X=oe}}else if(!g){var ve;At=null,(ve=n.filter(function(Xe){return eg(Xe.style[p])})[0])&&(At=ve.style[p],It=ve.target)}if(t.__setParentTarget(It),k&&t.__getFullValue()!==At&&t.upValue(At,w),h&&z.__setLayers(nt||[],{isEmptyValue:z.isEmptyValueStyle(e)}),m){var we=B.getProperties();if(B.isDetached()){var Ve=B.__getPropsFromStyle(e,{byName:!0})||{},Ze=n.map(function(Xe){return Ba(Ba({},Xe),{style:B.__getPropsFromStyle(Xe.style,{byName:!0})||{}})});we.map(function(Xe){return l.__upProp(Xe,Ve,Ze,r)})}else B.__setProperties(X||{},w),B.getProperties().map(function(Xe){return Xe.__setParentTarget(It)})}},o.prototype.destroy=function(){var t;[this.properties,this.sectors].forEach(function(e){e.reset(),e.stopListening()}),(t=this.SectView)===null||t===void 0||t.remove(),this.model.stopListening(),this.upAll.cancel()},o}(Tt);const bb=yb;var _b=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Pp=function(){return Pp=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},Pp.apply(this,arguments)};const wb=function(a){function o(t,e){var n=a.call(this,t,e)||this;return n.em=e,n.model=function(r,l){return l===void 0&&(l={}),new ka(r,Pp(Pp({},l),{em:e}))},n}return _b(o,a),o}(E.pM);var xb=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Cb=function(a){function o(t){var e=a.call(this,t,"DataSources",new wb([],t),se)||this;return e.storageKey="dataSources",e.events=se,Object.assign(e,pt.Events),e}return xb(o,a),o.prototype.destroy=function(){},o.prototype.add=function(t,e){e===void 0&&(e={});var n=this.all;return t.id=t.id||this._createId(),n.add(t,e)},o.prototype.get=function(t){return this.all.get(t)},o.prototype.getValue=function(t,e){return(0,q.get)(this.getContext(),t,e)},o.prototype.getContext=function(){return this.all.reduce(function(t,e){return t[e.id]=e.records.reduce(function(n,r,l){var p=r;return n[p.id||l]=p.attributes,n},{}),t},{})},o.prototype.remove=function(t,e){return this.__remove(t,e)},o.prototype.fromPath=function(t){var e=[],n=(0,q.stringToPath)(t||""),r=n[0],l=n[1],p=n.slice(2),d=this.get(r),g=d?.records.get(l);return d&&e.push(d),g&&(e.push(g),p.length&&e.push(p.join("."))),e},o.prototype.store=function(){var t,e=[];return this.all.forEach(function(n){var r=n.get("skipFromStorage");r||e.push({id:n.id,name:n.get("name"),records:n.records.toJSON(),skipFromStorage:r})}),(t={})[this.storageKey]=e,t},o.prototype.load=function(t){return this.loadProjectData(t)},o.prototype.postLoad=function(){var t=this.em,e=this.all;t.listenTo(e,E.e2,function(n,r,l){return t.changesUp(l||r)})},o}(Tt);const ng=Cb;var Sb=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),jo=function(){return jo=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},jo.apply(this,arguments)},bf=function(a,o,t,e){return new(t||(t=Promise))(function(n,r){function l(g){try{d(e.next(g))}catch(h){r(h)}}function p(g){try{d(e.throw(g))}catch(h){r(h)}}function d(g){var h;g.done?n(g.value):(h=g.value,h instanceof t?h:new t(function(m){m(h)})).then(l,p)}d((e=e.apply(a,o||[])).next())})},_f=function(a,o){var t,e,n,r,l={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function p(d){return function(g){return function(h){if(t)throw new TypeError("Generator is already executing.");for(;r&&(r=0,h[0]&&(l=0)),l;)try{if(t=1,e&&(n=2&h[0]?e.return:h[0]?e.throw||((n=e.return)&&n.call(e),0):e.next)&&!(n=n.call(e,h[1])).done)return n;switch(e=0,n&&(h=[2&h[0],n.value]),h[0]){case 0:case 1:n=h;break;case 4:return l.label++,{value:h[1],done:!1};case 5:l.label++,e=h[1],h=[0];continue;case 7:h=l.ops.pop(),l.trys.pop();continue;default:if(n=l.trys,!((n=n.length>0&&n[n.length-1])||h[0]!==6&&h[0]!==2)){l=0;continue}if(h[0]===3&&(!n||h[1]>n[0]&&h[1]<n[3])){l.label=h[1];break}if(h[0]===6&&l.label<n[1]){l.label=n[1],n=h;break}if(n&&l.label<n[2]){l.label=n[2],l.ops.push(h);break}n[2]&&l.ops.pop(),l.trys.pop();continue}h=o.call(a,l)}catch(m){h=[6,m],e=0}finally{t=n=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([d,g])}}},Ob=function(a,o){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&o.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(e=Object.getOwnPropertySymbols(a);n<e.length;n++)o.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(a,e[n])&&(t[e[n]]=a[e[n]])}return t},Tb=function(a,o,t){if(t||arguments.length===2)for(var e,n=0,r=o.length;n<r;n++)!e&&n in o||(e||(e=Array.prototype.slice.call(o,0,n)),e[n]=o[n]);return a.concat(e||Array.prototype.slice.call(o))};R().$=F.default;var Pb=[jm,cm,Hm,zy,Pg,Kv,fe,bb,Ml,Ym,Iy,hy,Xy,Xg,yv,os,cv,Od,ng],Eb=[ng,Rv,Nu,om,gd];(function(a){var o=a.$;if(o&&o.prototype&&o.prototype.constructor.name!=="jQuery"){var t=o.fn;t.hide=function(){return this.css("display","none")},t.show=function(){return this.css("display","block")},t.focus=function(){var r=this.get(0);return r&&r.focus(),this},t.bind=function(r,l){return this.on(r,l)},t.unbind=function(r,l){if((0,C.isObject)(r)){for(var p in r)r.hasOwnProperty(p)&&this.off(p,r[p]);return this}return this.off(r,l)},t.click=function(r){return r?this.on("click",r):this.trigger("click")},t.change=function(r){return r?this.on("change",r):this.trigger("change")},t.keydown=function(r){return r?this.on("keydown",r):this.trigger("keydown")},t.delegate=function(r,l,p,d){return d||(d=p),this.on(l,r,function(g){g.data=p,d(g)})},t.scrollLeft=function(){var r=this.get(0),l=(r=r.nodeType==9?r.defaultView:r)instanceof Window?r:null;return l?l.pageXOffset:r.scrollLeft||0},t.scrollTop=function(){var r=this.get(0),l=(r=r.nodeType==9?r.defaultView:r)instanceof Window?r:null;return l?l.pageYOffset:r.scrollTop||0};var e=o.prototype.offset;t.offset=function(r){var l,p;return r&&(l=r.top,p=r.left),l!==void 0&&this.css("top","".concat(l,"px")),p!==void 0&&this.css("left","".concat(p,"px")),e.call(this)},o.map=function(r,l){for(var p=[],d=0;d<r.length;d++)p.push(l(r[d],d));return p};var n=Array.prototype.indexOf;o.inArray=function(r,l,p){return l==null?-1:n.call(l,r,p)},o.Event=function(r,l){if(!(this instanceof o.Event))return new o.Event(r,l);this.type=r,this.isDefaultPrevented=function(){return!1}}}})({$:F.default});var og={debug:console.log,info:console.info,warning:console.warn,error:console.error},kb=function(a){function o(t){t===void 0&&(t={});var e=a.call(this)||this;e.Model=E.Kx,e.Collection=E.pM,e.events=sr,e.__skip=!1,e.defaultRunning=!1,e.loadTriggered=!1,e.destroyed=!1,e._config=t;var n=e.config;e.set("Config",t),e.set("modules",[]),e.set("toLoad",[]),e.set("storables",[]),e.set("selected",new x),e.set("dmode",n.dragMode);var r=n.el,l=n.log,p=l===!0?(0,C.keys)(og):(0,C.isArray)(l)?l:[];return(0,C.bindAll)(e,"initBaseColorPicker"),r&&n.fromElement&&(n.components=r.innerHTML),e.attrsOrig=r?(0,C.toArray)(r.attributes).reduce(function(d,g){return d[g.nodeName]=g.nodeValue,d},{}):"",n.components&&!n.pageManager&&(n.pageManager={pages:[{component:n.components}]}),Pb.forEach(function(d){return e.loadModule(d)}),Eb.forEach(function(d){return e.loadStorableModule(d)}),e.on("change:componentHovered",e.componentHovered,e),e.on("change:changesCount",e.updateChanges,e),e.on("change:readyLoad change:readyCanvas",e._checkReady,e),p.forEach(function(d){return e.listenLog(d)}),[{from:"change:selectedComponent",to:"component:toggled"}].forEach(function(d){var g=d.from,h=d.to;e.listenTo(e,g,function(){for(var m=[],w=0;w<arguments.length;w++)m[w]=arguments[w];e.trigger.apply(e,Tb([h],m,!1)),e.logWarning("The event '".concat(g,"' is deprecated, replace it with '").concat(h,"'"))})}),e}return Sb(o,a),o.prototype.defaults=function(){return{editing:0,selected:0,clipboard:null,dmode:0,componentHovered:null,previousModel:null,changesCount:0,storables:[],modules:[],toLoad:[],opened:{},device:""}},Object.defineProperty(o.prototype,"storables",{get:function(){return this.get("storables")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"modules",{get:function(){return this.get("modules")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"toLoad",{get:function(){return this.get("toLoad")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"selected",{get:function(){return this.get("selected")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"shallow",{get:function(){return this.get("shallow")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"I18n",{get:function(){return this.get("I18n")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Utils",{get:function(){return this.get("Utils")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Commands",{get:function(){return this.get("Commands")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Keymaps",{get:function(){return this.get("Keymaps")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Modal",{get:function(){return this.get("Modal")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Panels",{get:function(){return this.get("Panels")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"CodeManager",{get:function(){return this.get("CodeManager")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"UndoManager",{get:function(){return this.get("UndoManager")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"RichTextEditor",{get:function(){return this.get("RichTextEditor")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Canvas",{get:function(){return this.get("Canvas")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Editor",{get:function(){return this.get("Editor")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Components",{get:function(){return this.get("DomComponents")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Css",{get:function(){return this.get("CssComposer")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Blocks",{get:function(){return this.get("BlockManager")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Selectors",{get:function(){return this.get("SelectorManager")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Storage",{get:function(){return this.get("StorageManager")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Traits",{get:function(){return this.get("TraitManager")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Parser",{get:function(){return this.get("Parser")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Layers",{get:function(){return this.get("LayerManager")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Assets",{get:function(){return this.get("AssetManager")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Devices",{get:function(){return this.get("DeviceManager")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Pages",{get:function(){return this.get("PageManager")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Styles",{get:function(){return this.get("StyleManager")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"DataSources",{get:function(){return this.get("DataSources")},enumerable:!1,configurable:!0}),o.prototype._checkReady=function(){this.get("readyLoad")&&this.get("readyCanvas")&&!this.get("ready")&&this.set("ready",!0)},o.prototype.getContainer=function(){return this.config.el},o.prototype.listenLog=function(t){this.listenTo(this,"log:".concat(t),og[t])},Object.defineProperty(o.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"version",{get:function(){var t;return((t=this.config.grapesjs)===null||t===void 0?void 0:t.version)||""},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isHeadless",{get:function(){return!!this.config.headless},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isShallow",{get:function(){return!!this.get("isShallow")},enumerable:!1,configurable:!0}),o.prototype.initModules=function(){this.modules.forEach(function(t){return t.onInit()})},o.prototype.getConfig=function(t){var e=this.config;return(0,C.isUndefined)(t)?e:e[t]},o.prototype.loadOnStart=function(){var t=this,e=this.config,n=e.projectData,r=e.headless,l={initial:!0},p=this.Storage;this.toLoad.reverse().forEach(function(h){return h.onLoad()});var d=function(){t.modules.forEach(function(h){return h.postLoad&&h.postLoad(t)}),t.set("readyLoad",1)};r?(n&&this.loadData(n,l),d()):this._storageTimeout=setTimeout(function(){return bf(t,void 0,void 0,function(){var h;return _f(this,function(m){switch(m.label){case 0:return n?(this.loadData(n,l),[3,5]):[3,1];case 1:if(!p?.canAutoload())return[3,5];m.label=2;case 2:return m.trys.push([2,4,,5]),[4,this.load({},l)];case 3:return m.sent(),[3,5];case 4:return h=m.sent(),this.logError(h),[3,5];case 5:return d(),[2]}})})});var g=new o({noticeOnUnload:!1,storageManager:!1,undoManager:!1});g.set({isShallow:!0}),g.Pages.onLoad(),g.Canvas.postLoad(),this.set("shallow",g)},o.prototype.updateChanges=function(t,e,n){var r=this,l=this.Storage,p=this.getDirtyCount();n.isClear||(this.updateItr&&clearTimeout(this.updateItr),this.updateItr=setTimeout(function(){return r.trigger(sr.update)})),this.config.noticeOnUnload&&(window.onbeforeunload=p?function(){return!0}:null),l.isAutosave()&&p>=l.getStepsBeforeSave()&&this.store().catch(function(d){return r.logError(d)})},o.prototype.loadModule=function(t){var e=new t(this);return this.set(e.name,e),e.onLoad&&this.toLoad.push(e),this.modules.push(e),e},o.prototype.loadStorableModule=function(t){var e=this.loadModule(t);return this.storables.push(e),e},o.prototype.init=function(t,e){e===void 0&&(e={}),this.destroyed&&(this.initialize(e),this.destroyed=!1),this.set("Editor",t)},o.prototype.getEditor=function(){return this.get("Editor")},o.prototype.handleUpdates=function(t,e,n){var r=this;n===void 0&&(n={}),this.__skip||!this.loadTriggered||n.temporary||n.noCount||n.avoidStore||n.partial||(this.timedInterval&&clearTimeout(this.timedInterval),this.timedInterval=setTimeout(function(){var l=r.getDirtyCount()||0,p=(n.unset,Ob(n,["unset"]));r.set("changesCount",l+1,p)},0))},o.prototype.changesUp=function(t){this.handleUpdates(0,0,t)},o.prototype.componentHovered=function(t,e,n){var r=this.previous("componentHovered");r&&this.trigger("component:unhovered",r,n),e&&this.trigger("component:hovered",e,n)},o.prototype.getSelected=function(){return this.selected.lastComponent()},o.prototype.getSelectedAll=function(){return this.selected.allComponents()},o.prototype.setSelected=function(t,e){var n=this;e===void 0&&(e={});var r=e.event,l=r&&(r.ctrlKey||r.metaKey),p=(r||{}).shiftKey,d=((0,C.isArray)(t)?t:[t]).map(function(w){var k,z;return((z=(k=w?.delegate)===null||k===void 0?void 0:k.select)===null||z===void 0?void 0:z.call(k,w))||w}).filter(Boolean),g=this.getSelectedAll(),h=this.getConfig().multipleSelection,m=(0,C.isArray)(t);!m&&t||this.removeSelected(g.filter(function(w){return!(0,C.contains)(d,w)})),d.forEach(function(w){if(w&&(n.trigger(jt.I.selectBefore,w,e),!w.get("selectable")||e.abort)){if(!e.useValid)return;for(var k=w.parent();k&&!k.get("selectable");)k=k.parent();w=k}if(l&&h)return n.toggleSelected(w);if(p&&h){if(n.isEditing())return;n.clearSelection(n.Canvas.getWindow());var z,B,nt=w.collection,X=w.index();if(n.getSelectedAll().forEach(function(At){var It=At.collection,Wt=At.index();It===nt&&(Wt<X?z=(0,C.isUndefined)(z)?Wt:Math.max(z,Wt):Wt>X&&(B=(0,C.isUndefined)(B)?Wt:Math.min(B,Wt)))}),!(0,C.isUndefined)(z))for(;z!==X;)n.addSelected(nt.at(z),e),z++;if(!(0,C.isUndefined)(B))for(;B!==X;)n.addSelected(nt.at(B),e),B--;return n.addSelected(w,e)}!m&&n.removeSelected(g.filter(function(At){return At!==w})),n.addSelected(w,e)})},o.prototype.addSelected=function(t,e){var n=this;e===void 0&&(e={}),((0,C.isArray)(t)?t:[t]).forEach(function(r){var l=n.selected;if(r&&r.get("selectable")&&!r.parents().some(function(d){return l.hasComponent(d)})&&(e.forceChange&&n.removeSelected(r,e),l.allComponents().filter(function(d){return(0,C.contains)(d.parents(),r)}).forEach(function(d){return n.removeSelected(d,e)}),l.addComponent(r,e),n.trigger(jt.I.select,r,e),n.Canvas.addSpot({type:ce.F.Select,component:r}),e.activate)){var p=r.getView();p?.rendered?p.onActive(e.event):r.once(jt.I.render,function(d){return d.view.onActive(e.event)})}})},o.prototype.removeSelected=function(t,e){var n=this;e===void 0&&(e={}),this.selected.removeComponent(t,e),((0,C.isArray)(t)?t:[t]).forEach(function(r){return n.Canvas.removeSpots({type:ce.F.Select,component:r})})},o.prototype.toggleSelected=function(t,e){var n=this;e===void 0&&(e={}),((0,C.isArray)(t)?t:[t]).forEach(function(r){n.selected.hasComponent(r)?n.removeSelected(r,e):n.addSelected(r,e)})},o.prototype.setHovered=function(t,e){var n=this;e===void 0&&(e={});var r=function(d,g){var h=n,m=h.config,w=h.Canvas,k=n.getHovered(),z=n.getSelectedAll(),B=ce.F.Hover,nt=ce.F.Spacing;n.set("componentHovered",d||null,g),k&&(w.removeSpots({type:B,component:k}),w.removeSpots({type:nt,component:k})),d&&(w.addSpot({type:B,component:d}),z.includes(d)&&!m.showOffsetsSelected||w.addSpot({type:nt,component:d}))};if(!t)return r();var l="component:hover";if(e.forceChange&&r(),this.trigger("".concat(l,":before"),t,e),!t.get("hoverable")){if(!e.useValid||e.abort)return;for(var p=t.parent();p&&!p.get("hoverable");)p=p.parent();t=p}e.abort||(r(t,e),this.trigger(l,t,e))},o.prototype.getHovered=function(){return this.get("componentHovered")},o.prototype.setComponents=function(t,e){return e===void 0&&(e={}),this.Components.setComponents(t,e)},o.prototype.getComponents=function(){var t=this.Components,e=this.CodeManager;if(t&&e){var n=t.getComponents();return e.getCode(n,"json")}},o.prototype.setStyle=function(t,e){e===void 0&&(e={});var n=this.Css;return n.clear(e),n.getAll().add(t,e),this},o.prototype.addStyle=function(t,e){e===void 0&&(e={});var n=this.getStyle().add(t,e);return(0,C.isArray)(n)?n:[n]},o.prototype.getStyle=function(){return this.Css.getAll()},o.prototype.setState=function(t){return this.set("state",t),this},o.prototype.getState=function(){return this.get("state")||""},o.prototype.getHtml=function(t){t===void 0&&(t={});var e=this.config,n=e.optsHtml,r=e.jsInHtml?this.getJs(t):"",l=t.component||this.Components.getComponent(),p=l?this.CodeManager.getCode(l,"html",jo(jo({},n),t)):"";return p+=r?"<script>".concat(r,"</script>"):""},o.prototype.getCss=function(t){t===void 0&&(t={});var e=this.config,n=e.optsCss,r=t.avoidProtected,l=(0,C.isUndefined)(t.keepUnusedStyles)?e.keepUnusedStyles:t.keepUnusedStyles,p=this.Css,d=t.component||this.Components.getComponent(),g=r?"":e.protectedCss,h=d&&this.CodeManager.getCode(d,"css",jo(jo({cssc:p,keepUnusedStyles:l},n),t));return d?t.json?h:g+h:""},o.prototype.getJs=function(t){t===void 0&&(t={});var e=t.component||this.Components.getWrapper();return e?this.CodeManager.getCode(e,"js").trim():""},o.prototype.store=function(t){return bf(this,void 0,void 0,function(){var e;return _f(this,function(n){switch(n.label){case 0:return e=this.storeData(),[4,this.Storage.store(e,t)];case 1:return n.sent(),this.clearDirtyCount(),[2,e]}})})},o.prototype.load=function(t){return bf(this,arguments,void 0,function(e,n){var r;return n===void 0&&(n={}),_f(this,function(l){switch(l.label){case 0:return[4,this.Storage.load(e)];case 1:return r=l.sent(),this.loadData(r,n),[4,(0,q.wait)()];case 2:return l.sent(),n.clear&&(this.UndoManager.clear(),this.clearDirtyCount()),[2,r]}})})},o.prototype.storeData=function(){var t={},e=this.getEditing();e&&e.trigger("sync:content",{noCount:!0}),this.storables.forEach(function(r){t=jo(jo({},t),r.store(1))});var n=JSON.parse(JSON.stringify(t));return this.trigger(sr.projectGet,{project:n}),n},o.prototype.loadData=function(t,e){t===void 0&&(t={}),e===void 0&&(e={});var n={project:t,options:e,initial:!!e.initial},r=!1;return(0,q.isEmptyObj)(t)||(this.storables.forEach(function(l){return l.clear()}),this.storables.forEach(function(l){return l.load(t)}),r=!0),this.trigger(sr.projectLoad,jo(jo({},n),{loaded:r})),r&&this.trigger(sr.projectLoaded,n),t},o.prototype.getDeviceModel=function(){var t=this.get("device");return this.Devices.get(t)},o.prototype.runDefault=function(t){t===void 0&&(t={});var e=this.Commands.get(this.config.defaultCommand);e&&!this.defaultRunning&&(e.stop(this,this,t),e.run(this,this,t),this.defaultRunning=!0)},o.prototype.stopDefault=function(t){t===void 0&&(t={});var e=this.Commands;if(e){var n=e.get(this.config.defaultCommand);n&&this.defaultRunning&&(n.stop(this,this,t),this.defaultRunning=!1)}},o.prototype.refreshCanvas=function(t){t===void 0&&(t={}),this.Canvas.refresh({spots:t.tools})},o.prototype.clearSelection=function(t){var e;(e=(t||window).getSelection())===null||e===void 0||e.removeAllRanges()},o.prototype.getCurrentMedia=function(){var t=this.config,e=this.getDeviceModel(),n=t.mediaCondition,r=t.devicePreviewMode,l=e&&e.get("widthMedia");return e&&l&&!r?"(".concat(n,": ").concat(l,")"):""},o.prototype.getWrapper=function(){return this.Components.getWrapper()},o.prototype.setCurrentFrame=function(t){return this.set("currentFrame",t)},o.prototype.getCurrentFrame=function(){return this.get("currentFrame")},o.prototype.getCurrentFrameModel=function(){var t;return(t=this.getCurrentFrame()||{})===null||t===void 0?void 0:t.model},o.prototype.getIcon=function(t){return(this.config.icons||{})[t]||""},o.prototype.getDirtyCount=function(){return this.get("changesCount")},o.prototype.clearDirtyCount=function(){return this.set({changesCount:0},{isClear:!0})},o.prototype.getZoomDecimal=function(){return this.Canvas.getZoomDecimal()},o.prototype.getZoomMultiplier=function(){return this.Canvas.getZoomMultiplier()},o.prototype.setDragMode=function(t){return this.set("dmode",t)},o.prototype.getDragMode=function(t){return t?.getDragMode()||this.get("dmode")||""},o.prototype.t=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.get("I18n");return n?.t.apply(n,t)},o.prototype.inAbsoluteMode=function(t){return this.getDragMode(t)==="absolute"},o.prototype.destroyAll=function(){var t=this,e=this.config,n=this.view;this.trigger(sr.destroy);var r=this.getEditor(),l=(e.grapesjs||{}).editors,p=l===void 0?[]:l,d=this.get("shallow");this._storageTimeout&&clearTimeout(this._storageTimeout),d?.destroyAll(),this.stopListening(),this.stopDefault(),(this.modules||[]).slice().reverse().forEach(function(g){return g.destroy()}),n?.remove&&n.remove(),this.clear({silent:!0}),this.destroyed=!0,["_config","view","_previousAttributes","_events","_listeners"].forEach(function(g){return t[g]={}}),p.splice(p.indexOf(r),1),(0,q.hasWin)()&&(0,F.default)(e.el).empty().attr(this.attrsOrig),this.trigger(sr.destroyed)},o.prototype.getEditing=function(){var t=this.get("editing");return t&&t.model||void 0},o.prototype.setEditing=function(t){return this.set("editing",t),this},o.prototype.isEditing=function(){return!!this.get("editing")},o.prototype.log=function(t,e){e===void 0&&(e={});var n=sr.log,r=e.ns,l=e.level,p=l===void 0?"debug":l;if(this.trigger(n,t,e),p&&this.trigger("".concat(n,":").concat(p),t,e),r){var d="".concat(n,"-").concat(r);this.trigger(d,t,e),p&&this.trigger("".concat(d,":").concat(p),t,e)}},o.prototype.logInfo=function(t,e){this.log(t,jo(jo({},e),{level:"info"}))},o.prototype.logWarning=function(t,e){this.log(t,jo(jo({},e),{level:"warning"}))},o.prototype.logError=function(t,e){this.log(t,jo(jo({},e),{level:"error"}))},o.prototype.initBaseColorPicker=function(t,e){e===void 0&&(e={});var n=this.config,r=n.colorPicker,l=r===void 0?{}:r,p=n.el,d=n.stylePrefix;return(0,F.default)(t).spectrum(jo(jo({containerClassName:"".concat(d,"one-bg ").concat(d,"two-color"),appendTo:p||"body",maxSelectionSize:8,showPalette:!0,palette:[],showAlpha:!0,chooseText:"Ok",cancelText:"\u2A2F"},e),l))},o.prototype.skip=function(t){this.__skip=!0;var e=this.UndoManager;e?e.skip(t):t(),this.__skip=!1},o.prototype.data=function(t,e,n){var r="_gjs-data";if(t[r]||(t[r]={}),(0,C.isUndefined)(n))return t[r][e];t[r][e]=n},o}(E.Kx);const Ab=kb;var jb=function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}a(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Mb=function(a,o,t,e){return new(t||(t=Promise))(function(n,r){function l(g){try{d(e.next(g))}catch(h){r(h)}}function p(g){try{d(e.throw(g))}catch(h){r(h)}}function d(g){var h;g.done?n(g.value):(h=g.value,h instanceof t?h:new t(function(m){m(h)})).then(l,p)}d((e=e.apply(a,o||[])).next())})},Db=function(a,o){var t,e,n,r,l={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function p(d){return function(g){return function(h){if(t)throw new TypeError("Generator is already executing.");for(;r&&(r=0,h[0]&&(l=0)),l;)try{if(t=1,e&&(n=2&h[0]?e.return:h[0]?e.throw||((n=e.return)&&n.call(e),0):e.next)&&!(n=n.call(e,h[1])).done)return n;switch(e=0,n&&(h=[2&h[0],n.value]),h[0]){case 0:case 1:n=h;break;case 4:return l.label++,{value:h[1],done:!1};case 5:l.label++,e=h[1],h=[0];continue;case 7:h=l.ops.pop(),l.trys.pop();continue;default:if(n=l.trys,!((n=n.length>0&&n[n.length-1])||h[0]!==6&&h[0]!==2)){l=0;continue}if(h[0]===3&&(!n||h[1]>n[0]&&h[1]<n[3])){l.label=h[1];break}if(h[0]===6&&l.label<n[1]){l.label=n[1],n=h;break}if(n&&l.label<n[2]){l.label=n[2],l.ops.push(h);break}n[2]&&l.ops.pop(),l.trys.pop();continue}h=o.call(a,l)}catch(m){h=[6,m],e=0}finally{t=n=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([d,g])}}},Lb=function(a){function o(t){var e=a.call(this,{model:t})||this,n=t.Panels,r=t.UndoManager;return t.view=e,t.once("change:ready",function(){n.active(),n.disableButtons(),t.getConfig().telemetry&&e.sendTelemetryData().catch(function(){}),setTimeout(function(){t.trigger(sr.load,t.Editor),t.loadTriggered=!0,r.clear(),t.clearDirtyCount()})}),e}return jb(o,a),o.prototype.render=function(){var t=this,e=this.$el,n=this.model,r=n.Panels,l=n.Canvas,p=n.config,d=n.modules,g=p.stylePrefix,h=["".concat(g,"editor")];!p.customUI&&h.push("".concat(g,"one-bg ").concat(g,"two-color"));var m=(0,F.default)(p.el||"body ".concat(p.container));p.cssIcons&&(0,q.appendStyles)(p.cssIcons,{unique:!0,prepand:!0}),e.empty(),p.width&&m.css("width",p.width),p.height&&m.css("height",p.height),e.append(l.render()),e.append(r.render());var w=n.shallow.Canvas.render();return w.style.display="none",e.append(w),e.attr("class",h.join(" ")),m.addClass("".concat(g,"editor-cont")).empty().append(e),d.forEach(function(k){var z;return(z=k.postRender)===null||z===void 0?void 0:z.call(k,t)}),this},o.prototype.sendTelemetryData=function(){return Mb(this,void 0,void 0,function(){var t,e,n,r,l,p,d;return Db(this,function(g){switch(g.label){case 0:return(t=window.location.hostname)==="localhost"||t.includes("localhost")?[2]:(e="gjs_telemetry_sent_",n=this.model.version,r="".concat(e).concat(n),sessionStorage.getItem(r)?[2]:[4,fetch("".concat("https://app.grapesjs.com","/api/gjs/telemetry/collect"),{method:"POST",body:JSON.stringify({domain:t,version:n})})]);case 1:return(l=g.sent()).ok?[3,3]:(p=Error.bind,d="Failed to send telemetry data ".concat,[4,l.text()]);case 2:throw new(p.apply(Error,[void 0,d.apply("Failed to send telemetry data ",[g.sent()])]));case 3:return sessionStorage.setItem(r,"true"),Object.keys(sessionStorage).forEach(function(h){h.startsWith(e)&&h!==r&&sessionStorage.removeItem(h)}),this.trigger(sr.telemetryInit),[2]}})})},o}(E.Ss);const Ib=Lb;var Uc=function(){return Uc=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},Uc.apply(this,arguments)},rg=function(a,o,t,e){return new(t||(t=Promise))(function(n,r){function l(g){try{d(e.next(g))}catch(h){r(h)}}function p(g){try{d(e.throw(g))}catch(h){r(h)}}function d(g){var h;g.done?n(g.value):(h=g.value,h instanceof t?h:new t(function(m){m(h)})).then(l,p)}d((e=e.apply(a,o||[])).next())})},ig=function(a,o){var t,e,n,r,l={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function p(d){return function(g){return function(h){if(t)throw new TypeError("Generator is already executing.");for(;r&&(r=0,h[0]&&(l=0)),l;)try{if(t=1,e&&(n=2&h[0]?e.return:h[0]?e.throw||((n=e.return)&&n.call(e),0):e.next)&&!(n=n.call(e,h[1])).done)return n;switch(e=0,n&&(h=[2&h[0],n.value]),h[0]){case 0:case 1:n=h;break;case 4:return l.label++,{value:h[1],done:!1};case 5:l.label++,e=h[1],h=[0];continue;case 7:h=l.ops.pop(),l.trys.pop();continue;default:if(n=l.trys,!((n=n.length>0&&n[n.length-1])||h[0]!==6&&h[0]!==2)){l=0;continue}if(h[0]===3&&(!n||h[1]>n[0]&&h[1]<n[3])){l.label=h[1];break}if(h[0]===6&&l.label<n[1]){l.label=n[1],n=h;break}if(n&&l.label<n[2]){l.label=n[2],l.ops.push(h);break}n[2]&&l.ops.pop(),l.trys.pop();continue}h=o.call(a,l)}catch(m){h=[6,m],e=0}finally{t=n=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([d,g])}}},Nb=function(a,o,t){if(t||arguments.length===2)for(var e,n=0,r=o.length;n<r;n++)!e&&n in o||(e||(e=Array.prototype.slice.call(o,0,n)),e[n]=o[n]);return a.concat(e||Array.prototype.slice.call(o))},Vb=function(){function a(o,t){var e;o===void 0&&(o={}),t===void 0&&(t={}),this.events=sr,this.html=it;var n=$();this.config=Uc(Uc(Uc({},n),o),{pStylePrefix:(e=o.stylePrefix)!==null&&e!==void 0?e:n.stylePrefix}),this.em=new Ab(this.config),this.$=t.$,this.em.init(this),this.editor=this.em}return Object.defineProperty(a.prototype,"Config",{get:function(){return this.em.config},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"I18n",{get:function(){return this.em.I18n},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Utils",{get:function(){return this.em.Utils},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Commands",{get:function(){return this.em.Commands},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Keymaps",{get:function(){return this.em.Keymaps},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Modal",{get:function(){return this.em.Modal},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Panels",{get:function(){return this.em.Panels},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Canvas",{get:function(){return this.em.Canvas},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Parser",{get:function(){return this.em.Parser},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"CodeManager",{get:function(){return this.em.CodeManager},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"UndoManager",{get:function(){return this.em.UndoManager},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"RichTextEditor",{get:function(){return this.em.RichTextEditor},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Pages",{get:function(){return this.em.Pages},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Components",{get:function(){return this.em.Components},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"DomComponents",{get:function(){return this.em.Components},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Layers",{get:function(){return this.em.Layers},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"LayerManager",{get:function(){return this.em.Layers},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Css",{get:function(){return this.em.Css},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"CssComposer",{get:function(){return this.em.Css},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Storage",{get:function(){return this.em.Storage},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"StorageManager",{get:function(){return this.em.Storage},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Assets",{get:function(){return this.em.Assets},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"AssetManager",{get:function(){return this.em.Assets},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Blocks",{get:function(){return this.em.Blocks},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"BlockManager",{get:function(){return this.em.Blocks},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Traits",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"TraitManager",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Selectors",{get:function(){return this.em.Selectors},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"SelectorManager",{get:function(){return this.em.Selectors},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Styles",{get:function(){return this.em.Styles},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"StyleManager",{get:function(){return this.em.Styles},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Devices",{get:function(){return this.em.Devices},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"DeviceManager",{get:function(){return this.em.Devices},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"DataSources",{get:function(){return this.em.DataSources},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"EditorModel",{get:function(){return this.em},enumerable:!1,configurable:!0}),a.prototype.getConfig=function(o){return this.em.getConfig(o)},a.prototype.getHtml=function(o){return this.em.getHtml(o)},a.prototype.getCss=function(o){return this.em.getCss(o)},a.prototype.getJs=function(o){return this.em.getJs(o)},a.prototype.getComponents=function(){return this.Components.getComponents()},a.prototype.getWrapper=function(){return this.Components.getWrapper()},a.prototype.setComponents=function(o,t){return t===void 0&&(t={}),this.em.setComponents(o,t),this},a.prototype.addComponents=function(o,t){return this.getWrapper().append(o,t)},a.prototype.getStyle=function(){return this.em.Css.getAll()},a.prototype.setStyle=function(o,t){return t===void 0&&(t={}),this.em.setStyle(o,t),this},a.prototype.addStyle=function(o,t){return t===void 0&&(t={}),this.em.addStyle(o,t)},a.prototype.getSelected=function(){return this.em.getSelected()},a.prototype.getSelectedAll=function(){return this.em.getSelectedAll()},a.prototype.getSelectedToStyle=function(){var o=this.em.getSelected();if(o)return this.StyleManager.getModelToStyle(o)},a.prototype.select=function(o,t){return this.em.setSelected(o,t),this},a.prototype.selectAdd=function(o){return this.em.addSelected(o),this},a.prototype.selectRemove=function(o){return this.em.removeSelected(o),this},a.prototype.selectToggle=function(o){return this.em.toggleSelected(o),this},a.prototype.getEditing=function(){return this.em.getEditing()},a.prototype.setDevice=function(o){return this.em.set("device",o),this},a.prototype.getDevice=function(){return this.em.get("device")},a.prototype.runCommand=function(o,t){return t===void 0&&(t={}),this.Commands.run(o,t)},a.prototype.stopCommand=function(o,t){return t===void 0&&(t={}),this.Commands.stop(o,t)},a.prototype.store=function(o){return rg(this,void 0,void 0,function(){return ig(this,function(t){switch(t.label){case 0:return[4,this.em.store(o)];case 1:return[2,t.sent()]}})})},a.prototype.load=function(o){return rg(this,arguments,void 0,function(t,e){return e===void 0&&(e={}),ig(this,function(n){switch(n.label){case 0:return[4,this.em.load(t,e)];case 1:return[2,n.sent()]}})})},a.prototype.getProjectData=function(){return this.em.storeData()},a.prototype.loadProjectData=function(o,t){return t===void 0&&(t={}),this.em.loadData(o,t)},a.prototype.storeData=function(){return this.em.storeData()},a.prototype.loadData=function(o){return this.em.loadData(o)},a.prototype.getContainer=function(){return this.config.el},a.prototype.getDirtyCount=function(){return this.em.getDirtyCount()},a.prototype.clearDirtyCount=function(){return this.em.clearDirtyCount()},a.prototype.refresh=function(o){this.em.refreshCanvas(o)},a.prototype.setCustomRte=function(o){this.RichTextEditor.customRte=o},a.prototype.setCustomParserCss=function(o){return this.Parser.getConfig().parserCss=o,this},a.prototype.setDragMode=function(o){return this.em.setDragMode(o),this},a.prototype.log=function(o,t){return t===void 0&&(t={}),this.em.log(o,t),this},a.prototype.t=function(){for(var o,t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(o=this.em).t.apply(o,t)},a.prototype.on=function(o,t){return this.em.on(o,t),this},a.prototype.once=function(o,t){return this.em.once(o,t),this},a.prototype.off=function(o,t){return this.em.off(o,t),this},a.prototype.trigger=function(o){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return this.em.trigger.apply(this.em,Nb([o],t,!0)),this},a.prototype.destroy=function(){this.em&&(this.em.destroyAll(),this.editorView=void 0)},a.prototype.getEl=function(){var o;return(o=this.editorView)===null||o===void 0?void 0:o.el},a.prototype.getModel=function(){return this.em},a.prototype.render=function(){var o;return(o=this.editorView)===null||o===void 0||o.remove(),this.editorView=new Ib(this.em),this.editorView.render().el},a.prototype.onReady=function(o){this.em.get("ready")?o(this):this.em.on("load",o)},a}();const Rb=Vb;var ag=function(a,o){return(0,C.isString)(a)?function(t,e){var n=e.get(t);if(!n){var r=(0,q.getGlobal)()[t];n=r?.default||r}return n}(a,o):a?.default||a},sg=function(a,o){a.getModel().logWarning("Plugin ".concat(o," not found"),{context:"plugins",plugin:o})};const Fb=function(){function a(){this.plugins={}}return a.prototype.add=function(o,t){var e=this.get(o);return e||(this.plugins[o]=t,t)},a.prototype.get=function(o){return this.plugins[o]},a.prototype.getAll=function(){return this.plugins},a}();var Ep=function(){return Ep=Object.assign||function(a){for(var o,t=1,e=arguments.length;t<e;t++)for(var n in o=arguments[t])Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a},Ep.apply(this,arguments)};(function(){if((0,q.hasWin)()&&function(){for(var o,t=window.navigator.userAgent,e=[["edge",/Edge\/([0-9\._]+)/],["ie",/MSIE\s(7\.0)/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/]],n=0;n<e.length&&!(o=e[n][1].exec(t));n++);return!!o}()){var a=DOMImplementation.prototype.createHTMLDocument;DOMImplementation.prototype.createHTMLDocument=function(o){return o||(o=""),a.apply(document.implementation,[o])}}})();var wf=new Fb,lg=[],Hb={$:F.default,editors:lg,plugins:wf,usePlugin:function(a,o){var t=ag(a,wf);return function(e){t?t(e,o||{}):sg(e,a)}},version:"0.22.12",init:function(a){a===void 0&&(a={});var o=a.headless,t=a.container;if(!t&&!o)throw new Error("'container' is required");var e=Ep(Ep({autorender:!0,plugins:[],pluginsOpts:{}},a),{grapesjs:this,el:o?void 0:(0,C.isElement)(t)?t:document.querySelector(t)}),n=new Rb(e,{$:F.default}),r=n.getModel();return r.initModules(),e.plugins.forEach(function(l){var p=ag(l,wf),d=e.pluginsOpts[l]||{};p?p(n,d):sg(n,l)}),r.loadOnStart(),e.autorender&&!o&&n.render(),lg.push(n),n}};const Ub=Hb})(),Be=Be.default})());
